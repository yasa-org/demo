{"version":3,"sources":["webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/find/findDecorations.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/find/findModel.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/find/findOptionsWidget.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/find/findController.js"],"names":["FindDecorations","editor","this","_editor","_decorations","_overviewRulerApproximateDecorations","_findScopeDecorationId","_rangeHighlightDecorationId","_highlightedDecorationId","_startPosition","getPosition","prototype","dispose","deltaDecorations","_allDecorations","reset","getCount","length","getFindScope","getModel","getDecorationRange","getStartPosition","setStartPosition","newStartPosition","setCurrentFindMatch","_getDecorationIndex","decorationId","index","indexOf","getCurrentMatchesPosition","desiredRange","candidates","getDecorationsInRange","_i","candidates_1","candidate","candidateOpts","options","_FIND_MATCH_DECORATION","_CURRENT_FIND_MATCH_DECORATION","id","nextMatch","_this","newCurrentDecorationId","matchPosition","i","len","range","equalsRange","changeDecorations","changeAccessor","changeDecorationOptions","removeDecoration","rng","startLineNumber","endLineNumber","endColumn","lineBeforeEnd","lineBeforeEndMaxColumn","getLineMaxColumn","startColumn","addDecoration","_RANGE_HIGHLIGHT_DECORATION","set","findMatches","findScope","accessor","findMatchesOptions","newOverviewRulerApproximateDecorations","_FIND_MATCH_NO_OVERVIEW_DECORATION","lineCount","getLineCount","height","getLayoutInfo","approxPixelsPerLine","mergeLinesDelta","Math","max","ceil","prevStartLineNumber","prevEndLineNumber","push","_FIND_MATCH_ONLY_OVERVIEW_DECORATION","newFindMatchesDecorations","Array","_FIND_SCOPE_DECORATION","matchBeforePosition","position","r","lineNumber","column","matchAfterPosition","result","concat","register","stickiness","zIndex","className","showIfCollapsed","overviewRuler","color","Center","minimap","Inline","isWholeLine","CONTEXT_FIND_WIDGET_VISIBLE","CONTEXT_FIND_INPUT_FOCUSED","CONTEXT_REPLACE_INPUT_FOCUSED","ToggleCaseSensitiveKeybinding","primary","mac","ToggleWholeWordKeybinding","ToggleRegexKeybinding","ToggleSearchScopeKeybinding","FIND_IDS","StartFindAction","StartFindWithSelection","NextMatchFindAction","PreviousMatchFindAction","NextSelectionMatchFindAction","PreviousSelectionMatchFindAction","StartFindReplaceAction","CloseFindWidgetCommand","ToggleCaseSensitiveCommand","ToggleWholeWordCommand","ToggleRegexCommand","ToggleSearchScopeCommand","TogglePreserveCaseCommand","ReplaceOneAction","ReplaceAllAction","SelectAllMatchesAction","MATCHES_LIMIT","RESEARCH_DELAY","FindModelBoundToEditorModel","state","_toDispose","_state","_isDisposed","_startSearchingTimer","add","_updateDecorationsScheduler","research","onDidChangeCursorPosition","e","reason","_ignoreModelContentChanged","onDidChangeModelContent","isFlush","schedule","onFindReplaceStateChange","_onStateChanged","searchScope","hasModel","searchString","isReplaceRevealed","isRegex","wholeWord","matchCase","model","isTooLargeForSyncing","cancel","setIfNotSet","moveCursor","_getSearchRange","getFullModelRange","newFindScope","_findMatches","changeMatchInfo","getSelection","undefined","_moveToNextMatch","_hasMatches","matchesCount","_cannotFind","revealRangeInCenterIfOutsideViewport","_setCurrentFindMatch","match","matchesPosition","setSelection","_prevSearchPosition","before","isUsingLineStops","_moveToPrevMatch","isRecursed","prevMatchRange","isEmpty","equals","searchRange","getEndPosition","isBefore","prevMatch","findPreviousMatch","getOption","containsRange","moveToPrevMatch","_nextSearchPosition","after","nextMatchRange","_getNextMatch","captureMatches","forceMove","findNextMatch","moveToNextMatch","_getReplacePattern","replaceString","fromStaticValue","replace","replacePattern","selection","buildReplaceString","matches","preserveCase","command","_executeEditorCommand","limitResultCount","replaceAll","_largeReplaceAll","_regularReplaceAll","searchParams","searchData","parseSearchRequest","searchRegex","regex","multiline","mod","ignoreCase","global","RegExp","source","resultText","modelText","getValue","fullModelRange","hasReplacementPatterns","arguments","replaceStrings","map","m","selectAllMatches","selections","editorSelection","sel","slice","setSelections","pushUndoStop","executeCommand","__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","p","hasOwnProperty","__","constructor","create","_super","FindOptionsWidget","keybindingService","themeService","call","_hideSoon","_register","_hide","_isVisible","_keybindingService","_domNode","document","createElement","style","display","top","setAttribute","inputActiveOptionBorderColor","getTheme","getColor","inputActiveOptionBackgroundColor","caseSensitive","appendTitle","_keybindingLabelFor","isChecked","inputActiveOptionBorder","inputActiveOptionBackground","appendChild","domNode","onChange","change","checked","wholeWords","addOverlayWidget","somethingChanged","isRevealed","_revealTemporarily","dom","_onMouseOut","_onMouseOver","_applyTheme","onThemeChange","bind","actionId","kb","lookupKeybinding","getLabel","removeOverlayWidget","getId","ID","getDomNode","preference","highlightFindOptions","_show","theme","inputStyles","collector","widgetBackground","addRule","widgetForeground","widgetShadowColor","hcBorder","__decorate","decorators","target","key","desc","c","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","SEARCH_STRING_MAX_LENGTH","getSelectionSearchString","wordAtPosition","getWordAtPosition","word","getValueLengthInRange","getValueInRange","CommonFindController","contextKeyService","storageService","clipboardService","_findWidgetVisible","bindTo","_contextKeyService","_storageService","_clipboardService","_updateHistoryDelayer","loadQueryState","_model","onDidChangeModel","shouldRestartFind","disposeModel","getBoolean","_start","forceRevealReplace","seedSearchStringFromSelection","seedSearchStringFromGlobalClipboard","shouldFocus","shouldAnimate","updateSearchScope","get","getContribution","saveQueryState","setGlobalBufferTerm","store","actualIsRegex","actualWholeWord","actualMatchCase","actualPreserveCase","isFindInputFocused","getState","closeFindWidget","focus","toggleCaseSensitive","toggleWholeWords","toggleRegex","toggleSearchScope","setEndPosition","setSearchString","strings","opts","stateChanges","selectionSearchString","getGlobalBufferTerm","currentSelection","start","globalFindClipboard","readFindText","text","writeFindText","FindController","_contextViewService","_themeService","_notificationService","_widget","_findOptionsWidget","_createFindWidget","autoFindInSelection","isSelectionMultipleLine","focusReplaceInput","focusFindInput","label","nls","alias","precondition","kbOpts","kbExpr","weight","menuOpts","menuId","group","title","comment","order","run","controller","StartFindWithSelectionAction","MatchFindAction","apply","_run","secondary","NextMatchFindAction2","and","PreviousMatchFindAction2","SelectionMatchFindAction","findInputFocused","FindCommand","bindToContribution","handler","x","win","linux"],"mappings":"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","file":"js/chunk-vendors~1bcf2bfb.7f08d4c1.js","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Range } from '../../common/core/range.js';\r\nimport { OverviewRulerLane, MinimapPosition } from '../../common/model.js';\r\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\r\nimport { overviewRulerFindMatchForeground, minimapFindMatch } from '../../../platform/theme/common/colorRegistry.js';\r\nimport { themeColorFromId } from '../../../platform/theme/common/themeService.js';\r\nvar FindDecorations = /** @class */ (function () {\r\n    function FindDecorations(editor) {\r\n        this._editor = editor;\r\n        this._decorations = [];\r\n        this._overviewRulerApproximateDecorations = [];\r\n        this._findScopeDecorationId = null;\r\n        this._rangeHighlightDecorationId = null;\r\n        this._highlightedDecorationId = null;\r\n        this._startPosition = this._editor.getPosition();\r\n    }\r\n    FindDecorations.prototype.dispose = function () {\r\n        this._editor.deltaDecorations(this._allDecorations(), []);\r\n        this._decorations = [];\r\n        this._overviewRulerApproximateDecorations = [];\r\n        this._findScopeDecorationId = null;\r\n        this._rangeHighlightDecorationId = null;\r\n        this._highlightedDecorationId = null;\r\n    };\r\n    FindDecorations.prototype.reset = function () {\r\n        this._decorations = [];\r\n        this._overviewRulerApproximateDecorations = [];\r\n        this._findScopeDecorationId = null;\r\n        this._rangeHighlightDecorationId = null;\r\n        this._highlightedDecorationId = null;\r\n    };\r\n    FindDecorations.prototype.getCount = function () {\r\n        return this._decorations.length;\r\n    };\r\n    FindDecorations.prototype.getFindScope = function () {\r\n        if (this._findScopeDecorationId) {\r\n            return this._editor.getModel().getDecorationRange(this._findScopeDecorationId);\r\n        }\r\n        return null;\r\n    };\r\n    FindDecorations.prototype.getStartPosition = function () {\r\n        return this._startPosition;\r\n    };\r\n    FindDecorations.prototype.setStartPosition = function (newStartPosition) {\r\n        this._startPosition = newStartPosition;\r\n        this.setCurrentFindMatch(null);\r\n    };\r\n    FindDecorations.prototype._getDecorationIndex = function (decorationId) {\r\n        var index = this._decorations.indexOf(decorationId);\r\n        if (index >= 0) {\r\n            return index + 1;\r\n        }\r\n        return 1;\r\n    };\r\n    FindDecorations.prototype.getCurrentMatchesPosition = function (desiredRange) {\r\n        var candidates = this._editor.getModel().getDecorationsInRange(desiredRange);\r\n        for (var _i = 0, candidates_1 = candidates; _i < candidates_1.length; _i++) {\r\n            var candidate = candidates_1[_i];\r\n            var candidateOpts = candidate.options;\r\n            if (candidateOpts === FindDecorations._FIND_MATCH_DECORATION || candidateOpts === FindDecorations._CURRENT_FIND_MATCH_DECORATION) {\r\n                return this._getDecorationIndex(candidate.id);\r\n            }\r\n        }\r\n        return 1;\r\n    };\r\n    FindDecorations.prototype.setCurrentFindMatch = function (nextMatch) {\r\n        var _this = this;\r\n        var newCurrentDecorationId = null;\r\n        var matchPosition = 0;\r\n        if (nextMatch) {\r\n            for (var i = 0, len = this._decorations.length; i < len; i++) {\r\n                var range = this._editor.getModel().getDecorationRange(this._decorations[i]);\r\n                if (nextMatch.equalsRange(range)) {\r\n                    newCurrentDecorationId = this._decorations[i];\r\n                    matchPosition = (i + 1);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (this._highlightedDecorationId !== null || newCurrentDecorationId !== null) {\r\n            this._editor.changeDecorations(function (changeAccessor) {\r\n                if (_this._highlightedDecorationId !== null) {\r\n                    changeAccessor.changeDecorationOptions(_this._highlightedDecorationId, FindDecorations._FIND_MATCH_DECORATION);\r\n                    _this._highlightedDecorationId = null;\r\n                }\r\n                if (newCurrentDecorationId !== null) {\r\n                    _this._highlightedDecorationId = newCurrentDecorationId;\r\n                    changeAccessor.changeDecorationOptions(_this._highlightedDecorationId, FindDecorations._CURRENT_FIND_MATCH_DECORATION);\r\n                }\r\n                if (_this._rangeHighlightDecorationId !== null) {\r\n                    changeAccessor.removeDecoration(_this._rangeHighlightDecorationId);\r\n                    _this._rangeHighlightDecorationId = null;\r\n                }\r\n                if (newCurrentDecorationId !== null) {\r\n                    var rng = _this._editor.getModel().getDecorationRange(newCurrentDecorationId);\r\n                    if (rng.startLineNumber !== rng.endLineNumber && rng.endColumn === 1) {\r\n                        var lineBeforeEnd = rng.endLineNumber - 1;\r\n                        var lineBeforeEndMaxColumn = _this._editor.getModel().getLineMaxColumn(lineBeforeEnd);\r\n                        rng = new Range(rng.startLineNumber, rng.startColumn, lineBeforeEnd, lineBeforeEndMaxColumn);\r\n                    }\r\n                    _this._rangeHighlightDecorationId = changeAccessor.addDecoration(rng, FindDecorations._RANGE_HIGHLIGHT_DECORATION);\r\n                }\r\n            });\r\n        }\r\n        return matchPosition;\r\n    };\r\n    FindDecorations.prototype.set = function (findMatches, findScope) {\r\n        var _this = this;\r\n        this._editor.changeDecorations(function (accessor) {\r\n            var findMatchesOptions = FindDecorations._FIND_MATCH_DECORATION;\r\n            var newOverviewRulerApproximateDecorations = [];\r\n            if (findMatches.length > 1000) {\r\n                // we go into a mode where the overview ruler gets \"approximate\" decorations\r\n                // the reason is that the overview ruler paints all the decorations in the file and we don't want to cause freezes\r\n                findMatchesOptions = FindDecorations._FIND_MATCH_NO_OVERVIEW_DECORATION;\r\n                // approximate a distance in lines where matches should be merged\r\n                var lineCount = _this._editor.getModel().getLineCount();\r\n                var height = _this._editor.getLayoutInfo().height;\r\n                var approxPixelsPerLine = height / lineCount;\r\n                var mergeLinesDelta = Math.max(2, Math.ceil(3 / approxPixelsPerLine));\r\n                // merge decorations as much as possible\r\n                var prevStartLineNumber = findMatches[0].range.startLineNumber;\r\n                var prevEndLineNumber = findMatches[0].range.endLineNumber;\r\n                for (var i = 1, len = findMatches.length; i < len; i++) {\r\n                    var range = findMatches[i].range;\r\n                    if (prevEndLineNumber + mergeLinesDelta >= range.startLineNumber) {\r\n                        if (range.endLineNumber > prevEndLineNumber) {\r\n                            prevEndLineNumber = range.endLineNumber;\r\n                        }\r\n                    }\r\n                    else {\r\n                        newOverviewRulerApproximateDecorations.push({\r\n                            range: new Range(prevStartLineNumber, 1, prevEndLineNumber, 1),\r\n                            options: FindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION\r\n                        });\r\n                        prevStartLineNumber = range.startLineNumber;\r\n                        prevEndLineNumber = range.endLineNumber;\r\n                    }\r\n                }\r\n                newOverviewRulerApproximateDecorations.push({\r\n                    range: new Range(prevStartLineNumber, 1, prevEndLineNumber, 1),\r\n                    options: FindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION\r\n                });\r\n            }\r\n            // Find matches\r\n            var newFindMatchesDecorations = new Array(findMatches.length);\r\n            for (var i = 0, len = findMatches.length; i < len; i++) {\r\n                newFindMatchesDecorations[i] = {\r\n                    range: findMatches[i].range,\r\n                    options: findMatchesOptions\r\n                };\r\n            }\r\n            _this._decorations = accessor.deltaDecorations(_this._decorations, newFindMatchesDecorations);\r\n            // Overview ruler approximate decorations\r\n            _this._overviewRulerApproximateDecorations = accessor.deltaDecorations(_this._overviewRulerApproximateDecorations, newOverviewRulerApproximateDecorations);\r\n            // Range highlight\r\n            if (_this._rangeHighlightDecorationId) {\r\n                accessor.removeDecoration(_this._rangeHighlightDecorationId);\r\n                _this._rangeHighlightDecorationId = null;\r\n            }\r\n            // Find scope\r\n            if (_this._findScopeDecorationId) {\r\n                accessor.removeDecoration(_this._findScopeDecorationId);\r\n                _this._findScopeDecorationId = null;\r\n            }\r\n            if (findScope) {\r\n                _this._findScopeDecorationId = accessor.addDecoration(findScope, FindDecorations._FIND_SCOPE_DECORATION);\r\n            }\r\n        });\r\n    };\r\n    FindDecorations.prototype.matchBeforePosition = function (position) {\r\n        if (this._decorations.length === 0) {\r\n            return null;\r\n        }\r\n        for (var i = this._decorations.length - 1; i >= 0; i--) {\r\n            var decorationId = this._decorations[i];\r\n            var r = this._editor.getModel().getDecorationRange(decorationId);\r\n            if (!r || r.endLineNumber > position.lineNumber) {\r\n                continue;\r\n            }\r\n            if (r.endLineNumber < position.lineNumber) {\r\n                return r;\r\n            }\r\n            if (r.endColumn > position.column) {\r\n                continue;\r\n            }\r\n            return r;\r\n        }\r\n        return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length - 1]);\r\n    };\r\n    FindDecorations.prototype.matchAfterPosition = function (position) {\r\n        if (this._decorations.length === 0) {\r\n            return null;\r\n        }\r\n        for (var i = 0, len = this._decorations.length; i < len; i++) {\r\n            var decorationId = this._decorations[i];\r\n            var r = this._editor.getModel().getDecorationRange(decorationId);\r\n            if (!r || r.startLineNumber < position.lineNumber) {\r\n                continue;\r\n            }\r\n            if (r.startLineNumber > position.lineNumber) {\r\n                return r;\r\n            }\r\n            if (r.startColumn < position.column) {\r\n                continue;\r\n            }\r\n            return r;\r\n        }\r\n        return this._editor.getModel().getDecorationRange(this._decorations[0]);\r\n    };\r\n    FindDecorations.prototype._allDecorations = function () {\r\n        var result = [];\r\n        result = result.concat(this._decorations);\r\n        result = result.concat(this._overviewRulerApproximateDecorations);\r\n        if (this._findScopeDecorationId) {\r\n            result.push(this._findScopeDecorationId);\r\n        }\r\n        if (this._rangeHighlightDecorationId) {\r\n            result.push(this._rangeHighlightDecorationId);\r\n        }\r\n        return result;\r\n    };\r\n    FindDecorations._CURRENT_FIND_MATCH_DECORATION = ModelDecorationOptions.register({\r\n        stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\r\n        zIndex: 13,\r\n        className: 'currentFindMatch',\r\n        showIfCollapsed: true,\r\n        overviewRuler: {\r\n            color: themeColorFromId(overviewRulerFindMatchForeground),\r\n            position: OverviewRulerLane.Center\r\n        },\r\n        minimap: {\r\n            color: themeColorFromId(minimapFindMatch),\r\n            position: MinimapPosition.Inline\r\n        }\r\n    });\r\n    FindDecorations._FIND_MATCH_DECORATION = ModelDecorationOptions.register({\r\n        stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\r\n        className: 'findMatch',\r\n        showIfCollapsed: true,\r\n        overviewRuler: {\r\n            color: themeColorFromId(overviewRulerFindMatchForeground),\r\n            position: OverviewRulerLane.Center\r\n        },\r\n        minimap: {\r\n            color: themeColorFromId(minimapFindMatch),\r\n            position: MinimapPosition.Inline\r\n        }\r\n    });\r\n    FindDecorations._FIND_MATCH_NO_OVERVIEW_DECORATION = ModelDecorationOptions.register({\r\n        stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\r\n        className: 'findMatch',\r\n        showIfCollapsed: true\r\n    });\r\n    FindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION = ModelDecorationOptions.register({\r\n        stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\r\n        overviewRuler: {\r\n            color: themeColorFromId(overviewRulerFindMatchForeground),\r\n            position: OverviewRulerLane.Center\r\n        }\r\n    });\r\n    FindDecorations._RANGE_HIGHLIGHT_DECORATION = ModelDecorationOptions.register({\r\n        stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\r\n        className: 'rangeHighlight',\r\n        isWholeLine: true\r\n    });\r\n    FindDecorations._FIND_SCOPE_DECORATION = ModelDecorationOptions.register({\r\n        className: 'findScope',\r\n        isWholeLine: true\r\n    });\r\n    return FindDecorations;\r\n}());\r\nexport { FindDecorations };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { RunOnceScheduler, TimeoutTimer } from '../../../base/common/async.js';\r\nimport { dispose, DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport { ReplaceCommand, ReplaceCommandThatPreservesSelection } from '../../common/commands/replaceCommand.js';\r\nimport { Position } from '../../common/core/position.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { Selection } from '../../common/core/selection.js';\r\nimport { SearchParams } from '../../common/model/textModelSearch.js';\r\nimport { FindDecorations } from './findDecorations.js';\r\nimport { ReplaceAllCommand } from './replaceAllCommand.js';\r\nimport { ReplacePattern, parseReplaceString } from './replacePattern.js';\r\nimport { RawContextKey } from '../../../platform/contextkey/common/contextkey.js';\r\nexport var CONTEXT_FIND_WIDGET_VISIBLE = new RawContextKey('findWidgetVisible', false);\r\n// Keep ContextKey use of 'Focussed' to not break when clauses\r\nexport var CONTEXT_FIND_INPUT_FOCUSED = new RawContextKey('findInputFocussed', false);\r\nexport var CONTEXT_REPLACE_INPUT_FOCUSED = new RawContextKey('replaceInputFocussed', false);\r\nexport var ToggleCaseSensitiveKeybinding = {\r\n    primary: 512 /* Alt */ | 33 /* KEY_C */,\r\n    mac: { primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 33 /* KEY_C */ }\r\n};\r\nexport var ToggleWholeWordKeybinding = {\r\n    primary: 512 /* Alt */ | 53 /* KEY_W */,\r\n    mac: { primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 53 /* KEY_W */ }\r\n};\r\nexport var ToggleRegexKeybinding = {\r\n    primary: 512 /* Alt */ | 48 /* KEY_R */,\r\n    mac: { primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 48 /* KEY_R */ }\r\n};\r\nexport var ToggleSearchScopeKeybinding = {\r\n    primary: 512 /* Alt */ | 42 /* KEY_L */,\r\n    mac: { primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 42 /* KEY_L */ }\r\n};\r\nexport var FIND_IDS = {\r\n    StartFindAction: 'actions.find',\r\n    StartFindWithSelection: 'actions.findWithSelection',\r\n    NextMatchFindAction: 'editor.action.nextMatchFindAction',\r\n    PreviousMatchFindAction: 'editor.action.previousMatchFindAction',\r\n    NextSelectionMatchFindAction: 'editor.action.nextSelectionMatchFindAction',\r\n    PreviousSelectionMatchFindAction: 'editor.action.previousSelectionMatchFindAction',\r\n    StartFindReplaceAction: 'editor.action.startFindReplaceAction',\r\n    CloseFindWidgetCommand: 'closeFindWidget',\r\n    ToggleCaseSensitiveCommand: 'toggleFindCaseSensitive',\r\n    ToggleWholeWordCommand: 'toggleFindWholeWord',\r\n    ToggleRegexCommand: 'toggleFindRegex',\r\n    ToggleSearchScopeCommand: 'toggleFindInSelection',\r\n    TogglePreserveCaseCommand: 'togglePreserveCase',\r\n    ReplaceOneAction: 'editor.action.replaceOne',\r\n    ReplaceAllAction: 'editor.action.replaceAll',\r\n    SelectAllMatchesAction: 'editor.action.selectAllMatches'\r\n};\r\nexport var MATCHES_LIMIT = 19999;\r\nvar RESEARCH_DELAY = 240;\r\nvar FindModelBoundToEditorModel = /** @class */ (function () {\r\n    function FindModelBoundToEditorModel(editor, state) {\r\n        var _this = this;\r\n        this._toDispose = new DisposableStore();\r\n        this._editor = editor;\r\n        this._state = state;\r\n        this._isDisposed = false;\r\n        this._startSearchingTimer = new TimeoutTimer();\r\n        this._decorations = new FindDecorations(editor);\r\n        this._toDispose.add(this._decorations);\r\n        this._updateDecorationsScheduler = new RunOnceScheduler(function () { return _this.research(false); }, 100);\r\n        this._toDispose.add(this._updateDecorationsScheduler);\r\n        this._toDispose.add(this._editor.onDidChangeCursorPosition(function (e) {\r\n            if (e.reason === 3 /* Explicit */\r\n                || e.reason === 5 /* Undo */\r\n                || e.reason === 6 /* Redo */) {\r\n                _this._decorations.setStartPosition(_this._editor.getPosition());\r\n            }\r\n        }));\r\n        this._ignoreModelContentChanged = false;\r\n        this._toDispose.add(this._editor.onDidChangeModelContent(function (e) {\r\n            if (_this._ignoreModelContentChanged) {\r\n                return;\r\n            }\r\n            if (e.isFlush) {\r\n                // a model.setValue() was called\r\n                _this._decorations.reset();\r\n            }\r\n            _this._decorations.setStartPosition(_this._editor.getPosition());\r\n            _this._updateDecorationsScheduler.schedule();\r\n        }));\r\n        this._toDispose.add(this._state.onFindReplaceStateChange(function (e) { return _this._onStateChanged(e); }));\r\n        this.research(false, this._state.searchScope);\r\n    }\r\n    FindModelBoundToEditorModel.prototype.dispose = function () {\r\n        this._isDisposed = true;\r\n        dispose(this._startSearchingTimer);\r\n        this._toDispose.dispose();\r\n    };\r\n    FindModelBoundToEditorModel.prototype._onStateChanged = function (e) {\r\n        var _this = this;\r\n        if (this._isDisposed) {\r\n            // The find model is disposed during a find state changed event\r\n            return;\r\n        }\r\n        if (!this._editor.hasModel()) {\r\n            // The find model will be disposed momentarily\r\n            return;\r\n        }\r\n        if (e.searchString || e.isReplaceRevealed || e.isRegex || e.wholeWord || e.matchCase || e.searchScope) {\r\n            var model = this._editor.getModel();\r\n            if (model.isTooLargeForSyncing()) {\r\n                this._startSearchingTimer.cancel();\r\n                this._startSearchingTimer.setIfNotSet(function () {\r\n                    if (e.searchScope) {\r\n                        _this.research(e.moveCursor, _this._state.searchScope);\r\n                    }\r\n                    else {\r\n                        _this.research(e.moveCursor);\r\n                    }\r\n                }, RESEARCH_DELAY);\r\n            }\r\n            else {\r\n                if (e.searchScope) {\r\n                    this.research(e.moveCursor, this._state.searchScope);\r\n                }\r\n                else {\r\n                    this.research(e.moveCursor);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    FindModelBoundToEditorModel._getSearchRange = function (model, findScope) {\r\n        // If we have set now or before a find scope, use it for computing the search range\r\n        if (findScope) {\r\n            return findScope;\r\n        }\r\n        return model.getFullModelRange();\r\n    };\r\n    FindModelBoundToEditorModel.prototype.research = function (moveCursor, newFindScope) {\r\n        var findScope = null;\r\n        if (typeof newFindScope !== 'undefined') {\r\n            findScope = newFindScope;\r\n        }\r\n        else {\r\n            findScope = this._decorations.getFindScope();\r\n        }\r\n        if (findScope !== null) {\r\n            if (findScope.startLineNumber !== findScope.endLineNumber) {\r\n                if (findScope.endColumn === 1) {\r\n                    findScope = new Range(findScope.startLineNumber, 1, findScope.endLineNumber - 1, this._editor.getModel().getLineMaxColumn(findScope.endLineNumber - 1));\r\n                }\r\n                else {\r\n                    // multiline find scope => expand to line starts / ends\r\n                    findScope = new Range(findScope.startLineNumber, 1, findScope.endLineNumber, this._editor.getModel().getLineMaxColumn(findScope.endLineNumber));\r\n                }\r\n            }\r\n        }\r\n        var findMatches = this._findMatches(findScope, false, MATCHES_LIMIT);\r\n        this._decorations.set(findMatches, findScope);\r\n        this._state.changeMatchInfo(this._decorations.getCurrentMatchesPosition(this._editor.getSelection()), this._decorations.getCount(), undefined);\r\n        if (moveCursor) {\r\n            this._moveToNextMatch(this._decorations.getStartPosition());\r\n        }\r\n    };\r\n    FindModelBoundToEditorModel.prototype._hasMatches = function () {\r\n        return (this._state.matchesCount > 0);\r\n    };\r\n    FindModelBoundToEditorModel.prototype._cannotFind = function () {\r\n        if (!this._hasMatches()) {\r\n            var findScope = this._decorations.getFindScope();\r\n            if (findScope) {\r\n                // Reveal the selection so user is reminded that 'selection find' is on.\r\n                this._editor.revealRangeInCenterIfOutsideViewport(findScope, 0 /* Smooth */);\r\n            }\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    FindModelBoundToEditorModel.prototype._setCurrentFindMatch = function (match) {\r\n        var matchesPosition = this._decorations.setCurrentFindMatch(match);\r\n        this._state.changeMatchInfo(matchesPosition, this._decorations.getCount(), match);\r\n        this._editor.setSelection(match);\r\n        this._editor.revealRangeInCenterIfOutsideViewport(match, 0 /* Smooth */);\r\n    };\r\n    FindModelBoundToEditorModel.prototype._prevSearchPosition = function (before) {\r\n        var isUsingLineStops = this._state.isRegex && (this._state.searchString.indexOf('^') >= 0\r\n            || this._state.searchString.indexOf('$') >= 0);\r\n        var lineNumber = before.lineNumber, column = before.column;\r\n        var model = this._editor.getModel();\r\n        if (isUsingLineStops || column === 1) {\r\n            if (lineNumber === 1) {\r\n                lineNumber = model.getLineCount();\r\n            }\r\n            else {\r\n                lineNumber--;\r\n            }\r\n            column = model.getLineMaxColumn(lineNumber);\r\n        }\r\n        else {\r\n            column--;\r\n        }\r\n        return new Position(lineNumber, column);\r\n    };\r\n    FindModelBoundToEditorModel.prototype._moveToPrevMatch = function (before, isRecursed) {\r\n        if (isRecursed === void 0) { isRecursed = false; }\r\n        if (this._decorations.getCount() < MATCHES_LIMIT) {\r\n            var prevMatchRange = this._decorations.matchBeforePosition(before);\r\n            if (prevMatchRange && prevMatchRange.isEmpty() && prevMatchRange.getStartPosition().equals(before)) {\r\n                before = this._prevSearchPosition(before);\r\n                prevMatchRange = this._decorations.matchBeforePosition(before);\r\n            }\r\n            if (prevMatchRange) {\r\n                this._setCurrentFindMatch(prevMatchRange);\r\n            }\r\n            return;\r\n        }\r\n        if (this._cannotFind()) {\r\n            return;\r\n        }\r\n        var findScope = this._decorations.getFindScope();\r\n        var searchRange = FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), findScope);\r\n        // ...(----)...|...\r\n        if (searchRange.getEndPosition().isBefore(before)) {\r\n            before = searchRange.getEndPosition();\r\n        }\r\n        // ...|...(----)...\r\n        if (before.isBefore(searchRange.getStartPosition())) {\r\n            before = searchRange.getEndPosition();\r\n        }\r\n        var lineNumber = before.lineNumber, column = before.column;\r\n        var model = this._editor.getModel();\r\n        var position = new Position(lineNumber, column);\r\n        var prevMatch = model.findPreviousMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(96 /* wordSeparators */) : null, false);\r\n        if (prevMatch && prevMatch.range.isEmpty() && prevMatch.range.getStartPosition().equals(position)) {\r\n            // Looks like we're stuck at this position, unacceptable!\r\n            position = this._prevSearchPosition(position);\r\n            prevMatch = model.findPreviousMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(96 /* wordSeparators */) : null, false);\r\n        }\r\n        if (!prevMatch) {\r\n            // there is precisely one match and selection is on top of it\r\n            return;\r\n        }\r\n        if (!isRecursed && !searchRange.containsRange(prevMatch.range)) {\r\n            return this._moveToPrevMatch(prevMatch.range.getStartPosition(), true);\r\n        }\r\n        this._setCurrentFindMatch(prevMatch.range);\r\n    };\r\n    FindModelBoundToEditorModel.prototype.moveToPrevMatch = function () {\r\n        this._moveToPrevMatch(this._editor.getSelection().getStartPosition());\r\n    };\r\n    FindModelBoundToEditorModel.prototype._nextSearchPosition = function (after) {\r\n        var isUsingLineStops = this._state.isRegex && (this._state.searchString.indexOf('^') >= 0\r\n            || this._state.searchString.indexOf('$') >= 0);\r\n        var lineNumber = after.lineNumber, column = after.column;\r\n        var model = this._editor.getModel();\r\n        if (isUsingLineStops || column === model.getLineMaxColumn(lineNumber)) {\r\n            if (lineNumber === model.getLineCount()) {\r\n                lineNumber = 1;\r\n            }\r\n            else {\r\n                lineNumber++;\r\n            }\r\n            column = 1;\r\n        }\r\n        else {\r\n            column++;\r\n        }\r\n        return new Position(lineNumber, column);\r\n    };\r\n    FindModelBoundToEditorModel.prototype._moveToNextMatch = function (after) {\r\n        if (this._decorations.getCount() < MATCHES_LIMIT) {\r\n            var nextMatchRange = this._decorations.matchAfterPosition(after);\r\n            if (nextMatchRange && nextMatchRange.isEmpty() && nextMatchRange.getStartPosition().equals(after)) {\r\n                // Looks like we're stuck at this position, unacceptable!\r\n                after = this._nextSearchPosition(after);\r\n                nextMatchRange = this._decorations.matchAfterPosition(after);\r\n            }\r\n            if (nextMatchRange) {\r\n                this._setCurrentFindMatch(nextMatchRange);\r\n            }\r\n            return;\r\n        }\r\n        var nextMatch = this._getNextMatch(after, false, true);\r\n        if (nextMatch) {\r\n            this._setCurrentFindMatch(nextMatch.range);\r\n        }\r\n    };\r\n    FindModelBoundToEditorModel.prototype._getNextMatch = function (after, captureMatches, forceMove, isRecursed) {\r\n        if (isRecursed === void 0) { isRecursed = false; }\r\n        if (this._cannotFind()) {\r\n            return null;\r\n        }\r\n        var findScope = this._decorations.getFindScope();\r\n        var searchRange = FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), findScope);\r\n        // ...(----)...|...\r\n        if (searchRange.getEndPosition().isBefore(after)) {\r\n            after = searchRange.getStartPosition();\r\n        }\r\n        // ...|...(----)...\r\n        if (after.isBefore(searchRange.getStartPosition())) {\r\n            after = searchRange.getStartPosition();\r\n        }\r\n        var lineNumber = after.lineNumber, column = after.column;\r\n        var model = this._editor.getModel();\r\n        var position = new Position(lineNumber, column);\r\n        var nextMatch = model.findNextMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(96 /* wordSeparators */) : null, captureMatches);\r\n        if (forceMove && nextMatch && nextMatch.range.isEmpty() && nextMatch.range.getStartPosition().equals(position)) {\r\n            // Looks like we're stuck at this position, unacceptable!\r\n            position = this._nextSearchPosition(position);\r\n            nextMatch = model.findNextMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(96 /* wordSeparators */) : null, captureMatches);\r\n        }\r\n        if (!nextMatch) {\r\n            // there is precisely one match and selection is on top of it\r\n            return null;\r\n        }\r\n        if (!isRecursed && !searchRange.containsRange(nextMatch.range)) {\r\n            return this._getNextMatch(nextMatch.range.getEndPosition(), captureMatches, forceMove, true);\r\n        }\r\n        return nextMatch;\r\n    };\r\n    FindModelBoundToEditorModel.prototype.moveToNextMatch = function () {\r\n        this._moveToNextMatch(this._editor.getSelection().getEndPosition());\r\n    };\r\n    FindModelBoundToEditorModel.prototype._getReplacePattern = function () {\r\n        if (this._state.isRegex) {\r\n            return parseReplaceString(this._state.replaceString);\r\n        }\r\n        return ReplacePattern.fromStaticValue(this._state.replaceString);\r\n    };\r\n    FindModelBoundToEditorModel.prototype.replace = function () {\r\n        if (!this._hasMatches()) {\r\n            return;\r\n        }\r\n        var replacePattern = this._getReplacePattern();\r\n        var selection = this._editor.getSelection();\r\n        var nextMatch = this._getNextMatch(selection.getStartPosition(), true, false);\r\n        if (nextMatch) {\r\n            if (selection.equalsRange(nextMatch.range)) {\r\n                // selection sits on a find match => replace it!\r\n                var replaceString = replacePattern.buildReplaceString(nextMatch.matches, this._state.preserveCase);\r\n                var command = new ReplaceCommand(selection, replaceString);\r\n                this._executeEditorCommand('replace', command);\r\n                this._decorations.setStartPosition(new Position(selection.startLineNumber, selection.startColumn + replaceString.length));\r\n                this.research(true);\r\n            }\r\n            else {\r\n                this._decorations.setStartPosition(this._editor.getPosition());\r\n                this._setCurrentFindMatch(nextMatch.range);\r\n            }\r\n        }\r\n    };\r\n    FindModelBoundToEditorModel.prototype._findMatches = function (findScope, captureMatches, limitResultCount) {\r\n        var searchRange = FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), findScope);\r\n        return this._editor.getModel().findMatches(this._state.searchString, searchRange, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(96 /* wordSeparators */) : null, captureMatches, limitResultCount);\r\n    };\r\n    FindModelBoundToEditorModel.prototype.replaceAll = function () {\r\n        if (!this._hasMatches()) {\r\n            return;\r\n        }\r\n        var findScope = this._decorations.getFindScope();\r\n        if (findScope === null && this._state.matchesCount >= MATCHES_LIMIT) {\r\n            // Doing a replace on the entire file that is over ${MATCHES_LIMIT} matches\r\n            this._largeReplaceAll();\r\n        }\r\n        else {\r\n            this._regularReplaceAll(findScope);\r\n        }\r\n        this.research(false);\r\n    };\r\n    FindModelBoundToEditorModel.prototype._largeReplaceAll = function () {\r\n        var searchParams = new SearchParams(this._state.searchString, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(96 /* wordSeparators */) : null);\r\n        var searchData = searchParams.parseSearchRequest();\r\n        if (!searchData) {\r\n            return;\r\n        }\r\n        var searchRegex = searchData.regex;\r\n        if (!searchRegex.multiline) {\r\n            var mod = 'mu';\r\n            if (searchRegex.ignoreCase) {\r\n                mod += 'i';\r\n            }\r\n            if (searchRegex.global) {\r\n                mod += 'g';\r\n            }\r\n            searchRegex = new RegExp(searchRegex.source, mod);\r\n        }\r\n        var model = this._editor.getModel();\r\n        var modelText = model.getValue(1 /* LF */);\r\n        var fullModelRange = model.getFullModelRange();\r\n        var replacePattern = this._getReplacePattern();\r\n        var resultText;\r\n        var preserveCase = this._state.preserveCase;\r\n        if (replacePattern.hasReplacementPatterns || preserveCase) {\r\n            resultText = modelText.replace(searchRegex, function () {\r\n                return replacePattern.buildReplaceString(arguments, preserveCase);\r\n            });\r\n        }\r\n        else {\r\n            resultText = modelText.replace(searchRegex, replacePattern.buildReplaceString(null, preserveCase));\r\n        }\r\n        var command = new ReplaceCommandThatPreservesSelection(fullModelRange, resultText, this._editor.getSelection());\r\n        this._executeEditorCommand('replaceAll', command);\r\n    };\r\n    FindModelBoundToEditorModel.prototype._regularReplaceAll = function (findScope) {\r\n        var replacePattern = this._getReplacePattern();\r\n        // Get all the ranges (even more than the highlighted ones)\r\n        var matches = this._findMatches(findScope, replacePattern.hasReplacementPatterns || this._state.preserveCase, 1073741824 /* MAX_SAFE_SMALL_INTEGER */);\r\n        var replaceStrings = [];\r\n        for (var i = 0, len = matches.length; i < len; i++) {\r\n            replaceStrings[i] = replacePattern.buildReplaceString(matches[i].matches, this._state.preserveCase);\r\n        }\r\n        var command = new ReplaceAllCommand(this._editor.getSelection(), matches.map(function (m) { return m.range; }), replaceStrings);\r\n        this._executeEditorCommand('replaceAll', command);\r\n    };\r\n    FindModelBoundToEditorModel.prototype.selectAllMatches = function () {\r\n        if (!this._hasMatches()) {\r\n            return;\r\n        }\r\n        var findScope = this._decorations.getFindScope();\r\n        // Get all the ranges (even more than the highlighted ones)\r\n        var matches = this._findMatches(findScope, false, 1073741824 /* MAX_SAFE_SMALL_INTEGER */);\r\n        var selections = matches.map(function (m) { return new Selection(m.range.startLineNumber, m.range.startColumn, m.range.endLineNumber, m.range.endColumn); });\r\n        // If one of the ranges is the editor selection, then maintain it as primary\r\n        var editorSelection = this._editor.getSelection();\r\n        for (var i = 0, len = selections.length; i < len; i++) {\r\n            var sel = selections[i];\r\n            if (sel.equalsRange(editorSelection)) {\r\n                selections = [editorSelection].concat(selections.slice(0, i)).concat(selections.slice(i + 1));\r\n                break;\r\n            }\r\n        }\r\n        this._editor.setSelections(selections);\r\n    };\r\n    FindModelBoundToEditorModel.prototype._executeEditorCommand = function (source, command) {\r\n        try {\r\n            this._ignoreModelContentChanged = true;\r\n            this._editor.pushUndoStop();\r\n            this._editor.executeCommand(source, command);\r\n            this._editor.pushUndoStop();\r\n        }\r\n        finally {\r\n            this._ignoreModelContentChanged = false;\r\n        }\r\n    };\r\n    return FindModelBoundToEditorModel;\r\n}());\r\nexport { FindModelBoundToEditorModel };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { CaseSensitiveCheckbox, RegexCheckbox, WholeWordsCheckbox } from '../../../base/browser/ui/findinput/findInputCheckboxes.js';\r\nimport { Widget } from '../../../base/browser/ui/widget.js';\r\nimport { RunOnceScheduler } from '../../../base/common/async.js';\r\nimport { FIND_IDS } from './findModel.js';\r\nimport { contrastBorder, editorWidgetBackground, inputActiveOptionBorder, inputActiveOptionBackground, widgetShadow, editorWidgetForeground } from '../../../platform/theme/common/colorRegistry.js';\r\nimport { registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\r\nvar FindOptionsWidget = /** @class */ (function (_super) {\r\n    __extends(FindOptionsWidget, _super);\r\n    function FindOptionsWidget(editor, state, keybindingService, themeService) {\r\n        var _this = _super.call(this) || this;\r\n        _this._hideSoon = _this._register(new RunOnceScheduler(function () { return _this._hide(); }, 2000));\r\n        _this._isVisible = false;\r\n        _this._editor = editor;\r\n        _this._state = state;\r\n        _this._keybindingService = keybindingService;\r\n        _this._domNode = document.createElement('div');\r\n        _this._domNode.className = 'findOptionsWidget';\r\n        _this._domNode.style.display = 'none';\r\n        _this._domNode.style.top = '10px';\r\n        _this._domNode.setAttribute('role', 'presentation');\r\n        _this._domNode.setAttribute('aria-hidden', 'true');\r\n        var inputActiveOptionBorderColor = themeService.getTheme().getColor(inputActiveOptionBorder);\r\n        var inputActiveOptionBackgroundColor = themeService.getTheme().getColor(inputActiveOptionBackground);\r\n        _this.caseSensitive = _this._register(new CaseSensitiveCheckbox({\r\n            appendTitle: _this._keybindingLabelFor(FIND_IDS.ToggleCaseSensitiveCommand),\r\n            isChecked: _this._state.matchCase,\r\n            inputActiveOptionBorder: inputActiveOptionBorderColor,\r\n            inputActiveOptionBackground: inputActiveOptionBackgroundColor\r\n        }));\r\n        _this._domNode.appendChild(_this.caseSensitive.domNode);\r\n        _this._register(_this.caseSensitive.onChange(function () {\r\n            _this._state.change({\r\n                matchCase: _this.caseSensitive.checked\r\n            }, false);\r\n        }));\r\n        _this.wholeWords = _this._register(new WholeWordsCheckbox({\r\n            appendTitle: _this._keybindingLabelFor(FIND_IDS.ToggleWholeWordCommand),\r\n            isChecked: _this._state.wholeWord,\r\n            inputActiveOptionBorder: inputActiveOptionBorderColor,\r\n            inputActiveOptionBackground: inputActiveOptionBackgroundColor\r\n        }));\r\n        _this._domNode.appendChild(_this.wholeWords.domNode);\r\n        _this._register(_this.wholeWords.onChange(function () {\r\n            _this._state.change({\r\n                wholeWord: _this.wholeWords.checked\r\n            }, false);\r\n        }));\r\n        _this.regex = _this._register(new RegexCheckbox({\r\n            appendTitle: _this._keybindingLabelFor(FIND_IDS.ToggleRegexCommand),\r\n            isChecked: _this._state.isRegex,\r\n            inputActiveOptionBorder: inputActiveOptionBorderColor,\r\n            inputActiveOptionBackground: inputActiveOptionBackgroundColor\r\n        }));\r\n        _this._domNode.appendChild(_this.regex.domNode);\r\n        _this._register(_this.regex.onChange(function () {\r\n            _this._state.change({\r\n                isRegex: _this.regex.checked\r\n            }, false);\r\n        }));\r\n        _this._editor.addOverlayWidget(_this);\r\n        _this._register(_this._state.onFindReplaceStateChange(function (e) {\r\n            var somethingChanged = false;\r\n            if (e.isRegex) {\r\n                _this.regex.checked = _this._state.isRegex;\r\n                somethingChanged = true;\r\n            }\r\n            if (e.wholeWord) {\r\n                _this.wholeWords.checked = _this._state.wholeWord;\r\n                somethingChanged = true;\r\n            }\r\n            if (e.matchCase) {\r\n                _this.caseSensitive.checked = _this._state.matchCase;\r\n                somethingChanged = true;\r\n            }\r\n            if (!_this._state.isRevealed && somethingChanged) {\r\n                _this._revealTemporarily();\r\n            }\r\n        }));\r\n        _this._register(dom.addDisposableNonBubblingMouseOutListener(_this._domNode, function (e) { return _this._onMouseOut(); }));\r\n        _this._register(dom.addDisposableListener(_this._domNode, 'mouseover', function (e) { return _this._onMouseOver(); }));\r\n        _this._applyTheme(themeService.getTheme());\r\n        _this._register(themeService.onThemeChange(_this._applyTheme.bind(_this)));\r\n        return _this;\r\n    }\r\n    FindOptionsWidget.prototype._keybindingLabelFor = function (actionId) {\r\n        var kb = this._keybindingService.lookupKeybinding(actionId);\r\n        if (!kb) {\r\n            return '';\r\n        }\r\n        return \" (\" + kb.getLabel() + \")\";\r\n    };\r\n    FindOptionsWidget.prototype.dispose = function () {\r\n        this._editor.removeOverlayWidget(this);\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    // ----- IOverlayWidget API\r\n    FindOptionsWidget.prototype.getId = function () {\r\n        return FindOptionsWidget.ID;\r\n    };\r\n    FindOptionsWidget.prototype.getDomNode = function () {\r\n        return this._domNode;\r\n    };\r\n    FindOptionsWidget.prototype.getPosition = function () {\r\n        return {\r\n            preference: 0 /* TOP_RIGHT_CORNER */\r\n        };\r\n    };\r\n    FindOptionsWidget.prototype.highlightFindOptions = function () {\r\n        this._revealTemporarily();\r\n    };\r\n    FindOptionsWidget.prototype._revealTemporarily = function () {\r\n        this._show();\r\n        this._hideSoon.schedule();\r\n    };\r\n    FindOptionsWidget.prototype._onMouseOut = function () {\r\n        this._hideSoon.schedule();\r\n    };\r\n    FindOptionsWidget.prototype._onMouseOver = function () {\r\n        this._hideSoon.cancel();\r\n    };\r\n    FindOptionsWidget.prototype._show = function () {\r\n        if (this._isVisible) {\r\n            return;\r\n        }\r\n        this._isVisible = true;\r\n        this._domNode.style.display = 'block';\r\n    };\r\n    FindOptionsWidget.prototype._hide = function () {\r\n        if (!this._isVisible) {\r\n            return;\r\n        }\r\n        this._isVisible = false;\r\n        this._domNode.style.display = 'none';\r\n    };\r\n    FindOptionsWidget.prototype._applyTheme = function (theme) {\r\n        var inputStyles = {\r\n            inputActiveOptionBorder: theme.getColor(inputActiveOptionBorder),\r\n            inputActiveOptionBackground: theme.getColor(inputActiveOptionBackground)\r\n        };\r\n        this.caseSensitive.style(inputStyles);\r\n        this.wholeWords.style(inputStyles);\r\n        this.regex.style(inputStyles);\r\n    };\r\n    FindOptionsWidget.ID = 'editor.contrib.findOptionsWidget';\r\n    return FindOptionsWidget;\r\n}(Widget));\r\nexport { FindOptionsWidget };\r\nregisterThemingParticipant(function (theme, collector) {\r\n    var widgetBackground = theme.getColor(editorWidgetBackground);\r\n    if (widgetBackground) {\r\n        collector.addRule(\".monaco-editor .findOptionsWidget { background-color: \" + widgetBackground + \"; }\");\r\n    }\r\n    var widgetForeground = theme.getColor(editorWidgetForeground);\r\n    if (widgetForeground) {\r\n        collector.addRule(\".monaco-editor .findOptionsWidget { color: \" + widgetForeground + \"; }\");\r\n    }\r\n    var widgetShadowColor = theme.getColor(widgetShadow);\r\n    if (widgetShadowColor) {\r\n        collector.addRule(\".monaco-editor .findOptionsWidget { box-shadow: 0 2px 8px \" + widgetShadowColor + \"; }\");\r\n    }\r\n    var hcBorder = theme.getColor(contrastBorder);\r\n    if (hcBorder) {\r\n        collector.addRule(\".monaco-editor .findOptionsWidget { border: 2px solid \" + hcBorder + \"; }\");\r\n    }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport * as nls from '../../../nls.js';\r\nimport { Delayer } from '../../../base/common/async.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport * as strings from '../../../base/common/strings.js';\r\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../browser/editorExtensions.js';\r\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\r\nimport { CONTEXT_FIND_INPUT_FOCUSED, CONTEXT_FIND_WIDGET_VISIBLE, FIND_IDS, FindModelBoundToEditorModel, ToggleCaseSensitiveKeybinding, ToggleRegexKeybinding, ToggleSearchScopeKeybinding, ToggleWholeWordKeybinding, CONTEXT_REPLACE_INPUT_FOCUSED } from './findModel.js';\r\nimport { FindOptionsWidget } from './findOptionsWidget.js';\r\nimport { FindReplaceState } from './findState.js';\r\nimport { FindWidget } from './findWidget.js';\r\nimport { IClipboardService } from '../../../platform/clipboard/common/clipboardService.js';\r\nimport { IContextKeyService, ContextKeyExpr } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { IContextViewService } from '../../../platform/contextview/browser/contextView.js';\r\nimport { optional } from '../../../platform/instantiation/common/instantiation.js';\r\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\r\nimport { IStorageService } from '../../../platform/storage/common/storage.js';\r\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\r\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\r\nvar SEARCH_STRING_MAX_LENGTH = 524288;\r\nexport function getSelectionSearchString(editor) {\r\n    if (!editor.hasModel()) {\r\n        return null;\r\n    }\r\n    var selection = editor.getSelection();\r\n    // if selection spans multiple lines, default search string to empty\r\n    if (selection.startLineNumber === selection.endLineNumber) {\r\n        if (selection.isEmpty()) {\r\n            var wordAtPosition = editor.getModel().getWordAtPosition(selection.getStartPosition());\r\n            if (wordAtPosition) {\r\n                return wordAtPosition.word;\r\n            }\r\n        }\r\n        else {\r\n            if (editor.getModel().getValueLengthInRange(selection) < SEARCH_STRING_MAX_LENGTH) {\r\n                return editor.getModel().getValueInRange(selection);\r\n            }\r\n        }\r\n    }\r\n    return null;\r\n}\r\nvar CommonFindController = /** @class */ (function (_super) {\r\n    __extends(CommonFindController, _super);\r\n    function CommonFindController(editor, contextKeyService, storageService, clipboardService) {\r\n        var _this = _super.call(this) || this;\r\n        _this._editor = editor;\r\n        _this._findWidgetVisible = CONTEXT_FIND_WIDGET_VISIBLE.bindTo(contextKeyService);\r\n        _this._contextKeyService = contextKeyService;\r\n        _this._storageService = storageService;\r\n        _this._clipboardService = clipboardService;\r\n        _this._updateHistoryDelayer = new Delayer(500);\r\n        _this._state = _this._register(new FindReplaceState());\r\n        _this.loadQueryState();\r\n        _this._register(_this._state.onFindReplaceStateChange(function (e) { return _this._onStateChanged(e); }));\r\n        _this._model = null;\r\n        _this._register(_this._editor.onDidChangeModel(function () {\r\n            var shouldRestartFind = (_this._editor.getModel() && _this._state.isRevealed);\r\n            _this.disposeModel();\r\n            _this._state.change({\r\n                searchScope: null,\r\n                matchCase: _this._storageService.getBoolean('editor.matchCase', 1 /* WORKSPACE */, false),\r\n                wholeWord: _this._storageService.getBoolean('editor.wholeWord', 1 /* WORKSPACE */, false),\r\n                isRegex: _this._storageService.getBoolean('editor.isRegex', 1 /* WORKSPACE */, false),\r\n                preserveCase: _this._storageService.getBoolean('editor.preserveCase', 1 /* WORKSPACE */, false)\r\n            }, false);\r\n            if (shouldRestartFind) {\r\n                _this._start({\r\n                    forceRevealReplace: false,\r\n                    seedSearchStringFromSelection: false && _this._editor.getOption(28 /* find */).seedSearchStringFromSelection,\r\n                    seedSearchStringFromGlobalClipboard: false,\r\n                    shouldFocus: 0 /* NoFocusChange */,\r\n                    shouldAnimate: false,\r\n                    updateSearchScope: false\r\n                });\r\n            }\r\n        }));\r\n        return _this;\r\n    }\r\n    CommonFindController.get = function (editor) {\r\n        return editor.getContribution(CommonFindController.ID);\r\n    };\r\n    CommonFindController.prototype.dispose = function () {\r\n        this.disposeModel();\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    CommonFindController.prototype.disposeModel = function () {\r\n        if (this._model) {\r\n            this._model.dispose();\r\n            this._model = null;\r\n        }\r\n    };\r\n    CommonFindController.prototype._onStateChanged = function (e) {\r\n        this.saveQueryState(e);\r\n        if (e.isRevealed) {\r\n            if (this._state.isRevealed) {\r\n                this._findWidgetVisible.set(true);\r\n            }\r\n            else {\r\n                this._findWidgetVisible.reset();\r\n                this.disposeModel();\r\n            }\r\n        }\r\n        if (e.searchString) {\r\n            this.setGlobalBufferTerm(this._state.searchString);\r\n        }\r\n    };\r\n    CommonFindController.prototype.saveQueryState = function (e) {\r\n        if (e.isRegex) {\r\n            this._storageService.store('editor.isRegex', this._state.actualIsRegex, 1 /* WORKSPACE */);\r\n        }\r\n        if (e.wholeWord) {\r\n            this._storageService.store('editor.wholeWord', this._state.actualWholeWord, 1 /* WORKSPACE */);\r\n        }\r\n        if (e.matchCase) {\r\n            this._storageService.store('editor.matchCase', this._state.actualMatchCase, 1 /* WORKSPACE */);\r\n        }\r\n        if (e.preserveCase) {\r\n            this._storageService.store('editor.preserveCase', this._state.actualPreserveCase, 1 /* WORKSPACE */);\r\n        }\r\n    };\r\n    CommonFindController.prototype.loadQueryState = function () {\r\n        this._state.change({\r\n            matchCase: this._storageService.getBoolean('editor.matchCase', 1 /* WORKSPACE */, this._state.matchCase),\r\n            wholeWord: this._storageService.getBoolean('editor.wholeWord', 1 /* WORKSPACE */, this._state.wholeWord),\r\n            isRegex: this._storageService.getBoolean('editor.isRegex', 1 /* WORKSPACE */, this._state.isRegex),\r\n            preserveCase: this._storageService.getBoolean('editor.preserveCase', 1 /* WORKSPACE */, this._state.preserveCase)\r\n        }, false);\r\n    };\r\n    CommonFindController.prototype.isFindInputFocused = function () {\r\n        return !!CONTEXT_FIND_INPUT_FOCUSED.getValue(this._contextKeyService);\r\n    };\r\n    CommonFindController.prototype.getState = function () {\r\n        return this._state;\r\n    };\r\n    CommonFindController.prototype.closeFindWidget = function () {\r\n        this._state.change({\r\n            isRevealed: false,\r\n            searchScope: null\r\n        }, false);\r\n        this._editor.focus();\r\n    };\r\n    CommonFindController.prototype.toggleCaseSensitive = function () {\r\n        this._state.change({ matchCase: !this._state.matchCase }, false);\r\n        if (!this._state.isRevealed) {\r\n            this.highlightFindOptions();\r\n        }\r\n    };\r\n    CommonFindController.prototype.toggleWholeWords = function () {\r\n        this._state.change({ wholeWord: !this._state.wholeWord }, false);\r\n        if (!this._state.isRevealed) {\r\n            this.highlightFindOptions();\r\n        }\r\n    };\r\n    CommonFindController.prototype.toggleRegex = function () {\r\n        this._state.change({ isRegex: !this._state.isRegex }, false);\r\n        if (!this._state.isRevealed) {\r\n            this.highlightFindOptions();\r\n        }\r\n    };\r\n    CommonFindController.prototype.toggleSearchScope = function () {\r\n        if (this._state.searchScope) {\r\n            this._state.change({ searchScope: null }, true);\r\n        }\r\n        else {\r\n            if (this._editor.hasModel()) {\r\n                var selection = this._editor.getSelection();\r\n                if (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\r\n                    selection = selection.setEndPosition(selection.endLineNumber - 1, this._editor.getModel().getLineMaxColumn(selection.endLineNumber - 1));\r\n                }\r\n                if (!selection.isEmpty()) {\r\n                    this._state.change({ searchScope: selection }, true);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    CommonFindController.prototype.setSearchString = function (searchString) {\r\n        if (this._state.isRegex) {\r\n            searchString = strings.escapeRegExpCharacters(searchString);\r\n        }\r\n        this._state.change({ searchString: searchString }, false);\r\n    };\r\n    CommonFindController.prototype.highlightFindOptions = function () {\r\n        // overwritten in subclass\r\n    };\r\n    CommonFindController.prototype._start = function (opts) {\r\n        this.disposeModel();\r\n        if (!this._editor.hasModel()) {\r\n            // cannot do anything with an editor that doesn't have a model...\r\n            return;\r\n        }\r\n        var stateChanges = {\r\n            isRevealed: true\r\n        };\r\n        if (opts.seedSearchStringFromSelection) {\r\n            var selectionSearchString = getSelectionSearchString(this._editor);\r\n            if (selectionSearchString) {\r\n                if (this._state.isRegex) {\r\n                    stateChanges.searchString = strings.escapeRegExpCharacters(selectionSearchString);\r\n                }\r\n                else {\r\n                    stateChanges.searchString = selectionSearchString;\r\n                }\r\n            }\r\n        }\r\n        if (!stateChanges.searchString && opts.seedSearchStringFromGlobalClipboard) {\r\n            var selectionSearchString = this.getGlobalBufferTerm();\r\n            if (selectionSearchString) {\r\n                stateChanges.searchString = selectionSearchString;\r\n            }\r\n        }\r\n        // Overwrite isReplaceRevealed\r\n        if (opts.forceRevealReplace) {\r\n            stateChanges.isReplaceRevealed = true;\r\n        }\r\n        else if (!this._findWidgetVisible.get()) {\r\n            stateChanges.isReplaceRevealed = false;\r\n        }\r\n        if (opts.updateSearchScope) {\r\n            var currentSelection = this._editor.getSelection();\r\n            if (!currentSelection.isEmpty()) {\r\n                stateChanges.searchScope = currentSelection;\r\n            }\r\n        }\r\n        this._state.change(stateChanges, false);\r\n        if (!this._model) {\r\n            this._model = new FindModelBoundToEditorModel(this._editor, this._state);\r\n        }\r\n    };\r\n    CommonFindController.prototype.start = function (opts) {\r\n        this._start(opts);\r\n    };\r\n    CommonFindController.prototype.moveToNextMatch = function () {\r\n        if (this._model) {\r\n            this._model.moveToNextMatch();\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    CommonFindController.prototype.moveToPrevMatch = function () {\r\n        if (this._model) {\r\n            this._model.moveToPrevMatch();\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    CommonFindController.prototype.replace = function () {\r\n        if (this._model) {\r\n            this._model.replace();\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    CommonFindController.prototype.replaceAll = function () {\r\n        if (this._model) {\r\n            this._model.replaceAll();\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    CommonFindController.prototype.selectAllMatches = function () {\r\n        if (this._model) {\r\n            this._model.selectAllMatches();\r\n            this._editor.focus();\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    CommonFindController.prototype.getGlobalBufferTerm = function () {\r\n        if (this._editor.getOption(28 /* find */).globalFindClipboard\r\n            && this._clipboardService\r\n            && this._editor.hasModel()\r\n            && !this._editor.getModel().isTooLargeForSyncing()) {\r\n            return this._clipboardService.readFindText();\r\n        }\r\n        return '';\r\n    };\r\n    CommonFindController.prototype.setGlobalBufferTerm = function (text) {\r\n        if (this._editor.getOption(28 /* find */).globalFindClipboard\r\n            && this._clipboardService\r\n            && this._editor.hasModel()\r\n            && !this._editor.getModel().isTooLargeForSyncing()) {\r\n            this._clipboardService.writeFindText(text);\r\n        }\r\n    };\r\n    CommonFindController.ID = 'editor.contrib.findController';\r\n    CommonFindController = __decorate([\r\n        __param(1, IContextKeyService),\r\n        __param(2, IStorageService),\r\n        __param(3, IClipboardService)\r\n    ], CommonFindController);\r\n    return CommonFindController;\r\n}(Disposable));\r\nexport { CommonFindController };\r\nvar FindController = /** @class */ (function (_super) {\r\n    __extends(FindController, _super);\r\n    function FindController(editor, _contextViewService, _contextKeyService, _keybindingService, _themeService, _notificationService, _storageService, clipboardService) {\r\n        var _this = _super.call(this, editor, _contextKeyService, _storageService, clipboardService) || this;\r\n        _this._contextViewService = _contextViewService;\r\n        _this._keybindingService = _keybindingService;\r\n        _this._themeService = _themeService;\r\n        _this._notificationService = _notificationService;\r\n        _this._widget = null;\r\n        _this._findOptionsWidget = null;\r\n        return _this;\r\n    }\r\n    FindController.prototype._start = function (opts) {\r\n        if (!this._widget) {\r\n            this._createFindWidget();\r\n        }\r\n        var selection = this._editor.getSelection();\r\n        var updateSearchScope = false;\r\n        switch (this._editor.getOption(28 /* find */).autoFindInSelection) {\r\n            case 'always':\r\n                updateSearchScope = true;\r\n                break;\r\n            case 'never':\r\n                updateSearchScope = false;\r\n                break;\r\n            case 'multiline':\r\n                var isSelectionMultipleLine = !!selection && selection.startLineNumber !== selection.endLineNumber;\r\n                updateSearchScope = isSelectionMultipleLine;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        opts.updateSearchScope = updateSearchScope;\r\n        _super.prototype._start.call(this, opts);\r\n        if (opts.shouldFocus === 2 /* FocusReplaceInput */) {\r\n            this._widget.focusReplaceInput();\r\n        }\r\n        else if (opts.shouldFocus === 1 /* FocusFindInput */) {\r\n            this._widget.focusFindInput();\r\n        }\r\n    };\r\n    FindController.prototype.highlightFindOptions = function () {\r\n        if (!this._widget) {\r\n            this._createFindWidget();\r\n        }\r\n        if (this._state.isRevealed) {\r\n            this._widget.highlightFindOptions();\r\n        }\r\n        else {\r\n            this._findOptionsWidget.highlightFindOptions();\r\n        }\r\n    };\r\n    FindController.prototype._createFindWidget = function () {\r\n        this._widget = this._register(new FindWidget(this._editor, this, this._state, this._contextViewService, this._keybindingService, this._contextKeyService, this._themeService, this._storageService, this._notificationService));\r\n        this._findOptionsWidget = this._register(new FindOptionsWidget(this._editor, this._state, this._keybindingService, this._themeService));\r\n    };\r\n    FindController = __decorate([\r\n        __param(1, IContextViewService),\r\n        __param(2, IContextKeyService),\r\n        __param(3, IKeybindingService),\r\n        __param(4, IThemeService),\r\n        __param(5, INotificationService),\r\n        __param(6, IStorageService),\r\n        __param(7, optional(IClipboardService))\r\n    ], FindController);\r\n    return FindController;\r\n}(CommonFindController));\r\nexport { FindController };\r\nvar StartFindAction = /** @class */ (function (_super) {\r\n    __extends(StartFindAction, _super);\r\n    function StartFindAction() {\r\n        return _super.call(this, {\r\n            id: FIND_IDS.StartFindAction,\r\n            label: nls.localize('startFindAction', \"Find\"),\r\n            alias: 'Find',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: null,\r\n                primary: 2048 /* CtrlCmd */ | 36 /* KEY_F */,\r\n                weight: 100 /* EditorContrib */\r\n            },\r\n            menuOpts: {\r\n                menuId: 17 /* MenubarEditMenu */,\r\n                group: '3_find',\r\n                title: nls.localize({ key: 'miFind', comment: ['&& denotes a mnemonic'] }, \"&&Find\"),\r\n                order: 1\r\n            }\r\n        }) || this;\r\n    }\r\n    StartFindAction.prototype.run = function (accessor, editor) {\r\n        var controller = CommonFindController.get(editor);\r\n        if (controller) {\r\n            controller.start({\r\n                forceRevealReplace: false,\r\n                seedSearchStringFromSelection: editor.getOption(28 /* find */).seedSearchStringFromSelection,\r\n                seedSearchStringFromGlobalClipboard: editor.getOption(28 /* find */).globalFindClipboard,\r\n                shouldFocus: 1 /* FocusFindInput */,\r\n                shouldAnimate: true,\r\n                updateSearchScope: false\r\n            });\r\n        }\r\n    };\r\n    return StartFindAction;\r\n}(EditorAction));\r\nexport { StartFindAction };\r\nvar StartFindWithSelectionAction = /** @class */ (function (_super) {\r\n    __extends(StartFindWithSelectionAction, _super);\r\n    function StartFindWithSelectionAction() {\r\n        return _super.call(this, {\r\n            id: FIND_IDS.StartFindWithSelection,\r\n            label: nls.localize('startFindWithSelectionAction', \"Find With Selection\"),\r\n            alias: 'Find With Selection',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: null,\r\n                primary: 0,\r\n                mac: {\r\n                    primary: 2048 /* CtrlCmd */ | 35 /* KEY_E */,\r\n                },\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    StartFindWithSelectionAction.prototype.run = function (accessor, editor) {\r\n        var controller = CommonFindController.get(editor);\r\n        if (controller) {\r\n            controller.start({\r\n                forceRevealReplace: false,\r\n                seedSearchStringFromSelection: true,\r\n                seedSearchStringFromGlobalClipboard: false,\r\n                shouldFocus: 0 /* NoFocusChange */,\r\n                shouldAnimate: true,\r\n                updateSearchScope: false\r\n            });\r\n            controller.setGlobalBufferTerm(controller.getState().searchString);\r\n        }\r\n    };\r\n    return StartFindWithSelectionAction;\r\n}(EditorAction));\r\nexport { StartFindWithSelectionAction };\r\nvar MatchFindAction = /** @class */ (function (_super) {\r\n    __extends(MatchFindAction, _super);\r\n    function MatchFindAction() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    MatchFindAction.prototype.run = function (accessor, editor) {\r\n        var controller = CommonFindController.get(editor);\r\n        if (controller && !this._run(controller)) {\r\n            controller.start({\r\n                forceRevealReplace: false,\r\n                seedSearchStringFromSelection: (controller.getState().searchString.length === 0) && editor.getOption(28 /* find */).seedSearchStringFromSelection,\r\n                seedSearchStringFromGlobalClipboard: true,\r\n                shouldFocus: 0 /* NoFocusChange */,\r\n                shouldAnimate: true,\r\n                updateSearchScope: false\r\n            });\r\n            this._run(controller);\r\n        }\r\n    };\r\n    return MatchFindAction;\r\n}(EditorAction));\r\nexport { MatchFindAction };\r\nvar NextMatchFindAction = /** @class */ (function (_super) {\r\n    __extends(NextMatchFindAction, _super);\r\n    function NextMatchFindAction() {\r\n        return _super.call(this, {\r\n            id: FIND_IDS.NextMatchFindAction,\r\n            label: nls.localize('findNextMatchAction', \"Find Next\"),\r\n            alias: 'Find Next',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.focus,\r\n                primary: 61 /* F3 */,\r\n                mac: { primary: 2048 /* CtrlCmd */ | 37 /* KEY_G */, secondary: [61 /* F3 */] },\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    NextMatchFindAction.prototype._run = function (controller) {\r\n        return controller.moveToNextMatch();\r\n    };\r\n    return NextMatchFindAction;\r\n}(MatchFindAction));\r\nexport { NextMatchFindAction };\r\nvar NextMatchFindAction2 = /** @class */ (function (_super) {\r\n    __extends(NextMatchFindAction2, _super);\r\n    function NextMatchFindAction2() {\r\n        return _super.call(this, {\r\n            id: FIND_IDS.NextMatchFindAction,\r\n            label: nls.localize('findNextMatchAction', \"Find Next\"),\r\n            alias: 'Find Next',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_FIND_INPUT_FOCUSED),\r\n                primary: 3 /* Enter */,\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    NextMatchFindAction2.prototype._run = function (controller) {\r\n        return controller.moveToNextMatch();\r\n    };\r\n    return NextMatchFindAction2;\r\n}(MatchFindAction));\r\nexport { NextMatchFindAction2 };\r\nvar PreviousMatchFindAction = /** @class */ (function (_super) {\r\n    __extends(PreviousMatchFindAction, _super);\r\n    function PreviousMatchFindAction() {\r\n        return _super.call(this, {\r\n            id: FIND_IDS.PreviousMatchFindAction,\r\n            label: nls.localize('findPreviousMatchAction', \"Find Previous\"),\r\n            alias: 'Find Previous',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.focus,\r\n                primary: 1024 /* Shift */ | 61 /* F3 */,\r\n                mac: { primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 37 /* KEY_G */, secondary: [1024 /* Shift */ | 61 /* F3 */] },\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    PreviousMatchFindAction.prototype._run = function (controller) {\r\n        return controller.moveToPrevMatch();\r\n    };\r\n    return PreviousMatchFindAction;\r\n}(MatchFindAction));\r\nexport { PreviousMatchFindAction };\r\nvar PreviousMatchFindAction2 = /** @class */ (function (_super) {\r\n    __extends(PreviousMatchFindAction2, _super);\r\n    function PreviousMatchFindAction2() {\r\n        return _super.call(this, {\r\n            id: FIND_IDS.PreviousMatchFindAction,\r\n            label: nls.localize('findPreviousMatchAction', \"Find Previous\"),\r\n            alias: 'Find Previous',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_FIND_INPUT_FOCUSED),\r\n                primary: 1024 /* Shift */ | 3 /* Enter */,\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    PreviousMatchFindAction2.prototype._run = function (controller) {\r\n        return controller.moveToPrevMatch();\r\n    };\r\n    return PreviousMatchFindAction2;\r\n}(MatchFindAction));\r\nexport { PreviousMatchFindAction2 };\r\nvar SelectionMatchFindAction = /** @class */ (function (_super) {\r\n    __extends(SelectionMatchFindAction, _super);\r\n    function SelectionMatchFindAction() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    SelectionMatchFindAction.prototype.run = function (accessor, editor) {\r\n        var controller = CommonFindController.get(editor);\r\n        if (!controller) {\r\n            return;\r\n        }\r\n        var selectionSearchString = getSelectionSearchString(editor);\r\n        if (selectionSearchString) {\r\n            controller.setSearchString(selectionSearchString);\r\n        }\r\n        if (!this._run(controller)) {\r\n            controller.start({\r\n                forceRevealReplace: false,\r\n                seedSearchStringFromSelection: editor.getOption(28 /* find */).seedSearchStringFromSelection,\r\n                seedSearchStringFromGlobalClipboard: false,\r\n                shouldFocus: 0 /* NoFocusChange */,\r\n                shouldAnimate: true,\r\n                updateSearchScope: false\r\n            });\r\n            this._run(controller);\r\n        }\r\n    };\r\n    return SelectionMatchFindAction;\r\n}(EditorAction));\r\nexport { SelectionMatchFindAction };\r\nvar NextSelectionMatchFindAction = /** @class */ (function (_super) {\r\n    __extends(NextSelectionMatchFindAction, _super);\r\n    function NextSelectionMatchFindAction() {\r\n        return _super.call(this, {\r\n            id: FIND_IDS.NextSelectionMatchFindAction,\r\n            label: nls.localize('nextSelectionMatchFindAction', \"Find Next Selection\"),\r\n            alias: 'Find Next Selection',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.focus,\r\n                primary: 2048 /* CtrlCmd */ | 61 /* F3 */,\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    NextSelectionMatchFindAction.prototype._run = function (controller) {\r\n        return controller.moveToNextMatch();\r\n    };\r\n    return NextSelectionMatchFindAction;\r\n}(SelectionMatchFindAction));\r\nexport { NextSelectionMatchFindAction };\r\nvar PreviousSelectionMatchFindAction = /** @class */ (function (_super) {\r\n    __extends(PreviousSelectionMatchFindAction, _super);\r\n    function PreviousSelectionMatchFindAction() {\r\n        return _super.call(this, {\r\n            id: FIND_IDS.PreviousSelectionMatchFindAction,\r\n            label: nls.localize('previousSelectionMatchFindAction', \"Find Previous Selection\"),\r\n            alias: 'Find Previous Selection',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.focus,\r\n                primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 61 /* F3 */,\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    PreviousSelectionMatchFindAction.prototype._run = function (controller) {\r\n        return controller.moveToPrevMatch();\r\n    };\r\n    return PreviousSelectionMatchFindAction;\r\n}(SelectionMatchFindAction));\r\nexport { PreviousSelectionMatchFindAction };\r\nvar StartFindReplaceAction = /** @class */ (function (_super) {\r\n    __extends(StartFindReplaceAction, _super);\r\n    function StartFindReplaceAction() {\r\n        return _super.call(this, {\r\n            id: FIND_IDS.StartFindReplaceAction,\r\n            label: nls.localize('startReplace', \"Replace\"),\r\n            alias: 'Replace',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: null,\r\n                primary: 2048 /* CtrlCmd */ | 38 /* KEY_H */,\r\n                mac: { primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 36 /* KEY_F */ },\r\n                weight: 100 /* EditorContrib */\r\n            },\r\n            menuOpts: {\r\n                menuId: 17 /* MenubarEditMenu */,\r\n                group: '3_find',\r\n                title: nls.localize({ key: 'miReplace', comment: ['&& denotes a mnemonic'] }, \"&&Replace\"),\r\n                order: 2\r\n            }\r\n        }) || this;\r\n    }\r\n    StartFindReplaceAction.prototype.run = function (accessor, editor) {\r\n        if (!editor.hasModel() || editor.getOption(68 /* readOnly */)) {\r\n            return;\r\n        }\r\n        var controller = CommonFindController.get(editor);\r\n        var currentSelection = editor.getSelection();\r\n        var findInputFocused = controller.isFindInputFocused();\r\n        // we only seed search string from selection when the current selection is single line and not empty,\r\n        // + the find input is not focused\r\n        var seedSearchStringFromSelection = !currentSelection.isEmpty()\r\n            && currentSelection.startLineNumber === currentSelection.endLineNumber && editor.getOption(28 /* find */).seedSearchStringFromSelection\r\n            && !findInputFocused;\r\n        /*\r\n         * if the existing search string in find widget is empty and we don't seed search string from selection, it means the Find Input is still empty, so we should focus the Find Input instead of Replace Input.\r\n\r\n         * findInputFocused true -> seedSearchStringFromSelection false, FocusReplaceInput\r\n         * findInputFocused false, seedSearchStringFromSelection true FocusReplaceInput\r\n         * findInputFocused false seedSearchStringFromSelection false FocusFindInput\r\n         */\r\n        var shouldFocus = (findInputFocused || seedSearchStringFromSelection) ?\r\n            2 /* FocusReplaceInput */ : 1 /* FocusFindInput */;\r\n        if (controller) {\r\n            controller.start({\r\n                forceRevealReplace: true,\r\n                seedSearchStringFromSelection: seedSearchStringFromSelection,\r\n                seedSearchStringFromGlobalClipboard: editor.getOption(28 /* find */).seedSearchStringFromSelection,\r\n                shouldFocus: shouldFocus,\r\n                shouldAnimate: true,\r\n                updateSearchScope: false\r\n            });\r\n        }\r\n    };\r\n    return StartFindReplaceAction;\r\n}(EditorAction));\r\nexport { StartFindReplaceAction };\r\nregisterEditorContribution(CommonFindController.ID, FindController);\r\nregisterEditorAction(StartFindAction);\r\nregisterEditorAction(StartFindWithSelectionAction);\r\nregisterEditorAction(NextMatchFindAction);\r\nregisterEditorAction(NextMatchFindAction2);\r\nregisterEditorAction(PreviousMatchFindAction);\r\nregisterEditorAction(PreviousMatchFindAction2);\r\nregisterEditorAction(NextSelectionMatchFindAction);\r\nregisterEditorAction(PreviousSelectionMatchFindAction);\r\nregisterEditorAction(StartFindReplaceAction);\r\nvar FindCommand = EditorCommand.bindToContribution(CommonFindController.get);\r\nregisterEditorCommand(new FindCommand({\r\n    id: FIND_IDS.CloseFindWidgetCommand,\r\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\r\n    handler: function (x) { return x.closeFindWidget(); },\r\n    kbOpts: {\r\n        weight: 100 /* EditorContrib */ + 5,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: 9 /* Escape */,\r\n        secondary: [1024 /* Shift */ | 9 /* Escape */]\r\n    }\r\n}));\r\nregisterEditorCommand(new FindCommand({\r\n    id: FIND_IDS.ToggleCaseSensitiveCommand,\r\n    precondition: undefined,\r\n    handler: function (x) { return x.toggleCaseSensitive(); },\r\n    kbOpts: {\r\n        weight: 100 /* EditorContrib */ + 5,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: ToggleCaseSensitiveKeybinding.primary,\r\n        mac: ToggleCaseSensitiveKeybinding.mac,\r\n        win: ToggleCaseSensitiveKeybinding.win,\r\n        linux: ToggleCaseSensitiveKeybinding.linux\r\n    }\r\n}));\r\nregisterEditorCommand(new FindCommand({\r\n    id: FIND_IDS.ToggleWholeWordCommand,\r\n    precondition: undefined,\r\n    handler: function (x) { return x.toggleWholeWords(); },\r\n    kbOpts: {\r\n        weight: 100 /* EditorContrib */ + 5,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: ToggleWholeWordKeybinding.primary,\r\n        mac: ToggleWholeWordKeybinding.mac,\r\n        win: ToggleWholeWordKeybinding.win,\r\n        linux: ToggleWholeWordKeybinding.linux\r\n    }\r\n}));\r\nregisterEditorCommand(new FindCommand({\r\n    id: FIND_IDS.ToggleRegexCommand,\r\n    precondition: undefined,\r\n    handler: function (x) { return x.toggleRegex(); },\r\n    kbOpts: {\r\n        weight: 100 /* EditorContrib */ + 5,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: ToggleRegexKeybinding.primary,\r\n        mac: ToggleRegexKeybinding.mac,\r\n        win: ToggleRegexKeybinding.win,\r\n        linux: ToggleRegexKeybinding.linux\r\n    }\r\n}));\r\nregisterEditorCommand(new FindCommand({\r\n    id: FIND_IDS.ToggleSearchScopeCommand,\r\n    precondition: undefined,\r\n    handler: function (x) { return x.toggleSearchScope(); },\r\n    kbOpts: {\r\n        weight: 100 /* EditorContrib */ + 5,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: ToggleSearchScopeKeybinding.primary,\r\n        mac: ToggleSearchScopeKeybinding.mac,\r\n        win: ToggleSearchScopeKeybinding.win,\r\n        linux: ToggleSearchScopeKeybinding.linux\r\n    }\r\n}));\r\nregisterEditorCommand(new FindCommand({\r\n    id: FIND_IDS.ReplaceOneAction,\r\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\r\n    handler: function (x) { return x.replace(); },\r\n    kbOpts: {\r\n        weight: 100 /* EditorContrib */ + 5,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 22 /* KEY_1 */\r\n    }\r\n}));\r\nregisterEditorCommand(new FindCommand({\r\n    id: FIND_IDS.ReplaceOneAction,\r\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\r\n    handler: function (x) { return x.replace(); },\r\n    kbOpts: {\r\n        weight: 100 /* EditorContrib */ + 5,\r\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_REPLACE_INPUT_FOCUSED),\r\n        primary: 3 /* Enter */\r\n    }\r\n}));\r\nregisterEditorCommand(new FindCommand({\r\n    id: FIND_IDS.ReplaceAllAction,\r\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\r\n    handler: function (x) { return x.replaceAll(); },\r\n    kbOpts: {\r\n        weight: 100 /* EditorContrib */ + 5,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 3 /* Enter */\r\n    }\r\n}));\r\nregisterEditorCommand(new FindCommand({\r\n    id: FIND_IDS.ReplaceAllAction,\r\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\r\n    handler: function (x) { return x.replaceAll(); },\r\n    kbOpts: {\r\n        weight: 100 /* EditorContrib */ + 5,\r\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_REPLACE_INPUT_FOCUSED),\r\n        primary: undefined,\r\n        mac: {\r\n            primary: 2048 /* CtrlCmd */ | 3 /* Enter */,\r\n        }\r\n    }\r\n}));\r\nregisterEditorCommand(new FindCommand({\r\n    id: FIND_IDS.SelectAllMatchesAction,\r\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\r\n    handler: function (x) { return x.selectAllMatches(); },\r\n    kbOpts: {\r\n        weight: 100 /* EditorContrib */ + 5,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: 512 /* Alt */ | 3 /* Enter */\r\n    }\r\n}));\r\n"],"sourceRoot":""}