{"version":3,"sources":["webpack:///./node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/scrollbarArrow.js","webpack:///./node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/scrollbarVisibilityController.js","webpack:///./node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/abstractScrollbar.js","webpack:///./node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/scrollbarState.js","webpack:///./node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/horizontalScrollbar.js","webpack:///./node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/verticalScrollbar.js","webpack:///./node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/scrollableElement.js","webpack:///./node_modules/monaco-editor/esm/vs/base/browser/ui/splitview/splitview.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","this","constructor","prototype","create","ARROW_IMG_SIZE","_super","ScrollbarArrow","opts","_this","call","_onActivate","onActivate","bgDomNode","document","createElement","className","style","position","width","bgWidth","height","bgHeight","top","left","bottom","right","domNode","_mouseMoveMonitor","_register","onmousedown","e","_arrowMouseDown","_mousedownRepeatTimer","_mousedownScheduleRepeatTimer","scheduleRepeater","cancelAndSet","cancel","startMonitoring","target","buttons","mouseMoveData","preventDefault","ScrollbarVisibilityController","visibility","visibleClassName","invisibleClassName","_visibility","_visibleClassName","_invisibleClassName","_domNode","_isVisible","_isNeeded","_shouldBeVisible","_revealTimer","applyVisibilitySetting","shouldBeVisible","setShouldBeVisible","rawShouldBeVisible","ensureVisibility","setIsNeeded","isNeeded","setDomNode","setClassName","_reveal","_hide","setIfNotSet","withFadeAway","MOUSE_DRAG_RESET_DISTANCE","AbstractScrollbar","_lazyRender","lazyRender","_host","host","_scrollable","scrollable","_scrollbarState","scrollbarState","_visibilityController","extraScrollbarClassName","_shouldRender","setAttribute","setPosition","_domNodeMouseDown","_createArrow","arrow","appendChild","_createSlider","slider","setTop","setLeft","setWidth","setHeight","setLayerHinting","setContain","leftButton","_sliderMouseDown","onclick","stopPropagation","_onElementSize","visibleSize","setVisibleSize","render","_onElementScrollSize","elementScrollSize","setScrollSize","_onElementScrollPosition","elementScrollPosition","setScrollPosition","beginReveal","beginHide","_renderDomNode","getRectangleLargeSize","getRectangleSmallSize","_updateSlider","getSliderSize","getArrowSize","getSliderPosition","_onMouseDown","delegateMouseDown","domTop","getClientRects","sliderStart","sliderStop","mousePos","_sliderMousePosition","offsetX","offsetY","browserEvent","domNodePosition","dom","posx","posy","_setDesiredScrollPositionNow","getDesiredScrollPositionFromOffset","_mouseDownRelativePosition","onDragFinished","initialMousePosition","initialMouseOrthogonalPosition","_sliderOrthogonalMousePosition","initialScrollbarState","clone","toggleClassName","mouseOrthogonalPosition","mouseOrthogonalDelta","Math","abs","platform","getScrollPosition","mousePosition","mouseDelta","getDesiredScrollPositionFromDelta","onDragEnd","onDragStart","_desiredScrollPosition","desiredScrollPosition","writeScrollPosition","setScrollPositionNow","MINIMUM_SLIDER_SIZE","ScrollbarState","arrowSize","scrollbarSize","oppositeScrollbarSize","scrollSize","scrollPosition","_scrollbarSize","round","_oppositeScrollbarSize","_arrowSize","_visibleSize","_scrollSize","_scrollPosition","_computedAvailableSize","_computedIsNeeded","_computedSliderSize","_computedSliderRatio","_computedSliderPosition","_refreshComputedValues","iVisibleSize","iScrollSize","iScrollPosition","_computeValues","computedAvailableSize","max","computedRepresentableSize","computedIsNeeded","computedSliderSize","computedSliderRatio","computedSliderPosition","floor","r","offset","desiredSliderPosition","delta","HorizontalScrollbar","options","scrollDimensions","getScrollDimensions","getCurrentScrollPosition","horizontalHasArrows","horizontal","horizontalScrollbarSize","vertical","verticalScrollbarSize","scrollWidth","scrollLeft","arrowDelta","scrollbarDelta","undefined","onMouseWheel","horizontalSliderSize","sliderSize","sliderPosition","largeSize","smallSize","setBottom","onDidScroll","VerticalScrollbar","verticalHasArrows","scrollHeight","scrollTop","verticalSliderSize","setRight","HIDE_TIMEOUT","SCROLL_WHEEL_SENSITIVITY","SCROLL_WHEEL_SMOOTH_SCROLL_ENABLED","MouseWheelClassifierItem","timestamp","deltaX","deltaY","score","MouseWheelClassifier","_capacity","_memory","_front","_rear","isPhysicalMouseWheel","remainingInfluence","iteration","index","influence","pow","accept","item","_computeScore","min","INSTANCE","AbstractScrollableElement","element","_onScroll","onScroll","event","overflow","_options","resolveOptions","_onDidScroll","fire","scrollbarHost","mouseWheelEvent","_onMouseWheel","_onDragStart","_onDragEnd","_verticalScrollbar","_horizontalScrollbar","useShadows","_leftShadowDomNode","_topShadowDomNode","_topLeftShadowDomNode","_listenOnDomNode","listenOnDomNode","_mouseWheelToDispose","_setListeningToMouseWheel","handleMouseWheel","onmouseover","_onMouseOver","onnonbubblingmouseout","_onMouseOut","_hideTimeout","_isDragging","_mouseIsOver","_revealOnScroll","dispose","getDomNode","getOverviewRulerLayoutInfo","parent","insertBefore","delegateVerticalScrollbarMouseDown","setScrollDimensions","dimensions","updateClassName","newClassName","updateOptions","newOptions","massagedOptions","mouseWheelScrollSensitivity","fastScrollSensitivity","_render","shouldListen","isListening","length","push","passive","_a","classifier","Date","now","flipAxes","shiftConvert","shiftKey","scrollYToX","altKey","futureScrollPosition","getFutureScrollPosition","desiredScrollTop","desiredScrollLeft","validateScrollPosition","canPerformSmoothScroll","mouseWheelSmoothScroll","setScrollPositionSmooth","alwaysConsumeMouseWheel","renderNow","Error","scrollState","enableTop","enableLeft","_scheduleHide","ScrollableElement","callback","update","SmoothScrollableElement","DomScrollableElement","_element","scrollTopChanged","scrollLeftChanged","scanDomNode","clientWidth","clientHeight","result","State","Sizing","__spreadArrays","s","i","il","arguments","k","a","j","jl","defaultStyles","separatorBorder","transparent","ViewItem","container","view","size","disposable","_cachedVisibleSize","_size","cachedVisibleSize","defineProperty","get","set","enumerable","configurable","setVisible","visible","viewMinimumSize","viewMaximumSize","minimumSize","maximumSize","priority","snap","enabled","pointerEvents","layout","layoutContext","layoutContainer","VerticalViewItem","apply","HorizontalViewItem","Split","type","Invisible","Distribute","SplitView","contentSize","proportions","viewItems","sashItems","state","Idle","_onDidSashChange","onDidSashChange","_onDidSashReset","_startSnappingEnabled","_endSnappingEnabled","orientation","inverseAltBehavior","proportionalLayout","el","sashContainer","viewContainer","styles","descriptor","views","forEach","viewDescriptor","sizing","doAddView","reduce","saveProportions","_orthogonalStartSash","sash","_i","sashItem","orthogonalStartSash","_orthogonalEndSash","orthogonalEndSash","startSnappingEnabled","updateSashEnablement","endSnappingEnabled","isTransparent","removeProperty","setProperty","toString","addView","previousSize","indexes","lowPriorityIndexes","filter","highPriorityIndexes","resize","distributeEmptySpace","layoutViews","map","onSashStart","start","alt","_b","body","resetSashDragState","sashDragState","current","snapBefore","snapAfter","sizes","minDelta","Number","NEGATIVE_INFINITY","maxDelta","POSITIVE_INFINITY","isLastSash","viewItem","upIndexes","downIndexes","minDeltaUp","maxDeltaUp","maxDeltaDown","minDeltaDown","minDelta_1","maxDelta_1","snapBeforeIndex","findFirstSnapIndex","snapAfterIndex","halfSize","limitDelta","onSashChange","newDelta","newSizes","viewItemIndex","newMinDelta","newMaxDelta","resizeIndex","onSashEnd","onViewChange","indexOf","relayout","resizeView","Busy","distributeViewSizes","flexibleViewItems","flexibleSize","flexibleViewItems_1","getViewSize","skipLayout","children","viewSize","onChangeDisposable","onDidChange","containerDisposable","removeChild","splice","orientation_1","layoutProvider","getHorizontalSashTop","getSashPosition","getVerticalSashLeft","sash_1","sashEventMapper","startY","currentY","startX","currentX","onStart","onDidStart","onStartDisposable","onChange","onChangeDisposable_1","onEnd","onDidEnd","onEndDisposable","onDidResetDisposable","onDidReset","disposable_1","overloadMinDelta","overloadMaxDelta","highPriorityIndexes_1","index_1","lowPriorityIndexes_1","index_2","upItems","upSizes","downItems","downSizes","snapped","snapView","deltaUp","viewDelta","deltaDown","lowPriorityIndex","emptyDelta","highPriorityIndexes_2","lowPriorityIndexes_2","previous","collapsesDown","expandsDown","reverseViews","reverse","collapsesUp","expandsUp","snappedBefore","snappedAfter","indexes_1","indexes_2"],"mappings":"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","file":"js/chunk-vendors~499e06ab.4e4637fc.js","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { GlobalMouseMoveMonitor, standardMouseMoveMerger } from '../../globalMouseMoveMonitor.js';\r\nimport { Widget } from '../widget.js';\r\nimport { IntervalTimer, TimeoutTimer } from '../../../common/async.js';\r\n/**\r\n * The arrow image size.\r\n */\r\nexport var ARROW_IMG_SIZE = 11;\r\nvar ScrollbarArrow = /** @class */ (function (_super) {\r\n    __extends(ScrollbarArrow, _super);\r\n    function ScrollbarArrow(opts) {\r\n        var _this = _super.call(this) || this;\r\n        _this._onActivate = opts.onActivate;\r\n        _this.bgDomNode = document.createElement('div');\r\n        _this.bgDomNode.className = 'arrow-background';\r\n        _this.bgDomNode.style.position = 'absolute';\r\n        _this.bgDomNode.style.width = opts.bgWidth + 'px';\r\n        _this.bgDomNode.style.height = opts.bgHeight + 'px';\r\n        if (typeof opts.top !== 'undefined') {\r\n            _this.bgDomNode.style.top = '0px';\r\n        }\r\n        if (typeof opts.left !== 'undefined') {\r\n            _this.bgDomNode.style.left = '0px';\r\n        }\r\n        if (typeof opts.bottom !== 'undefined') {\r\n            _this.bgDomNode.style.bottom = '0px';\r\n        }\r\n        if (typeof opts.right !== 'undefined') {\r\n            _this.bgDomNode.style.right = '0px';\r\n        }\r\n        _this.domNode = document.createElement('div');\r\n        _this.domNode.className = opts.className;\r\n        _this.domNode.style.position = 'absolute';\r\n        _this.domNode.style.width = ARROW_IMG_SIZE + 'px';\r\n        _this.domNode.style.height = ARROW_IMG_SIZE + 'px';\r\n        if (typeof opts.top !== 'undefined') {\r\n            _this.domNode.style.top = opts.top + 'px';\r\n        }\r\n        if (typeof opts.left !== 'undefined') {\r\n            _this.domNode.style.left = opts.left + 'px';\r\n        }\r\n        if (typeof opts.bottom !== 'undefined') {\r\n            _this.domNode.style.bottom = opts.bottom + 'px';\r\n        }\r\n        if (typeof opts.right !== 'undefined') {\r\n            _this.domNode.style.right = opts.right + 'px';\r\n        }\r\n        _this._mouseMoveMonitor = _this._register(new GlobalMouseMoveMonitor());\r\n        _this.onmousedown(_this.bgDomNode, function (e) { return _this._arrowMouseDown(e); });\r\n        _this.onmousedown(_this.domNode, function (e) { return _this._arrowMouseDown(e); });\r\n        _this._mousedownRepeatTimer = _this._register(new IntervalTimer());\r\n        _this._mousedownScheduleRepeatTimer = _this._register(new TimeoutTimer());\r\n        return _this;\r\n    }\r\n    ScrollbarArrow.prototype._arrowMouseDown = function (e) {\r\n        var _this = this;\r\n        var scheduleRepeater = function () {\r\n            _this._mousedownRepeatTimer.cancelAndSet(function () { return _this._onActivate(); }, 1000 / 24);\r\n        };\r\n        this._onActivate();\r\n        this._mousedownRepeatTimer.cancel();\r\n        this._mousedownScheduleRepeatTimer.cancelAndSet(scheduleRepeater, 200);\r\n        this._mouseMoveMonitor.startMonitoring(e.target, e.buttons, standardMouseMoveMerger, function (mouseMoveData) {\r\n            /* Intentional empty */\r\n        }, function () {\r\n            _this._mousedownRepeatTimer.cancel();\r\n            _this._mousedownScheduleRepeatTimer.cancel();\r\n        });\r\n        e.preventDefault();\r\n    };\r\n    return ScrollbarArrow;\r\n}(Widget));\r\nexport { ScrollbarArrow };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { TimeoutTimer } from '../../../common/async.js';\r\nimport { Disposable } from '../../../common/lifecycle.js';\r\nvar ScrollbarVisibilityController = /** @class */ (function (_super) {\r\n    __extends(ScrollbarVisibilityController, _super);\r\n    function ScrollbarVisibilityController(visibility, visibleClassName, invisibleClassName) {\r\n        var _this = _super.call(this) || this;\r\n        _this._visibility = visibility;\r\n        _this._visibleClassName = visibleClassName;\r\n        _this._invisibleClassName = invisibleClassName;\r\n        _this._domNode = null;\r\n        _this._isVisible = false;\r\n        _this._isNeeded = false;\r\n        _this._shouldBeVisible = false;\r\n        _this._revealTimer = _this._register(new TimeoutTimer());\r\n        return _this;\r\n    }\r\n    // ----------------- Hide / Reveal\r\n    ScrollbarVisibilityController.prototype.applyVisibilitySetting = function (shouldBeVisible) {\r\n        if (this._visibility === 2 /* Hidden */) {\r\n            return false;\r\n        }\r\n        if (this._visibility === 3 /* Visible */) {\r\n            return true;\r\n        }\r\n        return shouldBeVisible;\r\n    };\r\n    ScrollbarVisibilityController.prototype.setShouldBeVisible = function (rawShouldBeVisible) {\r\n        var shouldBeVisible = this.applyVisibilitySetting(rawShouldBeVisible);\r\n        if (this._shouldBeVisible !== shouldBeVisible) {\r\n            this._shouldBeVisible = shouldBeVisible;\r\n            this.ensureVisibility();\r\n        }\r\n    };\r\n    ScrollbarVisibilityController.prototype.setIsNeeded = function (isNeeded) {\r\n        if (this._isNeeded !== isNeeded) {\r\n            this._isNeeded = isNeeded;\r\n            this.ensureVisibility();\r\n        }\r\n    };\r\n    ScrollbarVisibilityController.prototype.setDomNode = function (domNode) {\r\n        this._domNode = domNode;\r\n        this._domNode.setClassName(this._invisibleClassName);\r\n        // Now that the flags & the dom node are in a consistent state, ensure the Hidden/Visible configuration\r\n        this.setShouldBeVisible(false);\r\n    };\r\n    ScrollbarVisibilityController.prototype.ensureVisibility = function () {\r\n        if (!this._isNeeded) {\r\n            // Nothing to be rendered\r\n            this._hide(false);\r\n            return;\r\n        }\r\n        if (this._shouldBeVisible) {\r\n            this._reveal();\r\n        }\r\n        else {\r\n            this._hide(true);\r\n        }\r\n    };\r\n    ScrollbarVisibilityController.prototype._reveal = function () {\r\n        var _this = this;\r\n        if (this._isVisible) {\r\n            return;\r\n        }\r\n        this._isVisible = true;\r\n        // The CSS animation doesn't play otherwise\r\n        this._revealTimer.setIfNotSet(function () {\r\n            if (_this._domNode) {\r\n                _this._domNode.setClassName(_this._visibleClassName);\r\n            }\r\n        }, 0);\r\n    };\r\n    ScrollbarVisibilityController.prototype._hide = function (withFadeAway) {\r\n        this._revealTimer.cancel();\r\n        if (!this._isVisible) {\r\n            return;\r\n        }\r\n        this._isVisible = false;\r\n        if (this._domNode) {\r\n            this._domNode.setClassName(this._invisibleClassName + (withFadeAway ? ' fade' : ''));\r\n        }\r\n    };\r\n    return ScrollbarVisibilityController;\r\n}(Disposable));\r\nexport { ScrollbarVisibilityController };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport * as dom from '../../dom.js';\r\nimport { createFastDomNode } from '../../fastDomNode.js';\r\nimport { GlobalMouseMoveMonitor, standardMouseMoveMerger } from '../../globalMouseMoveMonitor.js';\r\nimport { ScrollbarArrow } from './scrollbarArrow.js';\r\nimport { ScrollbarVisibilityController } from './scrollbarVisibilityController.js';\r\nimport { Widget } from '../widget.js';\r\nimport * as platform from '../../../common/platform.js';\r\n/**\r\n * The orthogonal distance to the slider at which dragging \"resets\". This implements \"snapping\"\r\n */\r\nvar MOUSE_DRAG_RESET_DISTANCE = 140;\r\nvar AbstractScrollbar = /** @class */ (function (_super) {\r\n    __extends(AbstractScrollbar, _super);\r\n    function AbstractScrollbar(opts) {\r\n        var _this = _super.call(this) || this;\r\n        _this._lazyRender = opts.lazyRender;\r\n        _this._host = opts.host;\r\n        _this._scrollable = opts.scrollable;\r\n        _this._scrollbarState = opts.scrollbarState;\r\n        _this._visibilityController = _this._register(new ScrollbarVisibilityController(opts.visibility, 'visible scrollbar ' + opts.extraScrollbarClassName, 'invisible scrollbar ' + opts.extraScrollbarClassName));\r\n        _this._visibilityController.setIsNeeded(_this._scrollbarState.isNeeded());\r\n        _this._mouseMoveMonitor = _this._register(new GlobalMouseMoveMonitor());\r\n        _this._shouldRender = true;\r\n        _this.domNode = createFastDomNode(document.createElement('div'));\r\n        _this.domNode.setAttribute('role', 'presentation');\r\n        _this.domNode.setAttribute('aria-hidden', 'true');\r\n        _this._visibilityController.setDomNode(_this.domNode);\r\n        _this.domNode.setPosition('absolute');\r\n        _this.onmousedown(_this.domNode.domNode, function (e) { return _this._domNodeMouseDown(e); });\r\n        return _this;\r\n    }\r\n    // ----------------- creation\r\n    /**\r\n     * Creates the dom node for an arrow & adds it to the container\r\n     */\r\n    AbstractScrollbar.prototype._createArrow = function (opts) {\r\n        var arrow = this._register(new ScrollbarArrow(opts));\r\n        this.domNode.domNode.appendChild(arrow.bgDomNode);\r\n        this.domNode.domNode.appendChild(arrow.domNode);\r\n    };\r\n    /**\r\n     * Creates the slider dom node, adds it to the container & hooks up the events\r\n     */\r\n    AbstractScrollbar.prototype._createSlider = function (top, left, width, height) {\r\n        var _this = this;\r\n        this.slider = createFastDomNode(document.createElement('div'));\r\n        this.slider.setClassName('slider');\r\n        this.slider.setPosition('absolute');\r\n        this.slider.setTop(top);\r\n        this.slider.setLeft(left);\r\n        if (typeof width === 'number') {\r\n            this.slider.setWidth(width);\r\n        }\r\n        if (typeof height === 'number') {\r\n            this.slider.setHeight(height);\r\n        }\r\n        this.slider.setLayerHinting(true);\r\n        this.slider.setContain('strict');\r\n        this.domNode.domNode.appendChild(this.slider.domNode);\r\n        this.onmousedown(this.slider.domNode, function (e) {\r\n            if (e.leftButton) {\r\n                e.preventDefault();\r\n                _this._sliderMouseDown(e, function () { });\r\n            }\r\n        });\r\n        this.onclick(this.slider.domNode, function (e) {\r\n            if (e.leftButton) {\r\n                e.stopPropagation();\r\n            }\r\n        });\r\n    };\r\n    // ----------------- Update state\r\n    AbstractScrollbar.prototype._onElementSize = function (visibleSize) {\r\n        if (this._scrollbarState.setVisibleSize(visibleSize)) {\r\n            this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded());\r\n            this._shouldRender = true;\r\n            if (!this._lazyRender) {\r\n                this.render();\r\n            }\r\n        }\r\n        return this._shouldRender;\r\n    };\r\n    AbstractScrollbar.prototype._onElementScrollSize = function (elementScrollSize) {\r\n        if (this._scrollbarState.setScrollSize(elementScrollSize)) {\r\n            this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded());\r\n            this._shouldRender = true;\r\n            if (!this._lazyRender) {\r\n                this.render();\r\n            }\r\n        }\r\n        return this._shouldRender;\r\n    };\r\n    AbstractScrollbar.prototype._onElementScrollPosition = function (elementScrollPosition) {\r\n        if (this._scrollbarState.setScrollPosition(elementScrollPosition)) {\r\n            this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded());\r\n            this._shouldRender = true;\r\n            if (!this._lazyRender) {\r\n                this.render();\r\n            }\r\n        }\r\n        return this._shouldRender;\r\n    };\r\n    // ----------------- rendering\r\n    AbstractScrollbar.prototype.beginReveal = function () {\r\n        this._visibilityController.setShouldBeVisible(true);\r\n    };\r\n    AbstractScrollbar.prototype.beginHide = function () {\r\n        this._visibilityController.setShouldBeVisible(false);\r\n    };\r\n    AbstractScrollbar.prototype.render = function () {\r\n        if (!this._shouldRender) {\r\n            return;\r\n        }\r\n        this._shouldRender = false;\r\n        this._renderDomNode(this._scrollbarState.getRectangleLargeSize(), this._scrollbarState.getRectangleSmallSize());\r\n        this._updateSlider(this._scrollbarState.getSliderSize(), this._scrollbarState.getArrowSize() + this._scrollbarState.getSliderPosition());\r\n    };\r\n    // ----------------- DOM events\r\n    AbstractScrollbar.prototype._domNodeMouseDown = function (e) {\r\n        if (e.target !== this.domNode.domNode) {\r\n            return;\r\n        }\r\n        this._onMouseDown(e);\r\n    };\r\n    AbstractScrollbar.prototype.delegateMouseDown = function (e) {\r\n        var domTop = this.domNode.domNode.getClientRects()[0].top;\r\n        var sliderStart = domTop + this._scrollbarState.getSliderPosition();\r\n        var sliderStop = domTop + this._scrollbarState.getSliderPosition() + this._scrollbarState.getSliderSize();\r\n        var mousePos = this._sliderMousePosition(e);\r\n        if (sliderStart <= mousePos && mousePos <= sliderStop) {\r\n            // Act as if it was a mouse down on the slider\r\n            if (e.leftButton) {\r\n                e.preventDefault();\r\n                this._sliderMouseDown(e, function () { });\r\n            }\r\n        }\r\n        else {\r\n            // Act as if it was a mouse down on the scrollbar\r\n            this._onMouseDown(e);\r\n        }\r\n    };\r\n    AbstractScrollbar.prototype._onMouseDown = function (e) {\r\n        var offsetX;\r\n        var offsetY;\r\n        if (e.target === this.domNode.domNode && typeof e.browserEvent.offsetX === 'number' && typeof e.browserEvent.offsetY === 'number') {\r\n            offsetX = e.browserEvent.offsetX;\r\n            offsetY = e.browserEvent.offsetY;\r\n        }\r\n        else {\r\n            var domNodePosition = dom.getDomNodePagePosition(this.domNode.domNode);\r\n            offsetX = e.posx - domNodePosition.left;\r\n            offsetY = e.posy - domNodePosition.top;\r\n        }\r\n        this._setDesiredScrollPositionNow(this._scrollbarState.getDesiredScrollPositionFromOffset(this._mouseDownRelativePosition(offsetX, offsetY)));\r\n        if (e.leftButton) {\r\n            e.preventDefault();\r\n            this._sliderMouseDown(e, function () { });\r\n        }\r\n    };\r\n    AbstractScrollbar.prototype._sliderMouseDown = function (e, onDragFinished) {\r\n        var _this = this;\r\n        var initialMousePosition = this._sliderMousePosition(e);\r\n        var initialMouseOrthogonalPosition = this._sliderOrthogonalMousePosition(e);\r\n        var initialScrollbarState = this._scrollbarState.clone();\r\n        this.slider.toggleClassName('active', true);\r\n        this._mouseMoveMonitor.startMonitoring(e.target, e.buttons, standardMouseMoveMerger, function (mouseMoveData) {\r\n            var mouseOrthogonalPosition = _this._sliderOrthogonalMousePosition(mouseMoveData);\r\n            var mouseOrthogonalDelta = Math.abs(mouseOrthogonalPosition - initialMouseOrthogonalPosition);\r\n            if (platform.isWindows && mouseOrthogonalDelta > MOUSE_DRAG_RESET_DISTANCE) {\r\n                // The mouse has wondered away from the scrollbar => reset dragging\r\n                _this._setDesiredScrollPositionNow(initialScrollbarState.getScrollPosition());\r\n                return;\r\n            }\r\n            var mousePosition = _this._sliderMousePosition(mouseMoveData);\r\n            var mouseDelta = mousePosition - initialMousePosition;\r\n            _this._setDesiredScrollPositionNow(initialScrollbarState.getDesiredScrollPositionFromDelta(mouseDelta));\r\n        }, function () {\r\n            _this.slider.toggleClassName('active', false);\r\n            _this._host.onDragEnd();\r\n            onDragFinished();\r\n        });\r\n        this._host.onDragStart();\r\n    };\r\n    AbstractScrollbar.prototype._setDesiredScrollPositionNow = function (_desiredScrollPosition) {\r\n        var desiredScrollPosition = {};\r\n        this.writeScrollPosition(desiredScrollPosition, _desiredScrollPosition);\r\n        this._scrollable.setScrollPositionNow(desiredScrollPosition);\r\n    };\r\n    return AbstractScrollbar;\r\n}(Widget));\r\nexport { AbstractScrollbar };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n/**\r\n * The minimal size of the slider (such that it can still be clickable) -- it is artificially enlarged.\r\n */\r\nvar MINIMUM_SLIDER_SIZE = 20;\r\nvar ScrollbarState = /** @class */ (function () {\r\n    function ScrollbarState(arrowSize, scrollbarSize, oppositeScrollbarSize, visibleSize, scrollSize, scrollPosition) {\r\n        this._scrollbarSize = Math.round(scrollbarSize);\r\n        this._oppositeScrollbarSize = Math.round(oppositeScrollbarSize);\r\n        this._arrowSize = Math.round(arrowSize);\r\n        this._visibleSize = visibleSize;\r\n        this._scrollSize = scrollSize;\r\n        this._scrollPosition = scrollPosition;\r\n        this._computedAvailableSize = 0;\r\n        this._computedIsNeeded = false;\r\n        this._computedSliderSize = 0;\r\n        this._computedSliderRatio = 0;\r\n        this._computedSliderPosition = 0;\r\n        this._refreshComputedValues();\r\n    }\r\n    ScrollbarState.prototype.clone = function () {\r\n        return new ScrollbarState(this._arrowSize, this._scrollbarSize, this._oppositeScrollbarSize, this._visibleSize, this._scrollSize, this._scrollPosition);\r\n    };\r\n    ScrollbarState.prototype.setVisibleSize = function (visibleSize) {\r\n        var iVisibleSize = Math.round(visibleSize);\r\n        if (this._visibleSize !== iVisibleSize) {\r\n            this._visibleSize = iVisibleSize;\r\n            this._refreshComputedValues();\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    ScrollbarState.prototype.setScrollSize = function (scrollSize) {\r\n        var iScrollSize = Math.round(scrollSize);\r\n        if (this._scrollSize !== iScrollSize) {\r\n            this._scrollSize = iScrollSize;\r\n            this._refreshComputedValues();\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    ScrollbarState.prototype.setScrollPosition = function (scrollPosition) {\r\n        var iScrollPosition = Math.round(scrollPosition);\r\n        if (this._scrollPosition !== iScrollPosition) {\r\n            this._scrollPosition = iScrollPosition;\r\n            this._refreshComputedValues();\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    ScrollbarState._computeValues = function (oppositeScrollbarSize, arrowSize, visibleSize, scrollSize, scrollPosition) {\r\n        var computedAvailableSize = Math.max(0, visibleSize - oppositeScrollbarSize);\r\n        var computedRepresentableSize = Math.max(0, computedAvailableSize - 2 * arrowSize);\r\n        var computedIsNeeded = (scrollSize > 0 && scrollSize > visibleSize);\r\n        if (!computedIsNeeded) {\r\n            // There is no need for a slider\r\n            return {\r\n                computedAvailableSize: Math.round(computedAvailableSize),\r\n                computedIsNeeded: computedIsNeeded,\r\n                computedSliderSize: Math.round(computedRepresentableSize),\r\n                computedSliderRatio: 0,\r\n                computedSliderPosition: 0,\r\n            };\r\n        }\r\n        // We must artificially increase the size of the slider if needed, since the slider would be too small to grab with the mouse otherwise\r\n        var computedSliderSize = Math.round(Math.max(MINIMUM_SLIDER_SIZE, Math.floor(visibleSize * computedRepresentableSize / scrollSize)));\r\n        // The slider can move from 0 to `computedRepresentableSize` - `computedSliderSize`\r\n        // in the same way `scrollPosition` can move from 0 to `scrollSize` - `visibleSize`.\r\n        var computedSliderRatio = (computedRepresentableSize - computedSliderSize) / (scrollSize - visibleSize);\r\n        var computedSliderPosition = (scrollPosition * computedSliderRatio);\r\n        return {\r\n            computedAvailableSize: Math.round(computedAvailableSize),\r\n            computedIsNeeded: computedIsNeeded,\r\n            computedSliderSize: Math.round(computedSliderSize),\r\n            computedSliderRatio: computedSliderRatio,\r\n            computedSliderPosition: Math.round(computedSliderPosition),\r\n        };\r\n    };\r\n    ScrollbarState.prototype._refreshComputedValues = function () {\r\n        var r = ScrollbarState._computeValues(this._oppositeScrollbarSize, this._arrowSize, this._visibleSize, this._scrollSize, this._scrollPosition);\r\n        this._computedAvailableSize = r.computedAvailableSize;\r\n        this._computedIsNeeded = r.computedIsNeeded;\r\n        this._computedSliderSize = r.computedSliderSize;\r\n        this._computedSliderRatio = r.computedSliderRatio;\r\n        this._computedSliderPosition = r.computedSliderPosition;\r\n    };\r\n    ScrollbarState.prototype.getArrowSize = function () {\r\n        return this._arrowSize;\r\n    };\r\n    ScrollbarState.prototype.getScrollPosition = function () {\r\n        return this._scrollPosition;\r\n    };\r\n    ScrollbarState.prototype.getRectangleLargeSize = function () {\r\n        return this._computedAvailableSize;\r\n    };\r\n    ScrollbarState.prototype.getRectangleSmallSize = function () {\r\n        return this._scrollbarSize;\r\n    };\r\n    ScrollbarState.prototype.isNeeded = function () {\r\n        return this._computedIsNeeded;\r\n    };\r\n    ScrollbarState.prototype.getSliderSize = function () {\r\n        return this._computedSliderSize;\r\n    };\r\n    ScrollbarState.prototype.getSliderPosition = function () {\r\n        return this._computedSliderPosition;\r\n    };\r\n    /**\r\n     * Compute a desired `scrollPosition` such that `offset` ends up in the center of the slider.\r\n     * `offset` is based on the same coordinate system as the `sliderPosition`.\r\n     */\r\n    ScrollbarState.prototype.getDesiredScrollPositionFromOffset = function (offset) {\r\n        if (!this._computedIsNeeded) {\r\n            // no need for a slider\r\n            return 0;\r\n        }\r\n        var desiredSliderPosition = offset - this._arrowSize - this._computedSliderSize / 2;\r\n        return Math.round(desiredSliderPosition / this._computedSliderRatio);\r\n    };\r\n    /**\r\n     * Compute a desired `scrollPosition` such that the slider moves by `delta`.\r\n     */\r\n    ScrollbarState.prototype.getDesiredScrollPositionFromDelta = function (delta) {\r\n        if (!this._computedIsNeeded) {\r\n            // no need for a slider\r\n            return 0;\r\n        }\r\n        var desiredSliderPosition = this._computedSliderPosition + delta;\r\n        return Math.round(desiredSliderPosition / this._computedSliderRatio);\r\n    };\r\n    return ScrollbarState;\r\n}());\r\nexport { ScrollbarState };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { StandardWheelEvent } from '../../mouseEvent.js';\r\nimport { AbstractScrollbar } from './abstractScrollbar.js';\r\nimport { ARROW_IMG_SIZE } from './scrollbarArrow.js';\r\nimport { ScrollbarState } from './scrollbarState.js';\r\nvar HorizontalScrollbar = /** @class */ (function (_super) {\r\n    __extends(HorizontalScrollbar, _super);\r\n    function HorizontalScrollbar(scrollable, options, host) {\r\n        var _this = this;\r\n        var scrollDimensions = scrollable.getScrollDimensions();\r\n        var scrollPosition = scrollable.getCurrentScrollPosition();\r\n        _this = _super.call(this, {\r\n            lazyRender: options.lazyRender,\r\n            host: host,\r\n            scrollbarState: new ScrollbarState((options.horizontalHasArrows ? options.arrowSize : 0), (options.horizontal === 2 /* Hidden */ ? 0 : options.horizontalScrollbarSize), (options.vertical === 2 /* Hidden */ ? 0 : options.verticalScrollbarSize), scrollDimensions.width, scrollDimensions.scrollWidth, scrollPosition.scrollLeft),\r\n            visibility: options.horizontal,\r\n            extraScrollbarClassName: 'horizontal',\r\n            scrollable: scrollable\r\n        }) || this;\r\n        if (options.horizontalHasArrows) {\r\n            var arrowDelta = (options.arrowSize - ARROW_IMG_SIZE) / 2;\r\n            var scrollbarDelta = (options.horizontalScrollbarSize - ARROW_IMG_SIZE) / 2;\r\n            _this._createArrow({\r\n                className: 'left-arrow',\r\n                top: scrollbarDelta,\r\n                left: arrowDelta,\r\n                bottom: undefined,\r\n                right: undefined,\r\n                bgWidth: options.arrowSize,\r\n                bgHeight: options.horizontalScrollbarSize,\r\n                onActivate: function () { return _this._host.onMouseWheel(new StandardWheelEvent(null, 1, 0)); },\r\n            });\r\n            _this._createArrow({\r\n                className: 'right-arrow',\r\n                top: scrollbarDelta,\r\n                left: undefined,\r\n                bottom: undefined,\r\n                right: arrowDelta,\r\n                bgWidth: options.arrowSize,\r\n                bgHeight: options.horizontalScrollbarSize,\r\n                onActivate: function () { return _this._host.onMouseWheel(new StandardWheelEvent(null, -1, 0)); },\r\n            });\r\n        }\r\n        _this._createSlider(Math.floor((options.horizontalScrollbarSize - options.horizontalSliderSize) / 2), 0, undefined, options.horizontalSliderSize);\r\n        return _this;\r\n    }\r\n    HorizontalScrollbar.prototype._updateSlider = function (sliderSize, sliderPosition) {\r\n        this.slider.setWidth(sliderSize);\r\n        this.slider.setLeft(sliderPosition);\r\n    };\r\n    HorizontalScrollbar.prototype._renderDomNode = function (largeSize, smallSize) {\r\n        this.domNode.setWidth(largeSize);\r\n        this.domNode.setHeight(smallSize);\r\n        this.domNode.setLeft(0);\r\n        this.domNode.setBottom(0);\r\n    };\r\n    HorizontalScrollbar.prototype.onDidScroll = function (e) {\r\n        this._shouldRender = this._onElementScrollSize(e.scrollWidth) || this._shouldRender;\r\n        this._shouldRender = this._onElementScrollPosition(e.scrollLeft) || this._shouldRender;\r\n        this._shouldRender = this._onElementSize(e.width) || this._shouldRender;\r\n        return this._shouldRender;\r\n    };\r\n    HorizontalScrollbar.prototype._mouseDownRelativePosition = function (offsetX, offsetY) {\r\n        return offsetX;\r\n    };\r\n    HorizontalScrollbar.prototype._sliderMousePosition = function (e) {\r\n        return e.posx;\r\n    };\r\n    HorizontalScrollbar.prototype._sliderOrthogonalMousePosition = function (e) {\r\n        return e.posy;\r\n    };\r\n    HorizontalScrollbar.prototype.writeScrollPosition = function (target, scrollPosition) {\r\n        target.scrollLeft = scrollPosition;\r\n    };\r\n    return HorizontalScrollbar;\r\n}(AbstractScrollbar));\r\nexport { HorizontalScrollbar };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { StandardWheelEvent } from '../../mouseEvent.js';\r\nimport { AbstractScrollbar } from './abstractScrollbar.js';\r\nimport { ARROW_IMG_SIZE } from './scrollbarArrow.js';\r\nimport { ScrollbarState } from './scrollbarState.js';\r\nvar VerticalScrollbar = /** @class */ (function (_super) {\r\n    __extends(VerticalScrollbar, _super);\r\n    function VerticalScrollbar(scrollable, options, host) {\r\n        var _this = this;\r\n        var scrollDimensions = scrollable.getScrollDimensions();\r\n        var scrollPosition = scrollable.getCurrentScrollPosition();\r\n        _this = _super.call(this, {\r\n            lazyRender: options.lazyRender,\r\n            host: host,\r\n            scrollbarState: new ScrollbarState((options.verticalHasArrows ? options.arrowSize : 0), (options.vertical === 2 /* Hidden */ ? 0 : options.verticalScrollbarSize), \r\n            // give priority to vertical scroll bar over horizontal and let it scroll all the way to the bottom\r\n            0, scrollDimensions.height, scrollDimensions.scrollHeight, scrollPosition.scrollTop),\r\n            visibility: options.vertical,\r\n            extraScrollbarClassName: 'vertical',\r\n            scrollable: scrollable\r\n        }) || this;\r\n        if (options.verticalHasArrows) {\r\n            var arrowDelta = (options.arrowSize - ARROW_IMG_SIZE) / 2;\r\n            var scrollbarDelta = (options.verticalScrollbarSize - ARROW_IMG_SIZE) / 2;\r\n            _this._createArrow({\r\n                className: 'up-arrow',\r\n                top: arrowDelta,\r\n                left: scrollbarDelta,\r\n                bottom: undefined,\r\n                right: undefined,\r\n                bgWidth: options.verticalScrollbarSize,\r\n                bgHeight: options.arrowSize,\r\n                onActivate: function () { return _this._host.onMouseWheel(new StandardWheelEvent(null, 0, 1)); },\r\n            });\r\n            _this._createArrow({\r\n                className: 'down-arrow',\r\n                top: undefined,\r\n                left: scrollbarDelta,\r\n                bottom: arrowDelta,\r\n                right: undefined,\r\n                bgWidth: options.verticalScrollbarSize,\r\n                bgHeight: options.arrowSize,\r\n                onActivate: function () { return _this._host.onMouseWheel(new StandardWheelEvent(null, 0, -1)); },\r\n            });\r\n        }\r\n        _this._createSlider(0, Math.floor((options.verticalScrollbarSize - options.verticalSliderSize) / 2), options.verticalSliderSize, undefined);\r\n        return _this;\r\n    }\r\n    VerticalScrollbar.prototype._updateSlider = function (sliderSize, sliderPosition) {\r\n        this.slider.setHeight(sliderSize);\r\n        this.slider.setTop(sliderPosition);\r\n    };\r\n    VerticalScrollbar.prototype._renderDomNode = function (largeSize, smallSize) {\r\n        this.domNode.setWidth(smallSize);\r\n        this.domNode.setHeight(largeSize);\r\n        this.domNode.setRight(0);\r\n        this.domNode.setTop(0);\r\n    };\r\n    VerticalScrollbar.prototype.onDidScroll = function (e) {\r\n        this._shouldRender = this._onElementScrollSize(e.scrollHeight) || this._shouldRender;\r\n        this._shouldRender = this._onElementScrollPosition(e.scrollTop) || this._shouldRender;\r\n        this._shouldRender = this._onElementSize(e.height) || this._shouldRender;\r\n        return this._shouldRender;\r\n    };\r\n    VerticalScrollbar.prototype._mouseDownRelativePosition = function (offsetX, offsetY) {\r\n        return offsetY;\r\n    };\r\n    VerticalScrollbar.prototype._sliderMousePosition = function (e) {\r\n        return e.posy;\r\n    };\r\n    VerticalScrollbar.prototype._sliderOrthogonalMousePosition = function (e) {\r\n        return e.posx;\r\n    };\r\n    VerticalScrollbar.prototype.writeScrollPosition = function (target, scrollPosition) {\r\n        target.scrollTop = scrollPosition;\r\n    };\r\n    return VerticalScrollbar;\r\n}(AbstractScrollbar));\r\nexport { VerticalScrollbar };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport './media/scrollbars.css';\r\nimport { isEdgeOrIE } from '../../browser.js';\r\nimport * as dom from '../../dom.js';\r\nimport { createFastDomNode } from '../../fastDomNode.js';\r\nimport { StandardWheelEvent } from '../../mouseEvent.js';\r\nimport { HorizontalScrollbar } from './horizontalScrollbar.js';\r\nimport { VerticalScrollbar } from './verticalScrollbar.js';\r\nimport { Widget } from '../widget.js';\r\nimport { TimeoutTimer } from '../../../common/async.js';\r\nimport { Emitter } from '../../../common/event.js';\r\nimport { dispose } from '../../../common/lifecycle.js';\r\nimport * as platform from '../../../common/platform.js';\r\nimport { Scrollable } from '../../../common/scrollable.js';\r\nvar HIDE_TIMEOUT = 500;\r\nvar SCROLL_WHEEL_SENSITIVITY = 50;\r\nvar SCROLL_WHEEL_SMOOTH_SCROLL_ENABLED = true;\r\nvar MouseWheelClassifierItem = /** @class */ (function () {\r\n    function MouseWheelClassifierItem(timestamp, deltaX, deltaY) {\r\n        this.timestamp = timestamp;\r\n        this.deltaX = deltaX;\r\n        this.deltaY = deltaY;\r\n        this.score = 0;\r\n    }\r\n    return MouseWheelClassifierItem;\r\n}());\r\nvar MouseWheelClassifier = /** @class */ (function () {\r\n    function MouseWheelClassifier() {\r\n        this._capacity = 5;\r\n        this._memory = [];\r\n        this._front = -1;\r\n        this._rear = -1;\r\n    }\r\n    MouseWheelClassifier.prototype.isPhysicalMouseWheel = function () {\r\n        if (this._front === -1 && this._rear === -1) {\r\n            // no elements\r\n            return false;\r\n        }\r\n        // 0.5 * last + 0.25 * 2nd last + 0.125 * 3rd last + ...\r\n        var remainingInfluence = 1;\r\n        var score = 0;\r\n        var iteration = 1;\r\n        var index = this._rear;\r\n        do {\r\n            var influence = (index === this._front ? remainingInfluence : Math.pow(2, -iteration));\r\n            remainingInfluence -= influence;\r\n            score += this._memory[index].score * influence;\r\n            if (index === this._front) {\r\n                break;\r\n            }\r\n            index = (this._capacity + index - 1) % this._capacity;\r\n            iteration++;\r\n        } while (true);\r\n        return (score <= 0.5);\r\n    };\r\n    MouseWheelClassifier.prototype.accept = function (timestamp, deltaX, deltaY) {\r\n        var item = new MouseWheelClassifierItem(timestamp, deltaX, deltaY);\r\n        item.score = this._computeScore(item);\r\n        if (this._front === -1 && this._rear === -1) {\r\n            this._memory[0] = item;\r\n            this._front = 0;\r\n            this._rear = 0;\r\n        }\r\n        else {\r\n            this._rear = (this._rear + 1) % this._capacity;\r\n            if (this._rear === this._front) {\r\n                // Drop oldest\r\n                this._front = (this._front + 1) % this._capacity;\r\n            }\r\n            this._memory[this._rear] = item;\r\n        }\r\n    };\r\n    /**\r\n     * A score between 0 and 1 for `item`.\r\n     *  - a score towards 0 indicates that the source appears to be a physical mouse wheel\r\n     *  - a score towards 1 indicates that the source appears to be a touchpad or magic mouse, etc.\r\n     */\r\n    MouseWheelClassifier.prototype._computeScore = function (item) {\r\n        if (Math.abs(item.deltaX) > 0 && Math.abs(item.deltaY) > 0) {\r\n            // both axes exercised => definitely not a physical mouse wheel\r\n            return 1;\r\n        }\r\n        var score = 0.5;\r\n        var prev = (this._front === -1 && this._rear === -1 ? null : this._memory[this._rear]);\r\n        if (prev) {\r\n            // const deltaT = item.timestamp - prev.timestamp;\r\n            // if (deltaT < 1000 / 30) {\r\n            // \t// sooner than X times per second => indicator that this is not a physical mouse wheel\r\n            // \tscore += 0.25;\r\n            // }\r\n            // if (item.deltaX === prev.deltaX && item.deltaY === prev.deltaY) {\r\n            // \t// equal amplitude => indicator that this is a physical mouse wheel\r\n            // \tscore -= 0.25;\r\n            // }\r\n        }\r\n        if (Math.abs(item.deltaX - Math.round(item.deltaX)) > 0 || Math.abs(item.deltaY - Math.round(item.deltaY)) > 0) {\r\n            // non-integer deltas => indicator that this is not a physical mouse wheel\r\n            score += 0.25;\r\n        }\r\n        return Math.min(Math.max(score, 0), 1);\r\n    };\r\n    MouseWheelClassifier.INSTANCE = new MouseWheelClassifier();\r\n    return MouseWheelClassifier;\r\n}());\r\nexport { MouseWheelClassifier };\r\nvar AbstractScrollableElement = /** @class */ (function (_super) {\r\n    __extends(AbstractScrollableElement, _super);\r\n    function AbstractScrollableElement(element, options, scrollable) {\r\n        var _this = _super.call(this) || this;\r\n        _this._onScroll = _this._register(new Emitter());\r\n        _this.onScroll = _this._onScroll.event;\r\n        element.style.overflow = 'hidden';\r\n        _this._options = resolveOptions(options);\r\n        _this._scrollable = scrollable;\r\n        _this._register(_this._scrollable.onScroll(function (e) {\r\n            _this._onDidScroll(e);\r\n            _this._onScroll.fire(e);\r\n        }));\r\n        var scrollbarHost = {\r\n            onMouseWheel: function (mouseWheelEvent) { return _this._onMouseWheel(mouseWheelEvent); },\r\n            onDragStart: function () { return _this._onDragStart(); },\r\n            onDragEnd: function () { return _this._onDragEnd(); },\r\n        };\r\n        _this._verticalScrollbar = _this._register(new VerticalScrollbar(_this._scrollable, _this._options, scrollbarHost));\r\n        _this._horizontalScrollbar = _this._register(new HorizontalScrollbar(_this._scrollable, _this._options, scrollbarHost));\r\n        _this._domNode = document.createElement('div');\r\n        _this._domNode.className = 'monaco-scrollable-element ' + _this._options.className;\r\n        _this._domNode.setAttribute('role', 'presentation');\r\n        _this._domNode.style.position = 'relative';\r\n        _this._domNode.style.overflow = 'hidden';\r\n        _this._domNode.appendChild(element);\r\n        _this._domNode.appendChild(_this._horizontalScrollbar.domNode.domNode);\r\n        _this._domNode.appendChild(_this._verticalScrollbar.domNode.domNode);\r\n        if (_this._options.useShadows) {\r\n            _this._leftShadowDomNode = createFastDomNode(document.createElement('div'));\r\n            _this._leftShadowDomNode.setClassName('shadow');\r\n            _this._domNode.appendChild(_this._leftShadowDomNode.domNode);\r\n            _this._topShadowDomNode = createFastDomNode(document.createElement('div'));\r\n            _this._topShadowDomNode.setClassName('shadow');\r\n            _this._domNode.appendChild(_this._topShadowDomNode.domNode);\r\n            _this._topLeftShadowDomNode = createFastDomNode(document.createElement('div'));\r\n            _this._topLeftShadowDomNode.setClassName('shadow top-left-corner');\r\n            _this._domNode.appendChild(_this._topLeftShadowDomNode.domNode);\r\n        }\r\n        else {\r\n            _this._leftShadowDomNode = null;\r\n            _this._topShadowDomNode = null;\r\n            _this._topLeftShadowDomNode = null;\r\n        }\r\n        _this._listenOnDomNode = _this._options.listenOnDomNode || _this._domNode;\r\n        _this._mouseWheelToDispose = [];\r\n        _this._setListeningToMouseWheel(_this._options.handleMouseWheel);\r\n        _this.onmouseover(_this._listenOnDomNode, function (e) { return _this._onMouseOver(e); });\r\n        _this.onnonbubblingmouseout(_this._listenOnDomNode, function (e) { return _this._onMouseOut(e); });\r\n        _this._hideTimeout = _this._register(new TimeoutTimer());\r\n        _this._isDragging = false;\r\n        _this._mouseIsOver = false;\r\n        _this._shouldRender = true;\r\n        _this._revealOnScroll = true;\r\n        return _this;\r\n    }\r\n    AbstractScrollableElement.prototype.dispose = function () {\r\n        this._mouseWheelToDispose = dispose(this._mouseWheelToDispose);\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    /**\r\n     * Get the generated 'scrollable' dom node\r\n     */\r\n    AbstractScrollableElement.prototype.getDomNode = function () {\r\n        return this._domNode;\r\n    };\r\n    AbstractScrollableElement.prototype.getOverviewRulerLayoutInfo = function () {\r\n        return {\r\n            parent: this._domNode,\r\n            insertBefore: this._verticalScrollbar.domNode.domNode,\r\n        };\r\n    };\r\n    /**\r\n     * Delegate a mouse down event to the vertical scrollbar.\r\n     * This is to help with clicking somewhere else and having the scrollbar react.\r\n     */\r\n    AbstractScrollableElement.prototype.delegateVerticalScrollbarMouseDown = function (browserEvent) {\r\n        this._verticalScrollbar.delegateMouseDown(browserEvent);\r\n    };\r\n    AbstractScrollableElement.prototype.getScrollDimensions = function () {\r\n        return this._scrollable.getScrollDimensions();\r\n    };\r\n    AbstractScrollableElement.prototype.setScrollDimensions = function (dimensions) {\r\n        this._scrollable.setScrollDimensions(dimensions);\r\n    };\r\n    /**\r\n     * Update the class name of the scrollable element.\r\n     */\r\n    AbstractScrollableElement.prototype.updateClassName = function (newClassName) {\r\n        this._options.className = newClassName;\r\n        // Defaults are different on Macs\r\n        if (platform.isMacintosh) {\r\n            this._options.className += ' mac';\r\n        }\r\n        this._domNode.className = 'monaco-scrollable-element ' + this._options.className;\r\n    };\r\n    /**\r\n     * Update configuration options for the scrollbar.\r\n     * Really this is Editor.IEditorScrollbarOptions, but base shouldn't\r\n     * depend on Editor.\r\n     */\r\n    AbstractScrollableElement.prototype.updateOptions = function (newOptions) {\r\n        var massagedOptions = resolveOptions(newOptions);\r\n        this._options.handleMouseWheel = massagedOptions.handleMouseWheel;\r\n        this._options.mouseWheelScrollSensitivity = massagedOptions.mouseWheelScrollSensitivity;\r\n        this._options.fastScrollSensitivity = massagedOptions.fastScrollSensitivity;\r\n        this._setListeningToMouseWheel(this._options.handleMouseWheel);\r\n        if (!this._options.lazyRender) {\r\n            this._render();\r\n        }\r\n    };\r\n    // -------------------- mouse wheel scrolling --------------------\r\n    AbstractScrollableElement.prototype._setListeningToMouseWheel = function (shouldListen) {\r\n        var _this = this;\r\n        var isListening = (this._mouseWheelToDispose.length > 0);\r\n        if (isListening === shouldListen) {\r\n            // No change\r\n            return;\r\n        }\r\n        // Stop listening (if necessary)\r\n        this._mouseWheelToDispose = dispose(this._mouseWheelToDispose);\r\n        // Start listening (if necessary)\r\n        if (shouldListen) {\r\n            var onMouseWheel = function (browserEvent) {\r\n                _this._onMouseWheel(new StandardWheelEvent(browserEvent));\r\n            };\r\n            this._mouseWheelToDispose.push(dom.addDisposableListener(this._listenOnDomNode, isEdgeOrIE ? 'mousewheel' : 'wheel', onMouseWheel, { passive: false }));\r\n        }\r\n    };\r\n    AbstractScrollableElement.prototype._onMouseWheel = function (e) {\r\n        var _a;\r\n        var classifier = MouseWheelClassifier.INSTANCE;\r\n        if (SCROLL_WHEEL_SMOOTH_SCROLL_ENABLED) {\r\n            classifier.accept(Date.now(), e.deltaX, e.deltaY);\r\n        }\r\n        // console.log(`${Date.now()}, ${e.deltaY}, ${e.deltaX}`);\r\n        if (e.deltaY || e.deltaX) {\r\n            var deltaY = e.deltaY * this._options.mouseWheelScrollSensitivity;\r\n            var deltaX = e.deltaX * this._options.mouseWheelScrollSensitivity;\r\n            if (this._options.flipAxes) {\r\n                _a = [deltaX, deltaY], deltaY = _a[0], deltaX = _a[1];\r\n            }\r\n            // Convert vertical scrolling to horizontal if shift is held, this\r\n            // is handled at a higher level on Mac\r\n            var shiftConvert = !platform.isMacintosh && e.browserEvent && e.browserEvent.shiftKey;\r\n            if ((this._options.scrollYToX || shiftConvert) && !deltaX) {\r\n                deltaX = deltaY;\r\n                deltaY = 0;\r\n            }\r\n            if (e.browserEvent && e.browserEvent.altKey) {\r\n                // fastScrolling\r\n                deltaX = deltaX * this._options.fastScrollSensitivity;\r\n                deltaY = deltaY * this._options.fastScrollSensitivity;\r\n            }\r\n            var futureScrollPosition = this._scrollable.getFutureScrollPosition();\r\n            var desiredScrollPosition = {};\r\n            if (deltaY) {\r\n                var desiredScrollTop = futureScrollPosition.scrollTop - SCROLL_WHEEL_SENSITIVITY * deltaY;\r\n                this._verticalScrollbar.writeScrollPosition(desiredScrollPosition, desiredScrollTop);\r\n            }\r\n            if (deltaX) {\r\n                var desiredScrollLeft = futureScrollPosition.scrollLeft - SCROLL_WHEEL_SENSITIVITY * deltaX;\r\n                this._horizontalScrollbar.writeScrollPosition(desiredScrollPosition, desiredScrollLeft);\r\n            }\r\n            // Check that we are scrolling towards a location which is valid\r\n            desiredScrollPosition = this._scrollable.validateScrollPosition(desiredScrollPosition);\r\n            if (futureScrollPosition.scrollLeft !== desiredScrollPosition.scrollLeft || futureScrollPosition.scrollTop !== desiredScrollPosition.scrollTop) {\r\n                var canPerformSmoothScroll = (SCROLL_WHEEL_SMOOTH_SCROLL_ENABLED\r\n                    && this._options.mouseWheelSmoothScroll\r\n                    && classifier.isPhysicalMouseWheel());\r\n                if (canPerformSmoothScroll) {\r\n                    this._scrollable.setScrollPositionSmooth(desiredScrollPosition);\r\n                }\r\n                else {\r\n                    this._scrollable.setScrollPositionNow(desiredScrollPosition);\r\n                }\r\n                this._shouldRender = true;\r\n            }\r\n        }\r\n        if (this._options.alwaysConsumeMouseWheel || this._shouldRender) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n        }\r\n    };\r\n    AbstractScrollableElement.prototype._onDidScroll = function (e) {\r\n        this._shouldRender = this._horizontalScrollbar.onDidScroll(e) || this._shouldRender;\r\n        this._shouldRender = this._verticalScrollbar.onDidScroll(e) || this._shouldRender;\r\n        if (this._options.useShadows) {\r\n            this._shouldRender = true;\r\n        }\r\n        if (this._revealOnScroll) {\r\n            this._reveal();\r\n        }\r\n        if (!this._options.lazyRender) {\r\n            this._render();\r\n        }\r\n    };\r\n    /**\r\n     * Render / mutate the DOM now.\r\n     * Should be used together with the ctor option `lazyRender`.\r\n     */\r\n    AbstractScrollableElement.prototype.renderNow = function () {\r\n        if (!this._options.lazyRender) {\r\n            throw new Error('Please use `lazyRender` together with `renderNow`!');\r\n        }\r\n        this._render();\r\n    };\r\n    AbstractScrollableElement.prototype._render = function () {\r\n        if (!this._shouldRender) {\r\n            return;\r\n        }\r\n        this._shouldRender = false;\r\n        this._horizontalScrollbar.render();\r\n        this._verticalScrollbar.render();\r\n        if (this._options.useShadows) {\r\n            var scrollState = this._scrollable.getCurrentScrollPosition();\r\n            var enableTop = scrollState.scrollTop > 0;\r\n            var enableLeft = scrollState.scrollLeft > 0;\r\n            this._leftShadowDomNode.setClassName('shadow' + (enableLeft ? ' left' : ''));\r\n            this._topShadowDomNode.setClassName('shadow' + (enableTop ? ' top' : ''));\r\n            this._topLeftShadowDomNode.setClassName('shadow top-left-corner' + (enableTop ? ' top' : '') + (enableLeft ? ' left' : ''));\r\n        }\r\n    };\r\n    // -------------------- fade in / fade out --------------------\r\n    AbstractScrollableElement.prototype._onDragStart = function () {\r\n        this._isDragging = true;\r\n        this._reveal();\r\n    };\r\n    AbstractScrollableElement.prototype._onDragEnd = function () {\r\n        this._isDragging = false;\r\n        this._hide();\r\n    };\r\n    AbstractScrollableElement.prototype._onMouseOut = function (e) {\r\n        this._mouseIsOver = false;\r\n        this._hide();\r\n    };\r\n    AbstractScrollableElement.prototype._onMouseOver = function (e) {\r\n        this._mouseIsOver = true;\r\n        this._reveal();\r\n    };\r\n    AbstractScrollableElement.prototype._reveal = function () {\r\n        this._verticalScrollbar.beginReveal();\r\n        this._horizontalScrollbar.beginReveal();\r\n        this._scheduleHide();\r\n    };\r\n    AbstractScrollableElement.prototype._hide = function () {\r\n        if (!this._mouseIsOver && !this._isDragging) {\r\n            this._verticalScrollbar.beginHide();\r\n            this._horizontalScrollbar.beginHide();\r\n        }\r\n    };\r\n    AbstractScrollableElement.prototype._scheduleHide = function () {\r\n        var _this = this;\r\n        if (!this._mouseIsOver && !this._isDragging) {\r\n            this._hideTimeout.cancelAndSet(function () { return _this._hide(); }, HIDE_TIMEOUT);\r\n        }\r\n    };\r\n    return AbstractScrollableElement;\r\n}(Widget));\r\nexport { AbstractScrollableElement };\r\nvar ScrollableElement = /** @class */ (function (_super) {\r\n    __extends(ScrollableElement, _super);\r\n    function ScrollableElement(element, options) {\r\n        var _this = this;\r\n        options = options || {};\r\n        options.mouseWheelSmoothScroll = false;\r\n        var scrollable = new Scrollable(0, function (callback) { return dom.scheduleAtNextAnimationFrame(callback); });\r\n        _this = _super.call(this, element, options, scrollable) || this;\r\n        _this._register(scrollable);\r\n        return _this;\r\n    }\r\n    ScrollableElement.prototype.setScrollPosition = function (update) {\r\n        this._scrollable.setScrollPositionNow(update);\r\n    };\r\n    ScrollableElement.prototype.getScrollPosition = function () {\r\n        return this._scrollable.getCurrentScrollPosition();\r\n    };\r\n    return ScrollableElement;\r\n}(AbstractScrollableElement));\r\nexport { ScrollableElement };\r\nvar SmoothScrollableElement = /** @class */ (function (_super) {\r\n    __extends(SmoothScrollableElement, _super);\r\n    function SmoothScrollableElement(element, options, scrollable) {\r\n        return _super.call(this, element, options, scrollable) || this;\r\n    }\r\n    return SmoothScrollableElement;\r\n}(AbstractScrollableElement));\r\nexport { SmoothScrollableElement };\r\nvar DomScrollableElement = /** @class */ (function (_super) {\r\n    __extends(DomScrollableElement, _super);\r\n    function DomScrollableElement(element, options) {\r\n        var _this = _super.call(this, element, options) || this;\r\n        _this._element = element;\r\n        _this.onScroll(function (e) {\r\n            if (e.scrollTopChanged) {\r\n                _this._element.scrollTop = e.scrollTop;\r\n            }\r\n            if (e.scrollLeftChanged) {\r\n                _this._element.scrollLeft = e.scrollLeft;\r\n            }\r\n        });\r\n        _this.scanDomNode();\r\n        return _this;\r\n    }\r\n    DomScrollableElement.prototype.scanDomNode = function () {\r\n        // width, scrollLeft, scrollWidth, height, scrollTop, scrollHeight\r\n        this.setScrollDimensions({\r\n            width: this._element.clientWidth,\r\n            scrollWidth: this._element.scrollWidth,\r\n            height: this._element.clientHeight,\r\n            scrollHeight: this._element.scrollHeight\r\n        });\r\n        this.setScrollPosition({\r\n            scrollLeft: this._element.scrollLeft,\r\n            scrollTop: this._element.scrollTop,\r\n        });\r\n    };\r\n    return DomScrollableElement;\r\n}(ScrollableElement));\r\nexport { DomScrollableElement };\r\nfunction resolveOptions(opts) {\r\n    var result = {\r\n        lazyRender: (typeof opts.lazyRender !== 'undefined' ? opts.lazyRender : false),\r\n        className: (typeof opts.className !== 'undefined' ? opts.className : ''),\r\n        useShadows: (typeof opts.useShadows !== 'undefined' ? opts.useShadows : true),\r\n        handleMouseWheel: (typeof opts.handleMouseWheel !== 'undefined' ? opts.handleMouseWheel : true),\r\n        flipAxes: (typeof opts.flipAxes !== 'undefined' ? opts.flipAxes : false),\r\n        alwaysConsumeMouseWheel: (typeof opts.alwaysConsumeMouseWheel !== 'undefined' ? opts.alwaysConsumeMouseWheel : false),\r\n        scrollYToX: (typeof opts.scrollYToX !== 'undefined' ? opts.scrollYToX : false),\r\n        mouseWheelScrollSensitivity: (typeof opts.mouseWheelScrollSensitivity !== 'undefined' ? opts.mouseWheelScrollSensitivity : 1),\r\n        fastScrollSensitivity: (typeof opts.fastScrollSensitivity !== 'undefined' ? opts.fastScrollSensitivity : 5),\r\n        mouseWheelSmoothScroll: (typeof opts.mouseWheelSmoothScroll !== 'undefined' ? opts.mouseWheelSmoothScroll : true),\r\n        arrowSize: (typeof opts.arrowSize !== 'undefined' ? opts.arrowSize : 11),\r\n        listenOnDomNode: (typeof opts.listenOnDomNode !== 'undefined' ? opts.listenOnDomNode : null),\r\n        horizontal: (typeof opts.horizontal !== 'undefined' ? opts.horizontal : 1 /* Auto */),\r\n        horizontalScrollbarSize: (typeof opts.horizontalScrollbarSize !== 'undefined' ? opts.horizontalScrollbarSize : 10),\r\n        horizontalSliderSize: (typeof opts.horizontalSliderSize !== 'undefined' ? opts.horizontalSliderSize : 0),\r\n        horizontalHasArrows: (typeof opts.horizontalHasArrows !== 'undefined' ? opts.horizontalHasArrows : false),\r\n        vertical: (typeof opts.vertical !== 'undefined' ? opts.vertical : 1 /* Auto */),\r\n        verticalScrollbarSize: (typeof opts.verticalScrollbarSize !== 'undefined' ? opts.verticalScrollbarSize : 10),\r\n        verticalHasArrows: (typeof opts.verticalHasArrows !== 'undefined' ? opts.verticalHasArrows : false),\r\n        verticalSliderSize: (typeof opts.verticalSliderSize !== 'undefined' ? opts.verticalSliderSize : 0)\r\n    };\r\n    result.horizontalSliderSize = (typeof opts.horizontalSliderSize !== 'undefined' ? opts.horizontalSliderSize : result.horizontalScrollbarSize);\r\n    result.verticalSliderSize = (typeof opts.verticalSliderSize !== 'undefined' ? opts.verticalSliderSize : result.verticalScrollbarSize);\r\n    // Defaults are different on Macs\r\n    if (platform.isMacintosh) {\r\n        result.className += ' mac';\r\n    }\r\n    return result;\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nimport './splitview.css';\r\nimport { toDisposable, Disposable, combinedDisposable } from '../../../common/lifecycle.js';\r\nimport { Event, Emitter } from '../../../common/event.js';\r\nimport * as types from '../../../common/types.js';\r\nimport * as dom from '../../dom.js';\r\nimport { clamp } from '../../../common/numbers.js';\r\nimport { range, firstIndex, pushToStart, pushToEnd } from '../../../common/arrays.js';\r\nimport { Sash } from '../sash/sash.js';\r\nimport { Color } from '../../../common/color.js';\r\nimport { domEvent } from '../../event.js';\r\nvar defaultStyles = {\r\n    separatorBorder: Color.transparent\r\n};\r\nvar ViewItem = /** @class */ (function () {\r\n    function ViewItem(container, view, size, disposable) {\r\n        this.container = container;\r\n        this.view = view;\r\n        this.disposable = disposable;\r\n        this._cachedVisibleSize = undefined;\r\n        if (typeof size === 'number') {\r\n            this._size = size;\r\n            this._cachedVisibleSize = undefined;\r\n            dom.addClass(container, 'visible');\r\n        }\r\n        else {\r\n            this._size = 0;\r\n            this._cachedVisibleSize = size.cachedVisibleSize;\r\n        }\r\n    }\r\n    Object.defineProperty(ViewItem.prototype, \"size\", {\r\n        get: function () {\r\n            return this._size;\r\n        },\r\n        set: function (size) {\r\n            this._size = size;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ViewItem.prototype, \"visible\", {\r\n        get: function () {\r\n            return typeof this._cachedVisibleSize === 'undefined';\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ViewItem.prototype.setVisible = function (visible, size) {\r\n        if (visible === this.visible) {\r\n            return;\r\n        }\r\n        if (visible) {\r\n            this.size = clamp(this._cachedVisibleSize, this.viewMinimumSize, this.viewMaximumSize);\r\n            this._cachedVisibleSize = undefined;\r\n        }\r\n        else {\r\n            this._cachedVisibleSize = typeof size === 'number' ? size : this.size;\r\n            this.size = 0;\r\n        }\r\n        dom.toggleClass(this.container, 'visible', visible);\r\n        if (this.view.setVisible) {\r\n            this.view.setVisible(visible);\r\n        }\r\n    };\r\n    Object.defineProperty(ViewItem.prototype, \"minimumSize\", {\r\n        get: function () { return this.visible ? this.view.minimumSize : 0; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ViewItem.prototype, \"viewMinimumSize\", {\r\n        get: function () { return this.view.minimumSize; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ViewItem.prototype, \"maximumSize\", {\r\n        get: function () { return this.visible ? this.view.maximumSize : 0; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ViewItem.prototype, \"viewMaximumSize\", {\r\n        get: function () { return this.view.maximumSize; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ViewItem.prototype, \"priority\", {\r\n        get: function () { return this.view.priority; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ViewItem.prototype, \"snap\", {\r\n        get: function () { return !!this.view.snap; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ViewItem.prototype, \"enabled\", {\r\n        set: function (enabled) {\r\n            this.container.style.pointerEvents = enabled ? null : 'none';\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ViewItem.prototype.layout = function (offset, layoutContext) {\r\n        this.layoutContainer(offset);\r\n        this.view.layout(this.size, offset, layoutContext);\r\n    };\r\n    ViewItem.prototype.dispose = function () {\r\n        this.disposable.dispose();\r\n        return this.view;\r\n    };\r\n    return ViewItem;\r\n}());\r\nvar VerticalViewItem = /** @class */ (function (_super) {\r\n    __extends(VerticalViewItem, _super);\r\n    function VerticalViewItem() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    VerticalViewItem.prototype.layoutContainer = function (offset) {\r\n        this.container.style.top = offset + \"px\";\r\n        this.container.style.height = this.size + \"px\";\r\n    };\r\n    return VerticalViewItem;\r\n}(ViewItem));\r\nvar HorizontalViewItem = /** @class */ (function (_super) {\r\n    __extends(HorizontalViewItem, _super);\r\n    function HorizontalViewItem() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    HorizontalViewItem.prototype.layoutContainer = function (offset) {\r\n        this.container.style.left = offset + \"px\";\r\n        this.container.style.width = this.size + \"px\";\r\n    };\r\n    return HorizontalViewItem;\r\n}(ViewItem));\r\nvar State;\r\n(function (State) {\r\n    State[State[\"Idle\"] = 0] = \"Idle\";\r\n    State[State[\"Busy\"] = 1] = \"Busy\";\r\n})(State || (State = {}));\r\nexport var Sizing;\r\n(function (Sizing) {\r\n    Sizing.Distribute = { type: 'distribute' };\r\n    function Split(index) { return { type: 'split', index: index }; }\r\n    Sizing.Split = Split;\r\n    function Invisible(cachedVisibleSize) { return { type: 'invisible', cachedVisibleSize: cachedVisibleSize }; }\r\n    Sizing.Invisible = Invisible;\r\n})(Sizing || (Sizing = {}));\r\nvar SplitView = /** @class */ (function (_super) {\r\n    __extends(SplitView, _super);\r\n    function SplitView(container, options) {\r\n        if (options === void 0) { options = {}; }\r\n        var _this = _super.call(this) || this;\r\n        _this.size = 0;\r\n        _this.contentSize = 0;\r\n        _this.proportions = undefined;\r\n        _this.viewItems = [];\r\n        _this.sashItems = [];\r\n        _this.state = State.Idle;\r\n        _this._onDidSashChange = _this._register(new Emitter());\r\n        _this.onDidSashChange = _this._onDidSashChange.event;\r\n        _this._onDidSashReset = _this._register(new Emitter());\r\n        _this._startSnappingEnabled = true;\r\n        _this._endSnappingEnabled = true;\r\n        _this.orientation = types.isUndefined(options.orientation) ? 0 /* VERTICAL */ : options.orientation;\r\n        _this.inverseAltBehavior = !!options.inverseAltBehavior;\r\n        _this.proportionalLayout = types.isUndefined(options.proportionalLayout) ? true : !!options.proportionalLayout;\r\n        _this.el = document.createElement('div');\r\n        dom.addClass(_this.el, 'monaco-split-view2');\r\n        dom.addClass(_this.el, _this.orientation === 0 /* VERTICAL */ ? 'vertical' : 'horizontal');\r\n        container.appendChild(_this.el);\r\n        _this.sashContainer = dom.append(_this.el, dom.$('.sash-container'));\r\n        _this.viewContainer = dom.append(_this.el, dom.$('.split-view-container'));\r\n        _this.style(options.styles || defaultStyles);\r\n        // We have an existing set of view, add them now\r\n        if (options.descriptor) {\r\n            _this.size = options.descriptor.size;\r\n            options.descriptor.views.forEach(function (viewDescriptor, index) {\r\n                var sizing = types.isUndefined(viewDescriptor.visible) || viewDescriptor.visible ? viewDescriptor.size : { type: 'invisible', cachedVisibleSize: viewDescriptor.size };\r\n                var view = viewDescriptor.view;\r\n                _this.doAddView(view, sizing, index, true);\r\n            });\r\n            // Initialize content size and proportions for first layout\r\n            _this.contentSize = _this.viewItems.reduce(function (r, i) { return r + i.size; }, 0);\r\n            _this.saveProportions();\r\n        }\r\n        return _this;\r\n    }\r\n    Object.defineProperty(SplitView.prototype, \"orthogonalStartSash\", {\r\n        get: function () { return this._orthogonalStartSash; },\r\n        set: function (sash) {\r\n            for (var _i = 0, _a = this.sashItems; _i < _a.length; _i++) {\r\n                var sashItem = _a[_i];\r\n                sashItem.sash.orthogonalStartSash = sash;\r\n            }\r\n            this._orthogonalStartSash = sash;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SplitView.prototype, \"orthogonalEndSash\", {\r\n        get: function () { return this._orthogonalEndSash; },\r\n        set: function (sash) {\r\n            for (var _i = 0, _a = this.sashItems; _i < _a.length; _i++) {\r\n                var sashItem = _a[_i];\r\n                sashItem.sash.orthogonalEndSash = sash;\r\n            }\r\n            this._orthogonalEndSash = sash;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SplitView.prototype, \"startSnappingEnabled\", {\r\n        get: function () { return this._startSnappingEnabled; },\r\n        set: function (startSnappingEnabled) {\r\n            if (this._startSnappingEnabled === startSnappingEnabled) {\r\n                return;\r\n            }\r\n            this._startSnappingEnabled = startSnappingEnabled;\r\n            this.updateSashEnablement();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SplitView.prototype, \"endSnappingEnabled\", {\r\n        get: function () { return this._endSnappingEnabled; },\r\n        set: function (endSnappingEnabled) {\r\n            if (this._endSnappingEnabled === endSnappingEnabled) {\r\n                return;\r\n            }\r\n            this._endSnappingEnabled = endSnappingEnabled;\r\n            this.updateSashEnablement();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    SplitView.prototype.style = function (styles) {\r\n        if (styles.separatorBorder.isTransparent()) {\r\n            dom.removeClass(this.el, 'separator-border');\r\n            this.el.style.removeProperty('--separator-border');\r\n        }\r\n        else {\r\n            dom.addClass(this.el, 'separator-border');\r\n            this.el.style.setProperty('--separator-border', styles.separatorBorder.toString());\r\n        }\r\n    };\r\n    SplitView.prototype.addView = function (view, size, index) {\r\n        if (index === void 0) { index = this.viewItems.length; }\r\n        this.doAddView(view, size, index, false);\r\n    };\r\n    SplitView.prototype.layout = function (size, layoutContext) {\r\n        var _this = this;\r\n        var previousSize = Math.max(this.size, this.contentSize);\r\n        this.size = size;\r\n        this.layoutContext = layoutContext;\r\n        if (!this.proportions) {\r\n            var indexes = range(this.viewItems.length);\r\n            var lowPriorityIndexes = indexes.filter(function (i) { return _this.viewItems[i].priority === 1 /* Low */; });\r\n            var highPriorityIndexes = indexes.filter(function (i) { return _this.viewItems[i].priority === 2 /* High */; });\r\n            this.resize(this.viewItems.length - 1, size - previousSize, undefined, lowPriorityIndexes, highPriorityIndexes);\r\n        }\r\n        else {\r\n            for (var i = 0; i < this.viewItems.length; i++) {\r\n                var item = this.viewItems[i];\r\n                item.size = clamp(Math.round(this.proportions[i] * size), item.minimumSize, item.maximumSize);\r\n            }\r\n        }\r\n        this.distributeEmptySpace();\r\n        this.layoutViews();\r\n    };\r\n    SplitView.prototype.saveProportions = function () {\r\n        var _this = this;\r\n        if (this.proportionalLayout && this.contentSize > 0) {\r\n            this.proportions = this.viewItems.map(function (i) { return i.size / _this.contentSize; });\r\n        }\r\n    };\r\n    SplitView.prototype.onSashStart = function (_a) {\r\n        var _this = this;\r\n        var sash = _a.sash, start = _a.start, alt = _a.alt;\r\n        for (var _i = 0, _b = this.viewItems; _i < _b.length; _i++) {\r\n            var item = _b[_i];\r\n            item.enabled = false;\r\n        }\r\n        var index = firstIndex(this.sashItems, function (item) { return item.sash === sash; });\r\n        // This way, we can press Alt while we resize a sash, macOS style!\r\n        var disposable = combinedDisposable(domEvent(document.body, 'keydown')(function (e) { return resetSashDragState(_this.sashDragState.current, e.altKey); }), domEvent(document.body, 'keyup')(function () { return resetSashDragState(_this.sashDragState.current, false); }));\r\n        var resetSashDragState = function (start, alt) {\r\n            var sizes = _this.viewItems.map(function (i) { return i.size; });\r\n            var minDelta = Number.NEGATIVE_INFINITY;\r\n            var maxDelta = Number.POSITIVE_INFINITY;\r\n            if (_this.inverseAltBehavior) {\r\n                alt = !alt;\r\n            }\r\n            if (alt) {\r\n                // When we're using the last sash with Alt, we're resizing\r\n                // the view to the left/up, instead of right/down as usual\r\n                // Thus, we must do the inverse of the usual\r\n                var isLastSash = index === _this.sashItems.length - 1;\r\n                if (isLastSash) {\r\n                    var viewItem = _this.viewItems[index];\r\n                    minDelta = (viewItem.minimumSize - viewItem.size) / 2;\r\n                    maxDelta = (viewItem.maximumSize - viewItem.size) / 2;\r\n                }\r\n                else {\r\n                    var viewItem = _this.viewItems[index + 1];\r\n                    minDelta = (viewItem.size - viewItem.maximumSize) / 2;\r\n                    maxDelta = (viewItem.size - viewItem.minimumSize) / 2;\r\n                }\r\n            }\r\n            var snapBefore;\r\n            var snapAfter;\r\n            if (!alt) {\r\n                var upIndexes = range(index, -1);\r\n                var downIndexes = range(index + 1, _this.viewItems.length);\r\n                var minDeltaUp = upIndexes.reduce(function (r, i) { return r + (_this.viewItems[i].minimumSize - sizes[i]); }, 0);\r\n                var maxDeltaUp = upIndexes.reduce(function (r, i) { return r + (_this.viewItems[i].viewMaximumSize - sizes[i]); }, 0);\r\n                var maxDeltaDown = downIndexes.length === 0 ? Number.POSITIVE_INFINITY : downIndexes.reduce(function (r, i) { return r + (sizes[i] - _this.viewItems[i].minimumSize); }, 0);\r\n                var minDeltaDown = downIndexes.length === 0 ? Number.NEGATIVE_INFINITY : downIndexes.reduce(function (r, i) { return r + (sizes[i] - _this.viewItems[i].viewMaximumSize); }, 0);\r\n                var minDelta_1 = Math.max(minDeltaUp, minDeltaDown);\r\n                var maxDelta_1 = Math.min(maxDeltaDown, maxDeltaUp);\r\n                var snapBeforeIndex = _this.findFirstSnapIndex(upIndexes);\r\n                var snapAfterIndex = _this.findFirstSnapIndex(downIndexes);\r\n                if (typeof snapBeforeIndex === 'number') {\r\n                    var viewItem = _this.viewItems[snapBeforeIndex];\r\n                    var halfSize = Math.floor(viewItem.viewMinimumSize / 2);\r\n                    snapBefore = {\r\n                        index: snapBeforeIndex,\r\n                        limitDelta: viewItem.visible ? minDelta_1 - halfSize : minDelta_1 + halfSize,\r\n                        size: viewItem.size\r\n                    };\r\n                }\r\n                if (typeof snapAfterIndex === 'number') {\r\n                    var viewItem = _this.viewItems[snapAfterIndex];\r\n                    var halfSize = Math.floor(viewItem.viewMinimumSize / 2);\r\n                    snapAfter = {\r\n                        index: snapAfterIndex,\r\n                        limitDelta: viewItem.visible ? maxDelta_1 + halfSize : maxDelta_1 - halfSize,\r\n                        size: viewItem.size\r\n                    };\r\n                }\r\n            }\r\n            _this.sashDragState = { start: start, current: start, index: index, sizes: sizes, minDelta: minDelta, maxDelta: maxDelta, alt: alt, snapBefore: snapBefore, snapAfter: snapAfter, disposable: disposable };\r\n        };\r\n        resetSashDragState(start, alt);\r\n    };\r\n    SplitView.prototype.onSashChange = function (_a) {\r\n        var current = _a.current;\r\n        var _b = this.sashDragState, index = _b.index, start = _b.start, sizes = _b.sizes, alt = _b.alt, minDelta = _b.minDelta, maxDelta = _b.maxDelta, snapBefore = _b.snapBefore, snapAfter = _b.snapAfter;\r\n        this.sashDragState.current = current;\r\n        var delta = current - start;\r\n        var newDelta = this.resize(index, delta, sizes, undefined, undefined, minDelta, maxDelta, snapBefore, snapAfter);\r\n        if (alt) {\r\n            var isLastSash = index === this.sashItems.length - 1;\r\n            var newSizes = this.viewItems.map(function (i) { return i.size; });\r\n            var viewItemIndex = isLastSash ? index : index + 1;\r\n            var viewItem = this.viewItems[viewItemIndex];\r\n            var newMinDelta = viewItem.size - viewItem.maximumSize;\r\n            var newMaxDelta = viewItem.size - viewItem.minimumSize;\r\n            var resizeIndex = isLastSash ? index - 1 : index + 1;\r\n            this.resize(resizeIndex, -newDelta, newSizes, undefined, undefined, newMinDelta, newMaxDelta);\r\n        }\r\n        this.distributeEmptySpace();\r\n        this.layoutViews();\r\n    };\r\n    SplitView.prototype.onSashEnd = function (index) {\r\n        this._onDidSashChange.fire(index);\r\n        this.sashDragState.disposable.dispose();\r\n        this.saveProportions();\r\n        for (var _i = 0, _a = this.viewItems; _i < _a.length; _i++) {\r\n            var item = _a[_i];\r\n            item.enabled = true;\r\n        }\r\n    };\r\n    SplitView.prototype.onViewChange = function (item, size) {\r\n        var index = this.viewItems.indexOf(item);\r\n        if (index < 0 || index >= this.viewItems.length) {\r\n            return;\r\n        }\r\n        size = typeof size === 'number' ? size : item.size;\r\n        size = clamp(size, item.minimumSize, item.maximumSize);\r\n        if (this.inverseAltBehavior && index > 0) {\r\n            // In this case, we want the view to grow or shrink both sides equally\r\n            // so we just resize the \"left\" side by half and let `resize` do the clamping magic\r\n            this.resize(index - 1, Math.floor((item.size - size) / 2));\r\n            this.distributeEmptySpace();\r\n            this.layoutViews();\r\n        }\r\n        else {\r\n            item.size = size;\r\n            this.relayout([index], undefined);\r\n        }\r\n    };\r\n    SplitView.prototype.resizeView = function (index, size) {\r\n        var _this = this;\r\n        if (this.state !== State.Idle) {\r\n            throw new Error('Cant modify splitview');\r\n        }\r\n        this.state = State.Busy;\r\n        if (index < 0 || index >= this.viewItems.length) {\r\n            return;\r\n        }\r\n        var indexes = range(this.viewItems.length).filter(function (i) { return i !== index; });\r\n        var lowPriorityIndexes = __spreadArrays(indexes.filter(function (i) { return _this.viewItems[i].priority === 1 /* Low */; }), [index]);\r\n        var highPriorityIndexes = indexes.filter(function (i) { return _this.viewItems[i].priority === 2 /* High */; });\r\n        var item = this.viewItems[index];\r\n        size = Math.round(size);\r\n        size = clamp(size, item.minimumSize, Math.min(item.maximumSize, this.size));\r\n        item.size = size;\r\n        this.relayout(lowPriorityIndexes, highPriorityIndexes);\r\n        this.state = State.Idle;\r\n    };\r\n    SplitView.prototype.distributeViewSizes = function () {\r\n        var _this = this;\r\n        var flexibleViewItems = [];\r\n        var flexibleSize = 0;\r\n        for (var _i = 0, _a = this.viewItems; _i < _a.length; _i++) {\r\n            var item = _a[_i];\r\n            if (item.maximumSize - item.minimumSize > 0) {\r\n                flexibleViewItems.push(item);\r\n                flexibleSize += item.size;\r\n            }\r\n        }\r\n        var size = Math.floor(flexibleSize / flexibleViewItems.length);\r\n        for (var _b = 0, flexibleViewItems_1 = flexibleViewItems; _b < flexibleViewItems_1.length; _b++) {\r\n            var item = flexibleViewItems_1[_b];\r\n            item.size = clamp(size, item.minimumSize, item.maximumSize);\r\n        }\r\n        var indexes = range(this.viewItems.length);\r\n        var lowPriorityIndexes = indexes.filter(function (i) { return _this.viewItems[i].priority === 1 /* Low */; });\r\n        var highPriorityIndexes = indexes.filter(function (i) { return _this.viewItems[i].priority === 2 /* High */; });\r\n        this.relayout(lowPriorityIndexes, highPriorityIndexes);\r\n    };\r\n    SplitView.prototype.getViewSize = function (index) {\r\n        if (index < 0 || index >= this.viewItems.length) {\r\n            return -1;\r\n        }\r\n        return this.viewItems[index].size;\r\n    };\r\n    SplitView.prototype.doAddView = function (view, size, index, skipLayout) {\r\n        var _this = this;\r\n        if (index === void 0) { index = this.viewItems.length; }\r\n        if (this.state !== State.Idle) {\r\n            throw new Error('Cant modify splitview');\r\n        }\r\n        this.state = State.Busy;\r\n        // Add view\r\n        var container = dom.$('.split-view-view');\r\n        if (index === this.viewItems.length) {\r\n            this.viewContainer.appendChild(container);\r\n        }\r\n        else {\r\n            this.viewContainer.insertBefore(container, this.viewContainer.children.item(index));\r\n        }\r\n        var onChangeDisposable = view.onDidChange(function (size) { return _this.onViewChange(item, size); });\r\n        var containerDisposable = toDisposable(function () { return _this.viewContainer.removeChild(container); });\r\n        var disposable = combinedDisposable(onChangeDisposable, containerDisposable);\r\n        var viewSize;\r\n        if (typeof size === 'number') {\r\n            viewSize = size;\r\n        }\r\n        else if (size.type === 'split') {\r\n            viewSize = this.getViewSize(size.index) / 2;\r\n        }\r\n        else if (size.type === 'invisible') {\r\n            viewSize = { cachedVisibleSize: size.cachedVisibleSize };\r\n        }\r\n        else {\r\n            viewSize = view.minimumSize;\r\n        }\r\n        var item = this.orientation === 0 /* VERTICAL */\r\n            ? new VerticalViewItem(container, view, viewSize, disposable)\r\n            : new HorizontalViewItem(container, view, viewSize, disposable);\r\n        this.viewItems.splice(index, 0, item);\r\n        // Add sash\r\n        if (this.viewItems.length > 1) {\r\n            var orientation_1 = this.orientation === 0 /* VERTICAL */ ? 1 /* HORIZONTAL */ : 0 /* VERTICAL */;\r\n            var layoutProvider = this.orientation === 0 /* VERTICAL */ ? { getHorizontalSashTop: function (sash) { return _this.getSashPosition(sash); } } : { getVerticalSashLeft: function (sash) { return _this.getSashPosition(sash); } };\r\n            var sash_1 = new Sash(this.sashContainer, layoutProvider, {\r\n                orientation: orientation_1,\r\n                orthogonalStartSash: this.orthogonalStartSash,\r\n                orthogonalEndSash: this.orthogonalEndSash\r\n            });\r\n            var sashEventMapper = this.orientation === 0 /* VERTICAL */\r\n                ? function (e) { return ({ sash: sash_1, start: e.startY, current: e.currentY, alt: e.altKey }); }\r\n                : function (e) { return ({ sash: sash_1, start: e.startX, current: e.currentX, alt: e.altKey }); };\r\n            var onStart = Event.map(sash_1.onDidStart, sashEventMapper);\r\n            var onStartDisposable = onStart(this.onSashStart, this);\r\n            var onChange = Event.map(sash_1.onDidChange, sashEventMapper);\r\n            var onChangeDisposable_1 = onChange(this.onSashChange, this);\r\n            var onEnd = Event.map(sash_1.onDidEnd, function () { return firstIndex(_this.sashItems, function (item) { return item.sash === sash_1; }); });\r\n            var onEndDisposable = onEnd(this.onSashEnd, this);\r\n            var onDidResetDisposable = sash_1.onDidReset(function () {\r\n                var index = firstIndex(_this.sashItems, function (item) { return item.sash === sash_1; });\r\n                var upIndexes = range(index, -1);\r\n                var downIndexes = range(index + 1, _this.viewItems.length);\r\n                var snapBeforeIndex = _this.findFirstSnapIndex(upIndexes);\r\n                var snapAfterIndex = _this.findFirstSnapIndex(downIndexes);\r\n                if (typeof snapBeforeIndex === 'number' && !_this.viewItems[snapBeforeIndex].visible) {\r\n                    return;\r\n                }\r\n                if (typeof snapAfterIndex === 'number' && !_this.viewItems[snapAfterIndex].visible) {\r\n                    return;\r\n                }\r\n                _this._onDidSashReset.fire(index);\r\n            });\r\n            var disposable_1 = combinedDisposable(onStartDisposable, onChangeDisposable_1, onEndDisposable, onDidResetDisposable, sash_1);\r\n            var sashItem = { sash: sash_1, disposable: disposable_1 };\r\n            this.sashItems.splice(index - 1, 0, sashItem);\r\n        }\r\n        container.appendChild(view.element);\r\n        var highPriorityIndexes;\r\n        if (typeof size !== 'number' && size.type === 'split') {\r\n            highPriorityIndexes = [size.index];\r\n        }\r\n        if (!skipLayout) {\r\n            this.relayout([index], highPriorityIndexes);\r\n        }\r\n        this.state = State.Idle;\r\n        if (!skipLayout && typeof size !== 'number' && size.type === 'distribute') {\r\n            this.distributeViewSizes();\r\n        }\r\n    };\r\n    SplitView.prototype.relayout = function (lowPriorityIndexes, highPriorityIndexes) {\r\n        var contentSize = this.viewItems.reduce(function (r, i) { return r + i.size; }, 0);\r\n        this.resize(this.viewItems.length - 1, this.size - contentSize, undefined, lowPriorityIndexes, highPriorityIndexes);\r\n        this.distributeEmptySpace();\r\n        this.layoutViews();\r\n        this.saveProportions();\r\n    };\r\n    SplitView.prototype.resize = function (index, delta, sizes, lowPriorityIndexes, highPriorityIndexes, overloadMinDelta, overloadMaxDelta, snapBefore, snapAfter) {\r\n        var _this = this;\r\n        if (sizes === void 0) { sizes = this.viewItems.map(function (i) { return i.size; }); }\r\n        if (overloadMinDelta === void 0) { overloadMinDelta = Number.NEGATIVE_INFINITY; }\r\n        if (overloadMaxDelta === void 0) { overloadMaxDelta = Number.POSITIVE_INFINITY; }\r\n        if (index < 0 || index >= this.viewItems.length) {\r\n            return 0;\r\n        }\r\n        var upIndexes = range(index, -1);\r\n        var downIndexes = range(index + 1, this.viewItems.length);\r\n        if (highPriorityIndexes) {\r\n            for (var _i = 0, highPriorityIndexes_1 = highPriorityIndexes; _i < highPriorityIndexes_1.length; _i++) {\r\n                var index_1 = highPriorityIndexes_1[_i];\r\n                pushToStart(upIndexes, index_1);\r\n                pushToStart(downIndexes, index_1);\r\n            }\r\n        }\r\n        if (lowPriorityIndexes) {\r\n            for (var _a = 0, lowPriorityIndexes_1 = lowPriorityIndexes; _a < lowPriorityIndexes_1.length; _a++) {\r\n                var index_2 = lowPriorityIndexes_1[_a];\r\n                pushToEnd(upIndexes, index_2);\r\n                pushToEnd(downIndexes, index_2);\r\n            }\r\n        }\r\n        var upItems = upIndexes.map(function (i) { return _this.viewItems[i]; });\r\n        var upSizes = upIndexes.map(function (i) { return sizes[i]; });\r\n        var downItems = downIndexes.map(function (i) { return _this.viewItems[i]; });\r\n        var downSizes = downIndexes.map(function (i) { return sizes[i]; });\r\n        var minDeltaUp = upIndexes.reduce(function (r, i) { return r + (_this.viewItems[i].minimumSize - sizes[i]); }, 0);\r\n        var maxDeltaUp = upIndexes.reduce(function (r, i) { return r + (_this.viewItems[i].maximumSize - sizes[i]); }, 0);\r\n        var maxDeltaDown = downIndexes.length === 0 ? Number.POSITIVE_INFINITY : downIndexes.reduce(function (r, i) { return r + (sizes[i] - _this.viewItems[i].minimumSize); }, 0);\r\n        var minDeltaDown = downIndexes.length === 0 ? Number.NEGATIVE_INFINITY : downIndexes.reduce(function (r, i) { return r + (sizes[i] - _this.viewItems[i].maximumSize); }, 0);\r\n        var minDelta = Math.max(minDeltaUp, minDeltaDown, overloadMinDelta);\r\n        var maxDelta = Math.min(maxDeltaDown, maxDeltaUp, overloadMaxDelta);\r\n        var snapped = false;\r\n        if (snapBefore) {\r\n            var snapView = this.viewItems[snapBefore.index];\r\n            var visible = delta >= snapBefore.limitDelta;\r\n            snapped = visible !== snapView.visible;\r\n            snapView.setVisible(visible, snapBefore.size);\r\n        }\r\n        if (!snapped && snapAfter) {\r\n            var snapView = this.viewItems[snapAfter.index];\r\n            var visible = delta < snapAfter.limitDelta;\r\n            snapped = visible !== snapView.visible;\r\n            snapView.setVisible(visible, snapAfter.size);\r\n        }\r\n        if (snapped) {\r\n            return this.resize(index, delta, sizes, lowPriorityIndexes, highPriorityIndexes, overloadMinDelta, overloadMaxDelta);\r\n        }\r\n        delta = clamp(delta, minDelta, maxDelta);\r\n        for (var i = 0, deltaUp = delta; i < upItems.length; i++) {\r\n            var item = upItems[i];\r\n            var size = clamp(upSizes[i] + deltaUp, item.minimumSize, item.maximumSize);\r\n            var viewDelta = size - upSizes[i];\r\n            deltaUp -= viewDelta;\r\n            item.size = size;\r\n        }\r\n        for (var i = 0, deltaDown = delta; i < downItems.length; i++) {\r\n            var item = downItems[i];\r\n            var size = clamp(downSizes[i] - deltaDown, item.minimumSize, item.maximumSize);\r\n            var viewDelta = size - downSizes[i];\r\n            deltaDown += viewDelta;\r\n            item.size = size;\r\n        }\r\n        return delta;\r\n    };\r\n    SplitView.prototype.distributeEmptySpace = function (lowPriorityIndex) {\r\n        var _this = this;\r\n        var contentSize = this.viewItems.reduce(function (r, i) { return r + i.size; }, 0);\r\n        var emptyDelta = this.size - contentSize;\r\n        var indexes = range(this.viewItems.length - 1, -1);\r\n        var lowPriorityIndexes = indexes.filter(function (i) { return _this.viewItems[i].priority === 1 /* Low */; });\r\n        var highPriorityIndexes = indexes.filter(function (i) { return _this.viewItems[i].priority === 2 /* High */; });\r\n        for (var _i = 0, highPriorityIndexes_2 = highPriorityIndexes; _i < highPriorityIndexes_2.length; _i++) {\r\n            var index = highPriorityIndexes_2[_i];\r\n            pushToStart(indexes, index);\r\n        }\r\n        for (var _a = 0, lowPriorityIndexes_2 = lowPriorityIndexes; _a < lowPriorityIndexes_2.length; _a++) {\r\n            var index = lowPriorityIndexes_2[_a];\r\n            pushToEnd(indexes, index);\r\n        }\r\n        if (typeof lowPriorityIndex === 'number') {\r\n            pushToEnd(indexes, lowPriorityIndex);\r\n        }\r\n        for (var i = 0; emptyDelta !== 0 && i < indexes.length; i++) {\r\n            var item = this.viewItems[indexes[i]];\r\n            var size = clamp(item.size + emptyDelta, item.minimumSize, item.maximumSize);\r\n            var viewDelta = size - item.size;\r\n            emptyDelta -= viewDelta;\r\n            item.size = size;\r\n        }\r\n    };\r\n    SplitView.prototype.layoutViews = function () {\r\n        // Save new content size\r\n        this.contentSize = this.viewItems.reduce(function (r, i) { return r + i.size; }, 0);\r\n        // Layout views\r\n        var offset = 0;\r\n        for (var _i = 0, _a = this.viewItems; _i < _a.length; _i++) {\r\n            var viewItem = _a[_i];\r\n            viewItem.layout(offset, this.layoutContext);\r\n            offset += viewItem.size;\r\n        }\r\n        // Layout sashes\r\n        this.sashItems.forEach(function (item) { return item.sash.layout(); });\r\n        this.updateSashEnablement();\r\n    };\r\n    SplitView.prototype.updateSashEnablement = function () {\r\n        var previous = false;\r\n        var collapsesDown = this.viewItems.map(function (i) { return previous = (i.size - i.minimumSize > 0) || previous; });\r\n        previous = false;\r\n        var expandsDown = this.viewItems.map(function (i) { return previous = (i.maximumSize - i.size > 0) || previous; });\r\n        var reverseViews = __spreadArrays(this.viewItems).reverse();\r\n        previous = false;\r\n        var collapsesUp = reverseViews.map(function (i) { return previous = (i.size - i.minimumSize > 0) || previous; }).reverse();\r\n        previous = false;\r\n        var expandsUp = reverseViews.map(function (i) { return previous = (i.maximumSize - i.size > 0) || previous; }).reverse();\r\n        var position = 0;\r\n        for (var index = 0; index < this.sashItems.length; index++) {\r\n            var sash = this.sashItems[index].sash;\r\n            var viewItem = this.viewItems[index];\r\n            position += viewItem.size;\r\n            var min = !(collapsesDown[index] && expandsUp[index + 1]);\r\n            var max = !(expandsDown[index] && collapsesUp[index + 1]);\r\n            if (min && max) {\r\n                var upIndexes = range(index, -1);\r\n                var downIndexes = range(index + 1, this.viewItems.length);\r\n                var snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\r\n                var snapAfterIndex = this.findFirstSnapIndex(downIndexes);\r\n                var snappedBefore = typeof snapBeforeIndex === 'number' && !this.viewItems[snapBeforeIndex].visible;\r\n                var snappedAfter = typeof snapAfterIndex === 'number' && !this.viewItems[snapAfterIndex].visible;\r\n                if (snappedBefore && collapsesUp[index] && (position > 0 || this.startSnappingEnabled)) {\r\n                    sash.state = 1 /* Minimum */;\r\n                }\r\n                else if (snappedAfter && collapsesDown[index] && (position < this.contentSize || this.endSnappingEnabled)) {\r\n                    sash.state = 2 /* Maximum */;\r\n                }\r\n                else {\r\n                    sash.state = 0 /* Disabled */;\r\n                }\r\n            }\r\n            else if (min && !max) {\r\n                sash.state = 1 /* Minimum */;\r\n            }\r\n            else if (!min && max) {\r\n                sash.state = 2 /* Maximum */;\r\n            }\r\n            else {\r\n                sash.state = 3 /* Enabled */;\r\n            }\r\n        }\r\n    };\r\n    SplitView.prototype.getSashPosition = function (sash) {\r\n        var position = 0;\r\n        for (var i = 0; i < this.sashItems.length; i++) {\r\n            position += this.viewItems[i].size;\r\n            if (this.sashItems[i].sash === sash) {\r\n                return Math.min(position, this.contentSize - 2);\r\n            }\r\n        }\r\n        return 0;\r\n    };\r\n    SplitView.prototype.findFirstSnapIndex = function (indexes) {\r\n        // visible views first\r\n        for (var _i = 0, indexes_1 = indexes; _i < indexes_1.length; _i++) {\r\n            var index = indexes_1[_i];\r\n            var viewItem = this.viewItems[index];\r\n            if (!viewItem.visible) {\r\n                continue;\r\n            }\r\n            if (viewItem.snap) {\r\n                return index;\r\n            }\r\n        }\r\n        // then, hidden views\r\n        for (var _a = 0, indexes_2 = indexes; _a < indexes_2.length; _a++) {\r\n            var index = indexes_2[_a];\r\n            var viewItem = this.viewItems[index];\r\n            if (viewItem.visible && viewItem.maximumSize - viewItem.minimumSize > 0) {\r\n                return undefined;\r\n            }\r\n            if (!viewItem.visible && viewItem.snap) {\r\n                return index;\r\n            }\r\n        }\r\n        return undefined;\r\n    };\r\n    SplitView.prototype.dispose = function () {\r\n        _super.prototype.dispose.call(this);\r\n        this.viewItems.forEach(function (i) { return i.dispose(); });\r\n        this.viewItems = [];\r\n        this.sashItems.forEach(function (i) { return i.disposable.dispose(); });\r\n        this.sashItems = [];\r\n    };\r\n    return SplitView;\r\n}(Disposable));\r\nexport { SplitView };\r\n"],"sourceRoot":""}