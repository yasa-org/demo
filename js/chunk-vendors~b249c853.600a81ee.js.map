{"version":3,"sources":["webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/hover/getHover.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/hover/hoverOperation.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/hover/hoverWidgets.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/hover/modesContentHover.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/hover/modesGlyphHover.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/hover/hover.js"],"names":["getHover","model","position","token","supports","ordered","promises","map","support","Promise","resolve","provideHover","then","hover","isValid","undefined","err","all","result","hasRange","range","hasHtmlContent","contents","length","None","HoverOperation","computer","success","error","progress","hoverTime","_this","this","_computer","_state","_hoverTime","_firstWaitScheduler","_triggerAsyncComputation","_secondWaitScheduler","_triggerSyncComputation","_loadingMessageScheduler","_showLoadingMessage","_asyncComputationPromise","_asyncComputationPromiseDone","_completeCallback","_errorCallback","_progressCallback","prototype","setHoverTime","_firstWaitTime","_secondWaitTime","_loadingMessageTime","schedule","computeAsync","asyncResult","_withAsyncResult","e","_onError","computeSync","onResult","_onComplete","getResult","_onProgress","getResultWithLoadingMessage","value","start","mode","cancel","__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","create","__spreadArrays","s","i","il","arguments","r","k","a","j","jl","_super","ContentHoverWidget","id","editor","call","allowEditorOverflow","_id","_editor","_isVisible","_stoleFocus","_containerDomNode","document","createElement","className","tabIndex","_domNode","scrollbar","_register","appendChild","getDomNode","onkeydown","equals","hide","onDidChangeConfiguration","hasChanged","updateFont","onDidLayoutChange","layout","addContentWidget","_showAtPosition","_showAtRange","defineProperty","get","set","enumerable","configurable","getId","showAt","focus","isVisible","layoutContentWidget","render","getPosition","preference","dispose","removeContentWidget","codeClasses","slice","getElementsByClassName","forEach","node","applyFontInfo","updateContents","textContent","onContentsChange","scanDomNode","height","Math","max","getLayoutInfo","_a","getOption","fontSize","lineHeight","style","maxHeight","maxWidth","width","GlyphHoverWidget","setAttribute","_showAtLineNumber","addOverlayWidget","lineNumber","editorLayout","topForLineNumber","getTopForLineNumber","editorScrollTop","getScrollTop","nodeHeight","clientHeight","top","left","glyphMarginLeft","glyphMarginWidth","round","removeOverlayWidget","codeTags","getElementsByTagName","$","dom","ColorHover","color","provider","MarkerHover","marker","ModesContentComputer","_markerDecorationsService","_result","setRange","_range","clearResult","hasModel","getModel","has","startLineNumber","startColumn","getLineCount","colorDetector","maxColumn","getLineMaxColumn","lineDecorations","getLineDecorations","didFindColor","hoverRange","endColumn","endLineNumber","getMarker","colorData","getColorData","getStartPosition","colorInfo","range_1","options","hoverMessage","isFromSynchronousComputation","concat","sort","_getLoadingMessage","appendText","nls","markerCodeActionTrigger","type","filter","include","QuickFix","ModesContentHoverWidget","markerDecorationsService","_themeService","_keybindingService","_modeService","_openerService","ID","renderDisposable","_messages","_lastRange","_highlightDecorations","_isChangingDecorations","_shouldFocus","_colorPicker","_hoverOperation","_withResult","delay","FOCUS","BLUR","onDidChange","_renderMessages","onModelDecorationsChanged","startShowingAt","equalsRange","filteredMessages","len","msg","rng","push","hoverContentsEquals","deltaDecorations","clear","isColorPickerVisible","complete","renderRange","messages","renderColumn","highlightRange","lift","fragment","createDocumentFragment","isEmptyHoverContent","containColorPicker","markdownDisposeables","markerMessages","min","plusRange","red","green","blue","alpha","rgba","color_1","editorModel_1","range_2","model_1","widget_1","colorPresentations","originalText","getValueInRange","guessColorPresentation","updateEditorModel","textEdits","newRange","presentation","textEdit","setEndPosition","text","identifier","label","forceMoveMarkers","pushUndoStop","executeEdits","additionalTextEdits","updateColorPresentations","g","colorListener","onColorFlushed","colorChangeListener","onDidChangeColor","markdownHoverElement","hoverContentsElement","renderer","add","onDidRenderCodeBlock","renderedContents","element","renderMarkerHover","markerHoverForStatusbar","compare","severity","renderMarkerStatusbar","_DECORATION_OPTIONS","markerHover","hoverElement","markerElement","source","message","code","relatedInformation","messageElement","whiteSpace","innerText","detailsElement","opacity","paddingLeft","sourceAndCodeElement","sourceElement","_codeLink","link","toString","onclick","open","preventDefault","stopPropagation","codeElement","_loop_1","message_1","resource","relatedInfoContainer","marginTop","cursor","with","fromUserGesture","catch","messageElement_1","this_1","_i","relatedInformation_1","_b","disposables","actionsElement","Error","Warning","Info","renderAction","commandId","run","show","quickfixPlaceholderElement","transition","setTimeout","remove","codeActionsPromise","getCodeActions","actions","validActions","showing","Id","target","controller","elementPosition","showCodeActions","x","y","cancellationToken","parent","actionOptions","actionContainer","action","iconClass","keybinding","lookupKeybinding","title","getLabel","CLICK","register","first","second","firstElement","secondElement","makeKey","theme","collector","linkFg","getColor","addRule","MarginComputer","_lineNumber","setLineNumber","toHoverMessage","lineDecorations_1","glyphMarginClassName","glyphMarginHoverMessage","apply","ModesGlyphHoverWidget","modeService","openerService","_renderDisposeables","_lastLineNumber","_markdownRenderer","messages_1","__decorate","decorators","key","desc","c","getOwnPropertyDescriptor","Reflect","decorate","__param","paramIndex","decorator","ModesHoverController","_toUnhook","_contentWidget","_glyphWidget","_isMouseDown","_hoverClicked","_hookEvents","_didChangeConfigurationHandler","_hideWidgets","_unhookEvents","_createHoverWidgets","getContribution","hideWidgetsEventHandler","hoverOpts","_isHoverEnabled","enabled","_isHoverSticky","sticky","onMouseDown","_onEditorMouseDown","onMouseUp","_onEditorMouseUp","onMouseMove","_onEditorMouseMove","onKeyDown","_onKeyDown","onDidChangeModelDecorations","_onModelDecorationsChanged","onMouseLeave","onDidChangeModel","onDidScrollChange","_onEditorScrollChanged","contentWidget","glyphWidget","scrollTopChanged","scrollLeftChanged","mouseEvent","targetType","detail","epsilon","typicalHalfwidthCharacterWidth","data","isAfterLines","horizontalDistanceToText","keyCode","showContentHover","ShowHoverAction","comment","alias","precondition","kbOpts","kbExpr","editorTextFocus","primary","weight","accessor","column","ShowDefinitionPreviewHoverAction","goto","promise","startFindDefinitionFromCursor","editorHoverHighlightColor","hoverBackground","hoverBorder","transparent","hoverForeground","actionsBackground","codeBackground"],"mappings":"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","file":"js/chunk-vendors~b249c853.600a81ee.js","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { coalesce } from '../../../base/common/arrays.js';\r\nimport { CancellationToken } from '../../../base/common/cancellation.js';\r\nimport { onUnexpectedExternalError } from '../../../base/common/errors.js';\r\nimport { registerModelAndPositionCommand } from '../../browser/editorExtensions.js';\r\nimport { HoverProviderRegistry } from '../../common/modes.js';\r\nexport function getHover(model, position, token) {\r\n    var supports = HoverProviderRegistry.ordered(model);\r\n    var promises = supports.map(function (support) {\r\n        return Promise.resolve(support.provideHover(model, position, token)).then(function (hover) {\r\n            return hover && isValid(hover) ? hover : undefined;\r\n        }, function (err) {\r\n            onUnexpectedExternalError(err);\r\n            return undefined;\r\n        });\r\n    });\r\n    return Promise.all(promises).then(coalesce);\r\n}\r\nregisterModelAndPositionCommand('_executeHoverProvider', function (model, position) { return getHover(model, position, CancellationToken.None); });\r\nfunction isValid(result) {\r\n    var hasRange = (typeof result.range !== 'undefined');\r\n    var hasHtmlContent = typeof result.contents !== 'undefined' && result.contents && result.contents.length > 0;\r\n    return hasRange && hasHtmlContent;\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { RunOnceScheduler, createCancelablePromise } from '../../../base/common/async.js';\r\nimport { onUnexpectedError } from '../../../base/common/errors.js';\r\nvar HoverOperation = /** @class */ (function () {\r\n    function HoverOperation(computer, success, error, progress, hoverTime) {\r\n        var _this = this;\r\n        this._computer = computer;\r\n        this._state = 0 /* IDLE */;\r\n        this._hoverTime = hoverTime;\r\n        this._firstWaitScheduler = new RunOnceScheduler(function () { return _this._triggerAsyncComputation(); }, 0);\r\n        this._secondWaitScheduler = new RunOnceScheduler(function () { return _this._triggerSyncComputation(); }, 0);\r\n        this._loadingMessageScheduler = new RunOnceScheduler(function () { return _this._showLoadingMessage(); }, 0);\r\n        this._asyncComputationPromise = null;\r\n        this._asyncComputationPromiseDone = false;\r\n        this._completeCallback = success;\r\n        this._errorCallback = error;\r\n        this._progressCallback = progress;\r\n    }\r\n    HoverOperation.prototype.setHoverTime = function (hoverTime) {\r\n        this._hoverTime = hoverTime;\r\n    };\r\n    HoverOperation.prototype._firstWaitTime = function () {\r\n        return this._hoverTime / 2;\r\n    };\r\n    HoverOperation.prototype._secondWaitTime = function () {\r\n        return this._hoverTime / 2;\r\n    };\r\n    HoverOperation.prototype._loadingMessageTime = function () {\r\n        return 3 * this._hoverTime;\r\n    };\r\n    HoverOperation.prototype._triggerAsyncComputation = function () {\r\n        var _this = this;\r\n        this._state = 2 /* SECOND_WAIT */;\r\n        this._secondWaitScheduler.schedule(this._secondWaitTime());\r\n        if (this._computer.computeAsync) {\r\n            this._asyncComputationPromiseDone = false;\r\n            this._asyncComputationPromise = createCancelablePromise(function (token) { return _this._computer.computeAsync(token); });\r\n            this._asyncComputationPromise.then(function (asyncResult) {\r\n                _this._asyncComputationPromiseDone = true;\r\n                _this._withAsyncResult(asyncResult);\r\n            }, function (e) { return _this._onError(e); });\r\n        }\r\n        else {\r\n            this._asyncComputationPromiseDone = true;\r\n        }\r\n    };\r\n    HoverOperation.prototype._triggerSyncComputation = function () {\r\n        if (this._computer.computeSync) {\r\n            this._computer.onResult(this._computer.computeSync(), true);\r\n        }\r\n        if (this._asyncComputationPromiseDone) {\r\n            this._state = 0 /* IDLE */;\r\n            this._onComplete(this._computer.getResult());\r\n        }\r\n        else {\r\n            this._state = 3 /* WAITING_FOR_ASYNC_COMPUTATION */;\r\n            this._onProgress(this._computer.getResult());\r\n        }\r\n    };\r\n    HoverOperation.prototype._showLoadingMessage = function () {\r\n        if (this._state === 3 /* WAITING_FOR_ASYNC_COMPUTATION */) {\r\n            this._onProgress(this._computer.getResultWithLoadingMessage());\r\n        }\r\n    };\r\n    HoverOperation.prototype._withAsyncResult = function (asyncResult) {\r\n        if (asyncResult) {\r\n            this._computer.onResult(asyncResult, false);\r\n        }\r\n        if (this._state === 3 /* WAITING_FOR_ASYNC_COMPUTATION */) {\r\n            this._state = 0 /* IDLE */;\r\n            this._onComplete(this._computer.getResult());\r\n        }\r\n    };\r\n    HoverOperation.prototype._onComplete = function (value) {\r\n        if (this._completeCallback) {\r\n            this._completeCallback(value);\r\n        }\r\n    };\r\n    HoverOperation.prototype._onError = function (error) {\r\n        if (this._errorCallback) {\r\n            this._errorCallback(error);\r\n        }\r\n        else {\r\n            onUnexpectedError(error);\r\n        }\r\n    };\r\n    HoverOperation.prototype._onProgress = function (value) {\r\n        if (this._progressCallback) {\r\n            this._progressCallback(value);\r\n        }\r\n    };\r\n    HoverOperation.prototype.start = function (mode) {\r\n        if (mode === 0 /* Delayed */) {\r\n            if (this._state === 0 /* IDLE */) {\r\n                this._state = 1 /* FIRST_WAIT */;\r\n                this._firstWaitScheduler.schedule(this._firstWaitTime());\r\n                this._loadingMessageScheduler.schedule(this._loadingMessageTime());\r\n            }\r\n        }\r\n        else {\r\n            switch (this._state) {\r\n                case 0 /* IDLE */:\r\n                    this._triggerAsyncComputation();\r\n                    this._secondWaitScheduler.cancel();\r\n                    this._triggerSyncComputation();\r\n                    break;\r\n                case 2 /* SECOND_WAIT */:\r\n                    this._secondWaitScheduler.cancel();\r\n                    this._triggerSyncComputation();\r\n                    break;\r\n            }\r\n        }\r\n    };\r\n    HoverOperation.prototype.cancel = function () {\r\n        this._loadingMessageScheduler.cancel();\r\n        if (this._state === 1 /* FIRST_WAIT */) {\r\n            this._firstWaitScheduler.cancel();\r\n        }\r\n        if (this._state === 2 /* SECOND_WAIT */) {\r\n            this._secondWaitScheduler.cancel();\r\n            if (this._asyncComputationPromise) {\r\n                this._asyncComputationPromise.cancel();\r\n                this._asyncComputationPromise = null;\r\n            }\r\n        }\r\n        if (this._state === 3 /* WAITING_FOR_ASYNC_COMPUTATION */) {\r\n            if (this._asyncComputationPromise) {\r\n                this._asyncComputationPromise.cancel();\r\n                this._asyncComputationPromise = null;\r\n            }\r\n        }\r\n        this._state = 0 /* IDLE */;\r\n    };\r\n    return HoverOperation;\r\n}());\r\nexport { HoverOperation };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nimport { toggleClass } from '../../../base/browser/dom.js';\r\nimport { DomScrollableElement } from '../../../base/browser/ui/scrollbar/scrollableElement.js';\r\nimport { Widget } from '../../../base/browser/ui/widget.js';\r\nvar ContentHoverWidget = /** @class */ (function (_super) {\r\n    __extends(ContentHoverWidget, _super);\r\n    function ContentHoverWidget(id, editor) {\r\n        var _this = _super.call(this) || this;\r\n        // Editor.IContentWidget.allowEditorOverflow\r\n        _this.allowEditorOverflow = true;\r\n        _this._id = id;\r\n        _this._editor = editor;\r\n        _this._isVisible = false;\r\n        _this._stoleFocus = false;\r\n        _this._containerDomNode = document.createElement('div');\r\n        _this._containerDomNode.className = 'monaco-editor-hover hidden';\r\n        _this._containerDomNode.tabIndex = 0;\r\n        _this._domNode = document.createElement('div');\r\n        _this._domNode.className = 'monaco-editor-hover-content';\r\n        _this.scrollbar = new DomScrollableElement(_this._domNode, {});\r\n        _this._register(_this.scrollbar);\r\n        _this._containerDomNode.appendChild(_this.scrollbar.getDomNode());\r\n        _this.onkeydown(_this._containerDomNode, function (e) {\r\n            if (e.equals(9 /* Escape */)) {\r\n                _this.hide();\r\n            }\r\n        });\r\n        _this._register(_this._editor.onDidChangeConfiguration(function (e) {\r\n            if (e.hasChanged(34 /* fontInfo */)) {\r\n                _this.updateFont();\r\n            }\r\n        }));\r\n        _this._editor.onDidLayoutChange(function (e) { return _this.layout(); });\r\n        _this.layout();\r\n        _this._editor.addContentWidget(_this);\r\n        _this._showAtPosition = null;\r\n        _this._showAtRange = null;\r\n        _this._stoleFocus = false;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(ContentHoverWidget.prototype, \"isVisible\", {\r\n        get: function () {\r\n            return this._isVisible;\r\n        },\r\n        set: function (value) {\r\n            this._isVisible = value;\r\n            toggleClass(this._containerDomNode, 'hidden', !this._isVisible);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ContentHoverWidget.prototype.getId = function () {\r\n        return this._id;\r\n    };\r\n    ContentHoverWidget.prototype.getDomNode = function () {\r\n        return this._containerDomNode;\r\n    };\r\n    ContentHoverWidget.prototype.showAt = function (position, range, focus) {\r\n        // Position has changed\r\n        this._showAtPosition = position;\r\n        this._showAtRange = range;\r\n        this.isVisible = true;\r\n        this._editor.layoutContentWidget(this);\r\n        // Simply force a synchronous render on the editor\r\n        // such that the widget does not really render with left = '0px'\r\n        this._editor.render();\r\n        this._stoleFocus = focus;\r\n        if (focus) {\r\n            this._containerDomNode.focus();\r\n        }\r\n    };\r\n    ContentHoverWidget.prototype.hide = function () {\r\n        if (!this.isVisible) {\r\n            return;\r\n        }\r\n        this.isVisible = false;\r\n        this._editor.layoutContentWidget(this);\r\n        if (this._stoleFocus) {\r\n            this._editor.focus();\r\n        }\r\n    };\r\n    ContentHoverWidget.prototype.getPosition = function () {\r\n        if (this.isVisible) {\r\n            return {\r\n                position: this._showAtPosition,\r\n                range: this._showAtRange,\r\n                preference: [\r\n                    1 /* ABOVE */,\r\n                    2 /* BELOW */\r\n                ]\r\n            };\r\n        }\r\n        return null;\r\n    };\r\n    ContentHoverWidget.prototype.dispose = function () {\r\n        this._editor.removeContentWidget(this);\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    ContentHoverWidget.prototype.updateFont = function () {\r\n        var _this = this;\r\n        var codeClasses = Array.prototype.slice.call(this._domNode.getElementsByClassName('code'));\r\n        codeClasses.forEach(function (node) { return _this._editor.applyFontInfo(node); });\r\n    };\r\n    ContentHoverWidget.prototype.updateContents = function (node) {\r\n        this._domNode.textContent = '';\r\n        this._domNode.appendChild(node);\r\n        this.updateFont();\r\n        this._editor.layoutContentWidget(this);\r\n        this.onContentsChange();\r\n    };\r\n    ContentHoverWidget.prototype.onContentsChange = function () {\r\n        this.scrollbar.scanDomNode();\r\n    };\r\n    ContentHoverWidget.prototype.layout = function () {\r\n        var height = Math.max(this._editor.getLayoutInfo().height / 4, 250);\r\n        var _a = this._editor.getOption(34 /* fontInfo */), fontSize = _a.fontSize, lineHeight = _a.lineHeight;\r\n        this._domNode.style.fontSize = fontSize + \"px\";\r\n        this._domNode.style.lineHeight = lineHeight + \"px\";\r\n        this._domNode.style.maxHeight = height + \"px\";\r\n        this._domNode.style.maxWidth = Math.max(this._editor.getLayoutInfo().width * 0.66, 500) + \"px\";\r\n    };\r\n    return ContentHoverWidget;\r\n}(Widget));\r\nexport { ContentHoverWidget };\r\nvar GlyphHoverWidget = /** @class */ (function (_super) {\r\n    __extends(GlyphHoverWidget, _super);\r\n    function GlyphHoverWidget(id, editor) {\r\n        var _this = _super.call(this) || this;\r\n        _this._id = id;\r\n        _this._editor = editor;\r\n        _this._isVisible = false;\r\n        _this._domNode = document.createElement('div');\r\n        _this._domNode.className = 'monaco-editor-hover hidden';\r\n        _this._domNode.setAttribute('aria-hidden', 'true');\r\n        _this._domNode.setAttribute('role', 'presentation');\r\n        _this._showAtLineNumber = -1;\r\n        _this._register(_this._editor.onDidChangeConfiguration(function (e) {\r\n            if (e.hasChanged(34 /* fontInfo */)) {\r\n                _this.updateFont();\r\n            }\r\n        }));\r\n        _this._editor.addOverlayWidget(_this);\r\n        return _this;\r\n    }\r\n    Object.defineProperty(GlyphHoverWidget.prototype, \"isVisible\", {\r\n        get: function () {\r\n            return this._isVisible;\r\n        },\r\n        set: function (value) {\r\n            this._isVisible = value;\r\n            toggleClass(this._domNode, 'hidden', !this._isVisible);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    GlyphHoverWidget.prototype.getId = function () {\r\n        return this._id;\r\n    };\r\n    GlyphHoverWidget.prototype.getDomNode = function () {\r\n        return this._domNode;\r\n    };\r\n    GlyphHoverWidget.prototype.showAt = function (lineNumber) {\r\n        this._showAtLineNumber = lineNumber;\r\n        if (!this.isVisible) {\r\n            this.isVisible = true;\r\n        }\r\n        var editorLayout = this._editor.getLayoutInfo();\r\n        var topForLineNumber = this._editor.getTopForLineNumber(this._showAtLineNumber);\r\n        var editorScrollTop = this._editor.getScrollTop();\r\n        var lineHeight = this._editor.getOption(49 /* lineHeight */);\r\n        var nodeHeight = this._domNode.clientHeight;\r\n        var top = topForLineNumber - editorScrollTop - ((nodeHeight - lineHeight) / 2);\r\n        this._domNode.style.left = editorLayout.glyphMarginLeft + editorLayout.glyphMarginWidth + \"px\";\r\n        this._domNode.style.top = Math.max(Math.round(top), 0) + \"px\";\r\n    };\r\n    GlyphHoverWidget.prototype.hide = function () {\r\n        if (!this.isVisible) {\r\n            return;\r\n        }\r\n        this.isVisible = false;\r\n    };\r\n    GlyphHoverWidget.prototype.getPosition = function () {\r\n        return null;\r\n    };\r\n    GlyphHoverWidget.prototype.dispose = function () {\r\n        this._editor.removeOverlayWidget(this);\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    GlyphHoverWidget.prototype.updateFont = function () {\r\n        var _this = this;\r\n        var codeTags = Array.prototype.slice.call(this._domNode.getElementsByTagName('code'));\r\n        var codeClasses = Array.prototype.slice.call(this._domNode.getElementsByClassName('code'));\r\n        __spreadArrays(codeTags, codeClasses).forEach(function (node) { return _this._editor.applyFontInfo(node); });\r\n    };\r\n    GlyphHoverWidget.prototype.updateContents = function (node) {\r\n        this._domNode.textContent = '';\r\n        this._domNode.appendChild(node);\r\n        this.updateFont();\r\n    };\r\n    return GlyphHoverWidget;\r\n}(Widget));\r\nexport { GlyphHoverWidget };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nimport * as nls from '../../../nls.js';\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { CancellationToken } from '../../../base/common/cancellation.js';\r\nimport { Color, RGBA } from '../../../base/common/color.js';\r\nimport { MarkdownString, isEmptyMarkdownString, markedStringsEquals } from '../../../base/common/htmlContent.js';\r\nimport { toDisposable, DisposableStore, combinedDisposable, MutableDisposable } from '../../../base/common/lifecycle.js';\r\nimport { Position } from '../../common/core/position.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\r\nimport { HoverProviderRegistry, TokenizationRegistry } from '../../common/modes.js';\r\nimport { getColorPresentations } from '../colorPicker/color.js';\r\nimport { ColorDetector } from '../colorPicker/colorDetector.js';\r\nimport { ColorPickerModel } from '../colorPicker/colorPickerModel.js';\r\nimport { ColorPickerWidget } from '../colorPicker/colorPickerWidget.js';\r\nimport { getHover } from './getHover.js';\r\nimport { HoverOperation } from './hoverOperation.js';\r\nimport { ContentHoverWidget } from './hoverWidgets.js';\r\nimport { MarkdownRenderer } from '../markdown/markdownRenderer.js';\r\nimport { registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\r\nimport { coalesce, isNonEmptyArray, asArray } from '../../../base/common/arrays.js';\r\nimport { IMarkerData, MarkerSeverity } from '../../../platform/markers/common/markers.js';\r\nimport { basename } from '../../../base/common/resources.js';\r\nimport { onUnexpectedError } from '../../../base/common/errors.js';\r\nimport { NullOpenerService } from '../../../platform/opener/common/opener.js';\r\nimport { MarkerController, NextMarkerAction } from '../gotoError/gotoError.js';\r\nimport { createCancelablePromise } from '../../../base/common/async.js';\r\nimport { getCodeActions } from '../codeAction/codeAction.js';\r\nimport { QuickFixAction, QuickFixController } from '../codeAction/codeActionCommands.js';\r\nimport { CodeActionKind } from '../codeAction/types.js';\r\nimport { textLinkForeground } from '../../../platform/theme/common/colorRegistry.js';\r\nvar $ = dom.$;\r\nvar ColorHover = /** @class */ (function () {\r\n    function ColorHover(range, color, provider) {\r\n        this.range = range;\r\n        this.color = color;\r\n        this.provider = provider;\r\n    }\r\n    return ColorHover;\r\n}());\r\nvar MarkerHover = /** @class */ (function () {\r\n    function MarkerHover(range, marker) {\r\n        this.range = range;\r\n        this.marker = marker;\r\n    }\r\n    return MarkerHover;\r\n}());\r\nvar ModesContentComputer = /** @class */ (function () {\r\n    function ModesContentComputer(editor, _markerDecorationsService) {\r\n        this._markerDecorationsService = _markerDecorationsService;\r\n        this._editor = editor;\r\n        this._result = [];\r\n    }\r\n    ModesContentComputer.prototype.setRange = function (range) {\r\n        this._range = range;\r\n        this._result = [];\r\n    };\r\n    ModesContentComputer.prototype.clearResult = function () {\r\n        this._result = [];\r\n    };\r\n    ModesContentComputer.prototype.computeAsync = function (token) {\r\n        if (!this._editor.hasModel() || !this._range) {\r\n            return Promise.resolve([]);\r\n        }\r\n        var model = this._editor.getModel();\r\n        if (!HoverProviderRegistry.has(model)) {\r\n            return Promise.resolve([]);\r\n        }\r\n        return getHover(model, new Position(this._range.startLineNumber, this._range.startColumn), token);\r\n    };\r\n    ModesContentComputer.prototype.computeSync = function () {\r\n        var _this = this;\r\n        if (!this._editor.hasModel() || !this._range) {\r\n            return [];\r\n        }\r\n        var model = this._editor.getModel();\r\n        var lineNumber = this._range.startLineNumber;\r\n        if (lineNumber > this._editor.getModel().getLineCount()) {\r\n            // Illegal line number => no results\r\n            return [];\r\n        }\r\n        var colorDetector = ColorDetector.get(this._editor);\r\n        var maxColumn = model.getLineMaxColumn(lineNumber);\r\n        var lineDecorations = this._editor.getLineDecorations(lineNumber);\r\n        var didFindColor = false;\r\n        var hoverRange = this._range;\r\n        var result = lineDecorations.map(function (d) {\r\n            var startColumn = (d.range.startLineNumber === lineNumber) ? d.range.startColumn : 1;\r\n            var endColumn = (d.range.endLineNumber === lineNumber) ? d.range.endColumn : maxColumn;\r\n            if (startColumn > hoverRange.startColumn || hoverRange.endColumn > endColumn) {\r\n                return null;\r\n            }\r\n            var range = new Range(hoverRange.startLineNumber, startColumn, hoverRange.startLineNumber, endColumn);\r\n            var marker = _this._markerDecorationsService.getMarker(model, d);\r\n            if (marker) {\r\n                return new MarkerHover(range, marker);\r\n            }\r\n            var colorData = colorDetector.getColorData(d.range.getStartPosition());\r\n            if (!didFindColor && colorData) {\r\n                didFindColor = true;\r\n                var _a = colorData.colorInfo, color = _a.color, range_1 = _a.range;\r\n                return new ColorHover(range_1, color, colorData.provider);\r\n            }\r\n            else {\r\n                if (isEmptyMarkdownString(d.options.hoverMessage)) {\r\n                    return null;\r\n                }\r\n                var contents = d.options.hoverMessage ? asArray(d.options.hoverMessage) : [];\r\n                return { contents: contents, range: range };\r\n            }\r\n        });\r\n        return coalesce(result);\r\n    };\r\n    ModesContentComputer.prototype.onResult = function (result, isFromSynchronousComputation) {\r\n        // Always put synchronous messages before asynchronous ones\r\n        if (isFromSynchronousComputation) {\r\n            this._result = result.concat(this._result.sort(function (a, b) {\r\n                if (a instanceof ColorHover) { // sort picker messages at to the top\r\n                    return -1;\r\n                }\r\n                else if (b instanceof ColorHover) {\r\n                    return 1;\r\n                }\r\n                return 0;\r\n            }));\r\n        }\r\n        else {\r\n            this._result = this._result.concat(result);\r\n        }\r\n    };\r\n    ModesContentComputer.prototype.getResult = function () {\r\n        return this._result.slice(0);\r\n    };\r\n    ModesContentComputer.prototype.getResultWithLoadingMessage = function () {\r\n        return this._result.slice(0).concat([this._getLoadingMessage()]);\r\n    };\r\n    ModesContentComputer.prototype._getLoadingMessage = function () {\r\n        return {\r\n            range: this._range,\r\n            contents: [new MarkdownString().appendText(nls.localize('modesContentHover.loading', \"Loading...\"))]\r\n        };\r\n    };\r\n    return ModesContentComputer;\r\n}());\r\nvar markerCodeActionTrigger = {\r\n    type: 2 /* Manual */,\r\n    filter: { include: CodeActionKind.QuickFix }\r\n};\r\nvar ModesContentHoverWidget = /** @class */ (function (_super) {\r\n    __extends(ModesContentHoverWidget, _super);\r\n    function ModesContentHoverWidget(editor, markerDecorationsService, _themeService, _keybindingService, _modeService, _openerService) {\r\n        if (_openerService === void 0) { _openerService = NullOpenerService; }\r\n        var _this = _super.call(this, ModesContentHoverWidget.ID, editor) || this;\r\n        _this._themeService = _themeService;\r\n        _this._keybindingService = _keybindingService;\r\n        _this._modeService = _modeService;\r\n        _this._openerService = _openerService;\r\n        _this.renderDisposable = _this._register(new MutableDisposable());\r\n        _this._messages = [];\r\n        _this._lastRange = null;\r\n        _this._computer = new ModesContentComputer(_this._editor, markerDecorationsService);\r\n        _this._highlightDecorations = [];\r\n        _this._isChangingDecorations = false;\r\n        _this._shouldFocus = false;\r\n        _this._colorPicker = null;\r\n        _this._hoverOperation = new HoverOperation(_this._computer, function (result) { return _this._withResult(result, true); }, null, function (result) { return _this._withResult(result, false); }, _this._editor.getOption(44 /* hover */).delay);\r\n        _this._register(dom.addStandardDisposableListener(_this.getDomNode(), dom.EventType.FOCUS, function () {\r\n            if (_this._colorPicker) {\r\n                dom.addClass(_this.getDomNode(), 'colorpicker-hover');\r\n            }\r\n        }));\r\n        _this._register(dom.addStandardDisposableListener(_this.getDomNode(), dom.EventType.BLUR, function () {\r\n            dom.removeClass(_this.getDomNode(), 'colorpicker-hover');\r\n        }));\r\n        _this._register(editor.onDidChangeConfiguration(function (e) {\r\n            _this._hoverOperation.setHoverTime(_this._editor.getOption(44 /* hover */).delay);\r\n        }));\r\n        _this._register(TokenizationRegistry.onDidChange(function (e) {\r\n            if (_this.isVisible && _this._lastRange && _this._messages.length > 0) {\r\n                _this._domNode.textContent = '';\r\n                _this._renderMessages(_this._lastRange, _this._messages);\r\n            }\r\n        }));\r\n        return _this;\r\n    }\r\n    ModesContentHoverWidget.prototype.dispose = function () {\r\n        this._hoverOperation.cancel();\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    ModesContentHoverWidget.prototype.onModelDecorationsChanged = function () {\r\n        if (this._isChangingDecorations) {\r\n            return;\r\n        }\r\n        if (this.isVisible) {\r\n            // The decorations have changed and the hover is visible,\r\n            // we need to recompute the displayed text\r\n            this._hoverOperation.cancel();\r\n            this._computer.clearResult();\r\n            if (!this._colorPicker) { // TODO@Michel ensure that displayed text for other decorations is computed even if color picker is in place\r\n                this._hoverOperation.start(0 /* Delayed */);\r\n            }\r\n        }\r\n    };\r\n    ModesContentHoverWidget.prototype.startShowingAt = function (range, mode, focus) {\r\n        if (this._lastRange && this._lastRange.equalsRange(range)) {\r\n            // We have to show the widget at the exact same range as before, so no work is needed\r\n            return;\r\n        }\r\n        this._hoverOperation.cancel();\r\n        if (this.isVisible) {\r\n            // The range might have changed, but the hover is visible\r\n            // Instead of hiding it completely, filter out messages that are still in the new range and\r\n            // kick off a new computation\r\n            if (!this._showAtPosition || this._showAtPosition.lineNumber !== range.startLineNumber) {\r\n                this.hide();\r\n            }\r\n            else {\r\n                var filteredMessages = [];\r\n                for (var i = 0, len = this._messages.length; i < len; i++) {\r\n                    var msg = this._messages[i];\r\n                    var rng = msg.range;\r\n                    if (rng && rng.startColumn <= range.startColumn && rng.endColumn >= range.endColumn) {\r\n                        filteredMessages.push(msg);\r\n                    }\r\n                }\r\n                if (filteredMessages.length > 0) {\r\n                    if (hoverContentsEquals(filteredMessages, this._messages)) {\r\n                        return;\r\n                    }\r\n                    this._renderMessages(range, filteredMessages);\r\n                }\r\n                else {\r\n                    this.hide();\r\n                }\r\n            }\r\n        }\r\n        this._lastRange = range;\r\n        this._computer.setRange(range);\r\n        this._shouldFocus = focus;\r\n        this._hoverOperation.start(mode);\r\n    };\r\n    ModesContentHoverWidget.prototype.hide = function () {\r\n        this._lastRange = null;\r\n        this._hoverOperation.cancel();\r\n        _super.prototype.hide.call(this);\r\n        this._isChangingDecorations = true;\r\n        this._highlightDecorations = this._editor.deltaDecorations(this._highlightDecorations, []);\r\n        this._isChangingDecorations = false;\r\n        this.renderDisposable.clear();\r\n        this._colorPicker = null;\r\n    };\r\n    ModesContentHoverWidget.prototype.isColorPickerVisible = function () {\r\n        if (this._colorPicker) {\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    ModesContentHoverWidget.prototype._withResult = function (result, complete) {\r\n        this._messages = result;\r\n        if (this._lastRange && this._messages.length > 0) {\r\n            this._renderMessages(this._lastRange, this._messages);\r\n        }\r\n        else if (complete) {\r\n            this.hide();\r\n        }\r\n    };\r\n    ModesContentHoverWidget.prototype._renderMessages = function (renderRange, messages) {\r\n        var _this = this;\r\n        this.renderDisposable.dispose();\r\n        this._colorPicker = null;\r\n        // update column from which to show\r\n        var renderColumn = 1073741824 /* MAX_SAFE_SMALL_INTEGER */;\r\n        var highlightRange = messages[0].range ? Range.lift(messages[0].range) : null;\r\n        var fragment = document.createDocumentFragment();\r\n        var isEmptyHoverContent = true;\r\n        var containColorPicker = false;\r\n        var markdownDisposeables = new DisposableStore();\r\n        var markerMessages = [];\r\n        messages.forEach(function (msg) {\r\n            if (!msg.range) {\r\n                return;\r\n            }\r\n            renderColumn = Math.min(renderColumn, msg.range.startColumn);\r\n            highlightRange = highlightRange ? Range.plusRange(highlightRange, msg.range) : Range.lift(msg.range);\r\n            if (msg instanceof ColorHover) {\r\n                containColorPicker = true;\r\n                var _a = msg.color, red = _a.red, green = _a.green, blue = _a.blue, alpha = _a.alpha;\r\n                var rgba = new RGBA(Math.round(red * 255), Math.round(green * 255), Math.round(blue * 255), alpha);\r\n                var color_1 = new Color(rgba);\r\n                if (!_this._editor.hasModel()) {\r\n                    return;\r\n                }\r\n                var editorModel_1 = _this._editor.getModel();\r\n                var range_2 = new Range(msg.range.startLineNumber, msg.range.startColumn, msg.range.endLineNumber, msg.range.endColumn);\r\n                var colorInfo = { range: msg.range, color: msg.color };\r\n                // create blank olor picker model and widget first to ensure it's positioned correctly.\r\n                var model_1 = new ColorPickerModel(color_1, [], 0);\r\n                var widget_1 = new ColorPickerWidget(fragment, model_1, _this._editor.getOption(105 /* pixelRatio */), _this._themeService);\r\n                getColorPresentations(editorModel_1, colorInfo, msg.provider, CancellationToken.None).then(function (colorPresentations) {\r\n                    model_1.colorPresentations = colorPresentations || [];\r\n                    if (!_this._editor.hasModel()) {\r\n                        // gone...\r\n                        return;\r\n                    }\r\n                    var originalText = _this._editor.getModel().getValueInRange(msg.range);\r\n                    model_1.guessColorPresentation(color_1, originalText);\r\n                    var updateEditorModel = function () {\r\n                        var textEdits;\r\n                        var newRange;\r\n                        if (model_1.presentation.textEdit) {\r\n                            textEdits = [model_1.presentation.textEdit];\r\n                            newRange = new Range(model_1.presentation.textEdit.range.startLineNumber, model_1.presentation.textEdit.range.startColumn, model_1.presentation.textEdit.range.endLineNumber, model_1.presentation.textEdit.range.endColumn);\r\n                            newRange = newRange.setEndPosition(newRange.endLineNumber, newRange.startColumn + model_1.presentation.textEdit.text.length);\r\n                        }\r\n                        else {\r\n                            textEdits = [{ identifier: null, range: range_2, text: model_1.presentation.label, forceMoveMarkers: false }];\r\n                            newRange = range_2.setEndPosition(range_2.endLineNumber, range_2.startColumn + model_1.presentation.label.length);\r\n                        }\r\n                        _this._editor.pushUndoStop();\r\n                        _this._editor.executeEdits('colorpicker', textEdits);\r\n                        if (model_1.presentation.additionalTextEdits) {\r\n                            textEdits = __spreadArrays(model_1.presentation.additionalTextEdits);\r\n                            _this._editor.executeEdits('colorpicker', textEdits);\r\n                            _this.hide();\r\n                        }\r\n                        _this._editor.pushUndoStop();\r\n                        range_2 = newRange;\r\n                    };\r\n                    var updateColorPresentations = function (color) {\r\n                        return getColorPresentations(editorModel_1, {\r\n                            range: range_2,\r\n                            color: {\r\n                                red: color.rgba.r / 255,\r\n                                green: color.rgba.g / 255,\r\n                                blue: color.rgba.b / 255,\r\n                                alpha: color.rgba.a\r\n                            }\r\n                        }, msg.provider, CancellationToken.None).then(function (colorPresentations) {\r\n                            model_1.colorPresentations = colorPresentations || [];\r\n                        });\r\n                    };\r\n                    var colorListener = model_1.onColorFlushed(function (color) {\r\n                        updateColorPresentations(color).then(updateEditorModel);\r\n                    });\r\n                    var colorChangeListener = model_1.onDidChangeColor(updateColorPresentations);\r\n                    _this._colorPicker = widget_1;\r\n                    _this.showAt(range_2.getStartPosition(), range_2, _this._shouldFocus);\r\n                    _this.updateContents(fragment);\r\n                    _this._colorPicker.layout();\r\n                    _this.renderDisposable.value = combinedDisposable(colorListener, colorChangeListener, widget_1, markdownDisposeables);\r\n                });\r\n            }\r\n            else {\r\n                if (msg instanceof MarkerHover) {\r\n                    markerMessages.push(msg);\r\n                    isEmptyHoverContent = false;\r\n                }\r\n                else {\r\n                    msg.contents\r\n                        .filter(function (contents) { return !isEmptyMarkdownString(contents); })\r\n                        .forEach(function (contents) {\r\n                        var markdownHoverElement = $('div.hover-row.markdown-hover');\r\n                        var hoverContentsElement = dom.append(markdownHoverElement, $('div.hover-contents'));\r\n                        var renderer = markdownDisposeables.add(new MarkdownRenderer(_this._editor, _this._modeService, _this._openerService));\r\n                        markdownDisposeables.add(renderer.onDidRenderCodeBlock(function () {\r\n                            hoverContentsElement.className = 'hover-contents code-hover-contents';\r\n                            _this.onContentsChange();\r\n                        }));\r\n                        var renderedContents = markdownDisposeables.add(renderer.render(contents));\r\n                        hoverContentsElement.appendChild(renderedContents.element);\r\n                        fragment.appendChild(markdownHoverElement);\r\n                        isEmptyHoverContent = false;\r\n                    });\r\n                }\r\n            }\r\n        });\r\n        if (markerMessages.length) {\r\n            markerMessages.forEach(function (msg) { return fragment.appendChild(_this.renderMarkerHover(msg)); });\r\n            var markerHoverForStatusbar = markerMessages.length === 1 ? markerMessages[0] : markerMessages.sort(function (a, b) { return MarkerSeverity.compare(a.marker.severity, b.marker.severity); })[0];\r\n            fragment.appendChild(this.renderMarkerStatusbar(markerHoverForStatusbar));\r\n        }\r\n        // show\r\n        if (!containColorPicker && !isEmptyHoverContent) {\r\n            this.showAt(new Position(renderRange.startLineNumber, renderColumn), highlightRange, this._shouldFocus);\r\n            this.updateContents(fragment);\r\n        }\r\n        this._isChangingDecorations = true;\r\n        this._highlightDecorations = this._editor.deltaDecorations(this._highlightDecorations, highlightRange ? [{\r\n                range: highlightRange,\r\n                options: ModesContentHoverWidget._DECORATION_OPTIONS\r\n            }] : []);\r\n        this._isChangingDecorations = false;\r\n    };\r\n    ModesContentHoverWidget.prototype.renderMarkerHover = function (markerHover) {\r\n        var _this = this;\r\n        var hoverElement = $('div.hover-row');\r\n        var markerElement = dom.append(hoverElement, $('div.marker.hover-contents'));\r\n        var _a = markerHover.marker, source = _a.source, message = _a.message, code = _a.code, relatedInformation = _a.relatedInformation;\r\n        this._editor.applyFontInfo(markerElement);\r\n        var messageElement = dom.append(markerElement, $('span'));\r\n        messageElement.style.whiteSpace = 'pre-wrap';\r\n        messageElement.innerText = message;\r\n        if (source || code) {\r\n            if (typeof code === 'string') {\r\n                var detailsElement = dom.append(markerElement, $('span'));\r\n                detailsElement.style.opacity = '0.6';\r\n                detailsElement.style.paddingLeft = '6px';\r\n                detailsElement.innerText = source && code ? source + \"(\" + code + \")\" : source ? source : \"(\" + code + \")\";\r\n            }\r\n            else {\r\n                if (code) {\r\n                    var sourceAndCodeElement = $('span');\r\n                    if (source) {\r\n                        var sourceElement = dom.append(sourceAndCodeElement, $('span'));\r\n                        sourceElement.innerText = source;\r\n                    }\r\n                    this._codeLink = dom.append(sourceAndCodeElement, $('a.code-link'));\r\n                    this._codeLink.setAttribute('href', code.link.toString());\r\n                    this._codeLink.onclick = function (e) {\r\n                        _this._openerService.open(code.link);\r\n                        e.preventDefault();\r\n                        e.stopPropagation();\r\n                    };\r\n                    var codeElement = dom.append(this._codeLink, $('span'));\r\n                    codeElement.innerText = code.value;\r\n                    var detailsElement = dom.append(markerElement, sourceAndCodeElement);\r\n                    detailsElement.style.opacity = '0.6';\r\n                    detailsElement.style.paddingLeft = '6px';\r\n                }\r\n            }\r\n        }\r\n        if (isNonEmptyArray(relatedInformation)) {\r\n            var _loop_1 = function (message_1, resource, startLineNumber, startColumn) {\r\n                var relatedInfoContainer = dom.append(markerElement, $('div'));\r\n                relatedInfoContainer.style.marginTop = '8px';\r\n                var a = dom.append(relatedInfoContainer, $('a'));\r\n                a.innerText = basename(resource) + \"(\" + startLineNumber + \", \" + startColumn + \"): \";\r\n                a.style.cursor = 'pointer';\r\n                a.onclick = function (e) {\r\n                    e.stopPropagation();\r\n                    e.preventDefault();\r\n                    if (_this._openerService) {\r\n                        _this._openerService.open(resource.with({ fragment: startLineNumber + \",\" + startColumn }), { fromUserGesture: true }).catch(onUnexpectedError);\r\n                    }\r\n                };\r\n                var messageElement_1 = dom.append(relatedInfoContainer, $('span'));\r\n                messageElement_1.innerText = message_1;\r\n                this_1._editor.applyFontInfo(messageElement_1);\r\n            };\r\n            var this_1 = this;\r\n            for (var _i = 0, relatedInformation_1 = relatedInformation; _i < relatedInformation_1.length; _i++) {\r\n                var _b = relatedInformation_1[_i], message_1 = _b.message, resource = _b.resource, startLineNumber = _b.startLineNumber, startColumn = _b.startColumn;\r\n                _loop_1(message_1, resource, startLineNumber, startColumn);\r\n            }\r\n        }\r\n        return hoverElement;\r\n    };\r\n    ModesContentHoverWidget.prototype.renderMarkerStatusbar = function (markerHover) {\r\n        var _this = this;\r\n        var hoverElement = $('div.hover-row.status-bar');\r\n        var disposables = new DisposableStore();\r\n        var actionsElement = dom.append(hoverElement, $('div.actions'));\r\n        if (markerHover.marker.severity === MarkerSeverity.Error || markerHover.marker.severity === MarkerSeverity.Warning || markerHover.marker.severity === MarkerSeverity.Info) {\r\n            disposables.add(this.renderAction(actionsElement, {\r\n                label: nls.localize('peek problem', \"Peek Problem\"),\r\n                commandId: NextMarkerAction.ID,\r\n                run: function () {\r\n                    _this.hide();\r\n                    MarkerController.get(_this._editor).show(markerHover.marker);\r\n                    _this._editor.focus();\r\n                }\r\n            }));\r\n        }\r\n        var quickfixPlaceholderElement = dom.append(actionsElement, $('div'));\r\n        quickfixPlaceholderElement.style.opacity = '0';\r\n        quickfixPlaceholderElement.style.transition = 'opacity 0.2s';\r\n        setTimeout(function () { return quickfixPlaceholderElement.style.opacity = '1'; }, 200);\r\n        quickfixPlaceholderElement.textContent = nls.localize('checkingForQuickFixes', \"Checking for quick fixes...\");\r\n        disposables.add(toDisposable(function () { return quickfixPlaceholderElement.remove(); }));\r\n        var codeActionsPromise = this.getCodeActions(markerHover.marker);\r\n        disposables.add(toDisposable(function () { return codeActionsPromise.cancel(); }));\r\n        codeActionsPromise.then(function (actions) {\r\n            quickfixPlaceholderElement.style.transition = '';\r\n            quickfixPlaceholderElement.style.opacity = '1';\r\n            if (!actions.validActions.length) {\r\n                actions.dispose();\r\n                quickfixPlaceholderElement.textContent = nls.localize('noQuickFixes', \"No quick fixes available\");\r\n                return;\r\n            }\r\n            quickfixPlaceholderElement.remove();\r\n            var showing = false;\r\n            disposables.add(toDisposable(function () {\r\n                if (!showing) {\r\n                    actions.dispose();\r\n                }\r\n            }));\r\n            disposables.add(_this.renderAction(actionsElement, {\r\n                label: nls.localize('quick fixes', \"Quick Fix...\"),\r\n                commandId: QuickFixAction.Id,\r\n                run: function (target) {\r\n                    showing = true;\r\n                    var controller = QuickFixController.get(_this._editor);\r\n                    var elementPosition = dom.getDomNodePagePosition(target);\r\n                    controller.showCodeActions(markerCodeActionTrigger, actions, {\r\n                        x: elementPosition.left + 6,\r\n                        y: elementPosition.top + elementPosition.height + 6\r\n                    });\r\n                }\r\n            }));\r\n        });\r\n        this.renderDisposable.value = disposables;\r\n        return hoverElement;\r\n    };\r\n    ModesContentHoverWidget.prototype.getCodeActions = function (marker) {\r\n        var _this = this;\r\n        return createCancelablePromise(function (cancellationToken) {\r\n            return getCodeActions(_this._editor.getModel(), new Range(marker.startLineNumber, marker.startColumn, marker.endLineNumber, marker.endColumn), markerCodeActionTrigger, cancellationToken);\r\n        });\r\n    };\r\n    ModesContentHoverWidget.prototype.renderAction = function (parent, actionOptions) {\r\n        var actionContainer = dom.append(parent, $('div.action-container'));\r\n        var action = dom.append(actionContainer, $('a.action'));\r\n        if (actionOptions.iconClass) {\r\n            dom.append(action, $(\"span.icon.\" + actionOptions.iconClass));\r\n        }\r\n        var label = dom.append(action, $('span'));\r\n        label.textContent = actionOptions.label;\r\n        var keybinding = this._keybindingService.lookupKeybinding(actionOptions.commandId);\r\n        if (keybinding) {\r\n            label.title = actionOptions.label + \" (\" + keybinding.getLabel() + \")\";\r\n        }\r\n        return dom.addDisposableListener(actionContainer, dom.EventType.CLICK, function (e) {\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n            actionOptions.run(actionContainer);\r\n        });\r\n    };\r\n    ModesContentHoverWidget.ID = 'editor.contrib.modesContentHoverWidget';\r\n    ModesContentHoverWidget._DECORATION_OPTIONS = ModelDecorationOptions.register({\r\n        className: 'hoverHighlight'\r\n    });\r\n    return ModesContentHoverWidget;\r\n}(ContentHoverWidget));\r\nexport { ModesContentHoverWidget };\r\nfunction hoverContentsEquals(first, second) {\r\n    if ((!first && second) || (first && !second) || first.length !== second.length) {\r\n        return false;\r\n    }\r\n    for (var i = 0; i < first.length; i++) {\r\n        var firstElement = first[i];\r\n        var secondElement = second[i];\r\n        if (firstElement instanceof MarkerHover && secondElement instanceof MarkerHover) {\r\n            return IMarkerData.makeKey(firstElement.marker) === IMarkerData.makeKey(secondElement.marker);\r\n        }\r\n        if (firstElement instanceof ColorHover || secondElement instanceof ColorHover) {\r\n            return false;\r\n        }\r\n        if (firstElement instanceof MarkerHover || secondElement instanceof MarkerHover) {\r\n            return false;\r\n        }\r\n        if (!markedStringsEquals(firstElement.contents, secondElement.contents)) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nregisterThemingParticipant(function (theme, collector) {\r\n    var linkFg = theme.getColor(textLinkForeground);\r\n    if (linkFg) {\r\n        collector.addRule(\".monaco-editor-hover .hover-contents a.code-link span:hover { color: \" + linkFg + \"; }\");\r\n    }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { $ } from '../../../base/browser/dom.js';\r\nimport { isEmptyMarkdownString } from '../../../base/common/htmlContent.js';\r\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport { HoverOperation } from './hoverOperation.js';\r\nimport { GlyphHoverWidget } from './hoverWidgets.js';\r\nimport { MarkdownRenderer } from '../markdown/markdownRenderer.js';\r\nimport { NullOpenerService } from '../../../platform/opener/common/opener.js';\r\nimport { asArray } from '../../../base/common/arrays.js';\r\nvar MarginComputer = /** @class */ (function () {\r\n    function MarginComputer(editor) {\r\n        this._editor = editor;\r\n        this._lineNumber = -1;\r\n        this._result = [];\r\n    }\r\n    MarginComputer.prototype.setLineNumber = function (lineNumber) {\r\n        this._lineNumber = lineNumber;\r\n        this._result = [];\r\n    };\r\n    MarginComputer.prototype.clearResult = function () {\r\n        this._result = [];\r\n    };\r\n    MarginComputer.prototype.computeSync = function () {\r\n        var toHoverMessage = function (contents) {\r\n            return {\r\n                value: contents\r\n            };\r\n        };\r\n        var lineDecorations = this._editor.getLineDecorations(this._lineNumber);\r\n        var result = [];\r\n        if (!lineDecorations) {\r\n            return result;\r\n        }\r\n        for (var _i = 0, lineDecorations_1 = lineDecorations; _i < lineDecorations_1.length; _i++) {\r\n            var d = lineDecorations_1[_i];\r\n            if (!d.options.glyphMarginClassName) {\r\n                continue;\r\n            }\r\n            var hoverMessage = d.options.glyphMarginHoverMessage;\r\n            if (!hoverMessage || isEmptyMarkdownString(hoverMessage)) {\r\n                continue;\r\n            }\r\n            result.push.apply(result, asArray(hoverMessage).map(toHoverMessage));\r\n        }\r\n        return result;\r\n    };\r\n    MarginComputer.prototype.onResult = function (result, isFromSynchronousComputation) {\r\n        this._result = this._result.concat(result);\r\n    };\r\n    MarginComputer.prototype.getResult = function () {\r\n        return this._result;\r\n    };\r\n    MarginComputer.prototype.getResultWithLoadingMessage = function () {\r\n        return this.getResult();\r\n    };\r\n    return MarginComputer;\r\n}());\r\nvar ModesGlyphHoverWidget = /** @class */ (function (_super) {\r\n    __extends(ModesGlyphHoverWidget, _super);\r\n    function ModesGlyphHoverWidget(editor, modeService, openerService) {\r\n        if (openerService === void 0) { openerService = NullOpenerService; }\r\n        var _this = _super.call(this, ModesGlyphHoverWidget.ID, editor) || this;\r\n        _this._renderDisposeables = _this._register(new DisposableStore());\r\n        _this._messages = [];\r\n        _this._lastLineNumber = -1;\r\n        _this._markdownRenderer = _this._register(new MarkdownRenderer(_this._editor, modeService, openerService));\r\n        _this._computer = new MarginComputer(_this._editor);\r\n        _this._hoverOperation = new HoverOperation(_this._computer, function (result) { return _this._withResult(result); }, undefined, function (result) { return _this._withResult(result); }, 300);\r\n        return _this;\r\n    }\r\n    ModesGlyphHoverWidget.prototype.dispose = function () {\r\n        this._hoverOperation.cancel();\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    ModesGlyphHoverWidget.prototype.onModelDecorationsChanged = function () {\r\n        if (this.isVisible) {\r\n            // The decorations have changed and the hover is visible,\r\n            // we need to recompute the displayed text\r\n            this._hoverOperation.cancel();\r\n            this._computer.clearResult();\r\n            this._hoverOperation.start(0 /* Delayed */);\r\n        }\r\n    };\r\n    ModesGlyphHoverWidget.prototype.startShowingAt = function (lineNumber) {\r\n        if (this._lastLineNumber === lineNumber) {\r\n            // We have to show the widget at the exact same line number as before, so no work is needed\r\n            return;\r\n        }\r\n        this._hoverOperation.cancel();\r\n        this.hide();\r\n        this._lastLineNumber = lineNumber;\r\n        this._computer.setLineNumber(lineNumber);\r\n        this._hoverOperation.start(0 /* Delayed */);\r\n    };\r\n    ModesGlyphHoverWidget.prototype.hide = function () {\r\n        this._lastLineNumber = -1;\r\n        this._hoverOperation.cancel();\r\n        _super.prototype.hide.call(this);\r\n    };\r\n    ModesGlyphHoverWidget.prototype._withResult = function (result) {\r\n        this._messages = result;\r\n        if (this._messages.length > 0) {\r\n            this._renderMessages(this._lastLineNumber, this._messages);\r\n        }\r\n        else {\r\n            this.hide();\r\n        }\r\n    };\r\n    ModesGlyphHoverWidget.prototype._renderMessages = function (lineNumber, messages) {\r\n        this._renderDisposeables.clear();\r\n        var fragment = document.createDocumentFragment();\r\n        for (var _i = 0, messages_1 = messages; _i < messages_1.length; _i++) {\r\n            var msg = messages_1[_i];\r\n            var renderedContents = this._markdownRenderer.render(msg.value);\r\n            this._renderDisposeables.add(renderedContents);\r\n            fragment.appendChild($('div.hover-row', undefined, renderedContents.element));\r\n        }\r\n        this.updateContents(fragment);\r\n        this.showAt(lineNumber);\r\n    };\r\n    ModesGlyphHoverWidget.ID = 'editor.contrib.modesGlyphHoverWidget';\r\n    return ModesGlyphHoverWidget;\r\n}(GlyphHoverWidget));\r\nexport { ModesGlyphHoverWidget };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport './hover.css';\r\nimport * as nls from '../../../nls.js';\r\nimport { KeyChord } from '../../../base/common/keyCodes.js';\r\nimport { DisposableStore, MutableDisposable } from '../../../base/common/lifecycle.js';\r\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../browser/editorExtensions.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\r\nimport { IModeService } from '../../common/services/modeService.js';\r\nimport { ModesContentHoverWidget } from './modesContentHover.js';\r\nimport { ModesGlyphHoverWidget } from './modesGlyphHover.js';\r\nimport { IOpenerService } from '../../../platform/opener/common/opener.js';\r\nimport { editorHoverBackground, editorHoverBorder, editorHoverHighlight, textCodeBlockBackground, textLinkForeground, editorHoverStatusBarBackground, editorHoverForeground } from '../../../platform/theme/common/colorRegistry.js';\r\nimport { IThemeService, registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\r\nimport { IMarkerDecorationsService } from '../../common/services/markersDecorationService.js';\r\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\r\nimport { GotoDefinitionAtPositionEditorContribution } from '../gotoSymbol/link/goToDefinitionAtPosition.js';\r\nvar ModesHoverController = /** @class */ (function () {\r\n    function ModesHoverController(_editor, _openerService, _modeService, _markerDecorationsService, _keybindingService, _themeService) {\r\n        var _this = this;\r\n        this._editor = _editor;\r\n        this._openerService = _openerService;\r\n        this._modeService = _modeService;\r\n        this._markerDecorationsService = _markerDecorationsService;\r\n        this._keybindingService = _keybindingService;\r\n        this._themeService = _themeService;\r\n        this._toUnhook = new DisposableStore();\r\n        this._contentWidget = new MutableDisposable();\r\n        this._glyphWidget = new MutableDisposable();\r\n        this._isMouseDown = false;\r\n        this._hoverClicked = false;\r\n        this._hookEvents();\r\n        this._didChangeConfigurationHandler = this._editor.onDidChangeConfiguration(function (e) {\r\n            if (e.hasChanged(44 /* hover */)) {\r\n                _this._hideWidgets();\r\n                _this._unhookEvents();\r\n                _this._hookEvents();\r\n            }\r\n        });\r\n    }\r\n    Object.defineProperty(ModesHoverController.prototype, \"contentWidget\", {\r\n        get: function () {\r\n            if (!this._contentWidget.value) {\r\n                this._createHoverWidgets();\r\n            }\r\n            return this._contentWidget.value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ModesHoverController.prototype, \"glyphWidget\", {\r\n        get: function () {\r\n            if (!this._glyphWidget.value) {\r\n                this._createHoverWidgets();\r\n            }\r\n            return this._glyphWidget.value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ModesHoverController.get = function (editor) {\r\n        return editor.getContribution(ModesHoverController.ID);\r\n    };\r\n    ModesHoverController.prototype._hookEvents = function () {\r\n        var _this = this;\r\n        var hideWidgetsEventHandler = function () { return _this._hideWidgets(); };\r\n        var hoverOpts = this._editor.getOption(44 /* hover */);\r\n        this._isHoverEnabled = hoverOpts.enabled;\r\n        this._isHoverSticky = hoverOpts.sticky;\r\n        if (this._isHoverEnabled) {\r\n            this._toUnhook.add(this._editor.onMouseDown(function (e) { return _this._onEditorMouseDown(e); }));\r\n            this._toUnhook.add(this._editor.onMouseUp(function (e) { return _this._onEditorMouseUp(e); }));\r\n            this._toUnhook.add(this._editor.onMouseMove(function (e) { return _this._onEditorMouseMove(e); }));\r\n            this._toUnhook.add(this._editor.onKeyDown(function (e) { return _this._onKeyDown(e); }));\r\n            this._toUnhook.add(this._editor.onDidChangeModelDecorations(function () { return _this._onModelDecorationsChanged(); }));\r\n        }\r\n        else {\r\n            this._toUnhook.add(this._editor.onMouseMove(hideWidgetsEventHandler));\r\n        }\r\n        this._toUnhook.add(this._editor.onMouseLeave(hideWidgetsEventHandler));\r\n        this._toUnhook.add(this._editor.onDidChangeModel(hideWidgetsEventHandler));\r\n        this._toUnhook.add(this._editor.onDidScrollChange(function (e) { return _this._onEditorScrollChanged(e); }));\r\n    };\r\n    ModesHoverController.prototype._unhookEvents = function () {\r\n        this._toUnhook.clear();\r\n    };\r\n    ModesHoverController.prototype._onModelDecorationsChanged = function () {\r\n        this.contentWidget.onModelDecorationsChanged();\r\n        this.glyphWidget.onModelDecorationsChanged();\r\n    };\r\n    ModesHoverController.prototype._onEditorScrollChanged = function (e) {\r\n        if (e.scrollTopChanged || e.scrollLeftChanged) {\r\n            this._hideWidgets();\r\n        }\r\n    };\r\n    ModesHoverController.prototype._onEditorMouseDown = function (mouseEvent) {\r\n        this._isMouseDown = true;\r\n        var targetType = mouseEvent.target.type;\r\n        if (targetType === 9 /* CONTENT_WIDGET */ && mouseEvent.target.detail === ModesContentHoverWidget.ID) {\r\n            this._hoverClicked = true;\r\n            // mouse down on top of content hover widget\r\n            return;\r\n        }\r\n        if (targetType === 12 /* OVERLAY_WIDGET */ && mouseEvent.target.detail === ModesGlyphHoverWidget.ID) {\r\n            // mouse down on top of overlay hover widget\r\n            return;\r\n        }\r\n        if (targetType !== 12 /* OVERLAY_WIDGET */ && mouseEvent.target.detail !== ModesGlyphHoverWidget.ID) {\r\n            this._hoverClicked = false;\r\n        }\r\n        this._hideWidgets();\r\n    };\r\n    ModesHoverController.prototype._onEditorMouseUp = function (mouseEvent) {\r\n        this._isMouseDown = false;\r\n    };\r\n    ModesHoverController.prototype._onEditorMouseMove = function (mouseEvent) {\r\n        var targetType = mouseEvent.target.type;\r\n        if (this._isMouseDown && this._hoverClicked && this.contentWidget.isColorPickerVisible()) {\r\n            return;\r\n        }\r\n        if (this._isHoverSticky && targetType === 9 /* CONTENT_WIDGET */ && mouseEvent.target.detail === ModesContentHoverWidget.ID) {\r\n            // mouse moved on top of content hover widget\r\n            return;\r\n        }\r\n        if (this._isHoverSticky && targetType === 12 /* OVERLAY_WIDGET */ && mouseEvent.target.detail === ModesGlyphHoverWidget.ID) {\r\n            // mouse moved on top of overlay hover widget\r\n            return;\r\n        }\r\n        if (targetType === 7 /* CONTENT_EMPTY */) {\r\n            var epsilon = this._editor.getOption(34 /* fontInfo */).typicalHalfwidthCharacterWidth / 2;\r\n            var data = mouseEvent.target.detail;\r\n            if (data && !data.isAfterLines && typeof data.horizontalDistanceToText === 'number' && data.horizontalDistanceToText < epsilon) {\r\n                // Let hover kick in even when the mouse is technically in the empty area after a line, given the distance is small enough\r\n                targetType = 6 /* CONTENT_TEXT */;\r\n            }\r\n        }\r\n        if (targetType === 6 /* CONTENT_TEXT */) {\r\n            this.glyphWidget.hide();\r\n            if (this._isHoverEnabled && mouseEvent.target.range) {\r\n                this.contentWidget.startShowingAt(mouseEvent.target.range, 0 /* Delayed */, false);\r\n            }\r\n        }\r\n        else if (targetType === 2 /* GUTTER_GLYPH_MARGIN */) {\r\n            this.contentWidget.hide();\r\n            if (this._isHoverEnabled && mouseEvent.target.position) {\r\n                this.glyphWidget.startShowingAt(mouseEvent.target.position.lineNumber);\r\n            }\r\n        }\r\n        else {\r\n            this._hideWidgets();\r\n        }\r\n    };\r\n    ModesHoverController.prototype._onKeyDown = function (e) {\r\n        if (e.keyCode !== 5 /* Ctrl */ && e.keyCode !== 6 /* Alt */ && e.keyCode !== 57 /* Meta */ && e.keyCode !== 4 /* Shift */) {\r\n            // Do not hide hover when a modifier key is pressed\r\n            this._hideWidgets();\r\n        }\r\n    };\r\n    ModesHoverController.prototype._hideWidgets = function () {\r\n        if (!this._glyphWidget.value || !this._contentWidget.value || (this._isMouseDown && this._hoverClicked && this._contentWidget.value.isColorPickerVisible())) {\r\n            return;\r\n        }\r\n        this._glyphWidget.value.hide();\r\n        this._contentWidget.value.hide();\r\n    };\r\n    ModesHoverController.prototype._createHoverWidgets = function () {\r\n        this._contentWidget.value = new ModesContentHoverWidget(this._editor, this._markerDecorationsService, this._themeService, this._keybindingService, this._modeService, this._openerService);\r\n        this._glyphWidget.value = new ModesGlyphHoverWidget(this._editor, this._modeService, this._openerService);\r\n    };\r\n    ModesHoverController.prototype.showContentHover = function (range, mode, focus) {\r\n        this.contentWidget.startShowingAt(range, mode, focus);\r\n    };\r\n    ModesHoverController.prototype.dispose = function () {\r\n        this._unhookEvents();\r\n        this._toUnhook.dispose();\r\n        this._didChangeConfigurationHandler.dispose();\r\n        this._glyphWidget.dispose();\r\n        this._contentWidget.dispose();\r\n    };\r\n    ModesHoverController.ID = 'editor.contrib.hover';\r\n    ModesHoverController = __decorate([\r\n        __param(1, IOpenerService),\r\n        __param(2, IModeService),\r\n        __param(3, IMarkerDecorationsService),\r\n        __param(4, IKeybindingService),\r\n        __param(5, IThemeService)\r\n    ], ModesHoverController);\r\n    return ModesHoverController;\r\n}());\r\nexport { ModesHoverController };\r\nvar ShowHoverAction = /** @class */ (function (_super) {\r\n    __extends(ShowHoverAction, _super);\r\n    function ShowHoverAction() {\r\n        return _super.call(this, {\r\n            id: 'editor.action.showHover',\r\n            label: nls.localize({\r\n                key: 'showHover',\r\n                comment: [\r\n                    'Label for action that will trigger the showing of a hover in the editor.',\r\n                    'This allows for users to show the hover without using the mouse.'\r\n                ]\r\n            }, \"Show Hover\"),\r\n            alias: 'Show Hover',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: KeyChord(2048 /* CtrlCmd */ | 41 /* KEY_K */, 2048 /* CtrlCmd */ | 39 /* KEY_I */),\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    ShowHoverAction.prototype.run = function (accessor, editor) {\r\n        if (!editor.hasModel()) {\r\n            return;\r\n        }\r\n        var controller = ModesHoverController.get(editor);\r\n        if (!controller) {\r\n            return;\r\n        }\r\n        var position = editor.getPosition();\r\n        var range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\r\n        var focus = editor.getOption(2 /* accessibilitySupport */) === 2 /* Enabled */;\r\n        controller.showContentHover(range, 1 /* Immediate */, focus);\r\n    };\r\n    return ShowHoverAction;\r\n}(EditorAction));\r\nvar ShowDefinitionPreviewHoverAction = /** @class */ (function (_super) {\r\n    __extends(ShowDefinitionPreviewHoverAction, _super);\r\n    function ShowDefinitionPreviewHoverAction() {\r\n        return _super.call(this, {\r\n            id: 'editor.action.showDefinitionPreviewHover',\r\n            label: nls.localize({\r\n                key: 'showDefinitionPreviewHover',\r\n                comment: [\r\n                    'Label for action that will trigger the showing of definition preview hover in the editor.',\r\n                    'This allows for users to show the definition preview hover without using the mouse.'\r\n                ]\r\n            }, \"Show Definition Preview Hover\"),\r\n            alias: 'Show Definition Preview Hover',\r\n            precondition: undefined\r\n        }) || this;\r\n    }\r\n    ShowDefinitionPreviewHoverAction.prototype.run = function (accessor, editor) {\r\n        var controller = ModesHoverController.get(editor);\r\n        if (!controller) {\r\n            return;\r\n        }\r\n        var position = editor.getPosition();\r\n        if (!position) {\r\n            return;\r\n        }\r\n        var range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\r\n        var goto = GotoDefinitionAtPositionEditorContribution.get(editor);\r\n        var promise = goto.startFindDefinitionFromCursor(position);\r\n        if (promise) {\r\n            promise.then(function () {\r\n                controller.showContentHover(range, 1 /* Immediate */, true);\r\n            });\r\n        }\r\n        else {\r\n            controller.showContentHover(range, 1 /* Immediate */, true);\r\n        }\r\n    };\r\n    return ShowDefinitionPreviewHoverAction;\r\n}(EditorAction));\r\nregisterEditorContribution(ModesHoverController.ID, ModesHoverController);\r\nregisterEditorAction(ShowHoverAction);\r\nregisterEditorAction(ShowDefinitionPreviewHoverAction);\r\n// theming\r\nregisterThemingParticipant(function (theme, collector) {\r\n    var editorHoverHighlightColor = theme.getColor(editorHoverHighlight);\r\n    if (editorHoverHighlightColor) {\r\n        collector.addRule(\".monaco-editor .hoverHighlight { background-color: \" + editorHoverHighlightColor + \"; }\");\r\n    }\r\n    var hoverBackground = theme.getColor(editorHoverBackground);\r\n    if (hoverBackground) {\r\n        collector.addRule(\".monaco-editor .monaco-editor-hover { background-color: \" + hoverBackground + \"; }\");\r\n    }\r\n    var hoverBorder = theme.getColor(editorHoverBorder);\r\n    if (hoverBorder) {\r\n        collector.addRule(\".monaco-editor .monaco-editor-hover { border: 1px solid \" + hoverBorder + \"; }\");\r\n        collector.addRule(\".monaco-editor .monaco-editor-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid \" + hoverBorder.transparent(0.5) + \"; }\");\r\n        collector.addRule(\".monaco-editor .monaco-editor-hover hr { border-top: 1px solid \" + hoverBorder.transparent(0.5) + \"; }\");\r\n        collector.addRule(\".monaco-editor .monaco-editor-hover hr { border-bottom: 0px solid \" + hoverBorder.transparent(0.5) + \"; }\");\r\n    }\r\n    var link = theme.getColor(textLinkForeground);\r\n    if (link) {\r\n        collector.addRule(\".monaco-editor .monaco-editor-hover a { color: \" + link + \"; }\");\r\n    }\r\n    var hoverForeground = theme.getColor(editorHoverForeground);\r\n    if (hoverForeground) {\r\n        collector.addRule(\".monaco-editor .monaco-editor-hover { color: \" + hoverForeground + \"; }\");\r\n    }\r\n    var actionsBackground = theme.getColor(editorHoverStatusBarBackground);\r\n    if (actionsBackground) {\r\n        collector.addRule(\".monaco-editor .monaco-editor-hover .hover-row .actions { background-color: \" + actionsBackground + \"; }\");\r\n    }\r\n    var codeBackground = theme.getColor(textCodeBlockBackground);\r\n    if (codeBackground) {\r\n        collector.addRule(\".monaco-editor .monaco-editor-hover code { background-color: \" + codeBackground + \"; }\");\r\n    }\r\n});\r\n"],"sourceRoot":""}