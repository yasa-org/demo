{"version":3,"sources":["webpack:///./node_modules/monaco-editor/esm/vs/editor/standalone/browser/quickOpen/gotoLine.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/standalone/browser/simpleServices.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/standalone/browser/colorizer.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneCodeEditor.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneEditor.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/standalone/browser/accessibilityHelp/accessibilityHelp.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneLanguages.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/standalone/browser/quickOpen/quickOutline.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/standalone/browser/inspectTokens/inspectTokens.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/standalone/browser/iPadShowKeyboard/iPadShowKeyboard.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/standalone/browser/quickOpen/quickOpenEditorWidget.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/standalone/browser/quickOpen/editorQuickOpen.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/standalone/browser/toggleHighContrast/toggleHighContrast.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/standalone/browser/quickOpen/quickCommand.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneCodeServiceImpl.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneThemeServiceImpl.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneServices.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/standalone/browser/referenceSearch/standaloneReferenceSearch.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","this","constructor","prototype","create","GotoLineEntry","_super","line","editor","decorator","_this","call","parseResult","parseInput","position","model","numbers","split","map","part","parseInt","filter","isNaN","length","getModel","diffModel","modified","label","isValid","validatePosition","equals","column","gotoLineLabelValidLineAndColumn","lineNumber","gotoLineLabelValidLine","getLineCount","gotoLineLabelEmptyWithLineLimit","gotoLineLabelEmptyWithLineAndColumnLimit","getLineMaxColumn","getLabel","getAriaLabel","getPosition","currentLine","gotoLineAriaLabel","run","mode","_context","runOpen","runPreview","range","toSelection","setSelection","revealRangeInCenter","focus","clearDecorations","decorateLine","GotoLineAction","gotoLineActionInput","id","gotoLineActionLabel","alias","precondition","undefined","kbOpts","kbExpr","primary","mac","weight","accessor","_show","getController","value","getAutoFocus","searchValue","autoFocusFirstEntry","__decorate","decorators","target","key","desc","c","arguments","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","__spreadArrays","s","il","k","a","j","jl","SimpleModel","_onDispose","get","enumerable","configurable","dispose","fire","withTypedEditor","widget","codeEditorCallback","diffEditorCallback","SimpleEditorModelResolverService","modelService","setEditor","createModelReference","resource","findModel","diffEditor","getOriginalEditor","getModifiedEditor","Promise","resolve","reject","Error","uri","toString","SimpleEditorProgressService","show","NULL_PROGRESS_RUNNER","showWhile","promise","delay","done","total","worked","SimpleDialogService","SimpleNotificationService","info","message","notify","severity","Info","warn","Warning","error","notification","console","log","NO_OP","status","options","None","StandaloneCommandService","instantiationService","_onWillExecuteCommand","_onDidExecuteCommand","_instantiationService","_dynamicCommands","addCommand","command","executeCommand","args","_i","getCommand","commandId","result","invokeFunction","apply","handler","err","StandaloneKeybindingService","contextKeyService","commandService","telemetryService","notificationService","domNode","_cachedResolver","_dynamicKeybindings","_register","KEY_DOWN","e","keyEvent","shouldPreventDefault","_dispatch","preventDefault","stopPropagation","addDynamicKeybinding","_keybinding","when","keybinding","toDispose","push","weight1","weight2","add","kb","splice","updateResolver","source","_commandService","event","_onDidUpdateKeybindings","_getResolver","defaults","_toNormalizedKeybindingItems","getDefaultKeybindings","overrides","_documentHasFocus","document","hasFocus","items","isDefault","resultLen","items_1","item","resolvedKeybindings","resolveKeybinding","_a","resolvedKeybindings_1","resolvedKeybinding","commandArgs","resolveKeyboardEvent","keyboardEvent","ctrlKey","shiftKey","altKey","metaKey","keyCode","toChord","isConfigurationOverrides","thing","overrideIdentifier","SimpleConfigurationService","_onDidChangeConfiguration","onDidChangeConfiguration","_configuration","configuration","getValue","arg1","arg2","section","updateValue","arg3","arg4","inspect","SimpleResourceConfigurationService","configurationService","affectedKeys","affectsConfiguration","isIPosition","SimpleResourcePropertiesService","getEOL","language","eol","StandaloneTelemetryService","publicLog","eventName","data","publicLog2","SimpleWorkspaceContextService","from","scheme","SCHEME","authority","path","workspace","folders","name","index","getWorkspace","getWorkspaceFolder","applyConfigurationValues","isDiffEditor","keys","forEach","SimpleBulkEditService","_modelService","hasPreviewHandler","workspaceEdit","edits","Map","edit","is","array","set","totalEdits","totalFiles","pushStackElement","pushEditOperations","replaceMove","lift","text","selection","ariaSummary","bulkEditServiceSummary","SimpleUriLabelService","getUriLabel","fsPath","SimpleLayoutService","_container","onLayout","Colorizer","colorizeElement","themeService","modeService","theme","mimeType","getAttribute","setTheme","firstChild","nodeValue","className","render","str","innerHTML","colorize","then","tabSize","strings","substr","lines","getModeId","_fakeColorize","triggerMode","tokenizationSupport","_colorize","tokenizationSupportPromise","getPromise","listener","timeout","execute","cancelAndSet","onDidChange","changedLanguages","indexOf","colorizeLine","mightContainNonBasicASCII","mightContainRTL","tokens","isBasicASCII","containsRTL","renderResult","html","colorizeModelLine","content","getLineContent","forceTokenization","getLineTokens","inflatedTokens","inflate","_actualColorize","status_1","getLoadStatus","loaded","defaultMetadata","Uint32Array","length_1","lineTokens","concat","join","state","getInitialState","length_2","tokenizeResult","tokenize2","convertToEndOffset","endState","LAST_GENERATED_COMMAND_ID","ariaDomNodeCreated","createAriaDomNode","aria","body","StandaloneCodeEditor","domElement","codeEditorService","keybindingService","accessibilityService","ariaLabel","editorViewAccessibleLabel","browser","accessibilityHelpMessageIE","accessibilityHelpMessage","_standaloneKeybindingService","context","whenExpression","deserialize","createContextKey","defaultValue","_contextKeyService","createKey","addAction","_descriptor","and","getId","keybindings","keybindingsWhen","keybindingContext","contextMenuGroupId","contextMenuOrder","uniqueId","registerCommand","menuItem","title","group","order","appendMenuItem","isArray","keybindings_1","internalAction","_actions","StandaloneEditor","contextViewService","themeDomRegistration","registerEditorContainer","_model","_contextViewService","_configurationService","self","monaco","createModel","_ownsModel","_attachModel","oldModelUrl","newModelUrl","_onDidChangeModel","updateOptions","newOptions","_modelData","setContainer","view","_postDetachModelCleanup","detachedModel","StandaloneDiffEditor","editorWorkerService","contextMenuService","editorProgressService","clipboardService","_containerDomElement","_createInnerEditor","container","createInstance","descriptor","withAllStandaloneServices","override","callback","services","simpleEditorModelResolverService","has","onDidCreateEditor","onCodeEditorAdd","createDiffEditor","createDiffNavigator","opts","doCreateModel","languageSelection","firstLF","firstLine","substring","createByFilepathOrFirstLine","setModelLanguage","languageId","setMode","setModelMarkers","owner","markers","markerService","changeOne","getModelMarkers","read","getModels","onDidCreateModel","onModelAdded","onWillDisposeModel","onModelRemoved","onDidChangeModelLanguage","onModelModeChanged","oldLanguage","oldModeId","createWebWorker","standaloneThemeService","getSafeTokenizationSupport","modes","tokenize","deltaOffset","len","tokenizationResult","defineTheme","themeName","themeData","remeasureFonts","createMonacoEditorAPI","AccessibilitySupport","standaloneEnums","ContentWidgetPositionPreference","CursorChangeReason","DefaultEndOfLine","EditorAutoIndentStrategy","EditorOption","EndOfLinePreference","EndOfLineSequence","MinimapPosition","MouseTargetType","OverlayWidgetPositionPreference","OverviewRulerLane","RenderLineNumbersType","RenderMinimap","ScrollbarVisibility","ScrollType","TextEditorCursorBlinkingStyle","TextEditorCursorStyle","TrackedRangeStickiness","WrappingIndent","ConfigurationChangedEvent","BareFontInfo","FontInfo","TextModelResolvedOptions","FindMatch","EditorType","EditorOptions","CONTEXT_ACCESSIBILITY_WIDGET_VISIBLE","AccessibilityHelpController","_editor","_widget","AccessibilityHelpWidget","getContribution","ID","hide","getSelectionLabel","selections","charactersSelected","singleSelectionRange","positionLineNumber","positionColumn","singleSelection","multiSelectionRange","multiSelection","noSelection","_keybindingService","_openerService","_isVisibleKey","bindTo","_domNode","createElement","setClassName","setDisplay","setAttribute","_contentDomNode","appendChild","_isVisible","onDidLayoutChange","_layout","emergencyConfOn","accessibilitySupport","_buildContent","openingDocs","url","getRawOptions","accessibilityHelpUrl","open","parse","onblur","addOverlayWidget","removeOverlayWidget","getDomNode","preference","tabIndex","_descriptionForCommand","msg","noKbMsg","lookupKeybinding","getOptions","getSelections","model_1","getValueLengthInRange","readonlyDiffEditor","editableDiffEditor","readonlyEditor","editableEditor","turnOnMessage","changeConfigToOnMac","changeConfigToOnWinLinux","auto_on","auto_off","tabFocusModeOnMsg","tabFocusModeOnMsgNoKb","tabFocusModeOffMsg","tabFocusModeOffMsgNoKb","openDocMessage","openDocMac","openDocWinLinux","outroMsg","reset","editorLayout","getLayoutInfo","w","Math","max","min","WIDTH","width","h","HEIGHT","height","setWidth","setHeight","top","round","setTop","left","setLeft","ShowAccessibilityHelpAction","showAccessibilityHelpAction","controller","AccessibilityHelpCommand","bindToContribution","x","secondary","collector","widgetBackground","getColor","addRule","widgetForeground","widgetShadowColor","hcBorder","register","registerLanguage","getLanguages","getEncodedLanguageId","lid","getLanguageIdentifier","onLanguage","disposable","onDidCreateMode","setLanguageConfiguration","languageIdentifier","EncodedTokenizationSupport2Adapter","actual","_actual","offsetDelta","tokenizeEncoded","TokenizationSupport2Adapter","_standaloneThemeService","_languageIdentifier","_toClassicTokens","previousStartIndex","t","startIndex","scopes","actualResult","_toBinaryTokens","tokenTheme","getTheme","metadata","match","isEncodedTokensProvider","provider","isThenable","obj","setTokensProvider","registerPromise","setMonarchTokensProvider","languageDef","registerReferenceProvider","registerRenameProvider","registerSignatureHelpProvider","registerHoverProvider","provideHover","token","word","getWordAtPosition","startColumn","endColumn","registerDocumentSymbolProvider","registerDocumentHighlightProvider","registerDefinitionProvider","registerImplementationProvider","registerTypeDefinitionProvider","registerCodeLensProvider","registerCodeActionProvider","provideCodeActions","m","areIntersectingOrTouching","only","registerDocumentFormattingEditProvider","registerDocumentRangeFormattingEditProvider","registerOnTypeFormattingEditProvider","registerLinkProvider","registerCompletionItemProvider","registerColorProvider","registerFoldingRangeProvider","registerDeclarationProvider","registerSelectionRangeProvider","registerDocumentSemanticTokensProvider","registerDocumentRangeSemanticTokensProvider","createMonacoLanguagesAPI","DocumentHighlightKind","CompletionItemKind","CompletionItemTag","CompletionItemInsertTextRule","SymbolKind","SymbolTag","IndentAction","CompletionTriggerKind","SignatureHelpTriggerKind","FoldingRangeKind","SCOPE_PREFIX","SymbolEntry","type","description","highlights","setHighlights","entryAriaLabel","getIcon","getDescription","getType","getRange","startLineNumber","QuickOutlineAction","quickOutlineActionInput","quickOutlineActionLabel","hasDocumentSymbolProvider","contextMenuOpts","hasModel","_run","toQuickOpenEntries","autoFocusPrefixMatch","symbolEntry","flattened","results","normalizedSearchValue","flattened_1","element","containerName","toCssClassName","kind","sort","sortScoped","bind","toLowerCase","sortNormal","currentType","currentResult","typeCounter","setGroupLabel","typeToLabel","setShowBorder","_symbols_","count","_modules_","_class_","_interface_","_method_","_function_","_property_","_variable_","_variable2_","_constructor_","_call_","elementA","elementB","elementAName","elementBName","localeCompare","elementARange","elementBRange","elementAType","elementBType","r_1","InspectTokensController","standaloneColorService","_modeService","onDidChangeModel","stop","launch","InspectTokensWidget","InspectTokens","inspectTokensAction","renderTokenText","tokenText","charIndex","charCode","charCodeAt","String","fromCharCode","allowEditorOverflow","_tokenizationSupport","_compute","onDidChangeCursorPosition","addContentWidget","removeContentWidget","_ID","_getTokensAtLine","token1Index","tokens1","offset","token2Index","tokens2","lineContent","tokenStartIndex","tokenEndIndex","_decodeMetadata","_tokenTypeToString","tokenType","_fontStyleToString","fontStyle","Format","CSS","formatHex","foreground","background","layoutContentWidget","colorMap","getColorMap","getLanguageId","getTokenType","getFontStyle","getForeground","getBackground","stateBeforeLine","_getStateBeforeLine","tokenizationResult1","tokenizationResult2","startState","border","borderWidth","IPadShowKeyboard","update","shouldHaveWidget","getOption","ShowKeyboardWidget","QuickOpenEditorWidget","codeEditor","onOk","onCancel","onType","visible","quickOpenWidget","inputPlaceHolder","inputAriaLabel","keyboardSupport","styler","pickerGroupForeground","setInput","destroy","layout","layoutOverlayWidget","QuickOpenController","rangeHighlightDecorationId","lastKnownEditorSelection","onClose","canceled","revealRangeInCenterIfOutsideViewport","activeElement","getSelection","oldDecorations","newDecorations","_RANGE_HIGHLIGHT_DECORATION","decorations","deltaDecorations","isWholeLine","BaseEditorQuickOpenAction","_inputAriaLabel","ToggleHighContrast","toggleHighContrast","_originalThemeName","EditorActionCommandEntry","keyAriaLabel","action","ariaLabelEntryWithKey","ariaLabelEntry","getGroupLabel","setTimeout","QuickCommandAction","quickCommandActionInput","quickCommandActionLabel","_editorActionsToEntries","_sort","actions","getSupportedActions","entries","actions_1","StandaloneCodeEditorServiceImpl","getActiveCodeEditor","openCodeEditor","input","sideBySide","doOpenEditor","schema","http","https","endLineNumber","pos","setPosition","revealPositionInCenter","VS_THEME_NAME","VS_DARK_THEME_NAME","HC_BLACK_THEME_NAME","as","ColorContribution","themingRegistry","ThemingContribution","StandaloneTheme","standaloneThemeData","base","colors","defaultColors","_tokenTheme","notifyBaseUpdated","inherit","getColors","fromHex","baseData","getBuiltinRules","colorId","useDefault","color","getDefault","resolveDefaultColor","defines","rules","encodedTokensColors","createFromRawTokenTheme","getTokenStyleMetadata","modifiers","isBuiltinTheme","builtinTheme","newBuiltInTheme","StandaloneThemeServiceImpl","_onThemeChange","onThemeChange","_environment","_knownThemes","_css","_globalStyleElement","_styleElements","dom","_registerShadowDomContainer","_registerRegularEditorContainer","styleElement","test","_theme","cssRules","hasRule","ruleCollector","rule","getThemingParticipants","setColorMap","getIconTheme","hasFileIcons","hasFolderIcons","hidesExplorerArrows","StaticServices","_serviceCollection","LazyStaticService","serviceId","factory","_serviceId","_factory","_value","_all","define","init","_b","service","configurationServiceImpl","resourceConfigurationService","resourcePropertiesService","contextService","labelService","dialogService","o","logService","markerDecorationsService","storageService","DynamicStandaloneServices","ensure","layoutService","configure","blockMouse","instance","StandaloneReferencesController","editorService"],"mappings":"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","file":"js/chunk-vendors~e2e4556e.9912229e.js","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport './gotoLine.css';\r\nimport * as strings from '../../../../base/common/strings.js';\r\nimport { QuickOpenEntry, QuickOpenModel } from '../../../../base/parts/quickopen/browser/quickOpenModel.js';\r\nimport { isCodeEditor } from '../../../browser/editorBrowser.js';\r\nimport { registerEditorAction } from '../../../browser/editorExtensions.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { BaseEditorQuickOpenAction } from './editorQuickOpen.js';\r\nimport { GoToLineNLS } from '../../../common/standaloneStrings.js';\r\nvar GotoLineEntry = /** @class */ (function (_super) {\r\n    __extends(GotoLineEntry, _super);\r\n    function GotoLineEntry(line, editor, decorator) {\r\n        var _this = _super.call(this) || this;\r\n        _this.editor = editor;\r\n        _this.decorator = decorator;\r\n        _this.parseResult = _this.parseInput(line);\r\n        return _this;\r\n    }\r\n    GotoLineEntry.prototype.parseInput = function (line) {\r\n        var numbers = line.split(',').map(function (part) { return parseInt(part, 10); }).filter(function (part) { return !isNaN(part); });\r\n        var position;\r\n        if (numbers.length === 0) {\r\n            position = new Position(-1, -1);\r\n        }\r\n        else if (numbers.length === 1) {\r\n            position = new Position(numbers[0], 1);\r\n        }\r\n        else {\r\n            position = new Position(numbers[0], numbers[1]);\r\n        }\r\n        var model;\r\n        if (isCodeEditor(this.editor)) {\r\n            model = this.editor.getModel();\r\n        }\r\n        else {\r\n            var diffModel = this.editor.getModel();\r\n            model = diffModel ? diffModel.modified : null;\r\n        }\r\n        var isValid = model ? model.validatePosition(position).equals(position) : false;\r\n        var label;\r\n        if (isValid) {\r\n            if (position.column && position.column > 1) {\r\n                label = strings.format(GoToLineNLS.gotoLineLabelValidLineAndColumn, position.lineNumber, position.column);\r\n            }\r\n            else {\r\n                label = strings.format(GoToLineNLS.gotoLineLabelValidLine, position.lineNumber);\r\n            }\r\n        }\r\n        else if (position.lineNumber < 1 || position.lineNumber > (model ? model.getLineCount() : 0)) {\r\n            label = strings.format(GoToLineNLS.gotoLineLabelEmptyWithLineLimit, model ? model.getLineCount() : 0);\r\n        }\r\n        else {\r\n            label = strings.format(GoToLineNLS.gotoLineLabelEmptyWithLineAndColumnLimit, model ? model.getLineMaxColumn(position.lineNumber) : 0);\r\n        }\r\n        return {\r\n            position: position,\r\n            isValid: isValid,\r\n            label: label\r\n        };\r\n    };\r\n    GotoLineEntry.prototype.getLabel = function () {\r\n        return this.parseResult.label;\r\n    };\r\n    GotoLineEntry.prototype.getAriaLabel = function () {\r\n        var position = this.editor.getPosition();\r\n        var currentLine = position ? position.lineNumber : 0;\r\n        return strings.format(GoToLineNLS.gotoLineAriaLabel, currentLine, this.parseResult.label);\r\n    };\r\n    GotoLineEntry.prototype.run = function (mode, _context) {\r\n        if (mode === 1 /* OPEN */) {\r\n            return this.runOpen();\r\n        }\r\n        return this.runPreview();\r\n    };\r\n    GotoLineEntry.prototype.runOpen = function () {\r\n        // No-op if range is not valid\r\n        if (!this.parseResult.isValid) {\r\n            return false;\r\n        }\r\n        // Apply selection and focus\r\n        var range = this.toSelection();\r\n        this.editor.setSelection(range);\r\n        this.editor.revealRangeInCenter(range, 0 /* Smooth */);\r\n        this.editor.focus();\r\n        return true;\r\n    };\r\n    GotoLineEntry.prototype.runPreview = function () {\r\n        // No-op if range is not valid\r\n        if (!this.parseResult.isValid) {\r\n            this.decorator.clearDecorations();\r\n            return false;\r\n        }\r\n        // Select Line Position\r\n        var range = this.toSelection();\r\n        this.editor.revealRangeInCenter(range, 0 /* Smooth */);\r\n        // Decorate if possible\r\n        this.decorator.decorateLine(range, this.editor);\r\n        return false;\r\n    };\r\n    GotoLineEntry.prototype.toSelection = function () {\r\n        return new Range(this.parseResult.position.lineNumber, this.parseResult.position.column, this.parseResult.position.lineNumber, this.parseResult.position.column);\r\n    };\r\n    return GotoLineEntry;\r\n}(QuickOpenEntry));\r\nexport { GotoLineEntry };\r\nvar GotoLineAction = /** @class */ (function (_super) {\r\n    __extends(GotoLineAction, _super);\r\n    function GotoLineAction() {\r\n        return _super.call(this, GoToLineNLS.gotoLineActionInput, {\r\n            id: 'editor.action.gotoLine',\r\n            label: GoToLineNLS.gotoLineActionLabel,\r\n            alias: 'Go to Line...',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.focus,\r\n                primary: 2048 /* CtrlCmd */ | 37 /* KEY_G */,\r\n                mac: { primary: 256 /* WinCtrl */ | 37 /* KEY_G */ },\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    GotoLineAction.prototype.run = function (accessor, editor) {\r\n        var _this = this;\r\n        this._show(this.getController(editor), {\r\n            getModel: function (value) {\r\n                return new QuickOpenModel([new GotoLineEntry(value, editor, _this.getController(editor))]);\r\n            },\r\n            getAutoFocus: function (searchValue) {\r\n                return {\r\n                    autoFocusFirstEntry: searchValue.length > 0\r\n                };\r\n            }\r\n        });\r\n    };\r\n    return GotoLineAction;\r\n}(BaseEditorQuickOpenAction));\r\nexport { GotoLineAction };\r\nregisterEditorAction(GotoLineAction);\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nimport * as strings from '../../../base/common/strings.js';\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { StandardKeyboardEvent } from '../../../base/browser/keyboardEvent.js';\r\nimport { Emitter, Event } from '../../../base/common/event.js';\r\nimport { SimpleKeybinding, createKeybinding } from '../../../base/common/keyCodes.js';\r\nimport { ImmortalReference, toDisposable, DisposableStore, Disposable } from '../../../base/common/lifecycle.js';\r\nimport { OS, isLinux, isMacintosh } from '../../../base/common/platform.js';\r\nimport Severity from '../../../base/common/severity.js';\r\nimport { URI } from '../../../base/common/uri.js';\r\nimport { isCodeEditor } from '../../browser/editorBrowser.js';\r\nimport { isDiffEditorConfigurationKey, isEditorConfigurationKey } from '../../common/config/commonEditorConfig.js';\r\nimport { EditOperation } from '../../common/core/editOperation.js';\r\nimport { Position as Pos } from '../../common/core/position.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { WorkspaceTextEdit } from '../../common/modes.js';\r\nimport { CommandsRegistry } from '../../../platform/commands/common/commands.js';\r\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\r\nimport { Configuration, ConfigurationModel, DefaultConfigurationModel } from '../../../platform/configuration/common/configurationModels.js';\r\nimport { AbstractKeybindingService } from '../../../platform/keybinding/common/abstractKeybindingService.js';\r\nimport { KeybindingResolver } from '../../../platform/keybinding/common/keybindingResolver.js';\r\nimport { KeybindingsRegistry } from '../../../platform/keybinding/common/keybindingsRegistry.js';\r\nimport { ResolvedKeybindingItem } from '../../../platform/keybinding/common/resolvedKeybindingItem.js';\r\nimport { USLayoutResolvedKeybinding } from '../../../platform/keybinding/common/usLayoutResolvedKeybinding.js';\r\nimport { NoOpNotification } from '../../../platform/notification/common/notification.js';\r\nimport { WorkspaceFolder } from '../../../platform/workspace/common/workspace.js';\r\nimport { SimpleServicesNLS } from '../../common/standaloneStrings.js';\r\nvar SimpleModel = /** @class */ (function () {\r\n    function SimpleModel(model) {\r\n        this.model = model;\r\n        this._onDispose = new Emitter();\r\n    }\r\n    Object.defineProperty(SimpleModel.prototype, \"textEditorModel\", {\r\n        get: function () {\r\n            return this.model;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    SimpleModel.prototype.dispose = function () {\r\n        this._onDispose.fire();\r\n    };\r\n    return SimpleModel;\r\n}());\r\nexport { SimpleModel };\r\nfunction withTypedEditor(widget, codeEditorCallback, diffEditorCallback) {\r\n    if (isCodeEditor(widget)) {\r\n        // Single Editor\r\n        return codeEditorCallback(widget);\r\n    }\r\n    else {\r\n        // Diff Editor\r\n        return diffEditorCallback(widget);\r\n    }\r\n}\r\nvar SimpleEditorModelResolverService = /** @class */ (function () {\r\n    function SimpleEditorModelResolverService(modelService) {\r\n        this.modelService = modelService;\r\n    }\r\n    SimpleEditorModelResolverService.prototype.setEditor = function (editor) {\r\n        this.editor = editor;\r\n    };\r\n    SimpleEditorModelResolverService.prototype.createModelReference = function (resource) {\r\n        var _this = this;\r\n        var model = null;\r\n        if (this.editor) {\r\n            model = withTypedEditor(this.editor, function (editor) { return _this.findModel(editor, resource); }, function (diffEditor) { return _this.findModel(diffEditor.getOriginalEditor(), resource) || _this.findModel(diffEditor.getModifiedEditor(), resource); });\r\n        }\r\n        if (!model) {\r\n            return Promise.reject(new Error(\"Model not found\"));\r\n        }\r\n        return Promise.resolve(new ImmortalReference(new SimpleModel(model)));\r\n    };\r\n    SimpleEditorModelResolverService.prototype.findModel = function (editor, resource) {\r\n        var model = this.modelService ? this.modelService.getModel(resource) : editor.getModel();\r\n        if (model && model.uri.toString() !== resource.toString()) {\r\n            return null;\r\n        }\r\n        return model;\r\n    };\r\n    return SimpleEditorModelResolverService;\r\n}());\r\nexport { SimpleEditorModelResolverService };\r\nvar SimpleEditorProgressService = /** @class */ (function () {\r\n    function SimpleEditorProgressService() {\r\n    }\r\n    SimpleEditorProgressService.prototype.show = function () {\r\n        return SimpleEditorProgressService.NULL_PROGRESS_RUNNER;\r\n    };\r\n    SimpleEditorProgressService.prototype.showWhile = function (promise, delay) {\r\n        return Promise.resolve(undefined);\r\n    };\r\n    SimpleEditorProgressService.NULL_PROGRESS_RUNNER = {\r\n        done: function () { },\r\n        total: function () { },\r\n        worked: function () { }\r\n    };\r\n    return SimpleEditorProgressService;\r\n}());\r\nexport { SimpleEditorProgressService };\r\nvar SimpleDialogService = /** @class */ (function () {\r\n    function SimpleDialogService() {\r\n    }\r\n    return SimpleDialogService;\r\n}());\r\nexport { SimpleDialogService };\r\nvar SimpleNotificationService = /** @class */ (function () {\r\n    function SimpleNotificationService() {\r\n    }\r\n    SimpleNotificationService.prototype.info = function (message) {\r\n        return this.notify({ severity: Severity.Info, message: message });\r\n    };\r\n    SimpleNotificationService.prototype.warn = function (message) {\r\n        return this.notify({ severity: Severity.Warning, message: message });\r\n    };\r\n    SimpleNotificationService.prototype.error = function (error) {\r\n        return this.notify({ severity: Severity.Error, message: error });\r\n    };\r\n    SimpleNotificationService.prototype.notify = function (notification) {\r\n        switch (notification.severity) {\r\n            case Severity.Error:\r\n                console.error(notification.message);\r\n                break;\r\n            case Severity.Warning:\r\n                console.warn(notification.message);\r\n                break;\r\n            default:\r\n                console.log(notification.message);\r\n                break;\r\n        }\r\n        return SimpleNotificationService.NO_OP;\r\n    };\r\n    SimpleNotificationService.prototype.status = function (message, options) {\r\n        return Disposable.None;\r\n    };\r\n    SimpleNotificationService.NO_OP = new NoOpNotification();\r\n    return SimpleNotificationService;\r\n}());\r\nexport { SimpleNotificationService };\r\nvar StandaloneCommandService = /** @class */ (function () {\r\n    function StandaloneCommandService(instantiationService) {\r\n        this._onWillExecuteCommand = new Emitter();\r\n        this._onDidExecuteCommand = new Emitter();\r\n        this._instantiationService = instantiationService;\r\n        this._dynamicCommands = Object.create(null);\r\n    }\r\n    StandaloneCommandService.prototype.addCommand = function (command) {\r\n        var _this = this;\r\n        var id = command.id;\r\n        this._dynamicCommands[id] = command;\r\n        return toDisposable(function () {\r\n            delete _this._dynamicCommands[id];\r\n        });\r\n    };\r\n    StandaloneCommandService.prototype.executeCommand = function (id) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        var command = (CommandsRegistry.getCommand(id) || this._dynamicCommands[id]);\r\n        if (!command) {\r\n            return Promise.reject(new Error(\"command '\" + id + \"' not found\"));\r\n        }\r\n        try {\r\n            this._onWillExecuteCommand.fire({ commandId: id, args: args });\r\n            var result = this._instantiationService.invokeFunction.apply(this._instantiationService, __spreadArrays([command.handler], args));\r\n            this._onDidExecuteCommand.fire({ commandId: id, args: args });\r\n            return Promise.resolve(result);\r\n        }\r\n        catch (err) {\r\n            return Promise.reject(err);\r\n        }\r\n    };\r\n    return StandaloneCommandService;\r\n}());\r\nexport { StandaloneCommandService };\r\nvar StandaloneKeybindingService = /** @class */ (function (_super) {\r\n    __extends(StandaloneKeybindingService, _super);\r\n    function StandaloneKeybindingService(contextKeyService, commandService, telemetryService, notificationService, domNode) {\r\n        var _this = _super.call(this, contextKeyService, commandService, telemetryService, notificationService) || this;\r\n        _this._cachedResolver = null;\r\n        _this._dynamicKeybindings = [];\r\n        _this._register(dom.addDisposableListener(domNode, dom.EventType.KEY_DOWN, function (e) {\r\n            var keyEvent = new StandardKeyboardEvent(e);\r\n            var shouldPreventDefault = _this._dispatch(keyEvent, keyEvent.target);\r\n            if (shouldPreventDefault) {\r\n                keyEvent.preventDefault();\r\n                keyEvent.stopPropagation();\r\n            }\r\n        }));\r\n        return _this;\r\n    }\r\n    StandaloneKeybindingService.prototype.addDynamicKeybinding = function (commandId, _keybinding, handler, when) {\r\n        var _this = this;\r\n        var keybinding = createKeybinding(_keybinding, OS);\r\n        var toDispose = new DisposableStore();\r\n        if (keybinding) {\r\n            this._dynamicKeybindings.push({\r\n                keybinding: keybinding,\r\n                command: commandId,\r\n                when: when,\r\n                weight1: 1000,\r\n                weight2: 0\r\n            });\r\n            toDispose.add(toDisposable(function () {\r\n                for (var i = 0; i < _this._dynamicKeybindings.length; i++) {\r\n                    var kb = _this._dynamicKeybindings[i];\r\n                    if (kb.command === commandId) {\r\n                        _this._dynamicKeybindings.splice(i, 1);\r\n                        _this.updateResolver({ source: 1 /* Default */ });\r\n                        return;\r\n                    }\r\n                }\r\n            }));\r\n        }\r\n        var commandService = this._commandService;\r\n        if (commandService instanceof StandaloneCommandService) {\r\n            toDispose.add(commandService.addCommand({\r\n                id: commandId,\r\n                handler: handler\r\n            }));\r\n        }\r\n        else {\r\n            throw new Error('Unknown command service!');\r\n        }\r\n        this.updateResolver({ source: 1 /* Default */ });\r\n        return toDispose;\r\n    };\r\n    StandaloneKeybindingService.prototype.updateResolver = function (event) {\r\n        this._cachedResolver = null;\r\n        this._onDidUpdateKeybindings.fire(event);\r\n    };\r\n    StandaloneKeybindingService.prototype._getResolver = function () {\r\n        if (!this._cachedResolver) {\r\n            var defaults = this._toNormalizedKeybindingItems(KeybindingsRegistry.getDefaultKeybindings(), true);\r\n            var overrides = this._toNormalizedKeybindingItems(this._dynamicKeybindings, false);\r\n            this._cachedResolver = new KeybindingResolver(defaults, overrides);\r\n        }\r\n        return this._cachedResolver;\r\n    };\r\n    StandaloneKeybindingService.prototype._documentHasFocus = function () {\r\n        return document.hasFocus();\r\n    };\r\n    StandaloneKeybindingService.prototype._toNormalizedKeybindingItems = function (items, isDefault) {\r\n        var result = [], resultLen = 0;\r\n        for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\r\n            var item = items_1[_i];\r\n            var when = item.when || undefined;\r\n            var keybinding = item.keybinding;\r\n            if (!keybinding) {\r\n                // This might be a removal keybinding item in user settings => accept it\r\n                result[resultLen++] = new ResolvedKeybindingItem(undefined, item.command, item.commandArgs, when, isDefault);\r\n            }\r\n            else {\r\n                var resolvedKeybindings = this.resolveKeybinding(keybinding);\r\n                for (var _a = 0, resolvedKeybindings_1 = resolvedKeybindings; _a < resolvedKeybindings_1.length; _a++) {\r\n                    var resolvedKeybinding = resolvedKeybindings_1[_a];\r\n                    result[resultLen++] = new ResolvedKeybindingItem(resolvedKeybinding, item.command, item.commandArgs, when, isDefault);\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    StandaloneKeybindingService.prototype.resolveKeybinding = function (keybinding) {\r\n        return [new USLayoutResolvedKeybinding(keybinding, OS)];\r\n    };\r\n    StandaloneKeybindingService.prototype.resolveKeyboardEvent = function (keyboardEvent) {\r\n        var keybinding = new SimpleKeybinding(keyboardEvent.ctrlKey, keyboardEvent.shiftKey, keyboardEvent.altKey, keyboardEvent.metaKey, keyboardEvent.keyCode).toChord();\r\n        return new USLayoutResolvedKeybinding(keybinding, OS);\r\n    };\r\n    return StandaloneKeybindingService;\r\n}(AbstractKeybindingService));\r\nexport { StandaloneKeybindingService };\r\nfunction isConfigurationOverrides(thing) {\r\n    return thing\r\n        && typeof thing === 'object'\r\n        && (!thing.overrideIdentifier || typeof thing.overrideIdentifier === 'string')\r\n        && (!thing.resource || thing.resource instanceof URI);\r\n}\r\nvar SimpleConfigurationService = /** @class */ (function () {\r\n    function SimpleConfigurationService() {\r\n        this._onDidChangeConfiguration = new Emitter();\r\n        this.onDidChangeConfiguration = this._onDidChangeConfiguration.event;\r\n        this._configuration = new Configuration(new DefaultConfigurationModel(), new ConfigurationModel());\r\n    }\r\n    SimpleConfigurationService.prototype.configuration = function () {\r\n        return this._configuration;\r\n    };\r\n    SimpleConfigurationService.prototype.getValue = function (arg1, arg2) {\r\n        var section = typeof arg1 === 'string' ? arg1 : undefined;\r\n        var overrides = isConfigurationOverrides(arg1) ? arg1 : isConfigurationOverrides(arg2) ? arg2 : {};\r\n        return this.configuration().getValue(section, overrides, undefined);\r\n    };\r\n    SimpleConfigurationService.prototype.updateValue = function (key, value, arg3, arg4) {\r\n        this.configuration().updateValue(key, value);\r\n        return Promise.resolve();\r\n    };\r\n    SimpleConfigurationService.prototype.inspect = function (key, options) {\r\n        if (options === void 0) { options = {}; }\r\n        return this.configuration().inspect(key, options, undefined);\r\n    };\r\n    return SimpleConfigurationService;\r\n}());\r\nexport { SimpleConfigurationService };\r\nvar SimpleResourceConfigurationService = /** @class */ (function () {\r\n    function SimpleResourceConfigurationService(configurationService) {\r\n        var _this = this;\r\n        this.configurationService = configurationService;\r\n        this._onDidChangeConfiguration = new Emitter();\r\n        this.configurationService.onDidChangeConfiguration(function (e) {\r\n            _this._onDidChangeConfiguration.fire({ affectedKeys: e.affectedKeys, affectsConfiguration: function (resource, configuration) { return e.affectsConfiguration(configuration); } });\r\n        });\r\n    }\r\n    SimpleResourceConfigurationService.prototype.getValue = function (resource, arg2, arg3) {\r\n        var position = Pos.isIPosition(arg2) ? arg2 : null;\r\n        var section = position ? (typeof arg3 === 'string' ? arg3 : undefined) : (typeof arg2 === 'string' ? arg2 : undefined);\r\n        if (typeof section === 'undefined') {\r\n            return this.configurationService.getValue();\r\n        }\r\n        return this.configurationService.getValue(section);\r\n    };\r\n    return SimpleResourceConfigurationService;\r\n}());\r\nexport { SimpleResourceConfigurationService };\r\nvar SimpleResourcePropertiesService = /** @class */ (function () {\r\n    function SimpleResourcePropertiesService(configurationService) {\r\n        this.configurationService = configurationService;\r\n    }\r\n    SimpleResourcePropertiesService.prototype.getEOL = function (resource, language) {\r\n        var eol = this.configurationService.getValue('files.eol', { overrideIdentifier: language, resource: resource });\r\n        if (eol && eol !== 'auto') {\r\n            return eol;\r\n        }\r\n        return (isLinux || isMacintosh) ? '\\n' : '\\r\\n';\r\n    };\r\n    SimpleResourcePropertiesService = __decorate([\r\n        __param(0, IConfigurationService)\r\n    ], SimpleResourcePropertiesService);\r\n    return SimpleResourcePropertiesService;\r\n}());\r\nexport { SimpleResourcePropertiesService };\r\nvar StandaloneTelemetryService = /** @class */ (function () {\r\n    function StandaloneTelemetryService() {\r\n    }\r\n    StandaloneTelemetryService.prototype.publicLog = function (eventName, data) {\r\n        return Promise.resolve(undefined);\r\n    };\r\n    StandaloneTelemetryService.prototype.publicLog2 = function (eventName, data) {\r\n        return this.publicLog(eventName, data);\r\n    };\r\n    return StandaloneTelemetryService;\r\n}());\r\nexport { StandaloneTelemetryService };\r\nvar SimpleWorkspaceContextService = /** @class */ (function () {\r\n    function SimpleWorkspaceContextService() {\r\n        var resource = URI.from({ scheme: SimpleWorkspaceContextService.SCHEME, authority: 'model', path: '/' });\r\n        this.workspace = { id: '4064f6ec-cb38-4ad0-af64-ee6467e63c82', folders: [new WorkspaceFolder({ uri: resource, name: '', index: 0 })] };\r\n    }\r\n    SimpleWorkspaceContextService.prototype.getWorkspace = function () {\r\n        return this.workspace;\r\n    };\r\n    SimpleWorkspaceContextService.prototype.getWorkspaceFolder = function (resource) {\r\n        return resource && resource.scheme === SimpleWorkspaceContextService.SCHEME ? this.workspace.folders[0] : null;\r\n    };\r\n    SimpleWorkspaceContextService.SCHEME = 'inmemory';\r\n    return SimpleWorkspaceContextService;\r\n}());\r\nexport { SimpleWorkspaceContextService };\r\nexport function applyConfigurationValues(configurationService, source, isDiffEditor) {\r\n    if (!source) {\r\n        return;\r\n    }\r\n    if (!(configurationService instanceof SimpleConfigurationService)) {\r\n        return;\r\n    }\r\n    Object.keys(source).forEach(function (key) {\r\n        if (isEditorConfigurationKey(key)) {\r\n            configurationService.updateValue(\"editor.\" + key, source[key]);\r\n        }\r\n        if (isDiffEditor && isDiffEditorConfigurationKey(key)) {\r\n            configurationService.updateValue(\"diffEditor.\" + key, source[key]);\r\n        }\r\n    });\r\n}\r\nvar SimpleBulkEditService = /** @class */ (function () {\r\n    function SimpleBulkEditService(_modelService) {\r\n        this._modelService = _modelService;\r\n        //\r\n    }\r\n    SimpleBulkEditService.prototype.hasPreviewHandler = function () {\r\n        return false;\r\n    };\r\n    SimpleBulkEditService.prototype.apply = function (workspaceEdit, options) {\r\n        var edits = new Map();\r\n        if (workspaceEdit.edits) {\r\n            for (var _i = 0, _a = workspaceEdit.edits; _i < _a.length; _i++) {\r\n                var edit = _a[_i];\r\n                if (!WorkspaceTextEdit.is(edit)) {\r\n                    return Promise.reject(new Error('bad edit - only text edits are supported'));\r\n                }\r\n                var model = this._modelService.getModel(edit.resource);\r\n                if (!model) {\r\n                    return Promise.reject(new Error('bad edit - model not found'));\r\n                }\r\n                var array = edits.get(model);\r\n                if (!array) {\r\n                    array = [];\r\n                    edits.set(model, array);\r\n                }\r\n                array.push(edit.edit);\r\n            }\r\n        }\r\n        var totalEdits = 0;\r\n        var totalFiles = 0;\r\n        edits.forEach(function (edits, model) {\r\n            model.pushStackElement();\r\n            model.pushEditOperations([], edits.map(function (e) { return EditOperation.replaceMove(Range.lift(e.range), e.text); }), function () { return []; });\r\n            model.pushStackElement();\r\n            totalFiles += 1;\r\n            totalEdits += edits.length;\r\n        });\r\n        return Promise.resolve({\r\n            selection: undefined,\r\n            ariaSummary: strings.format(SimpleServicesNLS.bulkEditServiceSummary, totalEdits, totalFiles)\r\n        });\r\n    };\r\n    return SimpleBulkEditService;\r\n}());\r\nexport { SimpleBulkEditService };\r\nvar SimpleUriLabelService = /** @class */ (function () {\r\n    function SimpleUriLabelService() {\r\n    }\r\n    SimpleUriLabelService.prototype.getUriLabel = function (resource, options) {\r\n        if (resource.scheme === 'file') {\r\n            return resource.fsPath;\r\n        }\r\n        return resource.path;\r\n    };\r\n    return SimpleUriLabelService;\r\n}());\r\nexport { SimpleUriLabelService };\r\nvar SimpleLayoutService = /** @class */ (function () {\r\n    function SimpleLayoutService(_container) {\r\n        this._container = _container;\r\n        this.onLayout = Event.None;\r\n    }\r\n    Object.defineProperty(SimpleLayoutService.prototype, \"container\", {\r\n        get: function () {\r\n            return this._container;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return SimpleLayoutService;\r\n}());\r\nexport { SimpleLayoutService };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { TimeoutTimer } from '../../../base/common/async.js';\r\nimport * as strings from '../../../base/common/strings.js';\r\nimport { LineTokens } from '../../common/core/lineTokens.js';\r\nimport { TokenizationRegistry } from '../../common/modes.js';\r\nimport { RenderLineInput, renderViewLine2 as renderViewLine } from '../../common/viewLayout/viewLineRenderer.js';\r\nimport { ViewLineRenderingData } from '../../common/viewModel/viewModel.js';\r\nimport { MonarchTokenizer } from '../common/monarch/monarchLexer.js';\r\nvar Colorizer = /** @class */ (function () {\r\n    function Colorizer() {\r\n    }\r\n    Colorizer.colorizeElement = function (themeService, modeService, domNode, options) {\r\n        options = options || {};\r\n        var theme = options.theme || 'vs';\r\n        var mimeType = options.mimeType || domNode.getAttribute('lang') || domNode.getAttribute('data-lang');\r\n        if (!mimeType) {\r\n            console.error('Mode not detected');\r\n            return Promise.resolve();\r\n        }\r\n        themeService.setTheme(theme);\r\n        var text = domNode.firstChild ? domNode.firstChild.nodeValue : '';\r\n        domNode.className += ' ' + theme;\r\n        var render = function (str) {\r\n            domNode.innerHTML = str;\r\n        };\r\n        return this.colorize(modeService, text || '', mimeType, options).then(render, function (err) { return console.error(err); });\r\n    };\r\n    Colorizer.colorize = function (modeService, text, mimeType, options) {\r\n        var tabSize = 4;\r\n        if (options && typeof options.tabSize === 'number') {\r\n            tabSize = options.tabSize;\r\n        }\r\n        if (strings.startsWithUTF8BOM(text)) {\r\n            text = text.substr(1);\r\n        }\r\n        var lines = text.split(/\\r\\n|\\r|\\n/);\r\n        var language = modeService.getModeId(mimeType);\r\n        if (!language) {\r\n            return Promise.resolve(_fakeColorize(lines, tabSize));\r\n        }\r\n        // Send out the event to create the mode\r\n        modeService.triggerMode(language);\r\n        var tokenizationSupport = TokenizationRegistry.get(language);\r\n        if (tokenizationSupport) {\r\n            return _colorize(lines, tabSize, tokenizationSupport);\r\n        }\r\n        var tokenizationSupportPromise = TokenizationRegistry.getPromise(language);\r\n        if (tokenizationSupportPromise) {\r\n            // A tokenizer will be registered soon\r\n            return new Promise(function (resolve, reject) {\r\n                tokenizationSupportPromise.then(function (tokenizationSupport) {\r\n                    _colorize(lines, tabSize, tokenizationSupport).then(resolve, reject);\r\n                }, reject);\r\n            });\r\n        }\r\n        return new Promise(function (resolve, reject) {\r\n            var listener = null;\r\n            var timeout = null;\r\n            var execute = function () {\r\n                if (listener) {\r\n                    listener.dispose();\r\n                    listener = null;\r\n                }\r\n                if (timeout) {\r\n                    timeout.dispose();\r\n                    timeout = null;\r\n                }\r\n                var tokenizationSupport = TokenizationRegistry.get(language);\r\n                if (tokenizationSupport) {\r\n                    _colorize(lines, tabSize, tokenizationSupport).then(resolve, reject);\r\n                    return;\r\n                }\r\n                resolve(_fakeColorize(lines, tabSize));\r\n            };\r\n            // wait 500ms for mode to load, then give up\r\n            timeout = new TimeoutTimer();\r\n            timeout.cancelAndSet(execute, 500);\r\n            listener = TokenizationRegistry.onDidChange(function (e) {\r\n                if (e.changedLanguages.indexOf(language) >= 0) {\r\n                    execute();\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Colorizer.colorizeLine = function (line, mightContainNonBasicASCII, mightContainRTL, tokens, tabSize) {\r\n        if (tabSize === void 0) { tabSize = 4; }\r\n        var isBasicASCII = ViewLineRenderingData.isBasicASCII(line, mightContainNonBasicASCII);\r\n        var containsRTL = ViewLineRenderingData.containsRTL(line, isBasicASCII, mightContainRTL);\r\n        var renderResult = renderViewLine(new RenderLineInput(false, true, line, false, isBasicASCII, containsRTL, 0, tokens, [], tabSize, 0, 0, 0, -1, 'none', false, false, null));\r\n        return renderResult.html;\r\n    };\r\n    Colorizer.colorizeModelLine = function (model, lineNumber, tabSize) {\r\n        if (tabSize === void 0) { tabSize = 4; }\r\n        var content = model.getLineContent(lineNumber);\r\n        model.forceTokenization(lineNumber);\r\n        var tokens = model.getLineTokens(lineNumber);\r\n        var inflatedTokens = tokens.inflate();\r\n        return this.colorizeLine(content, model.mightContainNonBasicASCII(), model.mightContainRTL(), inflatedTokens, tabSize);\r\n    };\r\n    return Colorizer;\r\n}());\r\nexport { Colorizer };\r\nfunction _colorize(lines, tabSize, tokenizationSupport) {\r\n    return new Promise(function (c, e) {\r\n        var execute = function () {\r\n            var result = _actualColorize(lines, tabSize, tokenizationSupport);\r\n            if (tokenizationSupport instanceof MonarchTokenizer) {\r\n                var status_1 = tokenizationSupport.getLoadStatus();\r\n                if (status_1.loaded === false) {\r\n                    status_1.promise.then(execute, e);\r\n                    return;\r\n                }\r\n            }\r\n            c(result);\r\n        };\r\n        execute();\r\n    });\r\n}\r\nfunction _fakeColorize(lines, tabSize) {\r\n    var html = [];\r\n    var defaultMetadata = ((0 /* None */ << 11 /* FONT_STYLE_OFFSET */)\r\n        | (1 /* DefaultForeground */ << 14 /* FOREGROUND_OFFSET */)\r\n        | (2 /* DefaultBackground */ << 23 /* BACKGROUND_OFFSET */)) >>> 0;\r\n    var tokens = new Uint32Array(2);\r\n    tokens[0] = 0;\r\n    tokens[1] = defaultMetadata;\r\n    for (var i = 0, length_1 = lines.length; i < length_1; i++) {\r\n        var line = lines[i];\r\n        tokens[0] = line.length;\r\n        var lineTokens = new LineTokens(tokens, line);\r\n        var isBasicASCII = ViewLineRenderingData.isBasicASCII(line, /* check for basic ASCII */ true);\r\n        var containsRTL = ViewLineRenderingData.containsRTL(line, isBasicASCII, /* check for RTL */ true);\r\n        var renderResult = renderViewLine(new RenderLineInput(false, true, line, false, isBasicASCII, containsRTL, 0, lineTokens, [], tabSize, 0, 0, 0, -1, 'none', false, false, null));\r\n        html = html.concat(renderResult.html);\r\n        html.push('<br/>');\r\n    }\r\n    return html.join('');\r\n}\r\nfunction _actualColorize(lines, tabSize, tokenizationSupport) {\r\n    var html = [];\r\n    var state = tokenizationSupport.getInitialState();\r\n    for (var i = 0, length_2 = lines.length; i < length_2; i++) {\r\n        var line = lines[i];\r\n        var tokenizeResult = tokenizationSupport.tokenize2(line, state, 0);\r\n        LineTokens.convertToEndOffset(tokenizeResult.tokens, line.length);\r\n        var lineTokens = new LineTokens(tokenizeResult.tokens, line);\r\n        var isBasicASCII = ViewLineRenderingData.isBasicASCII(line, /* check for basic ASCII */ true);\r\n        var containsRTL = ViewLineRenderingData.containsRTL(line, isBasicASCII, /* check for RTL */ true);\r\n        var renderResult = renderViewLine(new RenderLineInput(false, true, line, false, isBasicASCII, containsRTL, 0, lineTokens.inflate(), [], tabSize, 0, 0, 0, -1, 'none', false, false, null));\r\n        html = html.concat(renderResult.html);\r\n        html.push('<br/>');\r\n        state = tokenizeResult.endState;\r\n    }\r\n    return html.join('');\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nimport * as browser from '../../../base/browser/browser.js';\r\nimport * as aria from '../../../base/browser/ui/aria/aria.js';\r\nimport { Disposable, toDisposable, DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\r\nimport { CodeEditorWidget } from '../../browser/widget/codeEditorWidget.js';\r\nimport { DiffEditorWidget } from '../../browser/widget/diffEditorWidget.js';\r\nimport { InternalEditorAction } from '../../common/editorAction.js';\r\nimport { IEditorWorkerService } from '../../common/services/editorWorkerService.js';\r\nimport { StandaloneKeybindingService, applyConfigurationValues } from './simpleServices.js';\r\nimport { IStandaloneThemeService } from '../common/standaloneThemeService.js';\r\nimport { MenuRegistry } from '../../../platform/actions/common/actions.js';\r\nimport { CommandsRegistry, ICommandService } from '../../../platform/commands/common/commands.js';\r\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\r\nimport { ContextKeyExpr, IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { IContextViewService, IContextMenuService } from '../../../platform/contextview/browser/contextView.js';\r\nimport { IInstantiationService, optional } from '../../../platform/instantiation/common/instantiation.js';\r\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\r\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\r\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\r\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\r\nimport { StandaloneCodeEditorNLS } from '../../common/standaloneStrings.js';\r\nimport { IClipboardService } from '../../../platform/clipboard/common/clipboardService.js';\r\nimport { IEditorProgressService } from '../../../platform/progress/common/progress.js';\r\nvar LAST_GENERATED_COMMAND_ID = 0;\r\nvar ariaDomNodeCreated = false;\r\nfunction createAriaDomNode() {\r\n    if (ariaDomNodeCreated) {\r\n        return;\r\n    }\r\n    ariaDomNodeCreated = true;\r\n    aria.setARIAContainer(document.body);\r\n}\r\n/**\r\n * A code editor to be used both by the standalone editor and the standalone diff editor.\r\n */\r\nvar StandaloneCodeEditor = /** @class */ (function (_super) {\r\n    __extends(StandaloneCodeEditor, _super);\r\n    function StandaloneCodeEditor(domElement, options, instantiationService, codeEditorService, commandService, contextKeyService, keybindingService, themeService, notificationService, accessibilityService) {\r\n        var _this = this;\r\n        options = options || {};\r\n        options.ariaLabel = options.ariaLabel || StandaloneCodeEditorNLS.editorViewAccessibleLabel;\r\n        options.ariaLabel = options.ariaLabel + ';' + (browser.isIE\r\n            ? StandaloneCodeEditorNLS.accessibilityHelpMessageIE\r\n            : StandaloneCodeEditorNLS.accessibilityHelpMessage);\r\n        _this = _super.call(this, domElement, options, {}, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService) || this;\r\n        if (keybindingService instanceof StandaloneKeybindingService) {\r\n            _this._standaloneKeybindingService = keybindingService;\r\n        }\r\n        else {\r\n            _this._standaloneKeybindingService = null;\r\n        }\r\n        // Create the ARIA dom node as soon as the first editor is instantiated\r\n        createAriaDomNode();\r\n        return _this;\r\n    }\r\n    StandaloneCodeEditor.prototype.addCommand = function (keybinding, handler, context) {\r\n        if (!this._standaloneKeybindingService) {\r\n            console.warn('Cannot add command because the editor is configured with an unrecognized KeybindingService');\r\n            return null;\r\n        }\r\n        var commandId = 'DYNAMIC_' + (++LAST_GENERATED_COMMAND_ID);\r\n        var whenExpression = ContextKeyExpr.deserialize(context);\r\n        this._standaloneKeybindingService.addDynamicKeybinding(commandId, keybinding, handler, whenExpression);\r\n        return commandId;\r\n    };\r\n    StandaloneCodeEditor.prototype.createContextKey = function (key, defaultValue) {\r\n        return this._contextKeyService.createKey(key, defaultValue);\r\n    };\r\n    StandaloneCodeEditor.prototype.addAction = function (_descriptor) {\r\n        var _this = this;\r\n        if ((typeof _descriptor.id !== 'string') || (typeof _descriptor.label !== 'string') || (typeof _descriptor.run !== 'function')) {\r\n            throw new Error('Invalid action descriptor, `id`, `label` and `run` are required properties!');\r\n        }\r\n        if (!this._standaloneKeybindingService) {\r\n            console.warn('Cannot add keybinding because the editor is configured with an unrecognized KeybindingService');\r\n            return Disposable.None;\r\n        }\r\n        // Read descriptor options\r\n        var id = _descriptor.id;\r\n        var label = _descriptor.label;\r\n        var precondition = ContextKeyExpr.and(ContextKeyExpr.equals('editorId', this.getId()), ContextKeyExpr.deserialize(_descriptor.precondition));\r\n        var keybindings = _descriptor.keybindings;\r\n        var keybindingsWhen = ContextKeyExpr.and(precondition, ContextKeyExpr.deserialize(_descriptor.keybindingContext));\r\n        var contextMenuGroupId = _descriptor.contextMenuGroupId || null;\r\n        var contextMenuOrder = _descriptor.contextMenuOrder || 0;\r\n        var run = function (accessor) {\r\n            var args = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                args[_i - 1] = arguments[_i];\r\n            }\r\n            return Promise.resolve(_descriptor.run.apply(_descriptor, __spreadArrays([_this], args)));\r\n        };\r\n        var toDispose = new DisposableStore();\r\n        // Generate a unique id to allow the same descriptor.id across multiple editor instances\r\n        var uniqueId = this.getId() + ':' + id;\r\n        // Register the command\r\n        toDispose.add(CommandsRegistry.registerCommand(uniqueId, run));\r\n        // Register the context menu item\r\n        if (contextMenuGroupId) {\r\n            var menuItem = {\r\n                command: {\r\n                    id: uniqueId,\r\n                    title: label\r\n                },\r\n                when: precondition,\r\n                group: contextMenuGroupId,\r\n                order: contextMenuOrder\r\n            };\r\n            toDispose.add(MenuRegistry.appendMenuItem(7 /* EditorContext */, menuItem));\r\n        }\r\n        // Register the keybindings\r\n        if (Array.isArray(keybindings)) {\r\n            for (var _i = 0, keybindings_1 = keybindings; _i < keybindings_1.length; _i++) {\r\n                var kb = keybindings_1[_i];\r\n                toDispose.add(this._standaloneKeybindingService.addDynamicKeybinding(uniqueId, kb, run, keybindingsWhen));\r\n            }\r\n        }\r\n        // Finally, register an internal editor action\r\n        var internalAction = new InternalEditorAction(uniqueId, label, label, precondition, run, this._contextKeyService);\r\n        // Store it under the original id, such that trigger with the original id will work\r\n        this._actions[id] = internalAction;\r\n        toDispose.add(toDisposable(function () {\r\n            delete _this._actions[id];\r\n        }));\r\n        return toDispose;\r\n    };\r\n    StandaloneCodeEditor = __decorate([\r\n        __param(2, IInstantiationService),\r\n        __param(3, ICodeEditorService),\r\n        __param(4, ICommandService),\r\n        __param(5, IContextKeyService),\r\n        __param(6, IKeybindingService),\r\n        __param(7, IThemeService),\r\n        __param(8, INotificationService),\r\n        __param(9, IAccessibilityService)\r\n    ], StandaloneCodeEditor);\r\n    return StandaloneCodeEditor;\r\n}(CodeEditorWidget));\r\nexport { StandaloneCodeEditor };\r\nvar StandaloneEditor = /** @class */ (function (_super) {\r\n    __extends(StandaloneEditor, _super);\r\n    function StandaloneEditor(domElement, options, toDispose, instantiationService, codeEditorService, commandService, contextKeyService, keybindingService, contextViewService, themeService, notificationService, configurationService, accessibilityService) {\r\n        var _this = this;\r\n        applyConfigurationValues(configurationService, options, false);\r\n        var themeDomRegistration = themeService.registerEditorContainer(domElement);\r\n        options = options || {};\r\n        if (typeof options.theme === 'string') {\r\n            themeService.setTheme(options.theme);\r\n        }\r\n        var _model = options.model;\r\n        delete options.model;\r\n        _this = _super.call(this, domElement, options, instantiationService, codeEditorService, commandService, contextKeyService, keybindingService, themeService, notificationService, accessibilityService) || this;\r\n        _this._contextViewService = contextViewService;\r\n        _this._configurationService = configurationService;\r\n        _this._register(toDispose);\r\n        _this._register(themeDomRegistration);\r\n        var model;\r\n        if (typeof _model === 'undefined') {\r\n            model = self.monaco.editor.createModel(options.value || '', options.language || 'text/plain');\r\n            _this._ownsModel = true;\r\n        }\r\n        else {\r\n            model = _model;\r\n            _this._ownsModel = false;\r\n        }\r\n        _this._attachModel(model);\r\n        if (model) {\r\n            var e = {\r\n                oldModelUrl: null,\r\n                newModelUrl: model.uri\r\n            };\r\n            _this._onDidChangeModel.fire(e);\r\n        }\r\n        return _this;\r\n    }\r\n    StandaloneEditor.prototype.dispose = function () {\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    StandaloneEditor.prototype.updateOptions = function (newOptions) {\r\n        applyConfigurationValues(this._configurationService, newOptions, false);\r\n        _super.prototype.updateOptions.call(this, newOptions);\r\n    };\r\n    StandaloneEditor.prototype._attachModel = function (model) {\r\n        _super.prototype._attachModel.call(this, model);\r\n        if (this._modelData) {\r\n            this._contextViewService.setContainer(this._modelData.view.domNode.domNode);\r\n        }\r\n    };\r\n    StandaloneEditor.prototype._postDetachModelCleanup = function (detachedModel) {\r\n        _super.prototype._postDetachModelCleanup.call(this, detachedModel);\r\n        if (detachedModel && this._ownsModel) {\r\n            detachedModel.dispose();\r\n            this._ownsModel = false;\r\n        }\r\n    };\r\n    StandaloneEditor = __decorate([\r\n        __param(3, IInstantiationService),\r\n        __param(4, ICodeEditorService),\r\n        __param(5, ICommandService),\r\n        __param(6, IContextKeyService),\r\n        __param(7, IKeybindingService),\r\n        __param(8, IContextViewService),\r\n        __param(9, IStandaloneThemeService),\r\n        __param(10, INotificationService),\r\n        __param(11, IConfigurationService),\r\n        __param(12, IAccessibilityService)\r\n    ], StandaloneEditor);\r\n    return StandaloneEditor;\r\n}(StandaloneCodeEditor));\r\nexport { StandaloneEditor };\r\nvar StandaloneDiffEditor = /** @class */ (function (_super) {\r\n    __extends(StandaloneDiffEditor, _super);\r\n    function StandaloneDiffEditor(domElement, options, toDispose, instantiationService, contextKeyService, keybindingService, contextViewService, editorWorkerService, codeEditorService, themeService, notificationService, configurationService, contextMenuService, editorProgressService, clipboardService) {\r\n        var _this = this;\r\n        applyConfigurationValues(configurationService, options, true);\r\n        var themeDomRegistration = themeService.registerEditorContainer(domElement);\r\n        options = options || {};\r\n        if (typeof options.theme === 'string') {\r\n            options.theme = themeService.setTheme(options.theme);\r\n        }\r\n        _this = _super.call(this, domElement, options, clipboardService, editorWorkerService, contextKeyService, instantiationService, codeEditorService, themeService, notificationService, contextMenuService, editorProgressService) || this;\r\n        _this._contextViewService = contextViewService;\r\n        _this._configurationService = configurationService;\r\n        _this._register(toDispose);\r\n        _this._register(themeDomRegistration);\r\n        _this._contextViewService.setContainer(_this._containerDomElement);\r\n        return _this;\r\n    }\r\n    StandaloneDiffEditor.prototype.dispose = function () {\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    StandaloneDiffEditor.prototype.updateOptions = function (newOptions) {\r\n        applyConfigurationValues(this._configurationService, newOptions, true);\r\n        _super.prototype.updateOptions.call(this, newOptions);\r\n    };\r\n    StandaloneDiffEditor.prototype._createInnerEditor = function (instantiationService, container, options) {\r\n        return instantiationService.createInstance(StandaloneCodeEditor, container, options);\r\n    };\r\n    StandaloneDiffEditor.prototype.getOriginalEditor = function () {\r\n        return _super.prototype.getOriginalEditor.call(this);\r\n    };\r\n    StandaloneDiffEditor.prototype.getModifiedEditor = function () {\r\n        return _super.prototype.getModifiedEditor.call(this);\r\n    };\r\n    StandaloneDiffEditor.prototype.addCommand = function (keybinding, handler, context) {\r\n        return this.getModifiedEditor().addCommand(keybinding, handler, context);\r\n    };\r\n    StandaloneDiffEditor.prototype.createContextKey = function (key, defaultValue) {\r\n        return this.getModifiedEditor().createContextKey(key, defaultValue);\r\n    };\r\n    StandaloneDiffEditor.prototype.addAction = function (descriptor) {\r\n        return this.getModifiedEditor().addAction(descriptor);\r\n    };\r\n    StandaloneDiffEditor = __decorate([\r\n        __param(3, IInstantiationService),\r\n        __param(4, IContextKeyService),\r\n        __param(5, IKeybindingService),\r\n        __param(6, IContextViewService),\r\n        __param(7, IEditorWorkerService),\r\n        __param(8, ICodeEditorService),\r\n        __param(9, IStandaloneThemeService),\r\n        __param(10, INotificationService),\r\n        __param(11, IConfigurationService),\r\n        __param(12, IContextMenuService),\r\n        __param(13, IEditorProgressService),\r\n        __param(14, optional(IClipboardService))\r\n    ], StandaloneDiffEditor);\r\n    return StandaloneDiffEditor;\r\n}(DiffEditorWidget));\r\nexport { StandaloneDiffEditor };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport './standalone-tokens.css';\r\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\r\nimport { OpenerService } from '../../browser/services/openerService.js';\r\nimport { DiffNavigator } from '../../browser/widget/diffNavigator.js';\r\nimport { EditorOptions, ConfigurationChangedEvent } from '../../common/config/editorOptions.js';\r\nimport { BareFontInfo, FontInfo } from '../../common/config/fontInfo.js';\r\nimport { EditorType } from '../../common/editorCommon.js';\r\nimport { FindMatch, TextModelResolvedOptions } from '../../common/model.js';\r\nimport * as modes from '../../common/modes.js';\r\nimport { NULL_STATE, nullTokenize } from '../../common/modes/nullMode.js';\r\nimport { IEditorWorkerService } from '../../common/services/editorWorkerService.js';\r\nimport { ITextModelService } from '../../common/services/resolverService.js';\r\nimport { createWebWorker as actualCreateWebWorker } from '../../common/services/webWorker.js';\r\nimport * as standaloneEnums from '../../common/standalone/standaloneEnums.js';\r\nimport { Colorizer } from './colorizer.js';\r\nimport { SimpleEditorModelResolverService } from './simpleServices.js';\r\nimport { StandaloneDiffEditor, StandaloneEditor } from './standaloneCodeEditor.js';\r\nimport { DynamicStandaloneServices, StaticServices } from './standaloneServices.js';\r\nimport { IStandaloneThemeService } from '../common/standaloneThemeService.js';\r\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\r\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\r\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { IContextViewService, IContextMenuService } from '../../../platform/contextview/browser/contextView.js';\r\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\r\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\r\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\r\nimport { IOpenerService } from '../../../platform/opener/common/opener.js';\r\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\r\nimport { clearAllFontInfos } from '../../browser/config/configuration.js';\r\nimport { IEditorProgressService } from '../../../platform/progress/common/progress.js';\r\nfunction withAllStandaloneServices(domElement, override, callback) {\r\n    var services = new DynamicStandaloneServices(domElement, override);\r\n    var simpleEditorModelResolverService = null;\r\n    if (!services.has(ITextModelService)) {\r\n        simpleEditorModelResolverService = new SimpleEditorModelResolverService(StaticServices.modelService.get());\r\n        services.set(ITextModelService, simpleEditorModelResolverService);\r\n    }\r\n    if (!services.has(IOpenerService)) {\r\n        services.set(IOpenerService, new OpenerService(services.get(ICodeEditorService), services.get(ICommandService)));\r\n    }\r\n    var result = callback(services);\r\n    if (simpleEditorModelResolverService) {\r\n        simpleEditorModelResolverService.setEditor(result);\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Create a new editor under `domElement`.\r\n * `domElement` should be empty (not contain other dom nodes).\r\n * The editor will read the size of `domElement`.\r\n */\r\nexport function create(domElement, options, override) {\r\n    return withAllStandaloneServices(domElement, override || {}, function (services) {\r\n        return new StandaloneEditor(domElement, options, services, services.get(IInstantiationService), services.get(ICodeEditorService), services.get(ICommandService), services.get(IContextKeyService), services.get(IKeybindingService), services.get(IContextViewService), services.get(IStandaloneThemeService), services.get(INotificationService), services.get(IConfigurationService), services.get(IAccessibilityService));\r\n    });\r\n}\r\n/**\r\n * Emitted when an editor is created.\r\n * Creating a diff editor might cause this listener to be invoked with the two editors.\r\n * @event\r\n */\r\nexport function onDidCreateEditor(listener) {\r\n    return StaticServices.codeEditorService.get().onCodeEditorAdd(function (editor) {\r\n        listener(editor);\r\n    });\r\n}\r\n/**\r\n * Create a new diff editor under `domElement`.\r\n * `domElement` should be empty (not contain other dom nodes).\r\n * The editor will read the size of `domElement`.\r\n */\r\nexport function createDiffEditor(domElement, options, override) {\r\n    return withAllStandaloneServices(domElement, override || {}, function (services) {\r\n        return new StandaloneDiffEditor(domElement, options, services, services.get(IInstantiationService), services.get(IContextKeyService), services.get(IKeybindingService), services.get(IContextViewService), services.get(IEditorWorkerService), services.get(ICodeEditorService), services.get(IStandaloneThemeService), services.get(INotificationService), services.get(IConfigurationService), services.get(IContextMenuService), services.get(IEditorProgressService), null);\r\n    });\r\n}\r\nexport function createDiffNavigator(diffEditor, opts) {\r\n    return new DiffNavigator(diffEditor, opts);\r\n}\r\nfunction doCreateModel(value, languageSelection, uri) {\r\n    return StaticServices.modelService.get().createModel(value, languageSelection, uri);\r\n}\r\n/**\r\n * Create a new editor model.\r\n * You can specify the language that should be set for this model or let the language be inferred from the `uri`.\r\n */\r\nexport function createModel(value, language, uri) {\r\n    value = value || '';\r\n    if (!language) {\r\n        var firstLF = value.indexOf('\\n');\r\n        var firstLine = value;\r\n        if (firstLF !== -1) {\r\n            firstLine = value.substring(0, firstLF);\r\n        }\r\n        return doCreateModel(value, StaticServices.modeService.get().createByFilepathOrFirstLine(uri || null, firstLine), uri);\r\n    }\r\n    return doCreateModel(value, StaticServices.modeService.get().create(language), uri);\r\n}\r\n/**\r\n * Change the language for a model.\r\n */\r\nexport function setModelLanguage(model, languageId) {\r\n    StaticServices.modelService.get().setMode(model, StaticServices.modeService.get().create(languageId));\r\n}\r\n/**\r\n * Set the markers for a model.\r\n */\r\nexport function setModelMarkers(model, owner, markers) {\r\n    if (model) {\r\n        StaticServices.markerService.get().changeOne(owner, model.uri, markers);\r\n    }\r\n}\r\n/**\r\n * Get markers for owner and/or resource\r\n *\r\n * @returns list of markers\r\n */\r\nexport function getModelMarkers(filter) {\r\n    return StaticServices.markerService.get().read(filter);\r\n}\r\n/**\r\n * Get the model that has `uri` if it exists.\r\n */\r\nexport function getModel(uri) {\r\n    return StaticServices.modelService.get().getModel(uri);\r\n}\r\n/**\r\n * Get all the created models.\r\n */\r\nexport function getModels() {\r\n    return StaticServices.modelService.get().getModels();\r\n}\r\n/**\r\n * Emitted when a model is created.\r\n * @event\r\n */\r\nexport function onDidCreateModel(listener) {\r\n    return StaticServices.modelService.get().onModelAdded(listener);\r\n}\r\n/**\r\n * Emitted right before a model is disposed.\r\n * @event\r\n */\r\nexport function onWillDisposeModel(listener) {\r\n    return StaticServices.modelService.get().onModelRemoved(listener);\r\n}\r\n/**\r\n * Emitted when a different language is set to a model.\r\n * @event\r\n */\r\nexport function onDidChangeModelLanguage(listener) {\r\n    return StaticServices.modelService.get().onModelModeChanged(function (e) {\r\n        listener({\r\n            model: e.model,\r\n            oldLanguage: e.oldModeId\r\n        });\r\n    });\r\n}\r\n/**\r\n * Create a new web worker that has model syncing capabilities built in.\r\n * Specify an AMD module to load that will `create` an object that will be proxied.\r\n */\r\nexport function createWebWorker(opts) {\r\n    return actualCreateWebWorker(StaticServices.modelService.get(), opts);\r\n}\r\n/**\r\n * Colorize the contents of `domNode` using attribute `data-lang`.\r\n */\r\nexport function colorizeElement(domNode, options) {\r\n    return Colorizer.colorizeElement(StaticServices.standaloneThemeService.get(), StaticServices.modeService.get(), domNode, options);\r\n}\r\n/**\r\n * Colorize `text` using language `languageId`.\r\n */\r\nexport function colorize(text, languageId, options) {\r\n    return Colorizer.colorize(StaticServices.modeService.get(), text, languageId, options);\r\n}\r\n/**\r\n * Colorize a line in a model.\r\n */\r\nexport function colorizeModelLine(model, lineNumber, tabSize) {\r\n    if (tabSize === void 0) { tabSize = 4; }\r\n    return Colorizer.colorizeModelLine(model, lineNumber, tabSize);\r\n}\r\n/**\r\n * @internal\r\n */\r\nfunction getSafeTokenizationSupport(language) {\r\n    var tokenizationSupport = modes.TokenizationRegistry.get(language);\r\n    if (tokenizationSupport) {\r\n        return tokenizationSupport;\r\n    }\r\n    return {\r\n        getInitialState: function () { return NULL_STATE; },\r\n        tokenize: function (line, state, deltaOffset) { return nullTokenize(language, line, state, deltaOffset); }\r\n    };\r\n}\r\n/**\r\n * Tokenize `text` using language `languageId`\r\n */\r\nexport function tokenize(text, languageId) {\r\n    var modeService = StaticServices.modeService.get();\r\n    // Needed in order to get the mode registered for subsequent look-ups\r\n    modeService.triggerMode(languageId);\r\n    var tokenizationSupport = getSafeTokenizationSupport(languageId);\r\n    var lines = text.split(/\\r\\n|\\r|\\n/);\r\n    var result = [];\r\n    var state = tokenizationSupport.getInitialState();\r\n    for (var i = 0, len = lines.length; i < len; i++) {\r\n        var line = lines[i];\r\n        var tokenizationResult = tokenizationSupport.tokenize(line, state, 0);\r\n        result[i] = tokenizationResult.tokens;\r\n        state = tokenizationResult.endState;\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Define a new theme or update an existing theme.\r\n */\r\nexport function defineTheme(themeName, themeData) {\r\n    StaticServices.standaloneThemeService.get().defineTheme(themeName, themeData);\r\n}\r\n/**\r\n * Switches to a theme.\r\n */\r\nexport function setTheme(themeName) {\r\n    StaticServices.standaloneThemeService.get().setTheme(themeName);\r\n}\r\n/**\r\n * Clears all cached font measurements and triggers re-measurement.\r\n */\r\nexport function remeasureFonts() {\r\n    clearAllFontInfos();\r\n}\r\n/**\r\n * @internal\r\n */\r\nexport function createMonacoEditorAPI() {\r\n    return {\r\n        // methods\r\n        create: create,\r\n        onDidCreateEditor: onDidCreateEditor,\r\n        createDiffEditor: createDiffEditor,\r\n        createDiffNavigator: createDiffNavigator,\r\n        createModel: createModel,\r\n        setModelLanguage: setModelLanguage,\r\n        setModelMarkers: setModelMarkers,\r\n        getModelMarkers: getModelMarkers,\r\n        getModels: getModels,\r\n        getModel: getModel,\r\n        onDidCreateModel: onDidCreateModel,\r\n        onWillDisposeModel: onWillDisposeModel,\r\n        onDidChangeModelLanguage: onDidChangeModelLanguage,\r\n        createWebWorker: createWebWorker,\r\n        colorizeElement: colorizeElement,\r\n        colorize: colorize,\r\n        colorizeModelLine: colorizeModelLine,\r\n        tokenize: tokenize,\r\n        defineTheme: defineTheme,\r\n        setTheme: setTheme,\r\n        remeasureFonts: remeasureFonts,\r\n        // enums\r\n        AccessibilitySupport: standaloneEnums.AccessibilitySupport,\r\n        ContentWidgetPositionPreference: standaloneEnums.ContentWidgetPositionPreference,\r\n        CursorChangeReason: standaloneEnums.CursorChangeReason,\r\n        DefaultEndOfLine: standaloneEnums.DefaultEndOfLine,\r\n        EditorAutoIndentStrategy: standaloneEnums.EditorAutoIndentStrategy,\r\n        EditorOption: standaloneEnums.EditorOption,\r\n        EndOfLinePreference: standaloneEnums.EndOfLinePreference,\r\n        EndOfLineSequence: standaloneEnums.EndOfLineSequence,\r\n        MinimapPosition: standaloneEnums.MinimapPosition,\r\n        MouseTargetType: standaloneEnums.MouseTargetType,\r\n        OverlayWidgetPositionPreference: standaloneEnums.OverlayWidgetPositionPreference,\r\n        OverviewRulerLane: standaloneEnums.OverviewRulerLane,\r\n        RenderLineNumbersType: standaloneEnums.RenderLineNumbersType,\r\n        RenderMinimap: standaloneEnums.RenderMinimap,\r\n        ScrollbarVisibility: standaloneEnums.ScrollbarVisibility,\r\n        ScrollType: standaloneEnums.ScrollType,\r\n        TextEditorCursorBlinkingStyle: standaloneEnums.TextEditorCursorBlinkingStyle,\r\n        TextEditorCursorStyle: standaloneEnums.TextEditorCursorStyle,\r\n        TrackedRangeStickiness: standaloneEnums.TrackedRangeStickiness,\r\n        WrappingIndent: standaloneEnums.WrappingIndent,\r\n        // classes\r\n        ConfigurationChangedEvent: ConfigurationChangedEvent,\r\n        BareFontInfo: BareFontInfo,\r\n        FontInfo: FontInfo,\r\n        TextModelResolvedOptions: TextModelResolvedOptions,\r\n        FindMatch: FindMatch,\r\n        // vars\r\n        EditorType: EditorType,\r\n        EditorOptions: EditorOptions\r\n    };\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport './accessibilityHelp.css';\r\nimport * as browser from '../../../../base/browser/browser.js';\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nimport { createFastDomNode } from '../../../../base/browser/fastDomNode.js';\r\nimport { renderFormattedText } from '../../../../base/browser/formattedTextRenderer.js';\r\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\r\nimport { Widget } from '../../../../base/browser/ui/widget.js';\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport * as platform from '../../../../base/common/platform.js';\r\nimport * as strings from '../../../../base/common/strings.js';\r\nimport { URI } from '../../../../base/common/uri.js';\r\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { ToggleTabFocusModeAction } from '../../../contrib/toggleTabFocusMode/toggleTabFocusMode.js';\r\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\r\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\r\nimport { contrastBorder, editorWidgetBackground, widgetShadow, editorWidgetForeground } from '../../../../platform/theme/common/colorRegistry.js';\r\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\r\nimport { AccessibilityHelpNLS } from '../../../common/standaloneStrings.js';\r\nvar CONTEXT_ACCESSIBILITY_WIDGET_VISIBLE = new RawContextKey('accessibilityHelpWidgetVisible', false);\r\nvar AccessibilityHelpController = /** @class */ (function (_super) {\r\n    __extends(AccessibilityHelpController, _super);\r\n    function AccessibilityHelpController(editor, instantiationService) {\r\n        var _this = _super.call(this) || this;\r\n        _this._editor = editor;\r\n        _this._widget = _this._register(instantiationService.createInstance(AccessibilityHelpWidget, _this._editor));\r\n        return _this;\r\n    }\r\n    AccessibilityHelpController.get = function (editor) {\r\n        return editor.getContribution(AccessibilityHelpController.ID);\r\n    };\r\n    AccessibilityHelpController.prototype.show = function () {\r\n        this._widget.show();\r\n    };\r\n    AccessibilityHelpController.prototype.hide = function () {\r\n        this._widget.hide();\r\n    };\r\n    AccessibilityHelpController.ID = 'editor.contrib.accessibilityHelpController';\r\n    AccessibilityHelpController = __decorate([\r\n        __param(1, IInstantiationService)\r\n    ], AccessibilityHelpController);\r\n    return AccessibilityHelpController;\r\n}(Disposable));\r\nfunction getSelectionLabel(selections, charactersSelected) {\r\n    if (!selections || selections.length === 0) {\r\n        return AccessibilityHelpNLS.noSelection;\r\n    }\r\n    if (selections.length === 1) {\r\n        if (charactersSelected) {\r\n            return strings.format(AccessibilityHelpNLS.singleSelectionRange, selections[0].positionLineNumber, selections[0].positionColumn, charactersSelected);\r\n        }\r\n        return strings.format(AccessibilityHelpNLS.singleSelection, selections[0].positionLineNumber, selections[0].positionColumn);\r\n    }\r\n    if (charactersSelected) {\r\n        return strings.format(AccessibilityHelpNLS.multiSelectionRange, selections.length, charactersSelected);\r\n    }\r\n    if (selections.length > 0) {\r\n        return strings.format(AccessibilityHelpNLS.multiSelection, selections.length);\r\n    }\r\n    return '';\r\n}\r\nvar AccessibilityHelpWidget = /** @class */ (function (_super) {\r\n    __extends(AccessibilityHelpWidget, _super);\r\n    function AccessibilityHelpWidget(editor, _contextKeyService, _keybindingService, _openerService) {\r\n        var _this = _super.call(this) || this;\r\n        _this._contextKeyService = _contextKeyService;\r\n        _this._keybindingService = _keybindingService;\r\n        _this._openerService = _openerService;\r\n        _this._editor = editor;\r\n        _this._isVisibleKey = CONTEXT_ACCESSIBILITY_WIDGET_VISIBLE.bindTo(_this._contextKeyService);\r\n        _this._domNode = createFastDomNode(document.createElement('div'));\r\n        _this._domNode.setClassName('accessibilityHelpWidget');\r\n        _this._domNode.setDisplay('none');\r\n        _this._domNode.setAttribute('role', 'dialog');\r\n        _this._domNode.setAttribute('aria-hidden', 'true');\r\n        _this._contentDomNode = createFastDomNode(document.createElement('div'));\r\n        _this._contentDomNode.setAttribute('role', 'document');\r\n        _this._domNode.appendChild(_this._contentDomNode);\r\n        _this._isVisible = false;\r\n        _this._register(_this._editor.onDidLayoutChange(function () {\r\n            if (_this._isVisible) {\r\n                _this._layout();\r\n            }\r\n        }));\r\n        // Intentionally not configurable!\r\n        _this._register(dom.addStandardDisposableListener(_this._contentDomNode.domNode, 'keydown', function (e) {\r\n            if (!_this._isVisible) {\r\n                return;\r\n            }\r\n            if (e.equals(2048 /* CtrlCmd */ | 35 /* KEY_E */)) {\r\n                alert(AccessibilityHelpNLS.emergencyConfOn);\r\n                _this._editor.updateOptions({\r\n                    accessibilitySupport: 'on'\r\n                });\r\n                dom.clearNode(_this._contentDomNode.domNode);\r\n                _this._buildContent();\r\n                _this._contentDomNode.domNode.focus();\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n            }\r\n            if (e.equals(2048 /* CtrlCmd */ | 38 /* KEY_H */)) {\r\n                alert(AccessibilityHelpNLS.openingDocs);\r\n                var url = _this._editor.getRawOptions().accessibilityHelpUrl;\r\n                if (typeof url === 'undefined') {\r\n                    url = 'https://go.microsoft.com/fwlink/?linkid=852450';\r\n                }\r\n                _this._openerService.open(URI.parse(url));\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n            }\r\n        }));\r\n        _this.onblur(_this._contentDomNode.domNode, function () {\r\n            _this.hide();\r\n        });\r\n        _this._editor.addOverlayWidget(_this);\r\n        return _this;\r\n    }\r\n    AccessibilityHelpWidget.prototype.dispose = function () {\r\n        this._editor.removeOverlayWidget(this);\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    AccessibilityHelpWidget.prototype.getId = function () {\r\n        return AccessibilityHelpWidget.ID;\r\n    };\r\n    AccessibilityHelpWidget.prototype.getDomNode = function () {\r\n        return this._domNode.domNode;\r\n    };\r\n    AccessibilityHelpWidget.prototype.getPosition = function () {\r\n        return {\r\n            preference: null\r\n        };\r\n    };\r\n    AccessibilityHelpWidget.prototype.show = function () {\r\n        if (this._isVisible) {\r\n            return;\r\n        }\r\n        this._isVisible = true;\r\n        this._isVisibleKey.set(true);\r\n        this._layout();\r\n        this._domNode.setDisplay('block');\r\n        this._domNode.setAttribute('aria-hidden', 'false');\r\n        this._contentDomNode.domNode.tabIndex = 0;\r\n        this._buildContent();\r\n        this._contentDomNode.domNode.focus();\r\n    };\r\n    AccessibilityHelpWidget.prototype._descriptionForCommand = function (commandId, msg, noKbMsg) {\r\n        var kb = this._keybindingService.lookupKeybinding(commandId);\r\n        if (kb) {\r\n            return strings.format(msg, kb.getAriaLabel());\r\n        }\r\n        return strings.format(noKbMsg, commandId);\r\n    };\r\n    AccessibilityHelpWidget.prototype._buildContent = function () {\r\n        var options = this._editor.getOptions();\r\n        var selections = this._editor.getSelections();\r\n        var charactersSelected = 0;\r\n        if (selections) {\r\n            var model_1 = this._editor.getModel();\r\n            if (model_1) {\r\n                selections.forEach(function (selection) {\r\n                    charactersSelected += model_1.getValueLengthInRange(selection);\r\n                });\r\n            }\r\n        }\r\n        var text = getSelectionLabel(selections, charactersSelected);\r\n        if (options.get(45 /* inDiffEditor */)) {\r\n            if (options.get(68 /* readOnly */)) {\r\n                text += AccessibilityHelpNLS.readonlyDiffEditor;\r\n            }\r\n            else {\r\n                text += AccessibilityHelpNLS.editableDiffEditor;\r\n            }\r\n        }\r\n        else {\r\n            if (options.get(68 /* readOnly */)) {\r\n                text += AccessibilityHelpNLS.readonlyEditor;\r\n            }\r\n            else {\r\n                text += AccessibilityHelpNLS.editableEditor;\r\n            }\r\n        }\r\n        var turnOnMessage = (platform.isMacintosh\r\n            ? AccessibilityHelpNLS.changeConfigToOnMac\r\n            : AccessibilityHelpNLS.changeConfigToOnWinLinux);\r\n        switch (options.get(2 /* accessibilitySupport */)) {\r\n            case 0 /* Unknown */:\r\n                text += '\\n\\n - ' + turnOnMessage;\r\n                break;\r\n            case 2 /* Enabled */:\r\n                text += '\\n\\n - ' + AccessibilityHelpNLS.auto_on;\r\n                break;\r\n            case 1 /* Disabled */:\r\n                text += '\\n\\n - ' + AccessibilityHelpNLS.auto_off;\r\n                text += ' ' + turnOnMessage;\r\n                break;\r\n        }\r\n        if (options.get(106 /* tabFocusMode */)) {\r\n            text += '\\n\\n - ' + this._descriptionForCommand(ToggleTabFocusModeAction.ID, AccessibilityHelpNLS.tabFocusModeOnMsg, AccessibilityHelpNLS.tabFocusModeOnMsgNoKb);\r\n        }\r\n        else {\r\n            text += '\\n\\n - ' + this._descriptionForCommand(ToggleTabFocusModeAction.ID, AccessibilityHelpNLS.tabFocusModeOffMsg, AccessibilityHelpNLS.tabFocusModeOffMsgNoKb);\r\n        }\r\n        var openDocMessage = (platform.isMacintosh\r\n            ? AccessibilityHelpNLS.openDocMac\r\n            : AccessibilityHelpNLS.openDocWinLinux);\r\n        text += '\\n\\n - ' + openDocMessage;\r\n        text += '\\n\\n' + AccessibilityHelpNLS.outroMsg;\r\n        this._contentDomNode.domNode.appendChild(renderFormattedText(text));\r\n        // Per https://www.w3.org/TR/wai-aria/roles#document, Authors SHOULD provide a title or label for documents\r\n        this._contentDomNode.domNode.setAttribute('aria-label', text);\r\n    };\r\n    AccessibilityHelpWidget.prototype.hide = function () {\r\n        if (!this._isVisible) {\r\n            return;\r\n        }\r\n        this._isVisible = false;\r\n        this._isVisibleKey.reset();\r\n        this._domNode.setDisplay('none');\r\n        this._domNode.setAttribute('aria-hidden', 'true');\r\n        this._contentDomNode.domNode.tabIndex = -1;\r\n        dom.clearNode(this._contentDomNode.domNode);\r\n        this._editor.focus();\r\n    };\r\n    AccessibilityHelpWidget.prototype._layout = function () {\r\n        var editorLayout = this._editor.getLayoutInfo();\r\n        var w = Math.max(5, Math.min(AccessibilityHelpWidget.WIDTH, editorLayout.width - 40));\r\n        var h = Math.max(5, Math.min(AccessibilityHelpWidget.HEIGHT, editorLayout.height - 40));\r\n        this._domNode.setWidth(w);\r\n        this._domNode.setHeight(h);\r\n        var top = Math.round((editorLayout.height - h) / 2);\r\n        this._domNode.setTop(top);\r\n        var left = Math.round((editorLayout.width - w) / 2);\r\n        this._domNode.setLeft(left);\r\n    };\r\n    AccessibilityHelpWidget.ID = 'editor.contrib.accessibilityHelpWidget';\r\n    AccessibilityHelpWidget.WIDTH = 500;\r\n    AccessibilityHelpWidget.HEIGHT = 300;\r\n    AccessibilityHelpWidget = __decorate([\r\n        __param(1, IContextKeyService),\r\n        __param(2, IKeybindingService),\r\n        __param(3, IOpenerService)\r\n    ], AccessibilityHelpWidget);\r\n    return AccessibilityHelpWidget;\r\n}(Widget));\r\nvar ShowAccessibilityHelpAction = /** @class */ (function (_super) {\r\n    __extends(ShowAccessibilityHelpAction, _super);\r\n    function ShowAccessibilityHelpAction() {\r\n        return _super.call(this, {\r\n            id: 'editor.action.showAccessibilityHelp',\r\n            label: AccessibilityHelpNLS.showAccessibilityHelpAction,\r\n            alias: 'Show Accessibility Help',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.focus,\r\n                primary: (browser.isIE ? 2048 /* CtrlCmd */ | 59 /* F1 */ : 512 /* Alt */ | 59 /* F1 */),\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    ShowAccessibilityHelpAction.prototype.run = function (accessor, editor) {\r\n        var controller = AccessibilityHelpController.get(editor);\r\n        if (controller) {\r\n            controller.show();\r\n        }\r\n    };\r\n    return ShowAccessibilityHelpAction;\r\n}(EditorAction));\r\nregisterEditorContribution(AccessibilityHelpController.ID, AccessibilityHelpController);\r\nregisterEditorAction(ShowAccessibilityHelpAction);\r\nvar AccessibilityHelpCommand = EditorCommand.bindToContribution(AccessibilityHelpController.get);\r\nregisterEditorCommand(new AccessibilityHelpCommand({\r\n    id: 'closeAccessibilityHelp',\r\n    precondition: CONTEXT_ACCESSIBILITY_WIDGET_VISIBLE,\r\n    handler: function (x) { return x.hide(); },\r\n    kbOpts: {\r\n        weight: 100 /* EditorContrib */ + 100,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: 9 /* Escape */,\r\n        secondary: [1024 /* Shift */ | 9 /* Escape */]\r\n    }\r\n}));\r\nregisterThemingParticipant(function (theme, collector) {\r\n    var widgetBackground = theme.getColor(editorWidgetBackground);\r\n    if (widgetBackground) {\r\n        collector.addRule(\".monaco-editor .accessibilityHelpWidget { background-color: \" + widgetBackground + \"; }\");\r\n    }\r\n    var widgetForeground = theme.getColor(editorWidgetForeground);\r\n    if (widgetForeground) {\r\n        collector.addRule(\".monaco-editor .accessibilityHelpWidget { color: \" + widgetForeground + \"; }\");\r\n    }\r\n    var widgetShadowColor = theme.getColor(widgetShadow);\r\n    if (widgetShadowColor) {\r\n        collector.addRule(\".monaco-editor .accessibilityHelpWidget { box-shadow: 0 2px 8px \" + widgetShadowColor + \"; }\");\r\n    }\r\n    var hcBorder = theme.getColor(contrastBorder);\r\n    if (hcBorder) {\r\n        collector.addRule(\".monaco-editor .accessibilityHelpWidget { border: 2px solid \" + hcBorder + \"; }\");\r\n    }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Range } from '../../common/core/range.js';\r\nimport { Token, TokenizationResult, TokenizationResult2 } from '../../common/core/token.js';\r\nimport * as modes from '../../common/modes.js';\r\nimport { LanguageConfigurationRegistry } from '../../common/modes/languageConfigurationRegistry.js';\r\nimport { ModesRegistry } from '../../common/modes/modesRegistry.js';\r\nimport * as standaloneEnums from '../../common/standalone/standaloneEnums.js';\r\nimport { StaticServices } from './standaloneServices.js';\r\nimport { compile } from '../common/monarch/monarchCompile.js';\r\nimport { createTokenizationSupport } from '../common/monarch/monarchLexer.js';\r\n/**\r\n * Register information about a new language.\r\n */\r\nexport function register(language) {\r\n    ModesRegistry.registerLanguage(language);\r\n}\r\n/**\r\n * Get the information of all the registered languages.\r\n */\r\nexport function getLanguages() {\r\n    var result = [];\r\n    result = result.concat(ModesRegistry.getLanguages());\r\n    return result;\r\n}\r\nexport function getEncodedLanguageId(languageId) {\r\n    var lid = StaticServices.modeService.get().getLanguageIdentifier(languageId);\r\n    return lid ? lid.id : 0;\r\n}\r\n/**\r\n * An event emitted when a language is first time needed (e.g. a model has it set).\r\n * @event\r\n */\r\nexport function onLanguage(languageId, callback) {\r\n    var disposable = StaticServices.modeService.get().onDidCreateMode(function (mode) {\r\n        if (mode.getId() === languageId) {\r\n            // stop listening\r\n            disposable.dispose();\r\n            // invoke actual listener\r\n            callback();\r\n        }\r\n    });\r\n    return disposable;\r\n}\r\n/**\r\n * Set the editing configuration for a language.\r\n */\r\nexport function setLanguageConfiguration(languageId, configuration) {\r\n    var languageIdentifier = StaticServices.modeService.get().getLanguageIdentifier(languageId);\r\n    if (!languageIdentifier) {\r\n        throw new Error(\"Cannot set configuration for unknown language \" + languageId);\r\n    }\r\n    return LanguageConfigurationRegistry.register(languageIdentifier, configuration);\r\n}\r\n/**\r\n * @internal\r\n */\r\nvar EncodedTokenizationSupport2Adapter = /** @class */ (function () {\r\n    function EncodedTokenizationSupport2Adapter(actual) {\r\n        this._actual = actual;\r\n    }\r\n    EncodedTokenizationSupport2Adapter.prototype.getInitialState = function () {\r\n        return this._actual.getInitialState();\r\n    };\r\n    EncodedTokenizationSupport2Adapter.prototype.tokenize = function (line, state, offsetDelta) {\r\n        throw new Error('Not supported!');\r\n    };\r\n    EncodedTokenizationSupport2Adapter.prototype.tokenize2 = function (line, state) {\r\n        var result = this._actual.tokenizeEncoded(line, state);\r\n        return new TokenizationResult2(result.tokens, result.endState);\r\n    };\r\n    return EncodedTokenizationSupport2Adapter;\r\n}());\r\nexport { EncodedTokenizationSupport2Adapter };\r\n/**\r\n * @internal\r\n */\r\nvar TokenizationSupport2Adapter = /** @class */ (function () {\r\n    function TokenizationSupport2Adapter(standaloneThemeService, languageIdentifier, actual) {\r\n        this._standaloneThemeService = standaloneThemeService;\r\n        this._languageIdentifier = languageIdentifier;\r\n        this._actual = actual;\r\n    }\r\n    TokenizationSupport2Adapter.prototype.getInitialState = function () {\r\n        return this._actual.getInitialState();\r\n    };\r\n    TokenizationSupport2Adapter.prototype._toClassicTokens = function (tokens, language, offsetDelta) {\r\n        var result = [];\r\n        var previousStartIndex = 0;\r\n        for (var i = 0, len = tokens.length; i < len; i++) {\r\n            var t = tokens[i];\r\n            var startIndex = t.startIndex;\r\n            // Prevent issues stemming from a buggy external tokenizer.\r\n            if (i === 0) {\r\n                // Force first token to start at first index!\r\n                startIndex = 0;\r\n            }\r\n            else if (startIndex < previousStartIndex) {\r\n                // Force tokens to be after one another!\r\n                startIndex = previousStartIndex;\r\n            }\r\n            result[i] = new Token(startIndex + offsetDelta, t.scopes, language);\r\n            previousStartIndex = startIndex;\r\n        }\r\n        return result;\r\n    };\r\n    TokenizationSupport2Adapter.prototype.tokenize = function (line, state, offsetDelta) {\r\n        var actualResult = this._actual.tokenize(line, state);\r\n        var tokens = this._toClassicTokens(actualResult.tokens, this._languageIdentifier.language, offsetDelta);\r\n        var endState;\r\n        // try to save an object if possible\r\n        if (actualResult.endState.equals(state)) {\r\n            endState = state;\r\n        }\r\n        else {\r\n            endState = actualResult.endState;\r\n        }\r\n        return new TokenizationResult(tokens, endState);\r\n    };\r\n    TokenizationSupport2Adapter.prototype._toBinaryTokens = function (tokens, offsetDelta) {\r\n        var languageId = this._languageIdentifier.id;\r\n        var tokenTheme = this._standaloneThemeService.getTheme().tokenTheme;\r\n        var result = [], resultLen = 0;\r\n        var previousStartIndex = 0;\r\n        for (var i = 0, len = tokens.length; i < len; i++) {\r\n            var t = tokens[i];\r\n            var metadata = tokenTheme.match(languageId, t.scopes);\r\n            if (resultLen > 0 && result[resultLen - 1] === metadata) {\r\n                // same metadata\r\n                continue;\r\n            }\r\n            var startIndex = t.startIndex;\r\n            // Prevent issues stemming from a buggy external tokenizer.\r\n            if (i === 0) {\r\n                // Force first token to start at first index!\r\n                startIndex = 0;\r\n            }\r\n            else if (startIndex < previousStartIndex) {\r\n                // Force tokens to be after one another!\r\n                startIndex = previousStartIndex;\r\n            }\r\n            result[resultLen++] = startIndex + offsetDelta;\r\n            result[resultLen++] = metadata;\r\n            previousStartIndex = startIndex;\r\n        }\r\n        var actualResult = new Uint32Array(resultLen);\r\n        for (var i = 0; i < resultLen; i++) {\r\n            actualResult[i] = result[i];\r\n        }\r\n        return actualResult;\r\n    };\r\n    TokenizationSupport2Adapter.prototype.tokenize2 = function (line, state, offsetDelta) {\r\n        var actualResult = this._actual.tokenize(line, state);\r\n        var tokens = this._toBinaryTokens(actualResult.tokens, offsetDelta);\r\n        var endState;\r\n        // try to save an object if possible\r\n        if (actualResult.endState.equals(state)) {\r\n            endState = state;\r\n        }\r\n        else {\r\n            endState = actualResult.endState;\r\n        }\r\n        return new TokenizationResult2(tokens, endState);\r\n    };\r\n    return TokenizationSupport2Adapter;\r\n}());\r\nexport { TokenizationSupport2Adapter };\r\nfunction isEncodedTokensProvider(provider) {\r\n    return 'tokenizeEncoded' in provider;\r\n}\r\nfunction isThenable(obj) {\r\n    return obj && typeof obj.then === 'function';\r\n}\r\n/**\r\n * Set the tokens provider for a language (manual implementation).\r\n */\r\nexport function setTokensProvider(languageId, provider) {\r\n    var languageIdentifier = StaticServices.modeService.get().getLanguageIdentifier(languageId);\r\n    if (!languageIdentifier) {\r\n        throw new Error(\"Cannot set tokens provider for unknown language \" + languageId);\r\n    }\r\n    var create = function (provider) {\r\n        if (isEncodedTokensProvider(provider)) {\r\n            return new EncodedTokenizationSupport2Adapter(provider);\r\n        }\r\n        else {\r\n            return new TokenizationSupport2Adapter(StaticServices.standaloneThemeService.get(), languageIdentifier, provider);\r\n        }\r\n    };\r\n    if (isThenable(provider)) {\r\n        return modes.TokenizationRegistry.registerPromise(languageId, provider.then(function (provider) { return create(provider); }));\r\n    }\r\n    return modes.TokenizationRegistry.register(languageId, create(provider));\r\n}\r\n/**\r\n * Set the tokens provider for a language (monarch implementation).\r\n */\r\nexport function setMonarchTokensProvider(languageId, languageDef) {\r\n    var create = function (languageDef) {\r\n        return createTokenizationSupport(StaticServices.modeService.get(), StaticServices.standaloneThemeService.get(), languageId, compile(languageId, languageDef));\r\n    };\r\n    if (isThenable(languageDef)) {\r\n        return modes.TokenizationRegistry.registerPromise(languageId, languageDef.then(function (languageDef) { return create(languageDef); }));\r\n    }\r\n    return modes.TokenizationRegistry.register(languageId, create(languageDef));\r\n}\r\n/**\r\n * Register a reference provider (used by e.g. reference search).\r\n */\r\nexport function registerReferenceProvider(languageId, provider) {\r\n    return modes.ReferenceProviderRegistry.register(languageId, provider);\r\n}\r\n/**\r\n * Register a rename provider (used by e.g. rename symbol).\r\n */\r\nexport function registerRenameProvider(languageId, provider) {\r\n    return modes.RenameProviderRegistry.register(languageId, provider);\r\n}\r\n/**\r\n * Register a signature help provider (used by e.g. parameter hints).\r\n */\r\nexport function registerSignatureHelpProvider(languageId, provider) {\r\n    return modes.SignatureHelpProviderRegistry.register(languageId, provider);\r\n}\r\n/**\r\n * Register a hover provider (used by e.g. editor hover).\r\n */\r\nexport function registerHoverProvider(languageId, provider) {\r\n    return modes.HoverProviderRegistry.register(languageId, {\r\n        provideHover: function (model, position, token) {\r\n            var word = model.getWordAtPosition(position);\r\n            return Promise.resolve(provider.provideHover(model, position, token)).then(function (value) {\r\n                if (!value) {\r\n                    return undefined;\r\n                }\r\n                if (!value.range && word) {\r\n                    value.range = new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn);\r\n                }\r\n                if (!value.range) {\r\n                    value.range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\r\n                }\r\n                return value;\r\n            });\r\n        }\r\n    });\r\n}\r\n/**\r\n * Register a document symbol provider (used by e.g. outline).\r\n */\r\nexport function registerDocumentSymbolProvider(languageId, provider) {\r\n    return modes.DocumentSymbolProviderRegistry.register(languageId, provider);\r\n}\r\n/**\r\n * Register a document highlight provider (used by e.g. highlight occurrences).\r\n */\r\nexport function registerDocumentHighlightProvider(languageId, provider) {\r\n    return modes.DocumentHighlightProviderRegistry.register(languageId, provider);\r\n}\r\n/**\r\n * Register a definition provider (used by e.g. go to definition).\r\n */\r\nexport function registerDefinitionProvider(languageId, provider) {\r\n    return modes.DefinitionProviderRegistry.register(languageId, provider);\r\n}\r\n/**\r\n * Register a implementation provider (used by e.g. go to implementation).\r\n */\r\nexport function registerImplementationProvider(languageId, provider) {\r\n    return modes.ImplementationProviderRegistry.register(languageId, provider);\r\n}\r\n/**\r\n * Register a type definition provider (used by e.g. go to type definition).\r\n */\r\nexport function registerTypeDefinitionProvider(languageId, provider) {\r\n    return modes.TypeDefinitionProviderRegistry.register(languageId, provider);\r\n}\r\n/**\r\n * Register a code lens provider (used by e.g. inline code lenses).\r\n */\r\nexport function registerCodeLensProvider(languageId, provider) {\r\n    return modes.CodeLensProviderRegistry.register(languageId, provider);\r\n}\r\n/**\r\n * Register a code action provider (used by e.g. quick fix).\r\n */\r\nexport function registerCodeActionProvider(languageId, provider) {\r\n    return modes.CodeActionProviderRegistry.register(languageId, {\r\n        provideCodeActions: function (model, range, context, token) {\r\n            var markers = StaticServices.markerService.get().read({ resource: model.uri }).filter(function (m) {\r\n                return Range.areIntersectingOrTouching(m, range);\r\n            });\r\n            return provider.provideCodeActions(model, range, { markers: markers, only: context.only }, token);\r\n        }\r\n    });\r\n}\r\n/**\r\n * Register a formatter that can handle only entire models.\r\n */\r\nexport function registerDocumentFormattingEditProvider(languageId, provider) {\r\n    return modes.DocumentFormattingEditProviderRegistry.register(languageId, provider);\r\n}\r\n/**\r\n * Register a formatter that can handle a range inside a model.\r\n */\r\nexport function registerDocumentRangeFormattingEditProvider(languageId, provider) {\r\n    return modes.DocumentRangeFormattingEditProviderRegistry.register(languageId, provider);\r\n}\r\n/**\r\n * Register a formatter than can do formatting as the user types.\r\n */\r\nexport function registerOnTypeFormattingEditProvider(languageId, provider) {\r\n    return modes.OnTypeFormattingEditProviderRegistry.register(languageId, provider);\r\n}\r\n/**\r\n * Register a link provider that can find links in text.\r\n */\r\nexport function registerLinkProvider(languageId, provider) {\r\n    return modes.LinkProviderRegistry.register(languageId, provider);\r\n}\r\n/**\r\n * Register a completion item provider (use by e.g. suggestions).\r\n */\r\nexport function registerCompletionItemProvider(languageId, provider) {\r\n    return modes.CompletionProviderRegistry.register(languageId, provider);\r\n}\r\n/**\r\n * Register a document color provider (used by Color Picker, Color Decorator).\r\n */\r\nexport function registerColorProvider(languageId, provider) {\r\n    return modes.ColorProviderRegistry.register(languageId, provider);\r\n}\r\n/**\r\n * Register a folding range provider\r\n */\r\nexport function registerFoldingRangeProvider(languageId, provider) {\r\n    return modes.FoldingRangeProviderRegistry.register(languageId, provider);\r\n}\r\n/**\r\n * Register a declaration provider\r\n */\r\nexport function registerDeclarationProvider(languageId, provider) {\r\n    return modes.DeclarationProviderRegistry.register(languageId, provider);\r\n}\r\n/**\r\n * Register a selection range provider\r\n */\r\nexport function registerSelectionRangeProvider(languageId, provider) {\r\n    return modes.SelectionRangeRegistry.register(languageId, provider);\r\n}\r\n/**\r\n * Register a document semantic tokens provider\r\n */\r\nexport function registerDocumentSemanticTokensProvider(languageId, provider) {\r\n    return modes.DocumentSemanticTokensProviderRegistry.register(languageId, provider);\r\n}\r\n/**\r\n * Register a document range semantic tokens provider\r\n */\r\nexport function registerDocumentRangeSemanticTokensProvider(languageId, provider) {\r\n    return modes.DocumentRangeSemanticTokensProviderRegistry.register(languageId, provider);\r\n}\r\n/**\r\n * @internal\r\n */\r\nexport function createMonacoLanguagesAPI() {\r\n    return {\r\n        register: register,\r\n        getLanguages: getLanguages,\r\n        onLanguage: onLanguage,\r\n        getEncodedLanguageId: getEncodedLanguageId,\r\n        // provider methods\r\n        setLanguageConfiguration: setLanguageConfiguration,\r\n        setTokensProvider: setTokensProvider,\r\n        setMonarchTokensProvider: setMonarchTokensProvider,\r\n        registerReferenceProvider: registerReferenceProvider,\r\n        registerRenameProvider: registerRenameProvider,\r\n        registerCompletionItemProvider: registerCompletionItemProvider,\r\n        registerSignatureHelpProvider: registerSignatureHelpProvider,\r\n        registerHoverProvider: registerHoverProvider,\r\n        registerDocumentSymbolProvider: registerDocumentSymbolProvider,\r\n        registerDocumentHighlightProvider: registerDocumentHighlightProvider,\r\n        registerDefinitionProvider: registerDefinitionProvider,\r\n        registerImplementationProvider: registerImplementationProvider,\r\n        registerTypeDefinitionProvider: registerTypeDefinitionProvider,\r\n        registerCodeLensProvider: registerCodeLensProvider,\r\n        registerCodeActionProvider: registerCodeActionProvider,\r\n        registerDocumentFormattingEditProvider: registerDocumentFormattingEditProvider,\r\n        registerDocumentRangeFormattingEditProvider: registerDocumentRangeFormattingEditProvider,\r\n        registerOnTypeFormattingEditProvider: registerOnTypeFormattingEditProvider,\r\n        registerLinkProvider: registerLinkProvider,\r\n        registerColorProvider: registerColorProvider,\r\n        registerFoldingRangeProvider: registerFoldingRangeProvider,\r\n        registerDeclarationProvider: registerDeclarationProvider,\r\n        registerSelectionRangeProvider: registerSelectionRangeProvider,\r\n        registerDocumentSemanticTokensProvider: registerDocumentSemanticTokensProvider,\r\n        registerDocumentRangeSemanticTokensProvider: registerDocumentRangeSemanticTokensProvider,\r\n        // enums\r\n        DocumentHighlightKind: standaloneEnums.DocumentHighlightKind,\r\n        CompletionItemKind: standaloneEnums.CompletionItemKind,\r\n        CompletionItemTag: standaloneEnums.CompletionItemTag,\r\n        CompletionItemInsertTextRule: standaloneEnums.CompletionItemInsertTextRule,\r\n        SymbolKind: standaloneEnums.SymbolKind,\r\n        SymbolTag: standaloneEnums.SymbolTag,\r\n        IndentAction: standaloneEnums.IndentAction,\r\n        CompletionTriggerKind: standaloneEnums.CompletionTriggerKind,\r\n        SignatureHelpTriggerKind: standaloneEnums.SignatureHelpTriggerKind,\r\n        // classes\r\n        FoldingRangeKind: modes.FoldingRangeKind,\r\n    };\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport './quickOutline.css';\r\nimport '../../../../base/browser/ui/codiconLabel/codiconLabel.js'; // The codicon symbol styles are defined here and must be loaded\r\nimport '../../../contrib/documentSymbols/outlineTree.js'; // The codicon symbol colors are defined here and must be loaded\r\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\r\nimport { matchesFuzzy } from '../../../../base/common/filters.js';\r\nimport * as strings from '../../../../base/common/strings.js';\r\nimport { QuickOpenEntryGroup, QuickOpenModel } from '../../../../base/parts/quickopen/browser/quickOpenModel.js';\r\nimport { registerEditorAction } from '../../../browser/editorExtensions.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { DocumentSymbolProviderRegistry, SymbolKinds } from '../../../common/modes.js';\r\nimport { getDocumentSymbols } from '../../../contrib/quickOpen/quickOpen.js';\r\nimport { BaseEditorQuickOpenAction } from './editorQuickOpen.js';\r\nimport { QuickOutlineNLS } from '../../../common/standaloneStrings.js';\r\nvar SCOPE_PREFIX = ':';\r\nvar SymbolEntry = /** @class */ (function (_super) {\r\n    __extends(SymbolEntry, _super);\r\n    function SymbolEntry(name, type, description, range, highlights, editor, decorator) {\r\n        var _this = _super.call(this) || this;\r\n        _this.name = name;\r\n        _this.type = type;\r\n        _this.description = description;\r\n        _this.range = range;\r\n        _this.setHighlights(highlights);\r\n        _this.editor = editor;\r\n        _this.decorator = decorator;\r\n        return _this;\r\n    }\r\n    SymbolEntry.prototype.getLabel = function () {\r\n        return this.name;\r\n    };\r\n    SymbolEntry.prototype.getAriaLabel = function () {\r\n        return strings.format(QuickOutlineNLS.entryAriaLabel, this.name);\r\n    };\r\n    SymbolEntry.prototype.getIcon = function () {\r\n        return this.type;\r\n    };\r\n    SymbolEntry.prototype.getDescription = function () {\r\n        return this.description;\r\n    };\r\n    SymbolEntry.prototype.getType = function () {\r\n        return this.type;\r\n    };\r\n    SymbolEntry.prototype.getRange = function () {\r\n        return this.range;\r\n    };\r\n    SymbolEntry.prototype.run = function (mode, context) {\r\n        if (mode === 1 /* OPEN */) {\r\n            return this.runOpen(context);\r\n        }\r\n        return this.runPreview();\r\n    };\r\n    SymbolEntry.prototype.runOpen = function (_context) {\r\n        // Apply selection and focus\r\n        var range = this.toSelection();\r\n        this.editor.setSelection(range);\r\n        this.editor.revealRangeInCenter(range, 0 /* Smooth */);\r\n        this.editor.focus();\r\n        return true;\r\n    };\r\n    SymbolEntry.prototype.runPreview = function () {\r\n        // Select Outline Position\r\n        var range = this.toSelection();\r\n        this.editor.revealRangeInCenter(range, 0 /* Smooth */);\r\n        // Decorate if possible\r\n        this.decorator.decorateLine(this.range, this.editor);\r\n        return false;\r\n    };\r\n    SymbolEntry.prototype.toSelection = function () {\r\n        return new Range(this.range.startLineNumber, this.range.startColumn || 1, this.range.startLineNumber, this.range.startColumn || 1);\r\n    };\r\n    return SymbolEntry;\r\n}(QuickOpenEntryGroup));\r\nexport { SymbolEntry };\r\nvar QuickOutlineAction = /** @class */ (function (_super) {\r\n    __extends(QuickOutlineAction, _super);\r\n    function QuickOutlineAction() {\r\n        return _super.call(this, QuickOutlineNLS.quickOutlineActionInput, {\r\n            id: 'editor.action.quickOutline',\r\n            label: QuickOutlineNLS.quickOutlineActionLabel,\r\n            alias: 'Go to Symbol...',\r\n            precondition: EditorContextKeys.hasDocumentSymbolProvider,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.focus,\r\n                primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 45 /* KEY_O */,\r\n                weight: 100 /* EditorContrib */\r\n            },\r\n            contextMenuOpts: {\r\n                group: 'navigation',\r\n                order: 3\r\n            }\r\n        }) || this;\r\n    }\r\n    QuickOutlineAction.prototype.run = function (accessor, editor) {\r\n        var _this = this;\r\n        if (!editor.hasModel()) {\r\n            return undefined;\r\n        }\r\n        var model = editor.getModel();\r\n        if (!DocumentSymbolProviderRegistry.has(model)) {\r\n            return undefined;\r\n        }\r\n        // Resolve outline\r\n        return getDocumentSymbols(model, true, CancellationToken.None).then(function (result) {\r\n            if (result.length === 0) {\r\n                return;\r\n            }\r\n            _this._run(editor, result);\r\n        });\r\n    };\r\n    QuickOutlineAction.prototype._run = function (editor, result) {\r\n        var _this = this;\r\n        this._show(this.getController(editor), {\r\n            getModel: function (value) {\r\n                return new QuickOpenModel(_this.toQuickOpenEntries(editor, result, value));\r\n            },\r\n            getAutoFocus: function (searchValue) {\r\n                // Remove any type pattern (:) from search value as needed\r\n                if (searchValue.indexOf(SCOPE_PREFIX) === 0) {\r\n                    searchValue = searchValue.substr(SCOPE_PREFIX.length);\r\n                }\r\n                return {\r\n                    autoFocusPrefixMatch: searchValue,\r\n                    autoFocusFirstEntry: !!searchValue\r\n                };\r\n            }\r\n        });\r\n    };\r\n    QuickOutlineAction.prototype.symbolEntry = function (name, type, description, range, highlights, editor, decorator) {\r\n        return new SymbolEntry(name, type, description, Range.lift(range), highlights, editor, decorator);\r\n    };\r\n    QuickOutlineAction.prototype.toQuickOpenEntries = function (editor, flattened, searchValue) {\r\n        var controller = this.getController(editor);\r\n        var results = [];\r\n        // Convert to Entries\r\n        var normalizedSearchValue = searchValue;\r\n        if (searchValue.indexOf(SCOPE_PREFIX) === 0) {\r\n            normalizedSearchValue = normalizedSearchValue.substr(SCOPE_PREFIX.length);\r\n        }\r\n        for (var _i = 0, flattened_1 = flattened; _i < flattened_1.length; _i++) {\r\n            var element = flattened_1[_i];\r\n            var label = strings.trim(element.name);\r\n            // Check for meatch\r\n            var highlights = matchesFuzzy(normalizedSearchValue, label);\r\n            if (highlights) {\r\n                // Show parent scope as description\r\n                var description = undefined;\r\n                if (element.containerName) {\r\n                    description = element.containerName;\r\n                }\r\n                // Add\r\n                results.push(this.symbolEntry(label, SymbolKinds.toCssClassName(element.kind), description, element.range, highlights, editor, controller));\r\n            }\r\n        }\r\n        // Sort properly if actually searching\r\n        if (searchValue) {\r\n            if (searchValue.indexOf(SCOPE_PREFIX) === 0) {\r\n                results = results.sort(this.sortScoped.bind(this, searchValue.toLowerCase()));\r\n            }\r\n            else {\r\n                results = results.sort(this.sortNormal.bind(this, searchValue.toLowerCase()));\r\n            }\r\n        }\r\n        // Mark all type groups\r\n        if (results.length > 0 && searchValue.indexOf(SCOPE_PREFIX) === 0) {\r\n            var currentType = null;\r\n            var currentResult = null;\r\n            var typeCounter = 0;\r\n            for (var i = 0; i < results.length; i++) {\r\n                var result = results[i];\r\n                // Found new type\r\n                if (currentType !== result.getType()) {\r\n                    // Update previous result with count\r\n                    if (currentResult) {\r\n                        currentResult.setGroupLabel(this.typeToLabel(currentType || '', typeCounter));\r\n                    }\r\n                    currentType = result.getType();\r\n                    currentResult = result;\r\n                    typeCounter = 1;\r\n                    result.setShowBorder(i > 0);\r\n                }\r\n                // Existing type, keep counting\r\n                else {\r\n                    typeCounter++;\r\n                }\r\n            }\r\n            // Update previous result with count\r\n            if (currentResult) {\r\n                currentResult.setGroupLabel(this.typeToLabel(currentType || '', typeCounter));\r\n            }\r\n        }\r\n        // Mark first entry as outline\r\n        else if (results.length > 0) {\r\n            results[0].setGroupLabel(strings.format(QuickOutlineNLS._symbols_, results.length));\r\n        }\r\n        return results;\r\n    };\r\n    QuickOutlineAction.prototype.typeToLabel = function (type, count) {\r\n        switch (type) {\r\n            case 'module': return strings.format(QuickOutlineNLS._modules_, count);\r\n            case 'class': return strings.format(QuickOutlineNLS._class_, count);\r\n            case 'interface': return strings.format(QuickOutlineNLS._interface_, count);\r\n            case 'method': return strings.format(QuickOutlineNLS._method_, count);\r\n            case 'function': return strings.format(QuickOutlineNLS._function_, count);\r\n            case 'property': return strings.format(QuickOutlineNLS._property_, count);\r\n            case 'variable': return strings.format(QuickOutlineNLS._variable_, count);\r\n            case 'var': return strings.format(QuickOutlineNLS._variable2_, count);\r\n            case 'constructor': return strings.format(QuickOutlineNLS._constructor_, count);\r\n            case 'call': return strings.format(QuickOutlineNLS._call_, count);\r\n        }\r\n        return type;\r\n    };\r\n    QuickOutlineAction.prototype.sortNormal = function (searchValue, elementA, elementB) {\r\n        var elementAName = elementA.getLabel().toLowerCase();\r\n        var elementBName = elementB.getLabel().toLowerCase();\r\n        // Compare by name\r\n        var r = elementAName.localeCompare(elementBName);\r\n        if (r !== 0) {\r\n            return r;\r\n        }\r\n        // If name identical sort by range instead\r\n        var elementARange = elementA.getRange();\r\n        var elementBRange = elementB.getRange();\r\n        return elementARange.startLineNumber - elementBRange.startLineNumber;\r\n    };\r\n    QuickOutlineAction.prototype.sortScoped = function (searchValue, elementA, elementB) {\r\n        // Remove scope char\r\n        searchValue = searchValue.substr(SCOPE_PREFIX.length);\r\n        // Sort by type first if scoped search\r\n        var elementAType = elementA.getType();\r\n        var elementBType = elementB.getType();\r\n        var r = elementAType.localeCompare(elementBType);\r\n        if (r !== 0) {\r\n            return r;\r\n        }\r\n        // Special sort when searching in scoped mode\r\n        if (searchValue) {\r\n            var elementAName = elementA.getLabel().toLowerCase();\r\n            var elementBName = elementB.getLabel().toLowerCase();\r\n            // Compare by name\r\n            var r_1 = elementAName.localeCompare(elementBName);\r\n            if (r_1 !== 0) {\r\n                return r_1;\r\n            }\r\n        }\r\n        // Default to sort by range\r\n        var elementARange = elementA.getRange();\r\n        var elementBRange = elementB.getRange();\r\n        return elementARange.startLineNumber - elementBRange.startLineNumber;\r\n    };\r\n    return QuickOutlineAction;\r\n}(BaseEditorQuickOpenAction));\r\nexport { QuickOutlineAction };\r\nregisterEditorAction(QuickOutlineAction);\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport './inspectTokens.css';\r\nimport { Color } from '../../../../base/common/color.js';\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport { escape } from '../../../../base/common/strings.js';\r\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { TokenMetadata, TokenizationRegistry } from '../../../common/modes.js';\r\nimport { NULL_STATE, nullTokenize, nullTokenize2 } from '../../../common/modes/nullMode.js';\r\nimport { IModeService } from '../../../common/services/modeService.js';\r\nimport { IStandaloneThemeService } from '../../common/standaloneThemeService.js';\r\nimport { editorHoverBackground, editorHoverBorder, editorHoverForeground } from '../../../../platform/theme/common/colorRegistry.js';\r\nimport { HIGH_CONTRAST, registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\r\nimport { InspectTokensNLS } from '../../../common/standaloneStrings.js';\r\nvar InspectTokensController = /** @class */ (function (_super) {\r\n    __extends(InspectTokensController, _super);\r\n    function InspectTokensController(editor, standaloneColorService, modeService) {\r\n        var _this = _super.call(this) || this;\r\n        _this._editor = editor;\r\n        _this._modeService = modeService;\r\n        _this._widget = null;\r\n        _this._register(_this._editor.onDidChangeModel(function (e) { return _this.stop(); }));\r\n        _this._register(_this._editor.onDidChangeModelLanguage(function (e) { return _this.stop(); }));\r\n        _this._register(TokenizationRegistry.onDidChange(function (e) { return _this.stop(); }));\r\n        return _this;\r\n    }\r\n    InspectTokensController.get = function (editor) {\r\n        return editor.getContribution(InspectTokensController.ID);\r\n    };\r\n    InspectTokensController.prototype.dispose = function () {\r\n        this.stop();\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    InspectTokensController.prototype.launch = function () {\r\n        if (this._widget) {\r\n            return;\r\n        }\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        this._widget = new InspectTokensWidget(this._editor, this._modeService);\r\n    };\r\n    InspectTokensController.prototype.stop = function () {\r\n        if (this._widget) {\r\n            this._widget.dispose();\r\n            this._widget = null;\r\n        }\r\n    };\r\n    InspectTokensController.ID = 'editor.contrib.inspectTokens';\r\n    InspectTokensController = __decorate([\r\n        __param(1, IStandaloneThemeService),\r\n        __param(2, IModeService)\r\n    ], InspectTokensController);\r\n    return InspectTokensController;\r\n}(Disposable));\r\nvar InspectTokens = /** @class */ (function (_super) {\r\n    __extends(InspectTokens, _super);\r\n    function InspectTokens() {\r\n        return _super.call(this, {\r\n            id: 'editor.action.inspectTokens',\r\n            label: InspectTokensNLS.inspectTokensAction,\r\n            alias: 'Developer: Inspect Tokens',\r\n            precondition: undefined\r\n        }) || this;\r\n    }\r\n    InspectTokens.prototype.run = function (accessor, editor) {\r\n        var controller = InspectTokensController.get(editor);\r\n        if (controller) {\r\n            controller.launch();\r\n        }\r\n    };\r\n    return InspectTokens;\r\n}(EditorAction));\r\nfunction renderTokenText(tokenText) {\r\n    var result = '';\r\n    for (var charIndex = 0, len = tokenText.length; charIndex < len; charIndex++) {\r\n        var charCode = tokenText.charCodeAt(charIndex);\r\n        switch (charCode) {\r\n            case 9 /* Tab */:\r\n                result += '&rarr;';\r\n                break;\r\n            case 32 /* Space */:\r\n                result += '&middot;';\r\n                break;\r\n            case 60 /* LessThan */:\r\n                result += '&lt;';\r\n                break;\r\n            case 62 /* GreaterThan */:\r\n                result += '&gt;';\r\n                break;\r\n            case 38 /* Ampersand */:\r\n                result += '&amp;';\r\n                break;\r\n            default:\r\n                result += String.fromCharCode(charCode);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction getSafeTokenizationSupport(languageIdentifier) {\r\n    var tokenizationSupport = TokenizationRegistry.get(languageIdentifier.language);\r\n    if (tokenizationSupport) {\r\n        return tokenizationSupport;\r\n    }\r\n    return {\r\n        getInitialState: function () { return NULL_STATE; },\r\n        tokenize: function (line, state, deltaOffset) { return nullTokenize(languageIdentifier.language, line, state, deltaOffset); },\r\n        tokenize2: function (line, state, deltaOffset) { return nullTokenize2(languageIdentifier.id, line, state, deltaOffset); }\r\n    };\r\n}\r\nvar InspectTokensWidget = /** @class */ (function (_super) {\r\n    __extends(InspectTokensWidget, _super);\r\n    function InspectTokensWidget(editor, modeService) {\r\n        var _this = _super.call(this) || this;\r\n        // Editor.IContentWidget.allowEditorOverflow\r\n        _this.allowEditorOverflow = true;\r\n        _this._editor = editor;\r\n        _this._modeService = modeService;\r\n        _this._model = _this._editor.getModel();\r\n        _this._domNode = document.createElement('div');\r\n        _this._domNode.className = 'tokens-inspect-widget';\r\n        _this._tokenizationSupport = getSafeTokenizationSupport(_this._model.getLanguageIdentifier());\r\n        _this._compute(_this._editor.getPosition());\r\n        _this._register(_this._editor.onDidChangeCursorPosition(function (e) { return _this._compute(_this._editor.getPosition()); }));\r\n        _this._editor.addContentWidget(_this);\r\n        return _this;\r\n    }\r\n    InspectTokensWidget.prototype.dispose = function () {\r\n        this._editor.removeContentWidget(this);\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    InspectTokensWidget.prototype.getId = function () {\r\n        return InspectTokensWidget._ID;\r\n    };\r\n    InspectTokensWidget.prototype._compute = function (position) {\r\n        var data = this._getTokensAtLine(position.lineNumber);\r\n        var token1Index = 0;\r\n        for (var i = data.tokens1.length - 1; i >= 0; i--) {\r\n            var t = data.tokens1[i];\r\n            if (position.column - 1 >= t.offset) {\r\n                token1Index = i;\r\n                break;\r\n            }\r\n        }\r\n        var token2Index = 0;\r\n        for (var i = (data.tokens2.length >>> 1); i >= 0; i--) {\r\n            if (position.column - 1 >= data.tokens2[(i << 1)]) {\r\n                token2Index = i;\r\n                break;\r\n            }\r\n        }\r\n        var result = '';\r\n        var lineContent = this._model.getLineContent(position.lineNumber);\r\n        var tokenText = '';\r\n        if (token1Index < data.tokens1.length) {\r\n            var tokenStartIndex = data.tokens1[token1Index].offset;\r\n            var tokenEndIndex = token1Index + 1 < data.tokens1.length ? data.tokens1[token1Index + 1].offset : lineContent.length;\r\n            tokenText = lineContent.substring(tokenStartIndex, tokenEndIndex);\r\n        }\r\n        result += \"<h2 class=\\\"tm-token\\\">\" + renderTokenText(tokenText) + \"<span class=\\\"tm-token-length\\\">(\" + tokenText.length + \" \" + (tokenText.length === 1 ? 'char' : 'chars') + \")</span></h2>\";\r\n        result += \"<hr class=\\\"tokens-inspect-separator\\\" style=\\\"clear:both\\\"/>\";\r\n        var metadata = this._decodeMetadata(data.tokens2[(token2Index << 1) + 1]);\r\n        result += \"<table class=\\\"tm-metadata-table\\\"><tbody>\";\r\n        result += \"<tr><td class=\\\"tm-metadata-key\\\">language</td><td class=\\\"tm-metadata-value\\\">\" + escape(metadata.languageIdentifier.language) + \"</td>\";\r\n        result += \"<tr><td class=\\\"tm-metadata-key\\\">token type</td><td class=\\\"tm-metadata-value\\\">\" + this._tokenTypeToString(metadata.tokenType) + \"</td>\";\r\n        result += \"<tr><td class=\\\"tm-metadata-key\\\">font style</td><td class=\\\"tm-metadata-value\\\">\" + this._fontStyleToString(metadata.fontStyle) + \"</td>\";\r\n        result += \"<tr><td class=\\\"tm-metadata-key\\\">foreground</td><td class=\\\"tm-metadata-value\\\">\" + Color.Format.CSS.formatHex(metadata.foreground) + \"</td>\";\r\n        result += \"<tr><td class=\\\"tm-metadata-key\\\">background</td><td class=\\\"tm-metadata-value\\\">\" + Color.Format.CSS.formatHex(metadata.background) + \"</td>\";\r\n        result += \"</tbody></table>\";\r\n        result += \"<hr class=\\\"tokens-inspect-separator\\\"/>\";\r\n        if (token1Index < data.tokens1.length) {\r\n            result += \"<span class=\\\"tm-token-type\\\">\" + escape(data.tokens1[token1Index].type) + \"</span>\";\r\n        }\r\n        this._domNode.innerHTML = result;\r\n        this._editor.layoutContentWidget(this);\r\n    };\r\n    InspectTokensWidget.prototype._decodeMetadata = function (metadata) {\r\n        var colorMap = TokenizationRegistry.getColorMap();\r\n        var languageId = TokenMetadata.getLanguageId(metadata);\r\n        var tokenType = TokenMetadata.getTokenType(metadata);\r\n        var fontStyle = TokenMetadata.getFontStyle(metadata);\r\n        var foreground = TokenMetadata.getForeground(metadata);\r\n        var background = TokenMetadata.getBackground(metadata);\r\n        return {\r\n            languageIdentifier: this._modeService.getLanguageIdentifier(languageId),\r\n            tokenType: tokenType,\r\n            fontStyle: fontStyle,\r\n            foreground: colorMap[foreground],\r\n            background: colorMap[background]\r\n        };\r\n    };\r\n    InspectTokensWidget.prototype._tokenTypeToString = function (tokenType) {\r\n        switch (tokenType) {\r\n            case 0 /* Other */: return 'Other';\r\n            case 1 /* Comment */: return 'Comment';\r\n            case 2 /* String */: return 'String';\r\n            case 4 /* RegEx */: return 'RegEx';\r\n        }\r\n        return '??';\r\n    };\r\n    InspectTokensWidget.prototype._fontStyleToString = function (fontStyle) {\r\n        var r = '';\r\n        if (fontStyle & 1 /* Italic */) {\r\n            r += 'italic ';\r\n        }\r\n        if (fontStyle & 2 /* Bold */) {\r\n            r += 'bold ';\r\n        }\r\n        if (fontStyle & 4 /* Underline */) {\r\n            r += 'underline ';\r\n        }\r\n        if (r.length === 0) {\r\n            r = '---';\r\n        }\r\n        return r;\r\n    };\r\n    InspectTokensWidget.prototype._getTokensAtLine = function (lineNumber) {\r\n        var stateBeforeLine = this._getStateBeforeLine(lineNumber);\r\n        var tokenizationResult1 = this._tokenizationSupport.tokenize(this._model.getLineContent(lineNumber), stateBeforeLine, 0);\r\n        var tokenizationResult2 = this._tokenizationSupport.tokenize2(this._model.getLineContent(lineNumber), stateBeforeLine, 0);\r\n        return {\r\n            startState: stateBeforeLine,\r\n            tokens1: tokenizationResult1.tokens,\r\n            tokens2: tokenizationResult2.tokens,\r\n            endState: tokenizationResult1.endState\r\n        };\r\n    };\r\n    InspectTokensWidget.prototype._getStateBeforeLine = function (lineNumber) {\r\n        var state = this._tokenizationSupport.getInitialState();\r\n        for (var i = 1; i < lineNumber; i++) {\r\n            var tokenizationResult = this._tokenizationSupport.tokenize(this._model.getLineContent(i), state, 0);\r\n            state = tokenizationResult.endState;\r\n        }\r\n        return state;\r\n    };\r\n    InspectTokensWidget.prototype.getDomNode = function () {\r\n        return this._domNode;\r\n    };\r\n    InspectTokensWidget.prototype.getPosition = function () {\r\n        return {\r\n            position: this._editor.getPosition(),\r\n            preference: [2 /* BELOW */, 1 /* ABOVE */]\r\n        };\r\n    };\r\n    InspectTokensWidget._ID = 'editor.contrib.inspectTokensWidget';\r\n    return InspectTokensWidget;\r\n}(Disposable));\r\nregisterEditorContribution(InspectTokensController.ID, InspectTokensController);\r\nregisterEditorAction(InspectTokens);\r\nregisterThemingParticipant(function (theme, collector) {\r\n    var border = theme.getColor(editorHoverBorder);\r\n    if (border) {\r\n        var borderWidth = theme.type === HIGH_CONTRAST ? 2 : 1;\r\n        collector.addRule(\".monaco-editor .tokens-inspect-widget { border: \" + borderWidth + \"px solid \" + border + \"; }\");\r\n        collector.addRule(\".monaco-editor .tokens-inspect-widget .tokens-inspect-separator { background-color: \" + border + \"; }\");\r\n    }\r\n    var background = theme.getColor(editorHoverBackground);\r\n    if (background) {\r\n        collector.addRule(\".monaco-editor .tokens-inspect-widget { background-color: \" + background + \"; }\");\r\n    }\r\n    var foreground = theme.getColor(editorHoverForeground);\r\n    if (foreground) {\r\n        collector.addRule(\".monaco-editor .tokens-inspect-widget { color: \" + foreground + \"; }\");\r\n    }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport './iPadShowKeyboard.css';\r\nimport * as browser from '../../../../base/browser/browser.js';\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nvar IPadShowKeyboard = /** @class */ (function (_super) {\r\n    __extends(IPadShowKeyboard, _super);\r\n    function IPadShowKeyboard(editor) {\r\n        var _this = _super.call(this) || this;\r\n        _this.editor = editor;\r\n        _this.widget = null;\r\n        if (browser.isIPad) {\r\n            _this._register(editor.onDidChangeConfiguration(function () { return _this.update(); }));\r\n            _this.update();\r\n        }\r\n        return _this;\r\n    }\r\n    IPadShowKeyboard.prototype.update = function () {\r\n        var shouldHaveWidget = (!this.editor.getOption(68 /* readOnly */));\r\n        if (!this.widget && shouldHaveWidget) {\r\n            this.widget = new ShowKeyboardWidget(this.editor);\r\n        }\r\n        else if (this.widget && !shouldHaveWidget) {\r\n            this.widget.dispose();\r\n            this.widget = null;\r\n        }\r\n    };\r\n    IPadShowKeyboard.prototype.dispose = function () {\r\n        _super.prototype.dispose.call(this);\r\n        if (this.widget) {\r\n            this.widget.dispose();\r\n            this.widget = null;\r\n        }\r\n    };\r\n    IPadShowKeyboard.ID = 'editor.contrib.iPadShowKeyboard';\r\n    return IPadShowKeyboard;\r\n}(Disposable));\r\nexport { IPadShowKeyboard };\r\nvar ShowKeyboardWidget = /** @class */ (function (_super) {\r\n    __extends(ShowKeyboardWidget, _super);\r\n    function ShowKeyboardWidget(editor) {\r\n        var _this = _super.call(this) || this;\r\n        _this.editor = editor;\r\n        _this._domNode = document.createElement('textarea');\r\n        _this._domNode.className = 'iPadShowKeyboard';\r\n        _this._register(dom.addDisposableListener(_this._domNode, 'touchstart', function (e) {\r\n            _this.editor.focus();\r\n        }));\r\n        _this._register(dom.addDisposableListener(_this._domNode, 'focus', function (e) {\r\n            _this.editor.focus();\r\n        }));\r\n        _this.editor.addOverlayWidget(_this);\r\n        return _this;\r\n    }\r\n    ShowKeyboardWidget.prototype.dispose = function () {\r\n        this.editor.removeOverlayWidget(this);\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    // ----- IOverlayWidget API\r\n    ShowKeyboardWidget.prototype.getId = function () {\r\n        return ShowKeyboardWidget.ID;\r\n    };\r\n    ShowKeyboardWidget.prototype.getDomNode = function () {\r\n        return this._domNode;\r\n    };\r\n    ShowKeyboardWidget.prototype.getPosition = function () {\r\n        return {\r\n            preference: 1 /* BOTTOM_RIGHT_CORNER */\r\n        };\r\n    };\r\n    ShowKeyboardWidget.ID = 'editor.contrib.ShowKeyboardWidget';\r\n    return ShowKeyboardWidget;\r\n}(Disposable));\r\nregisterEditorContribution(IPadShowKeyboard.ID, IPadShowKeyboard);\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Dimension } from '../../../../base/browser/dom.js';\r\nimport { QuickOpenWidget } from '../../../../base/parts/quickopen/browser/quickOpenWidget.js';\r\nimport { foreground } from '../../../../platform/theme/common/colorRegistry.js';\r\nimport { attachQuickOpenStyler } from '../../../../platform/theme/common/styler.js';\r\nvar QuickOpenEditorWidget = /** @class */ (function () {\r\n    function QuickOpenEditorWidget(codeEditor, onOk, onCancel, onType, configuration, themeService) {\r\n        this.codeEditor = codeEditor;\r\n        this.themeService = themeService;\r\n        this.visible = false;\r\n        this.domNode = document.createElement('div');\r\n        this.quickOpenWidget = new QuickOpenWidget(this.domNode, {\r\n            onOk: onOk,\r\n            onCancel: onCancel,\r\n            onType: onType\r\n        }, {\r\n            inputPlaceHolder: undefined,\r\n            inputAriaLabel: configuration.inputAriaLabel,\r\n            keyboardSupport: true\r\n        });\r\n        this.styler = attachQuickOpenStyler(this.quickOpenWidget, this.themeService, {\r\n            pickerGroupForeground: foreground\r\n        });\r\n        this.quickOpenWidget.create();\r\n        this.codeEditor.addOverlayWidget(this);\r\n    }\r\n    QuickOpenEditorWidget.prototype.setInput = function (model, focus) {\r\n        this.quickOpenWidget.setInput(model, focus);\r\n    };\r\n    QuickOpenEditorWidget.prototype.getId = function () {\r\n        return QuickOpenEditorWidget.ID;\r\n    };\r\n    QuickOpenEditorWidget.prototype.getDomNode = function () {\r\n        return this.domNode;\r\n    };\r\n    QuickOpenEditorWidget.prototype.destroy = function () {\r\n        this.codeEditor.removeOverlayWidget(this);\r\n        this.quickOpenWidget.dispose();\r\n        this.styler.dispose();\r\n    };\r\n    QuickOpenEditorWidget.prototype.show = function (value) {\r\n        this.visible = true;\r\n        var editorLayout = this.codeEditor.getLayoutInfo();\r\n        if (editorLayout) {\r\n            this.quickOpenWidget.layout(new Dimension(editorLayout.width, editorLayout.height));\r\n        }\r\n        this.quickOpenWidget.show(value);\r\n        this.codeEditor.layoutOverlayWidget(this);\r\n    };\r\n    QuickOpenEditorWidget.prototype.getPosition = function () {\r\n        if (this.visible) {\r\n            return {\r\n                preference: 2 /* TOP_CENTER */\r\n            };\r\n        }\r\n        return null;\r\n    };\r\n    QuickOpenEditorWidget.ID = 'editor.contrib.quickOpenEditorWidget';\r\n    return QuickOpenEditorWidget;\r\n}());\r\nexport { QuickOpenEditorWidget };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport './editorQuickOpen.css';\r\nimport { EditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\r\nimport { QuickOpenEditorWidget } from './quickOpenEditorWidget.js';\r\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\r\nvar QuickOpenController = /** @class */ (function () {\r\n    function QuickOpenController(editor, themeService) {\r\n        this.themeService = themeService;\r\n        this.widget = null;\r\n        this.rangeHighlightDecorationId = null;\r\n        this.lastKnownEditorSelection = null;\r\n        this.editor = editor;\r\n    }\r\n    QuickOpenController.get = function (editor) {\r\n        return editor.getContribution(QuickOpenController.ID);\r\n    };\r\n    QuickOpenController.prototype.dispose = function () {\r\n        // Dispose widget\r\n        if (this.widget) {\r\n            this.widget.destroy();\r\n            this.widget = null;\r\n        }\r\n    };\r\n    QuickOpenController.prototype.run = function (opts) {\r\n        var _this = this;\r\n        if (this.widget) {\r\n            this.widget.destroy();\r\n            this.widget = null;\r\n        }\r\n        // Create goto line widget\r\n        var onClose = function (canceled) {\r\n            // Clear Highlight Decorations if present\r\n            _this.clearDecorations();\r\n            // Restore selection if canceled\r\n            if (canceled && _this.lastKnownEditorSelection) {\r\n                _this.editor.setSelection(_this.lastKnownEditorSelection);\r\n                _this.editor.revealRangeInCenterIfOutsideViewport(_this.lastKnownEditorSelection, 0 /* Smooth */);\r\n            }\r\n            _this.lastKnownEditorSelection = null;\r\n            // Return focus to the editor if\r\n            // - focus is back on the <body> element because no other focusable element was clicked\r\n            // - a command was picked from the picker which indicates the editor should get focused\r\n            if (document.activeElement === document.body || !canceled) {\r\n                _this.editor.focus();\r\n            }\r\n        };\r\n        this.widget = new QuickOpenEditorWidget(this.editor, function () { return onClose(false); }, function () { return onClose(true); }, function (value) {\r\n            _this.widget.setInput(opts.getModel(value), opts.getAutoFocus(value));\r\n        }, {\r\n            inputAriaLabel: opts.inputAriaLabel\r\n        }, this.themeService);\r\n        // Remember selection to be able to restore on cancel\r\n        if (!this.lastKnownEditorSelection) {\r\n            this.lastKnownEditorSelection = this.editor.getSelection();\r\n        }\r\n        // Show\r\n        this.widget.show('');\r\n    };\r\n    QuickOpenController.prototype.decorateLine = function (range, editor) {\r\n        var oldDecorations = [];\r\n        if (this.rangeHighlightDecorationId) {\r\n            oldDecorations.push(this.rangeHighlightDecorationId);\r\n            this.rangeHighlightDecorationId = null;\r\n        }\r\n        var newDecorations = [\r\n            {\r\n                range: range,\r\n                options: QuickOpenController._RANGE_HIGHLIGHT_DECORATION\r\n            }\r\n        ];\r\n        var decorations = editor.deltaDecorations(oldDecorations, newDecorations);\r\n        this.rangeHighlightDecorationId = decorations[0];\r\n    };\r\n    QuickOpenController.prototype.clearDecorations = function () {\r\n        if (this.rangeHighlightDecorationId) {\r\n            this.editor.deltaDecorations([this.rangeHighlightDecorationId], []);\r\n            this.rangeHighlightDecorationId = null;\r\n        }\r\n    };\r\n    QuickOpenController.ID = 'editor.controller.quickOpenController';\r\n    QuickOpenController._RANGE_HIGHLIGHT_DECORATION = ModelDecorationOptions.register({\r\n        className: 'rangeHighlight',\r\n        isWholeLine: true\r\n    });\r\n    QuickOpenController = __decorate([\r\n        __param(1, IThemeService)\r\n    ], QuickOpenController);\r\n    return QuickOpenController;\r\n}());\r\nexport { QuickOpenController };\r\n/**\r\n * Base class for providing quick open in the editor.\r\n */\r\nvar BaseEditorQuickOpenAction = /** @class */ (function (_super) {\r\n    __extends(BaseEditorQuickOpenAction, _super);\r\n    function BaseEditorQuickOpenAction(inputAriaLabel, opts) {\r\n        var _this = _super.call(this, opts) || this;\r\n        _this._inputAriaLabel = inputAriaLabel;\r\n        return _this;\r\n    }\r\n    BaseEditorQuickOpenAction.prototype.getController = function (editor) {\r\n        return QuickOpenController.get(editor);\r\n    };\r\n    BaseEditorQuickOpenAction.prototype._show = function (controller, opts) {\r\n        controller.run({\r\n            inputAriaLabel: this._inputAriaLabel,\r\n            getModel: function (value) { return opts.getModel(value); },\r\n            getAutoFocus: function (searchValue) { return opts.getAutoFocus(searchValue); }\r\n        });\r\n    };\r\n    return BaseEditorQuickOpenAction;\r\n}(EditorAction));\r\nexport { BaseEditorQuickOpenAction };\r\nregisterEditorContribution(QuickOpenController.ID, QuickOpenController);\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\r\nimport { IStandaloneThemeService } from '../../common/standaloneThemeService.js';\r\nimport { ToggleHighContrastNLS } from '../../../common/standaloneStrings.js';\r\nvar ToggleHighContrast = /** @class */ (function (_super) {\r\n    __extends(ToggleHighContrast, _super);\r\n    function ToggleHighContrast() {\r\n        var _this = _super.call(this, {\r\n            id: 'editor.action.toggleHighContrast',\r\n            label: ToggleHighContrastNLS.toggleHighContrast,\r\n            alias: 'Toggle High Contrast Theme',\r\n            precondition: undefined\r\n        }) || this;\r\n        _this._originalThemeName = null;\r\n        return _this;\r\n    }\r\n    ToggleHighContrast.prototype.run = function (accessor, editor) {\r\n        var standaloneThemeService = accessor.get(IStandaloneThemeService);\r\n        if (this._originalThemeName) {\r\n            // We must toggle back to the integrator's theme\r\n            standaloneThemeService.setTheme(this._originalThemeName);\r\n            this._originalThemeName = null;\r\n        }\r\n        else {\r\n            this._originalThemeName = standaloneThemeService.getTheme().themeName;\r\n            standaloneThemeService.setTheme('hc-black');\r\n        }\r\n    };\r\n    return ToggleHighContrast;\r\n}(EditorAction));\r\nregisterEditorAction(ToggleHighContrast);\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport * as strings from '../../../../base/common/strings.js';\r\nimport * as browser from '../../../../base/browser/browser.js';\r\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\r\nimport { matchesFuzzy } from '../../../../base/common/filters.js';\r\nimport { QuickOpenEntryGroup, QuickOpenModel } from '../../../../base/parts/quickopen/browser/quickOpenModel.js';\r\nimport { registerEditorAction } from '../../../browser/editorExtensions.js';\r\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\r\nimport { BaseEditorQuickOpenAction } from './editorQuickOpen.js';\r\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\r\nimport { QuickCommandNLS } from '../../../common/standaloneStrings.js';\r\nvar EditorActionCommandEntry = /** @class */ (function (_super) {\r\n    __extends(EditorActionCommandEntry, _super);\r\n    function EditorActionCommandEntry(key, keyAriaLabel, highlights, action, editor) {\r\n        var _this = _super.call(this) || this;\r\n        _this.key = key;\r\n        _this.keyAriaLabel = keyAriaLabel;\r\n        _this.setHighlights(highlights);\r\n        _this.action = action;\r\n        _this.editor = editor;\r\n        return _this;\r\n    }\r\n    EditorActionCommandEntry.prototype.getLabel = function () {\r\n        return this.action.label;\r\n    };\r\n    EditorActionCommandEntry.prototype.getAriaLabel = function () {\r\n        if (this.keyAriaLabel) {\r\n            return strings.format(QuickCommandNLS.ariaLabelEntryWithKey, this.getLabel(), this.keyAriaLabel);\r\n        }\r\n        return strings.format(QuickCommandNLS.ariaLabelEntry, this.getLabel());\r\n    };\r\n    EditorActionCommandEntry.prototype.getGroupLabel = function () {\r\n        return this.key;\r\n    };\r\n    EditorActionCommandEntry.prototype.run = function (mode, context) {\r\n        var _this = this;\r\n        if (mode === 1 /* OPEN */) {\r\n            // Use a timeout to give the quick open widget a chance to close itself first\r\n            setTimeout(function () {\r\n                // Some actions are enabled only when editor has focus\r\n                _this.editor.focus();\r\n                try {\r\n                    var promise = _this.action.run() || Promise.resolve();\r\n                    promise.then(undefined, onUnexpectedError);\r\n                }\r\n                catch (error) {\r\n                    onUnexpectedError(error);\r\n                }\r\n            }, 50);\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    return EditorActionCommandEntry;\r\n}(QuickOpenEntryGroup));\r\nexport { EditorActionCommandEntry };\r\nvar QuickCommandAction = /** @class */ (function (_super) {\r\n    __extends(QuickCommandAction, _super);\r\n    function QuickCommandAction() {\r\n        return _super.call(this, QuickCommandNLS.quickCommandActionInput, {\r\n            id: 'editor.action.quickCommand',\r\n            label: QuickCommandNLS.quickCommandActionLabel,\r\n            alias: 'Command Palette',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.focus,\r\n                primary: (browser.isIE ? 512 /* Alt */ | 59 /* F1 */ : 59 /* F1 */),\r\n                weight: 100 /* EditorContrib */\r\n            },\r\n            contextMenuOpts: {\r\n                group: 'z_commands',\r\n                order: 1\r\n            }\r\n        }) || this;\r\n    }\r\n    QuickCommandAction.prototype.run = function (accessor, editor) {\r\n        var _this = this;\r\n        var keybindingService = accessor.get(IKeybindingService);\r\n        this._show(this.getController(editor), {\r\n            getModel: function (value) {\r\n                return new QuickOpenModel(_this._editorActionsToEntries(keybindingService, editor, value));\r\n            },\r\n            getAutoFocus: function (searchValue) {\r\n                return {\r\n                    autoFocusFirstEntry: true,\r\n                    autoFocusPrefixMatch: searchValue\r\n                };\r\n            }\r\n        });\r\n    };\r\n    QuickCommandAction.prototype._sort = function (elementA, elementB) {\r\n        var elementAName = (elementA.getLabel() || '').toLowerCase();\r\n        var elementBName = (elementB.getLabel() || '').toLowerCase();\r\n        return elementAName.localeCompare(elementBName);\r\n    };\r\n    QuickCommandAction.prototype._editorActionsToEntries = function (keybindingService, editor, searchValue) {\r\n        var actions = editor.getSupportedActions();\r\n        var entries = [];\r\n        for (var _i = 0, actions_1 = actions; _i < actions_1.length; _i++) {\r\n            var action = actions_1[_i];\r\n            var keybinding = keybindingService.lookupKeybinding(action.id);\r\n            if (action.label) {\r\n                var highlights = matchesFuzzy(searchValue, action.label);\r\n                if (highlights) {\r\n                    entries.push(new EditorActionCommandEntry(keybinding ? keybinding.getLabel() || '' : '', keybinding ? keybinding.getAriaLabel() || '' : '', highlights, action, editor));\r\n                }\r\n            }\r\n        }\r\n        // Sort by name\r\n        entries = entries.sort(this._sort);\r\n        return entries;\r\n    };\r\n    return QuickCommandAction;\r\n}(BaseEditorQuickOpenAction));\r\nexport { QuickCommandAction };\r\nregisterEditorAction(QuickCommandAction);\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { windowOpenNoOpener } from '../../../base/browser/dom.js';\r\nimport { Schemas } from '../../../base/common/network.js';\r\nimport { CodeEditorServiceImpl } from '../../browser/services/codeEditorServiceImpl.js';\r\nvar StandaloneCodeEditorServiceImpl = /** @class */ (function (_super) {\r\n    __extends(StandaloneCodeEditorServiceImpl, _super);\r\n    function StandaloneCodeEditorServiceImpl() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    StandaloneCodeEditorServiceImpl.prototype.getActiveCodeEditor = function () {\r\n        return null; // not supported in the standalone case\r\n    };\r\n    StandaloneCodeEditorServiceImpl.prototype.openCodeEditor = function (input, source, sideBySide) {\r\n        if (!source) {\r\n            return Promise.resolve(null);\r\n        }\r\n        return Promise.resolve(this.doOpenEditor(source, input));\r\n    };\r\n    StandaloneCodeEditorServiceImpl.prototype.doOpenEditor = function (editor, input) {\r\n        var model = this.findModel(editor, input.resource);\r\n        if (!model) {\r\n            if (input.resource) {\r\n                var schema = input.resource.scheme;\r\n                if (schema === Schemas.http || schema === Schemas.https) {\r\n                    // This is a fully qualified http or https URL\r\n                    windowOpenNoOpener(input.resource.toString());\r\n                    return editor;\r\n                }\r\n            }\r\n            return null;\r\n        }\r\n        var selection = (input.options ? input.options.selection : null);\r\n        if (selection) {\r\n            if (typeof selection.endLineNumber === 'number' && typeof selection.endColumn === 'number') {\r\n                editor.setSelection(selection);\r\n                editor.revealRangeInCenter(selection, 1 /* Immediate */);\r\n            }\r\n            else {\r\n                var pos = {\r\n                    lineNumber: selection.startLineNumber,\r\n                    column: selection.startColumn\r\n                };\r\n                editor.setPosition(pos);\r\n                editor.revealPositionInCenter(pos, 1 /* Immediate */);\r\n            }\r\n        }\r\n        return editor;\r\n    };\r\n    StandaloneCodeEditorServiceImpl.prototype.findModel = function (editor, resource) {\r\n        var model = editor.getModel();\r\n        if (model && model.uri.toString() !== resource.toString()) {\r\n            return null;\r\n        }\r\n        return model;\r\n    };\r\n    return StandaloneCodeEditorServiceImpl;\r\n}(CodeEditorServiceImpl));\r\nexport { StandaloneCodeEditorServiceImpl };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { Color } from '../../../base/common/color.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { TokenizationRegistry } from '../../common/modes.js';\r\nimport { TokenTheme, generateTokensCSSForColorMap } from '../../common/modes/supports/tokenization.js';\r\nimport { hc_black, vs, vs_dark } from '../common/themes.js';\r\nimport { Registry } from '../../../platform/registry/common/platform.js';\r\nimport { Extensions } from '../../../platform/theme/common/colorRegistry.js';\r\nimport { Extensions as ThemingExtensions } from '../../../platform/theme/common/themeService.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nvar VS_THEME_NAME = 'vs';\r\nvar VS_DARK_THEME_NAME = 'vs-dark';\r\nvar HC_BLACK_THEME_NAME = 'hc-black';\r\nvar colorRegistry = Registry.as(Extensions.ColorContribution);\r\nvar themingRegistry = Registry.as(ThemingExtensions.ThemingContribution);\r\nvar StandaloneTheme = /** @class */ (function () {\r\n    function StandaloneTheme(name, standaloneThemeData) {\r\n        this.themeData = standaloneThemeData;\r\n        var base = standaloneThemeData.base;\r\n        if (name.length > 0) {\r\n            this.id = base + ' ' + name;\r\n            this.themeName = name;\r\n        }\r\n        else {\r\n            this.id = base;\r\n            this.themeName = base;\r\n        }\r\n        this.colors = null;\r\n        this.defaultColors = Object.create(null);\r\n        this._tokenTheme = null;\r\n    }\r\n    Object.defineProperty(StandaloneTheme.prototype, \"base\", {\r\n        get: function () {\r\n            return this.themeData.base;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    StandaloneTheme.prototype.notifyBaseUpdated = function () {\r\n        if (this.themeData.inherit) {\r\n            this.colors = null;\r\n            this._tokenTheme = null;\r\n        }\r\n    };\r\n    StandaloneTheme.prototype.getColors = function () {\r\n        if (!this.colors) {\r\n            var colors = new Map();\r\n            for (var id in this.themeData.colors) {\r\n                colors.set(id, Color.fromHex(this.themeData.colors[id]));\r\n            }\r\n            if (this.themeData.inherit) {\r\n                var baseData = getBuiltinRules(this.themeData.base);\r\n                for (var id in baseData.colors) {\r\n                    if (!colors.has(id)) {\r\n                        colors.set(id, Color.fromHex(baseData.colors[id]));\r\n                    }\r\n                }\r\n            }\r\n            this.colors = colors;\r\n        }\r\n        return this.colors;\r\n    };\r\n    StandaloneTheme.prototype.getColor = function (colorId, useDefault) {\r\n        var color = this.getColors().get(colorId);\r\n        if (color) {\r\n            return color;\r\n        }\r\n        if (useDefault !== false) {\r\n            return this.getDefault(colorId);\r\n        }\r\n        return undefined;\r\n    };\r\n    StandaloneTheme.prototype.getDefault = function (colorId) {\r\n        var color = this.defaultColors[colorId];\r\n        if (color) {\r\n            return color;\r\n        }\r\n        color = colorRegistry.resolveDefaultColor(colorId, this);\r\n        this.defaultColors[colorId] = color;\r\n        return color;\r\n    };\r\n    StandaloneTheme.prototype.defines = function (colorId) {\r\n        return Object.prototype.hasOwnProperty.call(this.getColors(), colorId);\r\n    };\r\n    Object.defineProperty(StandaloneTheme.prototype, \"type\", {\r\n        get: function () {\r\n            switch (this.base) {\r\n                case VS_THEME_NAME: return 'light';\r\n                case HC_BLACK_THEME_NAME: return 'hc';\r\n                default: return 'dark';\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(StandaloneTheme.prototype, \"tokenTheme\", {\r\n        get: function () {\r\n            if (!this._tokenTheme) {\r\n                var rules = [];\r\n                var encodedTokensColors = [];\r\n                if (this.themeData.inherit) {\r\n                    var baseData = getBuiltinRules(this.themeData.base);\r\n                    rules = baseData.rules;\r\n                    if (baseData.encodedTokensColors) {\r\n                        encodedTokensColors = baseData.encodedTokensColors;\r\n                    }\r\n                }\r\n                rules = rules.concat(this.themeData.rules);\r\n                if (this.themeData.encodedTokensColors) {\r\n                    encodedTokensColors = this.themeData.encodedTokensColors;\r\n                }\r\n                this._tokenTheme = TokenTheme.createFromRawTokenTheme(rules, encodedTokensColors);\r\n            }\r\n            return this._tokenTheme;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    StandaloneTheme.prototype.getTokenStyleMetadata = function (type, modifiers) {\r\n        return undefined;\r\n    };\r\n    return StandaloneTheme;\r\n}());\r\nfunction isBuiltinTheme(themeName) {\r\n    return (themeName === VS_THEME_NAME\r\n        || themeName === VS_DARK_THEME_NAME\r\n        || themeName === HC_BLACK_THEME_NAME);\r\n}\r\nfunction getBuiltinRules(builtinTheme) {\r\n    switch (builtinTheme) {\r\n        case VS_THEME_NAME:\r\n            return vs;\r\n        case VS_DARK_THEME_NAME:\r\n            return vs_dark;\r\n        case HC_BLACK_THEME_NAME:\r\n            return hc_black;\r\n    }\r\n}\r\nfunction newBuiltInTheme(builtinTheme) {\r\n    var themeData = getBuiltinRules(builtinTheme);\r\n    return new StandaloneTheme(builtinTheme, themeData);\r\n}\r\nvar StandaloneThemeServiceImpl = /** @class */ (function (_super) {\r\n    __extends(StandaloneThemeServiceImpl, _super);\r\n    function StandaloneThemeServiceImpl() {\r\n        var _this = _super.call(this) || this;\r\n        _this._onThemeChange = _this._register(new Emitter());\r\n        _this.onThemeChange = _this._onThemeChange.event;\r\n        _this._environment = Object.create(null);\r\n        _this._knownThemes = new Map();\r\n        _this._knownThemes.set(VS_THEME_NAME, newBuiltInTheme(VS_THEME_NAME));\r\n        _this._knownThemes.set(VS_DARK_THEME_NAME, newBuiltInTheme(VS_DARK_THEME_NAME));\r\n        _this._knownThemes.set(HC_BLACK_THEME_NAME, newBuiltInTheme(HC_BLACK_THEME_NAME));\r\n        _this._css = '';\r\n        _this._globalStyleElement = null;\r\n        _this._styleElements = [];\r\n        _this.setTheme(VS_THEME_NAME);\r\n        return _this;\r\n    }\r\n    StandaloneThemeServiceImpl.prototype.registerEditorContainer = function (domNode) {\r\n        if (dom.isInShadowDOM(domNode)) {\r\n            return this._registerShadowDomContainer(domNode);\r\n        }\r\n        return this._registerRegularEditorContainer();\r\n    };\r\n    StandaloneThemeServiceImpl.prototype._registerRegularEditorContainer = function () {\r\n        if (!this._globalStyleElement) {\r\n            this._globalStyleElement = dom.createStyleSheet();\r\n            this._globalStyleElement.className = 'monaco-colors';\r\n            this._globalStyleElement.innerHTML = this._css;\r\n            this._styleElements.push(this._globalStyleElement);\r\n        }\r\n        return Disposable.None;\r\n    };\r\n    StandaloneThemeServiceImpl.prototype._registerShadowDomContainer = function (domNode) {\r\n        var _this = this;\r\n        var styleElement = dom.createStyleSheet(domNode);\r\n        styleElement.className = 'monaco-colors';\r\n        styleElement.innerHTML = this._css;\r\n        this._styleElements.push(styleElement);\r\n        return {\r\n            dispose: function () {\r\n                for (var i = 0; i < _this._styleElements.length; i++) {\r\n                    if (_this._styleElements[i] === styleElement) {\r\n                        _this._styleElements.splice(i, 1);\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    };\r\n    StandaloneThemeServiceImpl.prototype.defineTheme = function (themeName, themeData) {\r\n        if (!/^[a-z0-9\\-]+$/i.test(themeName)) {\r\n            throw new Error('Illegal theme name!');\r\n        }\r\n        if (!isBuiltinTheme(themeData.base) && !isBuiltinTheme(themeName)) {\r\n            throw new Error('Illegal theme base!');\r\n        }\r\n        // set or replace theme\r\n        this._knownThemes.set(themeName, new StandaloneTheme(themeName, themeData));\r\n        if (isBuiltinTheme(themeName)) {\r\n            this._knownThemes.forEach(function (theme) {\r\n                if (theme.base === themeName) {\r\n                    theme.notifyBaseUpdated();\r\n                }\r\n            });\r\n        }\r\n        if (this._theme && this._theme.themeName === themeName) {\r\n            this.setTheme(themeName); // refresh theme\r\n        }\r\n    };\r\n    StandaloneThemeServiceImpl.prototype.getTheme = function () {\r\n        return this._theme;\r\n    };\r\n    StandaloneThemeServiceImpl.prototype.setTheme = function (themeName) {\r\n        var _this = this;\r\n        var theme;\r\n        if (this._knownThemes.has(themeName)) {\r\n            theme = this._knownThemes.get(themeName);\r\n        }\r\n        else {\r\n            theme = this._knownThemes.get(VS_THEME_NAME);\r\n        }\r\n        if (this._theme === theme) {\r\n            // Nothing to do\r\n            return theme.id;\r\n        }\r\n        this._theme = theme;\r\n        var cssRules = [];\r\n        var hasRule = {};\r\n        var ruleCollector = {\r\n            addRule: function (rule) {\r\n                if (!hasRule[rule]) {\r\n                    cssRules.push(rule);\r\n                    hasRule[rule] = true;\r\n                }\r\n            }\r\n        };\r\n        themingRegistry.getThemingParticipants().forEach(function (p) { return p(theme, ruleCollector, _this._environment); });\r\n        var tokenTheme = theme.tokenTheme;\r\n        var colorMap = tokenTheme.getColorMap();\r\n        ruleCollector.addRule(generateTokensCSSForColorMap(colorMap));\r\n        this._css = cssRules.join('\\n');\r\n        this._styleElements.forEach(function (styleElement) { return styleElement.innerHTML = _this._css; });\r\n        TokenizationRegistry.setColorMap(colorMap);\r\n        this._onThemeChange.fire(theme);\r\n        return theme.id;\r\n    };\r\n    StandaloneThemeServiceImpl.prototype.getIconTheme = function () {\r\n        return {\r\n            hasFileIcons: false,\r\n            hasFolderIcons: false,\r\n            hidesExplorerArrows: false\r\n        };\r\n    };\r\n    return StandaloneThemeServiceImpl;\r\n}(Disposable));\r\nexport { StandaloneThemeServiceImpl };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport { IBulkEditService } from '../../browser/services/bulkEditService.js';\r\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\r\nimport { IEditorWorkerService } from '../../common/services/editorWorkerService.js';\r\nimport { EditorWorkerServiceImpl } from '../../common/services/editorWorkerServiceImpl.js';\r\nimport { IModeService } from '../../common/services/modeService.js';\r\nimport { ModeServiceImpl } from '../../common/services/modeServiceImpl.js';\r\nimport { IModelService } from '../../common/services/modelService.js';\r\nimport { ModelServiceImpl } from '../../common/services/modelServiceImpl.js';\r\nimport { ITextResourceConfigurationService, ITextResourcePropertiesService } from '../../common/services/textResourceConfigurationService.js';\r\nimport { SimpleBulkEditService, SimpleConfigurationService, SimpleDialogService, SimpleNotificationService, SimpleEditorProgressService, SimpleResourceConfigurationService, SimpleResourcePropertiesService, SimpleUriLabelService, SimpleWorkspaceContextService, StandaloneCommandService, StandaloneKeybindingService, StandaloneTelemetryService, SimpleLayoutService } from './simpleServices.js';\r\nimport { StandaloneCodeEditorServiceImpl } from './standaloneCodeServiceImpl.js';\r\nimport { StandaloneThemeServiceImpl } from './standaloneThemeServiceImpl.js';\r\nimport { IStandaloneThemeService } from '../common/standaloneThemeService.js';\r\nimport { IMenuService } from '../../../platform/actions/common/actions.js';\r\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\r\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\r\nimport { ContextKeyService } from '../../../platform/contextkey/browser/contextKeyService.js';\r\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { ContextMenuService } from '../../../platform/contextview/browser/contextMenuService.js';\r\nimport { IContextMenuService, IContextViewService } from '../../../platform/contextview/browser/contextView.js';\r\nimport { ContextViewService } from '../../../platform/contextview/browser/contextViewService.js';\r\nimport { IDialogService } from '../../../platform/dialogs/common/dialogs.js';\r\nimport { IInstantiationService, createDecorator } from '../../../platform/instantiation/common/instantiation.js';\r\nimport { InstantiationService } from '../../../platform/instantiation/common/instantiationService.js';\r\nimport { ServiceCollection } from '../../../platform/instantiation/common/serviceCollection.js';\r\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\r\nimport { ILabelService } from '../../../platform/label/common/label.js';\r\nimport { IListService, ListService } from '../../../platform/list/browser/listService.js';\r\nimport { ILogService, NullLogService } from '../../../platform/log/common/log.js';\r\nimport { MarkerService } from '../../../platform/markers/common/markerService.js';\r\nimport { IMarkerService } from '../../../platform/markers/common/markers.js';\r\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\r\nimport { IEditorProgressService } from '../../../platform/progress/common/progress.js';\r\nimport { IStorageService, InMemoryStorageService } from '../../../platform/storage/common/storage.js';\r\nimport { ITelemetryService } from '../../../platform/telemetry/common/telemetry.js';\r\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\r\nimport { IWorkspaceContextService } from '../../../platform/workspace/common/workspace.js';\r\nimport { MenuService } from '../../../platform/actions/common/menuService.js';\r\nimport { IMarkerDecorationsService } from '../../common/services/markersDecorationService.js';\r\nimport { MarkerDecorationsService } from '../../common/services/markerDecorationsServiceImpl.js';\r\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\r\nimport { ILayoutService } from '../../../platform/layout/browser/layoutService.js';\r\nimport { getSingletonServiceDescriptors } from '../../../platform/instantiation/common/extensions.js';\r\nimport { AccessibilityService } from '../../../platform/accessibility/common/accessibilityService.js';\r\nexport var StaticServices;\r\n(function (StaticServices) {\r\n    var _serviceCollection = new ServiceCollection();\r\n    var LazyStaticService = /** @class */ (function () {\r\n        function LazyStaticService(serviceId, factory) {\r\n            this._serviceId = serviceId;\r\n            this._factory = factory;\r\n            this._value = null;\r\n        }\r\n        Object.defineProperty(LazyStaticService.prototype, \"id\", {\r\n            get: function () { return this._serviceId; },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        LazyStaticService.prototype.get = function (overrides) {\r\n            if (!this._value) {\r\n                if (overrides) {\r\n                    this._value = overrides[this._serviceId.toString()];\r\n                }\r\n                if (!this._value) {\r\n                    this._value = this._factory(overrides);\r\n                }\r\n                if (!this._value) {\r\n                    throw new Error('Service ' + this._serviceId + ' is missing!');\r\n                }\r\n                _serviceCollection.set(this._serviceId, this._value);\r\n            }\r\n            return this._value;\r\n        };\r\n        return LazyStaticService;\r\n    }());\r\n    StaticServices.LazyStaticService = LazyStaticService;\r\n    var _all = [];\r\n    function define(serviceId, factory) {\r\n        var r = new LazyStaticService(serviceId, factory);\r\n        _all.push(r);\r\n        return r;\r\n    }\r\n    function init(overrides) {\r\n        // Create a fresh service collection\r\n        var result = new ServiceCollection();\r\n        // make sure to add all services that use `registerSingleton`\r\n        for (var _i = 0, _a = getSingletonServiceDescriptors(); _i < _a.length; _i++) {\r\n            var _b = _a[_i], id = _b[0], descriptor = _b[1];\r\n            result.set(id, descriptor);\r\n        }\r\n        // Initialize the service collection with the overrides\r\n        for (var serviceId in overrides) {\r\n            if (overrides.hasOwnProperty(serviceId)) {\r\n                result.set(createDecorator(serviceId), overrides[serviceId]);\r\n            }\r\n        }\r\n        // Make sure the same static services are present in all service collections\r\n        _all.forEach(function (service) { return result.set(service.id, service.get(overrides)); });\r\n        // Ensure the collection gets the correct instantiation service\r\n        var instantiationService = new InstantiationService(result, true);\r\n        result.set(IInstantiationService, instantiationService);\r\n        return [result, instantiationService];\r\n    }\r\n    StaticServices.init = init;\r\n    StaticServices.instantiationService = define(IInstantiationService, function () { return new InstantiationService(_serviceCollection, true); });\r\n    var configurationServiceImpl = new SimpleConfigurationService();\r\n    StaticServices.configurationService = define(IConfigurationService, function () { return configurationServiceImpl; });\r\n    StaticServices.resourceConfigurationService = define(ITextResourceConfigurationService, function () { return new SimpleResourceConfigurationService(configurationServiceImpl); });\r\n    StaticServices.resourcePropertiesService = define(ITextResourcePropertiesService, function () { return new SimpleResourcePropertiesService(configurationServiceImpl); });\r\n    StaticServices.contextService = define(IWorkspaceContextService, function () { return new SimpleWorkspaceContextService(); });\r\n    StaticServices.labelService = define(ILabelService, function () { return new SimpleUriLabelService(); });\r\n    StaticServices.telemetryService = define(ITelemetryService, function () { return new StandaloneTelemetryService(); });\r\n    StaticServices.dialogService = define(IDialogService, function () { return new SimpleDialogService(); });\r\n    StaticServices.notificationService = define(INotificationService, function () { return new SimpleNotificationService(); });\r\n    StaticServices.markerService = define(IMarkerService, function () { return new MarkerService(); });\r\n    StaticServices.modeService = define(IModeService, function (o) { return new ModeServiceImpl(); });\r\n    StaticServices.standaloneThemeService = define(IStandaloneThemeService, function () { return new StandaloneThemeServiceImpl(); });\r\n    StaticServices.logService = define(ILogService, function () { return new NullLogService(); });\r\n    StaticServices.modelService = define(IModelService, function (o) { return new ModelServiceImpl(StaticServices.configurationService.get(o), StaticServices.resourcePropertiesService.get(o), StaticServices.standaloneThemeService.get(o), StaticServices.logService.get(o)); });\r\n    StaticServices.markerDecorationsService = define(IMarkerDecorationsService, function (o) { return new MarkerDecorationsService(StaticServices.modelService.get(o), StaticServices.markerService.get(o)); });\r\n    StaticServices.codeEditorService = define(ICodeEditorService, function (o) { return new StandaloneCodeEditorServiceImpl(StaticServices.standaloneThemeService.get(o)); });\r\n    StaticServices.editorProgressService = define(IEditorProgressService, function () { return new SimpleEditorProgressService(); });\r\n    StaticServices.storageService = define(IStorageService, function () { return new InMemoryStorageService(); });\r\n    StaticServices.editorWorkerService = define(IEditorWorkerService, function (o) { return new EditorWorkerServiceImpl(StaticServices.modelService.get(o), StaticServices.resourceConfigurationService.get(o), StaticServices.logService.get(o)); });\r\n})(StaticServices || (StaticServices = {}));\r\nvar DynamicStandaloneServices = /** @class */ (function (_super) {\r\n    __extends(DynamicStandaloneServices, _super);\r\n    function DynamicStandaloneServices(domElement, overrides) {\r\n        var _this = _super.call(this) || this;\r\n        var _a = StaticServices.init(overrides), _serviceCollection = _a[0], _instantiationService = _a[1];\r\n        _this._serviceCollection = _serviceCollection;\r\n        _this._instantiationService = _instantiationService;\r\n        var configurationService = _this.get(IConfigurationService);\r\n        var notificationService = _this.get(INotificationService);\r\n        var telemetryService = _this.get(ITelemetryService);\r\n        var themeService = _this.get(IThemeService);\r\n        var ensure = function (serviceId, factory) {\r\n            var value = null;\r\n            if (overrides) {\r\n                value = overrides[serviceId.toString()];\r\n            }\r\n            if (!value) {\r\n                value = factory();\r\n            }\r\n            _this._serviceCollection.set(serviceId, value);\r\n            return value;\r\n        };\r\n        var contextKeyService = ensure(IContextKeyService, function () { return _this._register(new ContextKeyService(configurationService)); });\r\n        ensure(IAccessibilityService, function () { return new AccessibilityService(contextKeyService, configurationService); });\r\n        ensure(IListService, function () { return new ListService(themeService); });\r\n        var commandService = ensure(ICommandService, function () { return new StandaloneCommandService(_this._instantiationService); });\r\n        var keybindingService = ensure(IKeybindingService, function () { return _this._register(new StandaloneKeybindingService(contextKeyService, commandService, telemetryService, notificationService, domElement)); });\r\n        var layoutService = ensure(ILayoutService, function () { return new SimpleLayoutService(domElement); });\r\n        var contextViewService = ensure(IContextViewService, function () { return _this._register(new ContextViewService(layoutService)); });\r\n        ensure(IContextMenuService, function () {\r\n            var contextMenuService = new ContextMenuService(telemetryService, notificationService, contextViewService, keybindingService, themeService);\r\n            contextMenuService.configure({ blockMouse: false }); // we do not want that in the standalone editor\r\n            return _this._register(contextMenuService);\r\n        });\r\n        ensure(IMenuService, function () { return new MenuService(commandService); });\r\n        ensure(IBulkEditService, function () { return new SimpleBulkEditService(StaticServices.modelService.get(IModelService)); });\r\n        return _this;\r\n    }\r\n    DynamicStandaloneServices.prototype.get = function (serviceId) {\r\n        var r = this._serviceCollection.get(serviceId);\r\n        if (!r) {\r\n            throw new Error('Missing service ' + serviceId);\r\n        }\r\n        return r;\r\n    };\r\n    DynamicStandaloneServices.prototype.set = function (serviceId, instance) {\r\n        this._serviceCollection.set(serviceId, instance);\r\n    };\r\n    DynamicStandaloneServices.prototype.has = function (serviceId) {\r\n        return this._serviceCollection.has(serviceId);\r\n    };\r\n    return DynamicStandaloneServices;\r\n}(Disposable));\r\nexport { DynamicStandaloneServices };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\r\nimport { ReferencesController } from '../../../contrib/gotoSymbol/peek/referencesController.js';\r\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\r\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\r\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\r\nvar StandaloneReferencesController = /** @class */ (function (_super) {\r\n    __extends(StandaloneReferencesController, _super);\r\n    function StandaloneReferencesController(editor, contextKeyService, editorService, notificationService, instantiationService, storageService, configurationService) {\r\n        return _super.call(this, true, editor, contextKeyService, editorService, notificationService, instantiationService, storageService, configurationService) || this;\r\n    }\r\n    StandaloneReferencesController = __decorate([\r\n        __param(1, IContextKeyService),\r\n        __param(2, ICodeEditorService),\r\n        __param(3, INotificationService),\r\n        __param(4, IInstantiationService),\r\n        __param(5, IStorageService),\r\n        __param(6, IConfigurationService)\r\n    ], StandaloneReferencesController);\r\n    return StandaloneReferencesController;\r\n}(ReferencesController));\r\nexport { StandaloneReferencesController };\r\nregisterEditorContribution(ReferencesController.ID, StandaloneReferencesController);\r\n"],"sourceRoot":""}