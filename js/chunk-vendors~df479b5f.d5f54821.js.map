{"version":3,"sources":["webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/smartSelect/bracketSelections.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/smartSelect/wordSelections.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/smartSelect/smartSelect.js"],"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","Symbol","iterator","this","n","v","op","TypeError","call","pop","length","push","BracketSelectionRangeProvider","prototype","provideSelectionRanges","model","positions","_loop_1","_i","positions_1","position","_a","bucket","ranges","Map","_bracketsRightYield","_bracketsLeftYield","round","pos","counts","t1","Date","now","_maxRounds","bracket","findNextBracket","d","_maxDuration","setTimeout","key","close","isOpen","val","has","get","set","Math","max","list","range","getEndPosition","size","findPrevBracket","closing","shift","delete","innerBracket","fromPositions","getStartPosition","outerBracket","_addBracketLeading","startLineNumber","endLineNumber","startLine","column","getLineFirstNonWhitespaceColumn","startColumn","aboveLine","column_1","getLineLastNonWhitespaceColumn","WordSelectionRangeProvider","_addInWordRanges","_addWordRanges","_addWhitespaceLine","getFullModelRange","obj","getWordAtPosition","word","offset","start","end","lastCh","ch","charCodeAt","lineNumber","endColumn","getLineLength","getLineMaxColumn","__extends","extendStatics","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","create","SelectionRanges","index","mov","fwd","res","equalsRange","SmartSelectController","editor","_ignoreSelection","_editor","getContribution","ID","dispose","_selectionListener","run","forward","_this","hasModel","selections","getSelections","getModel","modes","promise","undefined","_state","map","s","getPosition","None","arrays","a","equalsSelection","i","filter","containsPosition","unshift","onDidChangeCursorPosition","state","setSelections","AbstractSmartSelect","_super","opts","_forward","_accessor","controller","GrowSelectionAction","id","nls","alias","precondition","kbOpts","kbExpr","editorTextFocus","primary","mac","secondary","weight","menuOpts","menuId","group","title","comment","order","registerCommandAlias","ShrinkSelectionAction","token","providers","all","work","allRawRanges","providers_1","provider","allProviderRanges","oneProviderRanges","isIRange","lift","oneRawRanges","sort","isBefore","last","oneRanges","oneRawRanges_1","containsRange","oneRangesWithTrivia","prev","cur","rangeNoWhitespace","rangeFull","register","args","arguments"],"mappings":"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","file":"js/chunk-vendors~df479b5f.d5f54821.js","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { Position } from '../../common/core/position.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { LinkedList } from '../../../base/common/linkedList.js';\r\nvar BracketSelectionRangeProvider = /** @class */ (function () {\r\n    function BracketSelectionRangeProvider() {\r\n    }\r\n    BracketSelectionRangeProvider.prototype.provideSelectionRanges = function (model, positions) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, _loop_1, _i, positions_1, position;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        result = [];\r\n                        _loop_1 = function (position) {\r\n                            var bucket, ranges;\r\n                            return __generator(this, function (_a) {\r\n                                switch (_a.label) {\r\n                                    case 0:\r\n                                        bucket = [];\r\n                                        result.push(bucket);\r\n                                        ranges = new Map();\r\n                                        return [4 /*yield*/, new Promise(function (resolve) { return BracketSelectionRangeProvider._bracketsRightYield(resolve, 0, model, position, ranges); })];\r\n                                    case 1:\r\n                                        _a.sent();\r\n                                        return [4 /*yield*/, new Promise(function (resolve) { return BracketSelectionRangeProvider._bracketsLeftYield(resolve, 0, model, position, ranges, bucket); })];\r\n                                    case 2:\r\n                                        _a.sent();\r\n                                        return [2 /*return*/];\r\n                                }\r\n                            });\r\n                        };\r\n                        _i = 0, positions_1 = positions;\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        if (!(_i < positions_1.length)) return [3 /*break*/, 4];\r\n                        position = positions_1[_i];\r\n                        return [5 /*yield**/, _loop_1(position)];\r\n                    case 2:\r\n                        _a.sent();\r\n                        _a.label = 3;\r\n                    case 3:\r\n                        _i++;\r\n                        return [3 /*break*/, 1];\r\n                    case 4: return [2 /*return*/, result];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    BracketSelectionRangeProvider._bracketsRightYield = function (resolve, round, model, pos, ranges) {\r\n        var counts = new Map();\r\n        var t1 = Date.now();\r\n        while (true) {\r\n            if (round >= BracketSelectionRangeProvider._maxRounds) {\r\n                resolve();\r\n                break;\r\n            }\r\n            if (!pos) {\r\n                resolve();\r\n                break;\r\n            }\r\n            var bracket = model.findNextBracket(pos);\r\n            if (!bracket) {\r\n                resolve();\r\n                break;\r\n            }\r\n            var d = Date.now() - t1;\r\n            if (d > BracketSelectionRangeProvider._maxDuration) {\r\n                setTimeout(function () { return BracketSelectionRangeProvider._bracketsRightYield(resolve, round + 1, model, pos, ranges); });\r\n                break;\r\n            }\r\n            var key = bracket.close[0];\r\n            if (bracket.isOpen) {\r\n                // wait for closing\r\n                var val = counts.has(key) ? counts.get(key) : 0;\r\n                counts.set(key, val + 1);\r\n            }\r\n            else {\r\n                // process closing\r\n                var val = counts.has(key) ? counts.get(key) : 0;\r\n                val -= 1;\r\n                counts.set(key, Math.max(0, val));\r\n                if (val < 0) {\r\n                    var list = ranges.get(key);\r\n                    if (!list) {\r\n                        list = new LinkedList();\r\n                        ranges.set(key, list);\r\n                    }\r\n                    list.push(bracket.range);\r\n                }\r\n            }\r\n            pos = bracket.range.getEndPosition();\r\n        }\r\n    };\r\n    BracketSelectionRangeProvider._bracketsLeftYield = function (resolve, round, model, pos, ranges, bucket) {\r\n        var counts = new Map();\r\n        var t1 = Date.now();\r\n        while (true) {\r\n            if (round >= BracketSelectionRangeProvider._maxRounds && ranges.size === 0) {\r\n                resolve();\r\n                break;\r\n            }\r\n            if (!pos) {\r\n                resolve();\r\n                break;\r\n            }\r\n            var bracket = model.findPrevBracket(pos);\r\n            if (!bracket) {\r\n                resolve();\r\n                break;\r\n            }\r\n            var d = Date.now() - t1;\r\n            if (d > BracketSelectionRangeProvider._maxDuration) {\r\n                setTimeout(function () { return BracketSelectionRangeProvider._bracketsLeftYield(resolve, round + 1, model, pos, ranges, bucket); });\r\n                break;\r\n            }\r\n            var key = bracket.close[0];\r\n            if (!bracket.isOpen) {\r\n                // wait for opening\r\n                var val = counts.has(key) ? counts.get(key) : 0;\r\n                counts.set(key, val + 1);\r\n            }\r\n            else {\r\n                // opening\r\n                var val = counts.has(key) ? counts.get(key) : 0;\r\n                val -= 1;\r\n                counts.set(key, Math.max(0, val));\r\n                if (val < 0) {\r\n                    var list = ranges.get(key);\r\n                    if (list) {\r\n                        var closing = list.shift();\r\n                        if (list.size === 0) {\r\n                            ranges.delete(key);\r\n                        }\r\n                        var innerBracket = Range.fromPositions(bracket.range.getEndPosition(), closing.getStartPosition());\r\n                        var outerBracket = Range.fromPositions(bracket.range.getStartPosition(), closing.getEndPosition());\r\n                        bucket.push({ range: innerBracket });\r\n                        bucket.push({ range: outerBracket });\r\n                        BracketSelectionRangeProvider._addBracketLeading(model, outerBracket, bucket);\r\n                    }\r\n                }\r\n            }\r\n            pos = bracket.range.getStartPosition();\r\n        }\r\n    };\r\n    BracketSelectionRangeProvider._addBracketLeading = function (model, bracket, bucket) {\r\n        if (bracket.startLineNumber === bracket.endLineNumber) {\r\n            return;\r\n        }\r\n        // xxxxxxxx {\r\n        //\r\n        // }\r\n        var startLine = bracket.startLineNumber;\r\n        var column = model.getLineFirstNonWhitespaceColumn(startLine);\r\n        if (column !== 0 && column !== bracket.startColumn) {\r\n            bucket.push({ range: Range.fromPositions(new Position(startLine, column), bracket.getEndPosition()) });\r\n            bucket.push({ range: Range.fromPositions(new Position(startLine, 1), bracket.getEndPosition()) });\r\n        }\r\n        // xxxxxxxx\r\n        // {\r\n        //\r\n        // }\r\n        var aboveLine = startLine - 1;\r\n        if (aboveLine > 0) {\r\n            var column_1 = model.getLineFirstNonWhitespaceColumn(aboveLine);\r\n            if (column_1 === bracket.startColumn && column_1 !== model.getLineLastNonWhitespaceColumn(aboveLine)) {\r\n                bucket.push({ range: Range.fromPositions(new Position(aboveLine, column_1), bracket.getEndPosition()) });\r\n                bucket.push({ range: Range.fromPositions(new Position(aboveLine, 1), bracket.getEndPosition()) });\r\n            }\r\n        }\r\n    };\r\n    BracketSelectionRangeProvider._maxDuration = 30;\r\n    BracketSelectionRangeProvider._maxRounds = 2;\r\n    return BracketSelectionRangeProvider;\r\n}());\r\nexport { BracketSelectionRangeProvider };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Range } from '../../common/core/range.js';\r\nimport { isUpperAsciiLetter, isLowerAsciiLetter } from '../../../base/common/strings.js';\r\nvar WordSelectionRangeProvider = /** @class */ (function () {\r\n    function WordSelectionRangeProvider() {\r\n    }\r\n    WordSelectionRangeProvider.prototype.provideSelectionRanges = function (model, positions) {\r\n        var result = [];\r\n        for (var _i = 0, positions_1 = positions; _i < positions_1.length; _i++) {\r\n            var position = positions_1[_i];\r\n            var bucket = [];\r\n            result.push(bucket);\r\n            this._addInWordRanges(bucket, model, position);\r\n            this._addWordRanges(bucket, model, position);\r\n            this._addWhitespaceLine(bucket, model, position);\r\n            bucket.push({ range: model.getFullModelRange() });\r\n        }\r\n        return result;\r\n    };\r\n    WordSelectionRangeProvider.prototype._addInWordRanges = function (bucket, model, pos) {\r\n        var obj = model.getWordAtPosition(pos);\r\n        if (!obj) {\r\n            return;\r\n        }\r\n        var word = obj.word, startColumn = obj.startColumn;\r\n        var offset = pos.column - startColumn;\r\n        var start = offset;\r\n        var end = offset;\r\n        var lastCh = 0;\r\n        // LEFT anchor (start)\r\n        for (; start >= 0; start--) {\r\n            var ch = word.charCodeAt(start);\r\n            if (ch === 95 /* Underline */ || ch === 45 /* Dash */) {\r\n                // foo-bar OR foo_bar\r\n                break;\r\n            }\r\n            else if (isLowerAsciiLetter(ch) && isUpperAsciiLetter(lastCh)) {\r\n                // fooBar\r\n                break;\r\n            }\r\n            lastCh = ch;\r\n        }\r\n        start += 1;\r\n        // RIGHT anchor (end)\r\n        for (; end < word.length; end++) {\r\n            var ch = word.charCodeAt(end);\r\n            if (isUpperAsciiLetter(ch) && isLowerAsciiLetter(lastCh)) {\r\n                // fooBar\r\n                break;\r\n            }\r\n            else if (ch === 95 /* Underline */ || ch === 45 /* Dash */) {\r\n                // foo-bar OR foo_bar\r\n                break;\r\n            }\r\n            lastCh = ch;\r\n        }\r\n        if (start < end) {\r\n            bucket.push({ range: new Range(pos.lineNumber, startColumn + start, pos.lineNumber, startColumn + end) });\r\n        }\r\n    };\r\n    WordSelectionRangeProvider.prototype._addWordRanges = function (bucket, model, pos) {\r\n        var word = model.getWordAtPosition(pos);\r\n        if (word) {\r\n            bucket.push({ range: new Range(pos.lineNumber, word.startColumn, pos.lineNumber, word.endColumn) });\r\n        }\r\n    };\r\n    WordSelectionRangeProvider.prototype._addWhitespaceLine = function (bucket, model, pos) {\r\n        if (model.getLineLength(pos.lineNumber) > 0\r\n            && model.getLineFirstNonWhitespaceColumn(pos.lineNumber) === 0\r\n            && model.getLineLastNonWhitespaceColumn(pos.lineNumber) === 0) {\r\n            bucket.push({ range: new Range(pos.lineNumber, 1, pos.lineNumber, model.getLineMaxColumn(pos.lineNumber)) });\r\n        }\r\n    };\r\n    return WordSelectionRangeProvider;\r\n}());\r\nexport { WordSelectionRangeProvider };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport * as arrays from '../../../base/common/arrays.js';\r\nimport { CancellationToken } from '../../../base/common/cancellation.js';\r\nimport { EditorAction, registerEditorAction, registerEditorContribution, registerModelCommand } from '../../browser/editorExtensions.js';\r\nimport { Position } from '../../common/core/position.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { Selection } from '../../common/core/selection.js';\r\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\r\nimport * as modes from '../../common/modes.js';\r\nimport * as nls from '../../../nls.js';\r\nimport { dispose } from '../../../base/common/lifecycle.js';\r\nimport { WordSelectionRangeProvider } from './wordSelections.js';\r\nimport { BracketSelectionRangeProvider } from './bracketSelections.js';\r\nimport { CommandsRegistry } from '../../../platform/commands/common/commands.js';\r\nimport { onUnexpectedExternalError } from '../../../base/common/errors.js';\r\nvar SelectionRanges = /** @class */ (function () {\r\n    function SelectionRanges(index, ranges) {\r\n        this.index = index;\r\n        this.ranges = ranges;\r\n    }\r\n    SelectionRanges.prototype.mov = function (fwd) {\r\n        var index = this.index + (fwd ? 1 : -1);\r\n        if (index < 0 || index >= this.ranges.length) {\r\n            return this;\r\n        }\r\n        var res = new SelectionRanges(index, this.ranges);\r\n        if (res.ranges[index].equalsRange(this.ranges[this.index])) {\r\n            // next range equals this range, retry with next-next\r\n            return res.mov(fwd);\r\n        }\r\n        return res;\r\n    };\r\n    return SelectionRanges;\r\n}());\r\nvar SmartSelectController = /** @class */ (function () {\r\n    function SmartSelectController(editor) {\r\n        this._ignoreSelection = false;\r\n        this._editor = editor;\r\n    }\r\n    SmartSelectController.get = function (editor) {\r\n        return editor.getContribution(SmartSelectController.ID);\r\n    };\r\n    SmartSelectController.prototype.dispose = function () {\r\n        dispose(this._selectionListener);\r\n    };\r\n    SmartSelectController.prototype.run = function (forward) {\r\n        var _this = this;\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        var selections = this._editor.getSelections();\r\n        var model = this._editor.getModel();\r\n        if (!modes.SelectionRangeRegistry.has(model)) {\r\n            return;\r\n        }\r\n        var promise = Promise.resolve(undefined);\r\n        if (!this._state) {\r\n            promise = provideSelectionRanges(model, selections.map(function (s) { return s.getPosition(); }), CancellationToken.None).then(function (ranges) {\r\n                if (!arrays.isNonEmptyArray(ranges) || ranges.length !== selections.length) {\r\n                    // invalid result\r\n                    return;\r\n                }\r\n                if (!_this._editor.hasModel() || !arrays.equals(_this._editor.getSelections(), selections, function (a, b) { return a.equalsSelection(b); })) {\r\n                    // invalid editor state\r\n                    return;\r\n                }\r\n                var _loop_1 = function (i) {\r\n                    ranges[i] = ranges[i].filter(function (range) {\r\n                        // filter ranges inside the selection\r\n                        return range.containsPosition(selections[i].getStartPosition()) && range.containsPosition(selections[i].getEndPosition());\r\n                    });\r\n                    // prepend current selection\r\n                    ranges[i].unshift(selections[i]);\r\n                };\r\n                for (var i = 0; i < ranges.length; i++) {\r\n                    _loop_1(i);\r\n                }\r\n                _this._state = ranges.map(function (ranges) { return new SelectionRanges(0, ranges); });\r\n                // listen to caret move and forget about state\r\n                dispose(_this._selectionListener);\r\n                _this._selectionListener = _this._editor.onDidChangeCursorPosition(function () {\r\n                    if (!_this._ignoreSelection) {\r\n                        dispose(_this._selectionListener);\r\n                        _this._state = undefined;\r\n                    }\r\n                });\r\n            });\r\n        }\r\n        return promise.then(function () {\r\n            if (!_this._state) {\r\n                // no state\r\n                return;\r\n            }\r\n            _this._state = _this._state.map(function (state) { return state.mov(forward); });\r\n            var selections = _this._state.map(function (state) { return Selection.fromPositions(state.ranges[state.index].getStartPosition(), state.ranges[state.index].getEndPosition()); });\r\n            _this._ignoreSelection = true;\r\n            try {\r\n                _this._editor.setSelections(selections);\r\n            }\r\n            finally {\r\n                _this._ignoreSelection = false;\r\n            }\r\n        });\r\n    };\r\n    SmartSelectController.ID = 'editor.contrib.smartSelectController';\r\n    return SmartSelectController;\r\n}());\r\nvar AbstractSmartSelect = /** @class */ (function (_super) {\r\n    __extends(AbstractSmartSelect, _super);\r\n    function AbstractSmartSelect(forward, opts) {\r\n        var _this = _super.call(this, opts) || this;\r\n        _this._forward = forward;\r\n        return _this;\r\n    }\r\n    AbstractSmartSelect.prototype.run = function (_accessor, editor) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var controller;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        controller = SmartSelectController.get(editor);\r\n                        if (!controller) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, controller.run(this._forward)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        _a.label = 2;\r\n                    case 2: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return AbstractSmartSelect;\r\n}(EditorAction));\r\nvar GrowSelectionAction = /** @class */ (function (_super) {\r\n    __extends(GrowSelectionAction, _super);\r\n    function GrowSelectionAction() {\r\n        return _super.call(this, true, {\r\n            id: 'editor.action.smartSelect.expand',\r\n            label: nls.localize('smartSelect.expand', \"Expand Selection\"),\r\n            alias: 'Expand Selection',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 1024 /* Shift */ | 512 /* Alt */ | 17 /* RightArrow */,\r\n                mac: {\r\n                    primary: 2048 /* CtrlCmd */ | 256 /* WinCtrl */ | 1024 /* Shift */ | 17 /* RightArrow */,\r\n                    secondary: [256 /* WinCtrl */ | 1024 /* Shift */ | 17 /* RightArrow */],\r\n                },\r\n                weight: 100 /* EditorContrib */\r\n            },\r\n            menuOpts: {\r\n                menuId: 25 /* MenubarSelectionMenu */,\r\n                group: '1_basic',\r\n                title: nls.localize({ key: 'miSmartSelectGrow', comment: ['&& denotes a mnemonic'] }, \"&&Expand Selection\"),\r\n                order: 2\r\n            }\r\n        }) || this;\r\n    }\r\n    return GrowSelectionAction;\r\n}(AbstractSmartSelect));\r\n// renamed command id\r\nCommandsRegistry.registerCommandAlias('editor.action.smartSelect.grow', 'editor.action.smartSelect.expand');\r\nvar ShrinkSelectionAction = /** @class */ (function (_super) {\r\n    __extends(ShrinkSelectionAction, _super);\r\n    function ShrinkSelectionAction() {\r\n        return _super.call(this, false, {\r\n            id: 'editor.action.smartSelect.shrink',\r\n            label: nls.localize('smartSelect.shrink', \"Shrink Selection\"),\r\n            alias: 'Shrink Selection',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 1024 /* Shift */ | 512 /* Alt */ | 15 /* LeftArrow */,\r\n                mac: {\r\n                    primary: 2048 /* CtrlCmd */ | 256 /* WinCtrl */ | 1024 /* Shift */ | 15 /* LeftArrow */,\r\n                    secondary: [256 /* WinCtrl */ | 1024 /* Shift */ | 15 /* LeftArrow */],\r\n                },\r\n                weight: 100 /* EditorContrib */\r\n            },\r\n            menuOpts: {\r\n                menuId: 25 /* MenubarSelectionMenu */,\r\n                group: '1_basic',\r\n                title: nls.localize({ key: 'miSmartSelectShrink', comment: ['&& denotes a mnemonic'] }, \"&&Shrink Selection\"),\r\n                order: 3\r\n            }\r\n        }) || this;\r\n    }\r\n    return ShrinkSelectionAction;\r\n}(AbstractSmartSelect));\r\nregisterEditorContribution(SmartSelectController.ID, SmartSelectController);\r\nregisterEditorAction(GrowSelectionAction);\r\nregisterEditorAction(ShrinkSelectionAction);\r\n// word selection\r\nmodes.SelectionRangeRegistry.register('*', new WordSelectionRangeProvider());\r\nexport function provideSelectionRanges(model, positions, token) {\r\n    var providers = modes.SelectionRangeRegistry.all(model);\r\n    if (providers.length === 1) {\r\n        // add word selection and bracket selection when no provider exists\r\n        providers.unshift(new BracketSelectionRangeProvider());\r\n    }\r\n    var work = [];\r\n    var allRawRanges = [];\r\n    for (var _i = 0, providers_1 = providers; _i < providers_1.length; _i++) {\r\n        var provider = providers_1[_i];\r\n        work.push(Promise.resolve(provider.provideSelectionRanges(model, positions, token)).then(function (allProviderRanges) {\r\n            if (arrays.isNonEmptyArray(allProviderRanges) && allProviderRanges.length === positions.length) {\r\n                for (var i = 0; i < positions.length; i++) {\r\n                    if (!allRawRanges[i]) {\r\n                        allRawRanges[i] = [];\r\n                    }\r\n                    for (var _i = 0, _a = allProviderRanges[i]; _i < _a.length; _i++) {\r\n                        var oneProviderRanges = _a[_i];\r\n                        if (Range.isIRange(oneProviderRanges.range) && Range.containsPosition(oneProviderRanges.range, positions[i])) {\r\n                            allRawRanges[i].push(Range.lift(oneProviderRanges.range));\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }, onUnexpectedExternalError));\r\n    }\r\n    return Promise.all(work).then(function () {\r\n        return allRawRanges.map(function (oneRawRanges) {\r\n            if (oneRawRanges.length === 0) {\r\n                return [];\r\n            }\r\n            // sort all by start/end position\r\n            oneRawRanges.sort(function (a, b) {\r\n                if (Position.isBefore(a.getStartPosition(), b.getStartPosition())) {\r\n                    return 1;\r\n                }\r\n                else if (Position.isBefore(b.getStartPosition(), a.getStartPosition())) {\r\n                    return -1;\r\n                }\r\n                else if (Position.isBefore(a.getEndPosition(), b.getEndPosition())) {\r\n                    return -1;\r\n                }\r\n                else if (Position.isBefore(b.getEndPosition(), a.getEndPosition())) {\r\n                    return 1;\r\n                }\r\n                else {\r\n                    return 0;\r\n                }\r\n            });\r\n            // remove ranges that don't contain the former range or that are equal to the\r\n            // former range\r\n            var oneRanges = [];\r\n            var last;\r\n            for (var _i = 0, oneRawRanges_1 = oneRawRanges; _i < oneRawRanges_1.length; _i++) {\r\n                var range = oneRawRanges_1[_i];\r\n                if (!last || (Range.containsRange(range, last) && !Range.equalsRange(range, last))) {\r\n                    oneRanges.push(range);\r\n                    last = range;\r\n                }\r\n            }\r\n            // add ranges that expand trivia at line starts and ends whenever a range\r\n            // wraps onto the a new line\r\n            var oneRangesWithTrivia = [oneRanges[0]];\r\n            for (var i = 1; i < oneRanges.length; i++) {\r\n                var prev = oneRanges[i - 1];\r\n                var cur = oneRanges[i];\r\n                if (cur.startLineNumber !== prev.startLineNumber || cur.endLineNumber !== prev.endLineNumber) {\r\n                    // add line/block range without leading/failing whitespace\r\n                    var rangeNoWhitespace = new Range(prev.startLineNumber, model.getLineFirstNonWhitespaceColumn(prev.startLineNumber), prev.endLineNumber, model.getLineLastNonWhitespaceColumn(prev.endLineNumber));\r\n                    if (rangeNoWhitespace.containsRange(prev) && !rangeNoWhitespace.equalsRange(prev) && cur.containsRange(rangeNoWhitespace) && !cur.equalsRange(rangeNoWhitespace)) {\r\n                        oneRangesWithTrivia.push(rangeNoWhitespace);\r\n                    }\r\n                    // add line/block range\r\n                    var rangeFull = new Range(prev.startLineNumber, 1, prev.endLineNumber, model.getLineMaxColumn(prev.endLineNumber));\r\n                    if (rangeFull.containsRange(prev) && !rangeFull.equalsRange(rangeNoWhitespace) && cur.containsRange(rangeFull) && !cur.equalsRange(rangeFull)) {\r\n                        oneRangesWithTrivia.push(rangeFull);\r\n                    }\r\n                }\r\n                oneRangesWithTrivia.push(cur);\r\n            }\r\n            return oneRangesWithTrivia;\r\n        });\r\n    });\r\n}\r\nregisterModelCommand('_executeSelectionRangeProvider', function (model) {\r\n    var args = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        args[_i - 1] = arguments[_i];\r\n    }\r\n    var positions = args[0];\r\n    return provideSelectionRanges(model, positions, CancellationToken.None);\r\n});\r\n"],"sourceRoot":""}