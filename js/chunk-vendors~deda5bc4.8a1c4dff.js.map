{"version":3,"sources":["webpack:///./node_modules/echarts/lib/util/graphic.js","webpack:///./node_modules/echarts/lib/util/number.js","webpack:///./node_modules/echarts/lib/util/clazz.js","webpack:///./node_modules/echarts/lib/stream/Scheduler.js","webpack:///./node_modules/echarts/lib/visual/symbol.js","webpack:///./node_modules/echarts/lib/util/throttle.js","webpack:///./node_modules/echarts/lib/util/component.js","webpack:///./node_modules/echarts/lib/util/symbol.js","webpack:///./node_modules/echarts/lib/view/Component.js","webpack:///./node_modules/echarts/lib/visual/aria.js","webpack:///./node_modules/echarts/lib/util/shape/sausage.js","webpack:///./node_modules/echarts/lib/theme/light.js","webpack:///./node_modules/echarts/lib/util/model.js","webpack:///./node_modules/echarts/lib/view/Chart.js","webpack:///./node_modules/echarts/lib/util/format.js","webpack:///./node_modules/echarts/lib/theme/dark.js","webpack:///./node_modules/echarts/lib/stream/task.js","webpack:///./node_modules/echarts/lib/util/layout.js","webpack:///./node_modules/echarts/lib/visual/seriesColor.js"],"names":["zrUtil","pathTool","colorTool","matrix","vector","Path","Transformable","ZImage","exports","Image","Group","Text","Circle","Sector","Ring","Polygon","Polyline","Rect","Line","BezierCurve","Arc","CompoundPath","LinearGradient","RadialGradient","BoundingRect","IncrementalDisplayable","subPixelOptimizeUtil","mathMax","Math","max","mathMin","min","EMPTY_OBJ","Z2_EMPHASIS_LIFT","CACHED_LABEL_STYLE_PROPERTIES","color","textBorderColor","textBorderWidth","EMPHASIS","NORMAL","_highlightNextDigit","_highlightKeyMap","_customShapeMap","extendShape","opts","extend","extendPath","pathData","extendFromString","registerShape","name","ShapeClass","getShapeClass","hasOwnProperty","makePath","rect","layout","path","createFromString","centerGraphic","getBoundingRect","resizePath","makeImage","imageUrl","style","image","x","y","width","height","onload","img","boundingRect","setStyle","aspect","cx","cy","mergePath","applyTransform","pathRect","m","calculateTransform","subPixelOptimizeLine","param","shape","subPixelOptimizeRect","subPixelOptimize","hasFillOrStroke","fillOrStroke","liftedColorMap","createHashMap","liftedColorCount","liftColor","liftedColor","get","lift","set","cacheElementStl","el","__hoverStlDirty","hoverStyle","__hoverStl","normalStyle","__cachedNormalStl","__cachedNormalZ2","z2","elStyle","fill","stroke","singleEnterEmphasis","hoverStl","__highlighted","zr","__zr","useHoverLayer","painter","type","isGroup","elTarget","targetStyle","addHover","rollbackDefaultTextStyle","extendFrom","setDefaultHoverFillStroke","applyDefaultTextStyle","dirty","prop","singleEnterNormal","highlighted","removeHover","normalStl","normalZ2","traverseUpdate","updater","commonParam","trigger","fromState","toState","traverse","child","__highDownOnUpdate","setElementHoverStyle","onElementMouseOver","e","shouldSilent","this","__highByOuter","onElementMouseOut","onElementEmphasisEvent","highlightDigit","onElementNormalEvent","__highDownSilentOnTouch","zrByTouch","setHoverStyle","setAsHighDownDispatcher","asDispatcher","disable","highDownSilentOnTouch","highDownOnUpdate","__highDownDispatcher","method","isHighDownDispatcher","getHighlightDigit","highlightKey","setLabelStyle","emphasisStyle","normalModel","emphasisModel","opt","normalSpecified","emphasisSpecified","baseText","labelFetcher","labelDataIndex","labelDimIndex","labelProp","showNormal","getShallow","showEmphasis","getFormattedLabel","isFunction","defaultText","normalStyleText","emphasisStyleText","retrieve2","setTextStyle","text","modifyLabelStyle","normalStyleProps","emphasisStyleProps","textStyle","textStyleModel","specifiedTextStyle","isEmphasis","setTextStyleCommon","setText","labelModel","defaultColor","isRectText","autoColor","textPosition","getTextPosition","textOffset","labelRotate","PI","textRotation","textDistance","richResult","ecModel","globalTextStyle","option","richItemNames","getRichItemNames","richTextStyle","getModel","setTokenTextStyle","rich","forceRich","richItemNameMap","parentModel","isBlock","textFill","getAutoColor","textStroke","textStrokeWidth","insideRollbackOpt","fontStyle","fontWeight","fontSize","fontFamily","textAlign","textVerticalAlign","textLineHeight","textWidth","textHeight","textTag","disableBox","textBackgroundColor","textPadding","textBorderRadius","textBoxShadowColor","textBoxShadowBlur","textBoxShadowOffsetX","textBoxShadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","insideRollback","useInsideStyle","useInsideStyleCache","indexOf","useAutoColorCache","getFont","gTextStyleModel","trim","join","animateOrSetProps","isUpdate","props","animatableModel","dataIndex","cb","animationEnabled","isAnimationEnabled","postfix","duration","animationEasing","animationDelay","getAnimationDelayParams","animateTo","stopAnimation","attr","updateProps","initProps","getTransform","target","ancestor","mat","identity","mul","getLocalTransform","parent","transform","invert","isArrayLike","transformDirection","direction","hBase","abs","vBase","vertex","groupTransition","g1","g2","elMap1","getElMap","anid","oldEl","newProp","getAnimatableProps","g","elMap","obj","position","clone","rotation","clipPointsByRect","points","map","point","clipRectByRect","targetRect","x2","y2","createIcon","iconStr","rectHover","strokeNoScale","slice","defaults","replace","linePolygonIntersect","a1x","a1y","a2x","a2y","i","p2","length","p","lineLineIntersect","b1x","b1y","b2x","b2y","mx","my","nx","ny","nmCrossProduct","crossProduct2d","nearZero","b1a1x","b1a1y","q","x1","y1","val","RADIAN_EPSILON","_trim","str","linearMap","domain","range","clamp","subDomain","subRange","parsePercent","percent","all","match","parseFloat","NaN","round","precision","returnStr","toFixed","asc","arr","sort","a","b","getPrecision","isNaN","count","getPrecisionSafe","toString","eIndex","dotIndex","getPixelPrecision","dataExtent","pixelExtent","log","LN10","dataQuantity","floor","sizeQuantity","isFinite","getPercentWithPrecision","valueList","idx","sum","reduce","acc","digits","pow","votesPerQuota","targetSeats","seats","votes","currentSum","remainder","Number","NEGATIVE_INFINITY","maxId","len","MAX_SAFE_INTEGER","remRadian","radian","pi2","isRadianAroundZero","TIME_REG","parseDate","value","Date","exec","hour","toUpperCase","UTC","quantity","quantityExponent","exp","nice","nf","exponent","exp10","f","quantile","ascArr","H","h","v","reformIntervals","list","littleThan","curr","Infinity","currClose","interval","close","lg","splice","isNumeric","_config","__DEV__","TYPE_DELIMITER","IS_CONTAINER","parseClassType","componentType","ret","main","sub","split","checkClassType","assert","test","enableClassExtend","RootClass","mandatoryMethods","$constructor","proto","superClass","ExtendedClass","apply","arguments","prototype","superCall","superApply","inherits","classBase","enableClassCheck","Clz","classAttr","random","isInstance","context","methodName","args","enableClassManagement","entity","options","storage","makeContainer","container","registerClass","Clazz","getClass","componentMainType","subType","throwWhenNotFound","Error","getClassesByMainType","result","each","o","push","hasClass","getAllClassMainTypes","types","hasSubTypes","registerWhenExtend","originalExtend","call","setReadOnly","properties","_util","noop","_task","createTask","_component","getUID","GlobalModel","ExtensionAPI","_model","normalizeToArray","Scheduler","ecInstance","api","dataProcessorHandlers","visualHandlers","unfinished","_dataProcessorHandlers","_visualHandlers","_allHandlers","concat","_stageTaskMap","performStageTasks","scheduler","stageHandlers","payload","needSetDirty","task","setDirty","dirtyMap","__pipeline","id","stageHandler","visualType","stageHandlerRecord","uid","seriesTaskMap","overallTask","overallNeedDirty","agentStubMap","stub","updatePayload","performArgs","getPerformArgs","block","perform","pipelineId","skip","performRawSeries","isSeriesFiltered","model","restoreData","taskRecord","pipeline","_pipelineMap","pCtx","incremental","progressiveEnabled","progressiveRender","__idxInPipeline","blockIndex","step","modDataCount","modBy","ceil","getPipeline","updateStreamModes","seriesModel","view","data","getData","dataLen","incrementalPrepareRender","threshold","large","pipelineContext","restorePipelines","pipelineMap","eachSeries","progressive","getProgressive","head","tail","getProgressiveThreshold","preventIncremental","pipe","dataTask","prepareStageTasks","stageTaskMap","handler","record","reset","createSeriesStageTask","overallReset","createOverallStageTask","prepareView","renderTask","__block","performDataProcessorTasks","performVisualTasks","performSeriesTasks","plan","getUpstream","seriesType","getTargetSeries","create","seriesTaskPlan","seriesTaskReset","seriesTaskCount","useClearVisual","isVisual","isLayout","createOnAllSeries","eachRawSeries","eachRawSeriesByType","dispose","removeKey","overallTaskReset","overallProgress","modifyOutputEnd","createStub","stubReset","onDirty","stubOnDirty","agent","getSeries","upstreamContext","stubProgress","getDownstream","clearAllVisual","resetDefines","makeSeriesTaskProgress","singleSeriesTaskProgress","resetDefineIdx","params","resetDefine","dataEach","start","end","progress","detectSeriseType","legacyFunc","ecModelMock","apiMock","wrapStageHandler","mockMethods","eachSeriesByType","eachComponent","cond","mainType","_default","module","defaultSymbolType","legendSymbol","symbolType","symbolSize","keepAspect","symbolRotate","hasSymbolTypeCallback","hasSymbolSizeCallback","hasSymbolRotateCallback","hasCallback","seriesSymbol","seriesSymbolSize","setVisual","symbol","symbolKeepAspect","hasItemOption","rawValue","getRawValue","getDataParams","setItemVisual","itemModel","getItemModel","itemSymbolType","itemSymbolSize","itemSymbolRotate","itemSymbolKeepAspect","ORIGIN_METHOD","RATE","THROTTLE_TYPE","throttle","fn","delay","debounce","currCall","diff","scope","debounceNextCall","lastCall","lastExec","timer","getTime","thisDelay","thisDebounce","clearTimeout","setTimeout","clear","debounceDelay","createOrUpdate","fnAttr","rate","throttleType","originFn","lastThrottleType","lastRate","_clazz","base","enableSubTypeDefaulter","subTypeDefaulters","registerSubTypeDefaulter","defaulter","determineSubType","componentTypeMain","enableTopologicalTravel","dependencyGetter","makeDepndencyGraph","fullNameList","graph","noEntryList","thisItem","createDependencyGraphItem","originalDeps","availableDeps","getAvailableDependencies","entryCount","dependentName","predecessor","thatItem","successor","dep","topologicalTravel","targetNameList","callback","stack","targetNameSet","currComponentType","pop","currVertex","isInTargetNameSet","removeEdgeAndAdd","removeEdge","succComponentType","graphic","_text","calculateTextPosition","Triangle","buildPath","moveTo","lineTo","closePath","Diamond","Pin","w","r","dy","angle","asin","dx","cos","tanX","sin","tanY","cpLen","cpLen2","arc","bezierCurveTo","Arrow","ctx","symbolCtors","line","roundRect","square","circle","diamond","pin","arrow","triangle","symbolShapeMakers","size","symbolBuildProxies","Ctor","SymbolClz","out","res","inBundle","proxySymbol","symbolPathSetColor","innerColor","symbolStyle","symbolShape","__isEmptyBrush","createSymbol","symbolPath","isEmpty","substr","toLowerCase","setColor","componentUtil","clazzUtil","Component","group","constructor","init","render","componentModel","filterForExposedEvent","componentProto","updateView","updateLayout","updateVisual","lang","_dataProvider","retrieveRawValue","dom","ariaModel","setAttribute","seriesCnt","ariaLabel","maxDataCnt","maxSeriesCnt","displaySeriesCnt","title","getTitle","getConfig","seriesLabels","prefix","seriesCount","seriesLabel","seriesName","seriesTpl","seriesId","seriesIndex","getSeriesTypeName","window","displayCnt","dataLabels","getName","keyValues","key","RegExp","userConfig","pathArr","aria","series","typeNames","_graphic","r0","startAngle","endAngle","clockwise","dr","rCenter","unitStartX","unitStartY","unitEndX","unitEndY","lessThanCircle","colorAll","colorLayer","env","isObject","isArray","DUMMY_COMPONENT_NAME_PREFIX","Array","defaultEmphasis","subOpts","emphasis","subOptName","TEXT_STYLE_OPTIONS","getDataItemValue","dataItem","isDataItemOption","mappingToExists","exists","newCptOptions","index","exist","cptOption","isIdInner","makeIdAndName","mapResult","idMap","item","existCpt","keyInfo","idNum","isNameSpecified","compressBatches","batchA","batchB","mapA","mapB","makeMap","mapToArray","sourceBatch","otherMap","dataIndices","otherDataIndices","j","lenj","isData","queryDataIndex","dataIndexInside","indexOfRawIndex","indexOfName","makeInner","innerUniqueIndex","hostObj","parseFinder","finder","isString","defaultMainType","has","parsedKey","queryType","includeMainTypes","queryParam","models","queryComponents","getAttribute","getTooltipRenderMode","renderModeOption","domSupported","groupData","array","getKey","buckets","keys","modelUtil","graphicUtil","createRenderPlanner","inner","renderPlanner","Chart","renderTaskPlan","renderTaskReset","highlight","toggleHighlight","downplay","remove","removeAll","incrementalRender","updateTransform","chartProto","elSetState","state","childCount","childAt","dataIdx","getItemGraphicEl","eachItemGraphicEl","updateMethod","progressMethodMap","markUpdateMethod","forceFirstProgress","textContain","numberUtil","addCommas","toCamelCase","upperCaseFirst","group1","charAt","normalizeCssArray","replaceReg","replaceMap","'","encodeHTML","source","c","TPL_VAR_ALIAS","wrapVar","varName","seriesIdx","formatTpl","tpl","paramsList","encode","seriesLen","$vars","alias","k","formatTplSimple","getTooltipMarker","extraCssText","renderMode","markerId","content","pad","formatTime","isUTC","date","utc","M","d","s","S","capitalFirst","truncateText","getTextBoundingRect","font","truncate","getTextRect","windowOpen","link","blank","open","opener","location","contrastColor","axisCommon","axisLine","lineStyle","axisTick","axisLabel","splitLine","splitArea","areaStyle","colorPalette","theme","backgroundColor","tooltip","axisPointer","crossStyle","label","legend","toolbox","iconStyle","normal","borderColor","dataZoom","visualMap","timeline","itemStyle","controlStyle","timeAxis","logAxis","valueAxis","categoryAxis","gauge","candlestick","color0","borderColor0","show","define","Task","_reset","_plan","_count","_onDirty","_dirty","taskProto","planResult","upTask","_upstream","outputData","currentTask","lastModBy","normalizeModBy","_modBy","lastModDataCount","_modDataCount","_dueEnd","_outputDueEnd","_progress","_dueIndex","doProgress","outputDueEnd","_settedOutputEnd","iterator","current","winCount","it","sStep","sCount","next","modNext","sequentialNext","taskIns","_callingProgress","downstream","_downstream","downTask","_disposed","setOutputEnd","_number","formatUtil","LOCATION_PARAMS","HV_NAMES","boxLayout","orient","gap","maxWidth","maxHeight","currentLineMaxSize","eachChild","nextX","nextY","nextChild","nextChildRect","moveX","newline","moveY","box","vbox","curry","hbox","getAvailableSize","positionInfo","containerRect","margin","containerWidth","containerHeight","getLayoutRect","left","top","right","bottom","verticalMargin","horizontalMargin","positionElement","hv","boundingMode","needLocalTransform","elPos","sizeCalculable","hvIdx","mergeLayoutParam","targetOption","newOption","ignoreSize","hResult","merge","vResult","names","newParams","newValueCount","merged","mergedValueCount","enoughParamNumber","hasProp","hasValue","copy","getLayoutParams","copyLayoutParams","Gradient","colorAccessPath","visualColorAccessPath","colorCallback","getColorFromPalette","getSeriesCount","borderColorAccessPath","visualBorderColorAccessPath"],"mappings":"2GAoBA,IAAIA,EAAS,EAAQ,QAEjBC,EAAW,EAAQ,QAEnBC,EAAY,EAAQ,QAEpBC,EAAS,EAAQ,QAEjBC,EAAS,EAAQ,QAEjBC,EAAO,EAAQ,QAEfC,EAAgB,EAAQ,QAExBC,EAAS,EAAQ,QAErBC,EAAQC,MAAQF,EAEhB,IAAIG,EAAQ,EAAQ,QAEpBF,EAAQE,MAAQA,EAEhB,IAAIC,EAAO,EAAQ,QAEnBH,EAAQG,KAAOA,EAEf,IAAIC,EAAS,EAAQ,QAErBJ,EAAQI,OAASA,EAEjB,IAAIC,EAAS,EAAQ,QAErBL,EAAQK,OAASA,EAEjB,IAAIC,EAAO,EAAQ,QAEnBN,EAAQM,KAAOA,EAEf,IAAIC,EAAU,EAAQ,QAEtBP,EAAQO,QAAUA,EAElB,IAAIC,EAAW,EAAQ,QAEvBR,EAAQQ,SAAWA,EAEnB,IAAIC,EAAO,EAAQ,QAEnBT,EAAQS,KAAOA,EAEf,IAAIC,EAAO,EAAQ,QAEnBV,EAAQU,KAAOA,EAEf,IAAIC,EAAc,EAAQ,QAE1BX,EAAQW,YAAcA,EAEtB,IAAIC,EAAM,EAAQ,QAElBZ,EAAQY,IAAMA,EAEd,IAAIC,EAAe,EAAQ,QAE3Bb,EAAQa,aAAeA,EAEvB,IAAIC,EAAiB,EAAQ,QAE7Bd,EAAQc,eAAiBA,EAEzB,IAAIC,EAAiB,EAAQ,QAE7Bf,EAAQe,eAAiBA,EAEzB,IAAIC,EAAe,EAAQ,QAE3BhB,EAAQgB,aAAeA,EAEvB,IAAIC,EAAyB,EAAQ,QAErCjB,EAAQiB,uBAAyBA,EAEjC,IAAIC,EAAuB,EAAQ,QAoB/BC,EAAUC,KAAKC,IACfC,EAAUF,KAAKG,IACfC,EAAY,GACZC,EAAmB,EAEnBC,EAAgC,CAClCC,MAAO,WACPC,gBAAiB,aACjBC,gBAAiB,mBAEfC,EAAW,WACXC,EAAS,SAETC,EAAsB,EACtBC,EAAmB,GACnBC,EAAkB,GAKtB,SAASC,EAAYC,GACnB,OAAOvC,EAAKwC,OAAOD,GAOrB,SAASE,EAAWC,EAAUH,GAC5B,OAAO3C,EAAS+C,iBAAiBD,EAAUH,GAe7C,SAASK,EAAcC,EAAMC,GAC3BT,EAAgBQ,GAAQC,EA+B1B,SAASC,EAAcF,GACrB,GAAIR,EAAgBW,eAAeH,GACjC,OAAOR,EAAgBQ,GAY3B,SAASI,EAASP,EAAUH,EAAMW,EAAMC,GACtC,IAAIC,EAAOxD,EAASyD,iBAAiBX,EAAUH,GAU/C,OARIW,IACa,WAAXC,IACFD,EAAOI,EAAcJ,EAAME,EAAKG,oBAGlCC,EAAWJ,EAAMF,IAGZE,EAWT,SAASK,EAAUC,EAAUR,EAAMC,GACjC,IAAIC,EAAO,IAAIlD,EAAO,CACpByD,MAAO,CACLC,MAAOF,EACPG,EAAGX,EAAKW,EACRC,EAAGZ,EAAKY,EACRC,MAAOb,EAAKa,MACZC,OAAQd,EAAKc,QAEfC,OAAQ,SAAUC,GAChB,GAAe,WAAXf,EAAqB,CACvB,IAAIgB,EAAe,CACjBJ,MAAOG,EAAIH,MACXC,OAAQE,EAAIF,QAEdZ,EAAKgB,SAASd,EAAcJ,EAAMiB,QAIxC,OAAOf,EAWT,SAASE,EAAcJ,EAAMiB,GAE3B,IAEIH,EAFAK,EAASF,EAAaJ,MAAQI,EAAaH,OAC3CD,EAAQb,EAAKc,OAASK,EAGtBN,GAASb,EAAKa,MAChBC,EAASd,EAAKc,QAEdD,EAAQb,EAAKa,MACbC,EAASD,EAAQM,GAGnB,IAAIC,EAAKpB,EAAKW,EAAIX,EAAKa,MAAQ,EAC3BQ,EAAKrB,EAAKY,EAAIZ,EAAKc,OAAS,EAChC,MAAO,CACLH,EAAGS,EAAKP,EAAQ,EAChBD,EAAGS,EAAKP,EAAS,EACjBD,MAAOA,EACPC,OAAQA,GAIZ,IAAIQ,EAAY5E,EAAS4E,UAOzB,SAAShB,EAAWJ,EAAMF,GACxB,GAAKE,EAAKqB,eAAV,CAIA,IAAIC,EAAWtB,EAAKG,kBAChBoB,EAAID,EAASE,mBAAmB1B,GACpCE,EAAKqB,eAAeE,IAiBtB,SAASE,EAAqBC,GAE5B,OADAzD,EAAqBwD,qBAAqBC,EAAMC,MAAOD,EAAMC,MAAOD,EAAMnB,OACnEmB,EAiBT,SAASE,EAAqBF,GAE5B,OADAzD,EAAqB2D,qBAAqBF,EAAMC,MAAOD,EAAMC,MAAOD,EAAMnB,OACnEmB,EAYT,IAAIG,EAAmB5D,EAAqB4D,iBAE5C,SAASC,EAAgBC,GACvB,OAAuB,MAAhBA,GAAyC,SAAjBA,EAIjC,IAAIC,EAAiBzF,EAAO0F,gBACxBC,EAAmB,EAEvB,SAASC,EAAUzD,GACjB,GAAqB,kBAAVA,EACT,OAAOA,EAGT,IAAI0D,EAAcJ,EAAeK,IAAI3D,GAWrC,OATK0D,IACHA,EAAc3F,EAAU6F,KAAK5D,GAAQ,IAEjCwD,EAAmB,MACrBF,EAAeO,IAAI7D,EAAO0D,GAC1BF,MAIGE,EAGT,SAASI,GAAgBC,GACvB,GAAKA,EAAGC,gBAAR,CAIAD,EAAGC,iBAAkB,EACrB,IAAIC,EAAaF,EAAGG,WAEpB,GAAKD,EAAL,CAKA,IAAIE,EAAcJ,EAAGK,kBAAoB,GACzCL,EAAGM,iBAAmBN,EAAGO,GACzB,IAAIC,EAAUR,EAAGlC,MAEjB,IAAK,IAAId,KAAQkD,EAES,MAApBA,EAAWlD,KACboD,EAAYpD,GAAQwD,EAAQxD,IAKhCoD,EAAYK,KAAOD,EAAQC,KAC3BL,EAAYM,OAASF,EAAQE,YAjB3BV,EAAGK,kBAAoBL,EAAGM,iBAAmB,MAoBjD,SAASK,GAAoBX,GAC3B,IAAIY,EAAWZ,EAAGG,WAElB,GAAKS,IAAYZ,EAAGa,cAApB,CAIA,IAAIC,EAAKd,EAAGe,KACRC,EAAgBhB,EAAGgB,eAAiBF,GAA0B,WAApBA,EAAGG,QAAQC,KAGzD,GAFAlB,EAAGa,cAAgBG,EAAgB,QAAU,UAEzChB,EAAGmB,UAAYL,GAAMd,EAAGgB,eAA5B,CAIA,IAAII,EAAWpB,EACXqB,EAAcrB,EAAGlC,MAEjBkD,IACFI,EAAWN,EAAGQ,SAAStB,GACvBqB,EAAcD,EAAStD,OAGzByD,GAAyBF,GAEpBL,GACHjB,GAAgBqB,GA0BlBC,EAAYG,WAAWZ,GACvBa,GAA0BJ,EAAaT,EAAU,QACjDa,GAA0BJ,EAAaT,EAAU,UACjDc,GAAsBL,GAEjBL,IACHhB,EAAG2B,OAAM,GACT3B,EAAGO,IAAMxE,KAIb,SAAS0F,GAA0BJ,EAAanB,EAAY0B,IACrDvC,EAAgBa,EAAW0B,KAAUvC,EAAgBgC,EAAYO,MACpEP,EAAYO,GAAQlC,EAAU2B,EAAYO,KAI9C,SAASC,GAAkB7B,GACzB,IAAI8B,EAAc9B,EAAGa,cAErB,GAAKiB,IAIL9B,EAAGa,eAAgB,GAEfb,EAAGmB,SAIP,GAAoB,UAAhBW,EACF9B,EAAGe,MAAQf,EAAGe,KAAKgB,YAAY/B,OAC1B,CACL,IAAIlC,EAAQkC,EAAGlC,MACXkE,EAAYhC,EAAGK,kBAEf2B,IACFT,GAAyBzD,GACzBkC,EAAGzB,SAASyD,GACZN,GAAsB5D,IAMxB,IAAImE,EAAWjC,EAAGM,iBAEF,MAAZ2B,GAAoBjC,EAAGO,GAAK0B,IAAalG,IAC3CiE,EAAGO,GAAK0B,IAKd,SAASC,GAAelC,EAAImC,EAASC,GAEnC,IAEIC,EAFAC,EAAYjG,EACZkG,EAAUlG,EAGd2D,EAAGa,gBAAkByB,EAAYlG,EAAUiG,GAAU,GACrDF,EAAQnC,EAAIoC,GACZpC,EAAGa,gBAAkB0B,EAAUnG,EAAUiG,GAAU,GACnDrC,EAAGmB,SAAWnB,EAAGwC,UAAS,SAAUC,IACjCA,EAAMtB,SAAWgB,EAAQM,EAAOL,MAEnCC,GAAWrC,EAAG0C,oBAAsB1C,EAAG0C,mBAAmBJ,EAAWC,GAoBvE,SAASI,GAAqB3C,EAAIY,GAGhCA,EAAWZ,EAAGG,YAA0B,IAAbS,IAAuBZ,EAAGE,YAAcU,GAAY,IAC/EZ,EAAGC,iBAAkB,EAOjBD,EAAGa,gBAKLb,EAAGK,kBAAoB,KAKvBwB,GAAkB7B,GAClBW,GAAoBX,IAIxB,SAAS4C,GAAmBC,IACzBC,GAAaC,KAAMF,KAChBE,KAAKC,eAAiBd,GAAea,KAAMpC,IAGjD,SAASsC,GAAkBJ,IACxBC,GAAaC,KAAMF,KAChBE,KAAKC,eAAiBd,GAAea,KAAMlB,IAGjD,SAASqB,GAAuBC,GAC9BJ,KAAKC,eAAiB,IAAMG,GAAkB,GAC9CjB,GAAea,KAAMpC,IAGvB,SAASyC,GAAqBD,KAC1BJ,KAAKC,iBAAmB,IAAMG,GAAkB,MAAQjB,GAAea,KAAMlB,IAGjF,SAASiB,GAAa9C,EAAI6C,GACxB,OAAO7C,EAAGqD,yBAA2BR,EAAES,UAyCzC,SAASC,GAAcvD,EAAIE,GACzBsD,GAAwBxD,GAAI,GAC5BkC,GAAelC,EAAI2C,GAAsBzC,GAsC3C,SAASsD,GAAwBxD,EAAIyD,GACnC,IAAIC,GAA2B,IAAjBD,EAOd,GAJAzD,EAAGqD,wBAA0BrD,EAAG2D,sBAChC3D,EAAG0C,mBAAqB1C,EAAG4D,kBAGtBF,GAAW1D,EAAG6D,qBAAsB,CACvC,IAAIC,EAASJ,EAAU,MAAQ,KAE/B1D,EAAG8D,GAAQ,YAAalB,IAAoBkB,GAAQ,WAAYb,IAEhEjD,EAAG8D,GAAQ,WAAYZ,IAAwBY,GAAQ,SAAUV,IAEjEpD,EAAGgD,cAAgBhD,EAAGgD,eAAiB,EACvChD,EAAG6D,sBAAwBH,GAS/B,SAASK,GAAqB/D,GAC5B,SAAUA,IAAMA,EAAG6D,sBAYrB,SAASG,GAAkBC,GACzB,IAAId,EAAiB5G,EAAiB0H,GAMtC,OAJsB,MAAlBd,GAA0B7G,GAAuB,KACnD6G,EAAiB5G,EAAiB0H,GAAgB3H,KAG7C6G,EAuBT,SAASe,GAAc9D,EAAa+D,EAAeC,EAAaC,EAAeC,EAAKC,EAAiBC,GACnGF,EAAMA,GAAOxI,EACb,IAWI2I,EAXAC,EAAeJ,EAAII,aACnBC,EAAiBL,EAAIK,eACrBC,EAAgBN,EAAIM,cACpBC,EAAYP,EAAIO,UAGhBC,EAAaV,EAAYW,WAAW,QACpCC,EAAeX,EAAcU,WAAW,SAMxCD,GAAcE,KACZN,IACFD,EAAWC,EAAaO,kBAAkBN,EAAgB,SAAU,KAAMC,EAAeC,IAG3E,MAAZJ,IACFA,EAAW3K,EAAOoL,WAAWZ,EAAIa,aAAeb,EAAIa,YAAYR,EAAgBL,GAAOA,EAAIa,cAI/F,IAAIC,EAAkBN,EAAaL,EAAW,KAC1CY,EAAoBL,EAAelL,EAAOwL,UAAUZ,EAAeA,EAAaO,kBAAkBN,EAAgB,WAAY,KAAMC,EAAeC,GAAa,KAAMJ,GAAY,KAE/J,MAAnBW,GAAgD,MAArBC,IAO7BE,GAAanF,EAAagE,EAAaG,EAAiBD,GACxDiB,GAAapB,EAAeE,EAAeG,EAAmBF,GAAK,IAGrElE,EAAYoF,KAAOJ,EACnBjB,EAAcqB,KAAOH,EAYvB,SAASI,GAAiBzF,EAAI0F,EAAkBC,GAC9C,IAAInF,EAAUR,EAAGlC,MAEb4H,IACFnE,GAAyBf,GACzBR,EAAGzB,SAASmH,GACZhE,GAAsBlB,IAGxBA,EAAUR,EAAGG,WAETwF,GAAsBnF,IACxBe,GAAyBf,GACzB1G,EAAO6C,OAAO6D,EAASmF,GACvBjE,GAAsBlB,IAc1B,SAAS+E,GAAaK,EAAWC,EAAgBC,EAAoBxB,EAAKyB,GAIxE,OAHAC,GAAmBJ,EAAWC,EAAgBvB,EAAKyB,GACnDD,GAAsBhM,EAAO6C,OAAOiJ,EAAWE,GAExCF,EAaT,SAASK,GAAQL,EAAWM,EAAYC,GACtC,IAGIJ,EAHAzB,EAAM,CACR8B,YAAY,IAIO,IAAjBD,EACFJ,GAAa,EAGbzB,EAAI+B,UAAYF,EAGlBH,GAAmBJ,EAAWM,EAAY5B,EAAKyB,GAoCjD,SAASC,GAAmBJ,EAAWC,EAAgBvB,EAAKyB,GAI1D,GAFAzB,EAAMA,GAAOxI,EAETwI,EAAI8B,WAAY,CAClB,IAAIE,EAEAhC,EAAIiC,gBACND,EAAehC,EAAIiC,gBAAgBV,EAAgBE,IAEnDO,EAAeT,EAAed,WAAW,cAAgBgB,EAAa,KAAO,UAG5D,YAAjBO,IAA+BA,EAAe,QAGhDV,EAAUU,aAAeA,EACzBV,EAAUY,WAAaX,EAAed,WAAW,UACjD,IAAI0B,EAAcZ,EAAed,WAAW,UAC7B,MAAf0B,IAAwBA,GAAe/K,KAAKgL,GAAK,KACjDd,EAAUe,aAAeF,EACzBb,EAAUgB,aAAe9M,EAAOwL,UAAUO,EAAed,WAAW,YAAagB,EAAa,KAAO,GAGvG,IAiBIc,EAjBAC,EAAUjB,EAAeiB,QACzBC,EAAkBD,GAAWA,EAAQE,OAAOpB,UAe5CqB,EAAgBC,GAAiBrB,GAGrC,GAAIoB,EAGF,IAAK,IAAIjK,KAFT6J,EAAa,GAEII,EACf,GAAIA,EAAc9J,eAAeH,GAAO,CAEtC,IAAImK,EAAgBtB,EAAeuB,SAAS,CAAC,OAAQpK,IAMrDqK,GAAkBR,EAAW7J,GAAQ,GAAImK,EAAeJ,EAAiBzC,EAAKyB,GAYpF,OAPAH,EAAU0B,KAAOT,EACjBQ,GAAkBzB,EAAWC,EAAgBkB,EAAiBzC,EAAKyB,GAAY,GAE3EzB,EAAIiD,YAAcjD,EAAIsB,YACxBtB,EAAIsB,UAAY,IAGXA,EAiBT,SAASsB,GAAiBrB,GAExB,IAAI2B,EAEJ,MAAO3B,GAAkBA,IAAmBA,EAAeiB,QAAS,CAClE,IAAIQ,GAAQzB,EAAemB,QAAUlL,GAAWwL,KAEhD,GAAIA,EAGF,IAAK,IAAItK,KAFTwK,EAAkBA,GAAmB,GAEpBF,EACXA,EAAKnK,eAAeH,KACtBwK,EAAgBxK,GAAQ,GAK9B6I,EAAiBA,EAAe4B,YAGlC,OAAOD,EAGT,SAASH,GAAkBzB,EAAWC,EAAgBkB,EAAiBzC,EAAKyB,EAAY2B,GAEtFX,GAAmBhB,GAAcgB,GAAmBjL,EACpD8J,EAAU+B,SAAWC,GAAa/B,EAAed,WAAW,SAAUT,IAAQyC,EAAgB9K,MAC9F2J,EAAUiC,WAAaD,GAAa/B,EAAed,WAAW,mBAAoBT,IAAQyC,EAAgB7K,gBAC1G0J,EAAUkC,gBAAkBhO,EAAOwL,UAAUO,EAAed,WAAW,mBAAoBgC,EAAgB5K,iBAEtG4J,IACC2B,IACF9B,EAAUmC,kBAAoBzD,EAC9B5C,GAAsBkE,IAIE,MAAtBA,EAAU+B,WACZ/B,EAAU+B,SAAWrD,EAAI+B,YAO7BT,EAAUoC,UAAYnC,EAAed,WAAW,cAAgBgC,EAAgBiB,UAChFpC,EAAUqC,WAAapC,EAAed,WAAW,eAAiBgC,EAAgBkB,WAClFrC,EAAUsC,SAAWrC,EAAed,WAAW,aAAegC,EAAgBmB,SAC9EtC,EAAUuC,WAAatC,EAAed,WAAW,eAAiBgC,EAAgBoB,WAClFvC,EAAUwC,UAAYvC,EAAed,WAAW,SAChDa,EAAUyC,kBAAoBxC,EAAed,WAAW,kBAAoBc,EAAed,WAAW,YACtGa,EAAU0C,eAAiBzC,EAAed,WAAW,cACrDa,EAAU2C,UAAY1C,EAAed,WAAW,SAChDa,EAAU4C,WAAa3C,EAAed,WAAW,UACjDa,EAAU6C,QAAU5C,EAAed,WAAW,OAEzC2C,GAAYpD,EAAIoE,aACnB9C,EAAU+C,oBAAsBf,GAAa/B,EAAed,WAAW,mBAAoBT,GAC3FsB,EAAUgD,YAAc/C,EAAed,WAAW,WAClDa,EAAU1J,gBAAkB0L,GAAa/B,EAAed,WAAW,eAAgBT,GACnFsB,EAAUzJ,gBAAkB0J,EAAed,WAAW,eACtDa,EAAUiD,iBAAmBhD,EAAed,WAAW,gBACvDa,EAAUkD,mBAAqBjD,EAAed,WAAW,eACzDa,EAAUmD,kBAAoBlD,EAAed,WAAW,cACxDa,EAAUoD,qBAAuBnD,EAAed,WAAW,iBAC3Da,EAAUqD,qBAAuBpD,EAAed,WAAW,kBAG7Da,EAAUsD,gBAAkBrD,EAAed,WAAW,oBAAsBgC,EAAgBmC,gBAC5FtD,EAAUuD,eAAiBtD,EAAed,WAAW,mBAAqBgC,EAAgBoC,eAC1FvD,EAAUwD,kBAAoBvD,EAAed,WAAW,sBAAwBgC,EAAgBqC,kBAChGxD,EAAUyD,kBAAoBxD,EAAed,WAAW,sBAAwBgC,EAAgBsC,kBAGlG,SAASzB,GAAa3L,EAAOqI,GAC3B,MAAiB,SAAVrI,EAAmBA,EAAQqI,GAAOA,EAAI+B,UAAY/B,EAAI+B,UAAY,KAqB3E,SAAS3E,GAAsBkE,GAC7B,IAEI0D,EAFAhD,EAAeV,EAAUU,aACzBhC,EAAMsB,EAAUmC,kBAGpB,GAAIzD,GAA6B,MAAtBsB,EAAU+B,SAAkB,CACrC,IAAItB,EAAY/B,EAAI+B,UAChBD,EAAa9B,EAAI8B,WACjBmD,EAAiBjF,EAAIiF,eACrBC,GAAyC,IAAnBD,KAAgD,IAAnBA,GAA2BnD,GAAcE,GACrE,kBAAjBA,GAA6BA,EAAamD,QAAQ,WAAa,GACrEC,GAAqBF,GAAoC,MAAbnD,GAE5CmD,GAAuBE,KACzBJ,EAAiB,CACf3B,SAAU/B,EAAU+B,SACpBE,WAAYjC,EAAUiC,WACtBC,gBAAiBlC,EAAUkC,kBAI3B0B,IACF5D,EAAU+B,SAAW,OAEO,MAAxB/B,EAAUiC,aACZjC,EAAUiC,WAAaxB,EACM,MAA7BT,EAAUkC,kBAA4BlC,EAAUkC,gBAAkB,KAIlE4B,IACF9D,EAAU+B,SAAWtB,GAKzBT,EAAU0D,eAAiBA,EAc7B,SAAS/H,GAAyBzD,GAChC,IAAIwL,EAAiBxL,EAAMwL,eAEvBA,IAEFxL,EAAM6J,SAAW2B,EAAe3B,SAChC7J,EAAM+J,WAAayB,EAAezB,WAClC/J,EAAMgK,gBAAkBwB,EAAexB,gBACvChK,EAAMwL,eAAiB,MAI3B,SAASK,GAAQrF,EAAKwC,GACpB,IAAI8C,EAAkB9C,GAAWA,EAAQM,SAAS,aAClD,OAAOtN,EAAO+P,KAAK,CACnBvF,EAAI0D,WAAa4B,GAAmBA,EAAgB7E,WAAW,cAAgB,GAAIT,EAAI2D,YAAc2B,GAAmBA,EAAgB7E,WAAW,eAAiB,IAAKT,EAAI4D,UAAY0B,GAAmBA,EAAgB7E,WAAW,aAAe,IAAM,KAAMT,EAAI6D,YAAcyB,GAAmBA,EAAgB7E,WAAW,eAAiB,cAAc+E,KAAK,MAGxW,SAASC,GAAkBC,EAAUhK,EAAIiK,EAAOC,EAAiBC,EAAWC,GACjD,oBAAdD,IACTC,EAAKD,EACLA,EAAY,MAMd,IAAIE,EAAmBH,GAAmBA,EAAgBI,qBAE1D,GAAID,EAAkB,CACpB,IAAIE,EAAUP,EAAW,SAAW,GAChCQ,EAAWN,EAAgBnF,WAAW,oBAAsBwF,GAC5DE,EAAkBP,EAAgBnF,WAAW,kBAAoBwF,GACjEG,EAAiBR,EAAgBnF,WAAW,iBAAmBwF,GAErC,oBAAnBG,IACTA,EAAiBA,EAAeP,EAAWD,EAAgBS,wBAA0BT,EAAgBS,wBAAwB3K,EAAImK,GAAa,OAGxH,oBAAbK,IACTA,EAAWA,EAASL,IAGtBK,EAAW,EAAIxK,EAAG4K,UAAUX,EAAOO,EAAUE,GAAkB,EAAGD,EAAiBL,IAAMA,IAAOpK,EAAG6K,gBAAiB7K,EAAG8K,KAAKb,GAAQG,GAAMA,UAE1IpK,EAAG6K,gBACH7K,EAAG8K,KAAKb,GACRG,GAAMA,IA2BV,SAASW,GAAY/K,EAAIiK,EAAOC,EAAiBC,EAAWC,GAC1DL,IAAkB,EAAM/J,EAAIiK,EAAOC,EAAiBC,EAAWC,GAkBjE,SAASY,GAAUhL,EAAIiK,EAAOC,EAAiBC,EAAWC,GACxDL,IAAkB,EAAO/J,EAAIiK,EAAOC,EAAiBC,EAAWC,GAWlE,SAASa,GAAaC,EAAQC,GAC5B,IAAIC,EAAMnR,EAAOoR,SAAS,IAE1B,MAAOH,GAAUA,IAAWC,EAC1BlR,EAAOqR,IAAIF,EAAKF,EAAOK,oBAAqBH,GAC5CF,EAASA,EAAOM,OAGlB,OAAOJ,EAaT,SAASxM,GAAesM,EAAQO,EAAWC,GASzC,OARID,IAAc3R,EAAO6R,YAAYF,KACnCA,EAAYrR,EAAcmR,kBAAkBE,IAG1CC,IACFD,EAAYxR,EAAOyR,OAAO,GAAID,IAGzBvR,EAAO0E,eAAe,GAAIsM,EAAQO,GAU3C,SAASG,GAAmBC,EAAWJ,EAAWC,GAEhD,IAAII,EAAyB,IAAjBL,EAAU,IAA6B,IAAjBA,EAAU,IAA6B,IAAjBA,EAAU,GAAW,EAAI/P,KAAKqQ,IAAI,EAAIN,EAAU,GAAKA,EAAU,IACnHO,EAAyB,IAAjBP,EAAU,IAA6B,IAAjBA,EAAU,IAA6B,IAAjBA,EAAU,GAAW,EAAI/P,KAAKqQ,IAAI,EAAIN,EAAU,GAAKA,EAAU,IACnHQ,EAAS,CAAe,SAAdJ,GAAwBC,EAAsB,UAAdD,EAAwBC,EAAQ,EAAiB,QAAdD,GAAuBG,EAAsB,WAAdH,EAAyBG,EAAQ,GAEjJ,OADAC,EAASrN,GAAeqN,EAAQR,EAAWC,GACpChQ,KAAKqQ,IAAIE,EAAO,IAAMvQ,KAAKqQ,IAAIE,EAAO,IAAMA,EAAO,GAAK,EAAI,QAAU,OAASA,EAAO,GAAK,EAAI,SAAW,MAQnH,SAASC,GAAgBC,EAAIC,EAAIlC,EAAiBE,GAChD,GAAK+B,GAAOC,EAAZ,CA2BA,IAAIC,EAASC,EAASH,GACtBC,EAAG5J,UAAS,SAAUxC,GACpB,IAAKA,EAAGmB,SAAWnB,EAAGuM,KAAM,CAC1B,IAAIC,EAAQH,EAAOrM,EAAGuM,MAEtB,GAAIC,EAAO,CACT,IAAIC,EAAUC,EAAmB1M,GACjCA,EAAG8K,KAAK4B,EAAmBF,IAC3BzB,GAAY/K,EAAIyM,EAASvC,EAAiBlK,EAAGmK,gBA/BnD,SAASmC,EAASK,GAChB,IAAIC,EAAQ,GAMZ,OALAD,EAAEnK,UAAS,SAAUxC,IACdA,EAAGmB,SAAWnB,EAAGuM,OACpBK,EAAM5M,EAAGuM,MAAQvM,MAGd4M,EAGT,SAASF,EAAmB1M,GAC1B,IAAI6M,EAAM,CACRC,SAAU5S,EAAO6S,MAAM/M,EAAG8M,UAC1BE,SAAUhN,EAAGgN,UAOf,OAJIhN,EAAGd,QACL2N,EAAI3N,MAAQpF,EAAO6C,OAAO,GAAIqD,EAAGd,QAG5B2N,GA4BX,SAASI,GAAiBC,EAAQ7P,GAGhC,OAAOvD,EAAOqT,IAAID,GAAQ,SAAUE,GAClC,IAAIpP,EAAIoP,EAAM,GACdpP,EAAIvC,EAAQuC,EAAGX,EAAKW,GACpBA,EAAIpC,EAAQoC,EAAGX,EAAKW,EAAIX,EAAKa,OAC7B,IAAID,EAAImP,EAAM,GAGd,OAFAnP,EAAIxC,EAAQwC,EAAGZ,EAAKY,GACpBA,EAAIrC,EAAQqC,EAAGZ,EAAKY,EAAIZ,EAAKc,QACtB,CAACH,EAAGC,MAUf,SAASoP,GAAeC,EAAYjQ,GAClC,IAAIW,EAAIvC,EAAQ6R,EAAWtP,EAAGX,EAAKW,GAC/BuP,EAAK3R,EAAQ0R,EAAWtP,EAAIsP,EAAWpP,MAAOb,EAAKW,EAAIX,EAAKa,OAC5DD,EAAIxC,EAAQ6R,EAAWrP,EAAGZ,EAAKY,GAC/BuP,EAAK5R,EAAQ0R,EAAWrP,EAAIqP,EAAWnP,OAAQd,EAAKY,EAAIZ,EAAKc,QAGjE,GAAIoP,GAAMvP,GAAKwP,GAAMvP,EACnB,MAAO,CACLD,EAAGA,EACHC,EAAGA,EACHC,MAAOqP,EAAKvP,EACZG,OAAQqP,EAAKvP,GAYnB,SAASwP,GAAWC,EAASpJ,EAAKjH,GAChCiH,EAAMxK,EAAO6C,OAAO,CAClBgR,WAAW,GACVrJ,GACH,IAAIxG,EAAQwG,EAAIxG,MAAQ,CACtB8P,eAAe,GASjB,GAPAvQ,EAAOA,GAAQ,CACbW,GAAI,EACJC,GAAI,EACJC,MAAO,EACPC,OAAQ,GAGNuP,EACF,OAAuC,IAAhCA,EAAQjE,QAAQ,aAAqB3L,EAAMC,MAAQ2P,EAAQG,MAAM,GAAI/T,EAAOgU,SAAShQ,EAAOT,GAAO,IAAIhD,EAAOiK,IAAQlH,EAASsQ,EAAQK,QAAQ,UAAW,IAAKzJ,EAAKjH,EAAM,UAkBrL,SAAS2Q,GAAqBC,EAAKC,EAAKC,EAAKC,EAAKlB,GAChD,IAAK,IAAImB,EAAI,EAAGC,EAAKpB,EAAOA,EAAOqB,OAAS,GAAIF,EAAInB,EAAOqB,OAAQF,IAAK,CACtE,IAAIG,EAAItB,EAAOmB,GAEf,GAAII,GAAkBR,EAAKC,EAAKC,EAAKC,EAAKI,EAAE,GAAIA,EAAE,GAAIF,EAAG,GAAIA,EAAG,IAC9D,OAAO,EAGTA,EAAKE,GAqBT,SAASC,GAAkBR,EAAKC,EAAKC,EAAKC,EAAKM,EAAKC,EAAKC,EAAKC,GAE5D,IAAIC,EAAKX,EAAMF,EACXc,EAAKX,EAAMF,EACXc,EAAKJ,EAAMF,EACXO,EAAKJ,EAAMF,EAGXO,EAAiBC,GAAeH,EAAIC,EAAIH,EAAIC,GAEhD,GAAIK,GAASF,GACX,OAAO,EAOT,IAAIG,EAAQpB,EAAMS,EACdY,EAAQpB,EAAMS,EACdY,EAAIJ,GAAeE,EAAOC,EAAOR,EAAIC,GAAMG,EAE/C,GAAIK,EAAI,GAAKA,EAAI,EACf,OAAO,EAGT,IAAIf,EAAIW,GAAeE,EAAOC,EAAON,EAAIC,GAAMC,EAE/C,QAAIV,EAAI,GAAKA,EAAI,GAWnB,SAASW,GAAeK,EAAIC,EAAIlC,EAAIC,GAClC,OAAOgC,EAAKhC,EAAKD,EAAKkC,EAGxB,SAASL,GAASM,GAChB,OAAOA,GAAO,MAAQA,IAAQ,KAKhC3S,EAAc,SAAUrC,GACxBqC,EAAc,SAAUpC,GACxBoC,EAAc,OAAQnC,GACtBmC,EAAc,UAAWlC,GACzBkC,EAAc,WAAYjC,GAC1BiC,EAAc,OAAQhC,GACtBgC,EAAc,OAAQ/B,GACtB+B,EAAc,cAAe9B,GAC7B8B,EAAc,MAAO7B,GACrBZ,EAAQyB,iBAAmBA,EAC3BzB,EAAQ0B,8BAAgCA,EACxC1B,EAAQmC,YAAcA,EACtBnC,EAAQsC,WAAaA,EACrBtC,EAAQyC,cAAgBA,EACxBzC,EAAQ4C,cAAgBA,EACxB5C,EAAQ8C,SAAWA,EACnB9C,EAAQsD,UAAYA,EACpBtD,EAAQqE,UAAYA,EACpBrE,EAAQqD,WAAaA,EACrBrD,EAAQ0E,qBAAuBA,EAC/B1E,EAAQ6E,qBAAuBA,EAC/B7E,EAAQ8E,iBAAmBA,EAC3B9E,EAAQqI,qBAAuBA,GAC/BrI,EAAQiJ,cAAgBA,GACxBjJ,EAAQkJ,wBAA0BA,GAClClJ,EAAQyJ,qBAAuBA,GAC/BzJ,EAAQ0J,kBAAoBA,GAC5B1J,EAAQ4J,cAAgBA,GACxB5J,EAAQmL,iBAAmBA,GAC3BnL,EAAQiL,aAAeA,GACvBjL,EAAQ2L,QAAUA,GAClB3L,EAAQqP,QAAUA,GAClBrP,EAAQyQ,YAAcA,GACtBzQ,EAAQ0Q,UAAYA,GACpB1Q,EAAQ2Q,aAAeA,GACvB3Q,EAAQsE,eAAiBA,GACzBtE,EAAQsR,mBAAqBA,GAC7BtR,EAAQ4R,gBAAkBA,GAC1B5R,EAAQ2S,iBAAmBA,GAC3B3S,EAAQ+S,eAAiBA,GACzB/S,EAAQmT,WAAaA,GACrBnT,EAAQ0T,qBAAuBA,GAC/B1T,EAAQmU,kBAAoBA,I,qBCl+C5B,IAAI3U,EAAS,EAAQ,QA6BjB6V,EAAiB,KAErB,SAASC,EAAMC,GACb,OAAOA,EAAI9B,QAAQ,aAAc,IAanC,SAAS+B,EAAUJ,EAAKK,EAAQC,EAAOC,GACrC,IAAIC,EAAYH,EAAO,GAAKA,EAAO,GAC/BI,EAAWH,EAAM,GAAKA,EAAM,GAEhC,GAAkB,IAAdE,EACF,OAAoB,IAAbC,EAAiBH,EAAM,IAAMA,EAAM,GAAKA,EAAM,IAAM,EAQ7D,GAAIC,EACF,GAAIC,EAAY,EAAG,CACjB,GAAIR,GAAOK,EAAO,GAChB,OAAOC,EAAM,GACR,GAAIN,GAAOK,EAAO,GACvB,OAAOC,EAAM,OAEV,CACL,GAAIN,GAAOK,EAAO,GAChB,OAAOC,EAAM,GACR,GAAIN,GAAOK,EAAO,GACvB,OAAOC,EAAM,OAGZ,CACL,GAAIN,IAAQK,EAAO,GACjB,OAAOC,EAAM,GAGf,GAAIN,IAAQK,EAAO,GACjB,OAAOC,EAAM,GAIjB,OAAQN,EAAMK,EAAO,IAAMG,EAAYC,EAAWH,EAAM,GAY1D,SAASI,EAAaC,EAASC,GAC7B,OAAQD,GACN,IAAK,SACL,IAAK,SACHA,EAAU,MACV,MAEF,IAAK,OACL,IAAK,MACHA,EAAU,KACV,MAEF,IAAK,QACL,IAAK,SACHA,EAAU,OACV,MAGJ,MAAuB,kBAAZA,EACLT,EAAMS,GAASE,MAAM,MAChBC,WAAWH,GAAW,IAAMC,EAG9BE,WAAWH,GAGF,MAAXA,EAAkBI,KAAOJ,EAalC,SAASK,EAAM1S,EAAG2S,EAAWC,GAQ3B,OAPiB,MAAbD,IACFA,EAAY,IAIdA,EAAYjV,KAAKG,IAAIH,KAAKC,IAAI,EAAGgV,GAAY,IAC7C3S,IAAMA,GAAG6S,QAAQF,GACVC,EAAY5S,GAAKA,EAW1B,SAAS8S,EAAIC,GAIX,OAHAA,EAAIC,MAAK,SAAUC,EAAGC,GACpB,OAAOD,EAAIC,KAENH,EAQT,SAASI,EAAazB,GAGpB,GAFAA,GAAOA,EAEH0B,MAAM1B,GACR,OAAO,EAOT,IAAI7M,EAAI,EACJwO,EAAQ,EAEZ,MAAO3V,KAAKgV,MAAMhB,EAAM7M,GAAKA,IAAM6M,EACjC7M,GAAK,GACLwO,IAGF,OAAOA,EAQT,SAASC,EAAiB5B,GACxB,IAAIG,EAAMH,EAAI6B,WAEVC,EAAS3B,EAAIpG,QAAQ,KAEzB,GAAI+H,EAAS,EAAG,CACd,IAAIb,GAAad,EAAIhC,MAAM2D,EAAS,GACpC,OAAOb,EAAY,GAAKA,EAAY,EAEpC,IAAIc,EAAW5B,EAAIpG,QAAQ,KAC3B,OAAOgI,EAAW,EAAI,EAAI5B,EAAItB,OAAS,EAAIkD,EAY/C,SAASC,EAAkBC,EAAYC,GACrC,IAAIC,EAAMnW,KAAKmW,IACXC,EAAOpW,KAAKoW,KACZC,EAAerW,KAAKsW,MAAMH,EAAIF,EAAW,GAAKA,EAAW,IAAMG,GAC/DG,EAAevW,KAAKgV,MAAMmB,EAAInW,KAAKqQ,IAAI6F,EAAY,GAAKA,EAAY,KAAOE,GAE3EnB,EAAYjV,KAAKG,IAAIH,KAAKC,KAAKoW,EAAeE,EAAc,GAAI,IACpE,OAAQC,SAASvB,GAAkBA,EAAL,GAehC,SAASwB,EAAwBC,EAAWC,EAAK1B,GAC/C,IAAKyB,EAAUC,GACb,OAAO,EAGT,IAAIC,EAAMxY,EAAOyY,OAAOH,GAAW,SAAUI,EAAK9C,GAChD,OAAO8C,GAAOpB,MAAM1B,GAAO,EAAIA,KAC9B,GAEH,GAAY,IAAR4C,EACF,OAAO,EAGT,IAAIG,EAAS/W,KAAKgX,IAAI,GAAI/B,GACtBgC,EAAgB7Y,EAAOqT,IAAIiF,GAAW,SAAU1C,GAClD,OAAQ0B,MAAM1B,GAAO,EAAIA,GAAO4C,EAAMG,EAAS,OAE7CG,EAAuB,IAATH,EACdI,EAAQ/Y,EAAOqT,IAAIwF,GAAe,SAAUG,GAE9C,OAAOpX,KAAKsW,MAAMc,MAEhBC,EAAajZ,EAAOyY,OAAOM,GAAO,SAAUL,EAAK9C,GACnD,OAAO8C,EAAM9C,IACZ,GACCsD,EAAYlZ,EAAOqT,IAAIwF,GAAe,SAAUG,EAAOT,GACzD,OAAOS,EAAQD,EAAMR,MAGvB,MAAOU,EAAaH,EAAa,CAK/B,IAHA,IAAIjX,EAAMsX,OAAOC,kBACbC,EAAQ,KAEH9E,EAAI,EAAG+E,EAAMJ,EAAUzE,OAAQF,EAAI+E,IAAO/E,EAC7C2E,EAAU3E,GAAK1S,IACjBA,EAAMqX,EAAU3E,GAChB8E,EAAQ9E,KAKVwE,EAAMM,GACRH,EAAUG,GAAS,IACjBJ,EAGJ,OAAOF,EAAMR,GAAOI,EAItB,IAAIY,EAAmB,iBAOvB,SAASC,EAAUC,GACjB,IAAIC,EAAgB,EAAV9X,KAAKgL,GACf,OAAQ6M,EAASC,EAAMA,GAAOA,EAQhC,SAASC,EAAmB/D,GAC1B,OAAOA,GAAOC,GAAkBD,EAAMC,EAKxC,IAAI+D,EAAW,oIAoBf,SAASC,EAAUC,GACjB,GAAIA,aAAiBC,KACnB,OAAOD,EACF,GAAqB,kBAAVA,EAAoB,CAMpC,IAAIrD,EAAQmD,EAASI,KAAKF,GAE1B,IAAKrD,EAEH,OAAO,IAAIsD,KAAKpD,KAIlB,GAAKF,EAAM,GAWN,CACD,IAAIwD,GAAQxD,EAAM,IAAM,EAMxB,MAJ+B,MAA3BA,EAAM,GAAGyD,gBACXD,GAAQxD,EAAM,GAAG1C,MAAM,EAAG,IAGrB,IAAIgG,KAAKA,KAAKI,KAAK1D,EAAM,KAAMA,EAAM,IAAM,GAAK,GAAIA,EAAM,IAAM,EAAGwD,IAAQxD,EAAM,IAAM,IAAKA,EAAM,IAAM,GAAIA,EAAM,IAAM,IAfjI,OAAO,IAAIsD,MAAMtD,EAAM,KAAMA,EAAM,IAAM,GAAK,GAAIA,EAAM,IAAM,GAAIA,EAAM,IAAM,IAAKA,EAAM,IAAM,IAAKA,EAAM,IAAM,GAAIA,EAAM,IAAM,GAiB7H,OAAa,MAATqD,EACF,IAAIC,KAAKpD,KAGX,IAAIoD,KAAKnY,KAAKgV,MAAMkD,IAU7B,SAASM,EAASxE,GAChB,OAAOhU,KAAKgX,IAAI,GAAIyB,EAAiBzE,IAWvC,SAASyE,EAAiBzE,GACxB,GAAY,IAARA,EACF,OAAO,EAGT,IAAI0E,EAAM1Y,KAAKsW,MAAMtW,KAAKmW,IAAInC,GAAOhU,KAAKoW,MAW1C,OAJIpC,EAAMhU,KAAKgX,IAAI,GAAI0B,IAAQ,IAC7BA,IAGKA,EAeT,SAASC,EAAK3E,EAAKgB,GACjB,IAII4D,EAJAC,EAAWJ,EAAiBzE,GAC5B8E,EAAQ9Y,KAAKgX,IAAI,GAAI6B,GACrBE,EAAI/E,EAAM8E,EAiCd,OA3BIF,EAFA5D,EACE+D,EAAI,IACD,EACIA,EAAI,IACR,EACIA,EAAI,EACR,EACIA,EAAI,EACR,EAEA,GAGHA,EAAI,EACD,EACIA,EAAI,EACR,EACIA,EAAI,EACR,EACIA,EAAI,EACR,EAEA,GAIT/E,EAAM4E,EAAKE,EAGJD,IAAa,IAAM7E,EAAImB,QAAQ0D,EAAW,GAAKA,EAAW,GAAK7E,EAUxE,SAASgF,EAASC,EAAQnG,GACxB,IAAIoG,GAAKD,EAAOpG,OAAS,GAAKC,EAAI,EAC9BqG,EAAInZ,KAAKsW,MAAM4C,GACfE,GAAKH,EAAOE,EAAI,GAChBhS,EAAI+R,EAAIC,EACZ,OAAOhS,EAAIiS,EAAIjS,GAAK8R,EAAOE,GAAKC,GAAKA,EA0BvC,SAASC,EAAgBC,GACvBA,EAAKhE,MAAK,SAAUC,EAAGC,GACrB,OAAO+D,EAAWhE,EAAGC,EAAG,IAAM,EAAI,KAKpC,IAHA,IAAIgE,GAAQC,IACRC,EAAY,EAEP/G,EAAI,EAAGA,EAAI2G,EAAKzG,QAAS,CAIhC,IAHA,IAAI8G,EAAWL,EAAK3G,GAAGgH,SACnBC,EAAQN,EAAK3G,GAAGiH,MAEXC,EAAK,EAAGA,EAAK,EAAGA,IACnBF,EAASE,IAAOL,IAClBG,EAASE,GAAML,EACfI,EAAMC,GAAOA,EAAqB,EAAhB,EAAIH,GAGxBF,EAAOG,EAASE,GAChBH,EAAYE,EAAMC,GAGhBF,EAAS,KAAOA,EAAS,IAAMC,EAAM,GAAKA,EAAM,KAAO,EACzDN,EAAKQ,OAAOnH,EAAG,GAEfA,IAIJ,OAAO2G,EAEP,SAASC,EAAWhE,EAAGC,EAAGqE,GACxB,OAAOtE,EAAEoE,SAASE,GAAMrE,EAAEmE,SAASE,IAAOtE,EAAEoE,SAASE,KAAQrE,EAAEmE,SAASE,KAAQtE,EAAEqE,MAAMC,GAAMrE,EAAEoE,MAAMC,MAAUA,GAAU,EAAL,KAAYA,GAAMN,EAAWhE,EAAGC,EAAG,KAa5J,SAASuE,EAAUX,GACjB,OAAOA,EAAItE,WAAWsE,IAAM,EAG9Bxa,EAAQwV,UAAYA,EACpBxV,EAAQ8V,aAAeA,EACvB9V,EAAQoW,MAAQA,EAChBpW,EAAQwW,IAAMA,EACdxW,EAAQ6W,aAAeA,EACvB7W,EAAQgX,iBAAmBA,EAC3BhX,EAAQoX,kBAAoBA,EAC5BpX,EAAQ6X,wBAA0BA,EAClC7X,EAAQ+Y,iBAAmBA,EAC3B/Y,EAAQgZ,UAAYA,EACpBhZ,EAAQmZ,mBAAqBA,EAC7BnZ,EAAQqZ,UAAYA,EACpBrZ,EAAQ4Z,SAAWA,EACnB5Z,EAAQ6Z,iBAAmBA,EAC3B7Z,EAAQ+Z,KAAOA,EACf/Z,EAAQoa,SAAWA,EACnBpa,EAAQya,gBAAkBA,EAC1Bza,EAAQmb,UAAYA,G,uBCrjBpB,IAAIC,EAAU,EAAQ,QAIlB5b,GAFU4b,EAAQC,QAET,EAAQ,SAoBjBC,EAAiB,IACjBC,EAAe,iCAMnB,SAASC,EAAeC,GACtB,IAAIC,EAAM,CACRC,KAAM,GACNC,IAAK,IASP,OANIH,IACFA,EAAgBA,EAAcI,MAAMP,GACpCI,EAAIC,KAAOF,EAAc,IAAM,GAC/BC,EAAIE,IAAMH,EAAc,IAAM,IAGzBC,EAOT,SAASI,EAAeL,GACtBjc,EAAOuc,OAAO,qCAAqCC,KAAKP,GAAgB,kBAAoBA,EAAgB,aAO9G,SAASQ,EAAkBC,EAAWC,GACpCD,EAAUE,aAAeF,EAEzBA,EAAU7Z,OAAS,SAAUga,GAC3B,IAAIC,EAAa7T,KAEb8T,EAAgB,WACbF,EAAMD,aAGTC,EAAMD,aAAaI,MAAM/T,KAAMgU,WAF/BH,EAAWE,MAAM/T,KAAMgU,YAY3B,OANAjd,EAAO6C,OAAOka,EAAcG,UAAWL,GACvCE,EAAcla,OAASoG,KAAKpG,OAC5Bka,EAAcI,UAAYA,EAC1BJ,EAAcK,WAAaA,EAC3Bpd,EAAOqd,SAASN,EAAe9T,MAC/B8T,EAAcD,WAAaA,EACpBC,GAIX,IAAIO,EAAY,EAOhB,SAASC,EAAiBC,GACxB,IAAIC,EAAY,CAAC,aAAcH,IAAa1b,KAAK8b,SAAS3G,QAAQ,IAAI/G,KAAK,KAC3EwN,EAAIN,UAAUO,IAAa,EAE3BD,EAAIG,WAAa,SAAU5K,GACzB,SAAUA,IAAOA,EAAI0K,KAUzB,SAASN,EAAUS,EAASC,GAC1B,IAAIC,EAAO9d,EAAO+T,MAAMkJ,UAAW,GACnC,OAAOhU,KAAK6T,WAAWI,UAAUW,GAAYb,MAAMY,EAASE,GAG9D,SAASV,EAAWQ,EAASC,EAAYC,GACvC,OAAO7U,KAAK6T,WAAWI,UAAUW,GAAYb,MAAMY,EAASE,GAU9D,SAASC,EAAsBC,EAAQC,GACrCA,EAAUA,GAAW,GAUrB,IAAIC,EAAU,GAgFd,SAASC,EAAclC,GACrB,IAAImC,EAAYF,EAAQjC,EAAcE,MAOtC,OALKiC,GAAcA,EAAUrC,KAC3BqC,EAAYF,EAAQjC,EAAcE,MAAQ,GAC1CiC,EAAUrC,IAAgB,GAGrBqC,EAGT,GAzFAJ,EAAOK,cAAgB,SAAUC,EAAOrC,GACtC,GAAIA,EAIF,GAHAK,EAAeL,GACfA,EAAgBD,EAAeC,GAE1BA,EAAcG,KAEZ,GAAIH,EAAcG,MAAQL,EAAc,CAC7C,IAAIqC,EAAYD,EAAclC,GAC9BmC,EAAUnC,EAAcG,KAAOkC,QAH/BJ,EAAQjC,EAAcE,MAAQmC,EAOlC,OAAOA,GAGTN,EAAOO,SAAW,SAAUC,EAAmBC,EAASC,GACtD,IAAIJ,EAAQJ,EAAQM,GAMpB,GAJIF,GAASA,EAAMvC,KACjBuC,EAAQG,EAAUH,EAAMG,GAAW,MAGjCC,IAAsBJ,EACxB,MAAM,IAAIK,MAAOF,EAAkE,aAAeD,EAAoB,KAAOC,GAAW,IAAM,8BAAnHD,gCAG7B,OAAOF,GAGTN,EAAOY,qBAAuB,SAAU3C,GACtCA,EAAgBD,EAAeC,GAC/B,IAAI4C,EAAS,GACT9L,EAAMmL,EAAQjC,EAAcE,MAUhC,OARIpJ,GAAOA,EAAIgJ,GACb/b,EAAO8e,KAAK/L,GAAK,SAAUgM,EAAG3X,GAC5BA,IAAS2U,GAAgB8C,EAAOG,KAAKD,MAGvCF,EAAOG,KAAKjM,GAGP8L,GAGTb,EAAOiB,SAAW,SAAUhD,GAG1B,OADAA,EAAgBD,EAAeC,KACtBiC,EAAQjC,EAAcE,OAOjC6B,EAAOkB,qBAAuB,WAC5B,IAAIC,EAAQ,GAIZ,OAHAnf,EAAO8e,KAAKZ,GAAS,SAAUnL,EAAK3L,GAClC+X,EAAMH,KAAK5X,MAEN+X,GASTnB,EAAOoB,YAAc,SAAUnD,GAC7BA,EAAgBD,EAAeC,GAC/B,IAAIlJ,EAAMmL,EAAQjC,EAAcE,MAChC,OAAOpJ,GAAOA,EAAIgJ,IAGpBiC,EAAOhC,eAAiBA,EAapBiC,EAAQoB,mBAAoB,CAC9B,IAAIC,EAAiBtB,EAAOnb,OAExByc,IACFtB,EAAOnb,OAAS,SAAUga,GACxB,IAAIE,EAAgBuC,EAAeC,KAAKtW,KAAM4T,GAC9C,OAAOmB,EAAOK,cAActB,EAAeF,EAAMzV,QAKvD,OAAO4W,EAOT,SAASwB,EAAYzM,EAAK0M,IAgB1Bjf,EAAQwb,eAAiBA,EACzBxb,EAAQic,kBAAoBA,EAC5Bjc,EAAQ+c,iBAAmBA,EAC3B/c,EAAQud,sBAAwBA,EAChCvd,EAAQgf,YAAcA,G,uBCpQtB,IAAIE,EAAQ,EAAQ,QAEhBZ,EAAOY,EAAMZ,KACbzL,EAAMqM,EAAMrM,IACZjI,EAAasU,EAAMtU,WACnB1F,EAAgBga,EAAMha,cACtBia,EAAOD,EAAMC,KAEbC,EAAQ,EAAQ,QAEhBC,EAAaD,EAAMC,WAEnBC,EAAa,EAAQ,QAErBC,EAASD,EAAWC,OAEpBC,EAAc,EAAQ,QAEtBC,EAAe,EAAQ,QAEvBC,EAAS,EAAQ,QAEjBC,EAAmBD,EAAOC,iBA4B9B,SAASC,EAAUC,EAAYC,EAAKC,EAAuBC,GACzDvX,KAAKoX,WAAaA,EAClBpX,KAAKqX,IAAMA,EACXrX,KAAKwX,WAKDF,EAAwBtX,KAAKyX,uBAAyBH,EAAsBxM,QAC5EyM,EAAiBvX,KAAK0X,gBAAkBH,EAAezM,QAC3D9K,KAAK2X,aAAeL,EAAsBM,OAAOL,GAajDvX,KAAK6X,cAAgBpb,IAGvB,IAAImX,EAAQuD,EAAUlD,UAmJtB,SAAS6D,EAAkBC,EAAWC,EAAejU,EAASkU,EAAS1W,GAErE,IAAIiW,EAqDJ,SAASU,EAAa3W,EAAK4W,GACzB,OAAO5W,EAAI6W,YAAc7W,EAAI8W,UAAY9W,EAAI8W,SAASxb,IAAIsb,EAAKG,WAAWC,KAvD5EhX,EAAMA,GAAO,GAEbsU,EAAKmC,GAAe,SAAUQ,EAAclJ,GAC1C,IAAI/N,EAAIkX,YAAclX,EAAIkX,aAAeD,EAAaC,WAAtD,CAIA,IAAIC,EAAqBX,EAAUF,cAAchb,IAAI2b,EAAaG,KAE9DC,EAAgBF,EAAmBE,cACnCC,EAAcH,EAAmBG,YAErC,GAAIA,EAAa,CACf,IAAIC,EACAC,EAAeF,EAAYE,aAC/BA,EAAalD,MAAK,SAAUmD,GACtBd,EAAa3W,EAAKyX,KACpBA,EAAKpa,QACLka,GAAmB,MAGvBA,GAAoBD,EAAYja,QAChCqa,EAAcJ,EAAaZ,GAC3B,IAAIiB,EAAcnB,EAAUoB,eAAeN,EAAatX,EAAI6X,OAK5DL,EAAalD,MAAK,SAAUmD,GAC1BA,EAAKK,QAAQH,MAEf1B,GAAcqB,EAAYQ,QAAQH,QACzBN,GACTA,EAAc/C,MAAK,SAAUsC,EAAMmB,GAC7BpB,EAAa3W,EAAK4W,IACpBA,EAAKvZ,QAGP,IAAIsa,EAAcnB,EAAUoB,eAAehB,EAAM5W,EAAI6X,OASrDF,EAAYK,MAAQf,EAAagB,kBAAoBzV,EAAQ0V,iBAAiBtB,EAAKxD,QAAQ+E,OAC3FT,EAAcd,EAAMF,GACpBT,GAAcW,EAAKkB,QAAQH,UASjCnB,EAAUP,YAAcA,EAxM1B5D,EAAM+F,YAAc,SAAU5V,EAASkU,GAiBrClU,EAAQ4V,YAAY1B,GAQpBjY,KAAK6X,cAAchC,MAAK,SAAU+D,GAChC,IAAIf,EAAce,EAAWf,YAC7BA,GAAeA,EAAYja,YAK/BgV,EAAMuF,eAAiB,SAAUhB,EAAMxT,GAErC,GAAKwT,EAAKG,WAAV,CAIA,IAAIuB,EAAW7Z,KAAK8Z,aAAajd,IAAIsb,EAAKG,WAAWC,IAEjDwB,EAAOF,EAASlF,QAChBqF,GAAerV,GAAWkV,EAASI,sBAAwBF,GAAQA,EAAKG,oBAAsB/B,EAAKgC,gBAAkBN,EAASO,WAC9HC,EAAOL,EAAcH,EAASQ,KAAO,KACrCC,EAAeP,GAAQA,EAAKO,aAC5BC,EAAwB,MAAhBD,EAAuB3hB,KAAK6hB,KAAKF,EAAeD,GAAQ,KACpE,MAAO,CACLA,KAAMA,EACNE,MAAOA,EACPD,aAAcA,KAIlB1G,EAAM6G,YAAc,SAAUnB,GAC5B,OAAOtZ,KAAK8Z,aAAajd,IAAIyc,IAW/B1F,EAAM8G,kBAAoB,SAAUC,EAAaC,GAC/C,IAAIf,EAAW7Z,KAAK8Z,aAAajd,IAAI8d,EAAYhC,KAE7CkC,EAAOF,EAAYG,UACnBC,EAAUF,EAAKvM,QAMf4L,EAAoBL,EAASI,oBAAsBW,EAAKI,0BAA4BD,GAAWlB,EAASoB,UACxGC,EAAQP,EAAY9d,IAAI,UAAYke,GAAWJ,EAAY9d,IAAI,kBAG/Dyd,EAA2D,QAA5CK,EAAY9d,IAAI,wBAAoCke,EAAU,KACjFJ,EAAYQ,gBAAkBtB,EAASlF,QAAU,CAC/CuF,kBAAmBA,EACnBI,aAAcA,EACdY,MAAOA,IAIXtH,EAAMwH,iBAAmB,SAAUrX,GACjC,IAAIgU,EAAY/X,KACZqb,EAActD,EAAU+B,aAAerd,IAC3CsH,EAAQuX,YAAW,SAAUX,GAC3B,IAAIY,EAAcZ,EAAYa,iBAC1BlC,EAAaqB,EAAYhC,IAC7B0C,EAAYte,IAAIuc,EAAY,CAC1Bf,GAAIe,EACJmC,KAAM,KACNC,KAAM,KACNT,UAAWN,EAAYgB,0BACvB1B,mBAAoBsB,KAAiBZ,EAAYiB,oBAAsBjB,EAAYiB,sBACnFxB,YAAa,EACbC,KAAM1hB,KAAKgV,MAAM4N,GAAe,KAChCjN,MAAO,IAETuN,EAAK9D,EAAW4C,EAAaA,EAAYmB,cAI7ClI,EAAMmI,kBAAoB,WACxB,IAAIC,EAAehc,KAAK6X,cACpB9T,EAAU/D,KAAKoX,WAAW/S,WAC1BgT,EAAMrX,KAAKqX,IACfxB,EAAK7V,KAAK2X,cAAc,SAAUsE,GAChC,IAAIC,EAASF,EAAanf,IAAIof,EAAQtD,MAAQqD,EAAajf,IAAIkf,EAAQtD,IAAK,IAC5EsD,EAAQE,OAASC,EAAsBpc,KAAMic,EAASC,EAAQnY,EAASsT,GACvE4E,EAAQI,cAAgBC,EAAuBtc,KAAMic,EAASC,EAAQnY,EAASsT,KAC9ErX,OAGL4T,EAAM2I,YAAc,SAAU3B,EAAMlB,EAAO3V,EAASsT,GAClD,IAAImF,EAAa5B,EAAK4B,WAClB7H,EAAU6H,EAAW7H,QACzBA,EAAQ+E,MAAQA,EAChB/E,EAAQ5Q,QAAUA,EAClB4Q,EAAQ0C,IAAMA,EACdmF,EAAWC,SAAW7B,EAAKI,yBAC3Ba,EAAK7b,KAAM0Z,EAAO8C,IAGpB5I,EAAM8I,0BAA4B,SAAU3Y,EAASkU,GAEnDH,EAAkB9X,KAAMA,KAAKyX,uBAAwB1T,EAASkU,EAAS,CACrEmB,OAAO,KAOXxF,EAAM+I,mBAAqB,SAAU5Y,EAASkU,EAAS1W,GACrDuW,EAAkB9X,KAAMA,KAAK0X,gBAAiB3T,EAASkU,EAAS1W,IAiElEqS,EAAMgJ,mBAAqB,SAAU7Y,GACnC,IAAIyT,EACJzT,EAAQuX,YAAW,SAAUX,GAE3BnD,GAAcmD,EAAYmB,SAASzC,aAErCrZ,KAAKwX,YAAcA,GAGrB5D,EAAMiJ,KAAO,WAEX7c,KAAK8Z,aAAajE,MAAK,SAAUgE,GAC/B,IAAI1B,EAAO0B,EAAS6B,KAEpB,EAAG,CACD,GAAIvD,EAAKsE,QAAS,CAChB5C,EAASO,WAAajC,EAAKgC,gBAC3B,MAGFhC,EAAOA,EAAK2E,oBACL3E,OAIb,IAAIc,EAAgBrF,EAAMqF,cAAgB,SAAUd,EAAMF,GAC5C,WAAZA,IAAyBE,EAAKxD,QAAQsD,QAAUA,IAGlD,SAASmE,EAAsBrE,EAAWS,EAAcE,EAAoB3U,EAASsT,GACnF,IAAIuB,EAAgBF,EAAmBE,gBAAkBF,EAAmBE,cAAgBnc,KACxFsgB,EAAavE,EAAauE,WAC1BC,EAAkBxE,EAAawE,gBAYnC,SAASC,EAAOtC,GACd,IAAIrB,EAAaqB,EAAYhC,IAGzBR,EAAOS,EAAc/b,IAAIyc,IAAeV,EAAc7b,IAAIuc,EAAY1C,EAAW,CACnFiG,KAAMK,EACNf,MAAOgB,EACP7O,MAAO8O,KAETjF,EAAKxD,QAAU,CACb+E,MAAOiB,EACP5W,QAASA,EACTsT,IAAKA,EACLgG,eAAgB7E,EAAa8E,WAAa9E,EAAa+E,SACvDV,KAAMrE,EAAaqE,KACnBV,MAAO3D,EAAa2D,MACpBpE,UAAWA,GAEb8D,EAAK9D,EAAW4C,EAAaxC,GA1B3BK,EAAagF,kBACfzZ,EAAQ0Z,cAAcR,GACbF,EACThZ,EAAQ2Z,oBAAoBX,EAAYE,GAC/BD,GACTA,EAAgBjZ,EAASsT,GAAKxB,KAAKoH,GAyBrC,IAAI5B,EAActD,EAAU+B,aAC5BlB,EAAc/C,MAAK,SAAUsC,EAAMmB,GAC5B+B,EAAYxe,IAAIyc,KACnBnB,EAAKwF,UACL/E,EAAcgF,UAAUtE,OAK9B,SAASgD,EAAuBvE,EAAWS,EAAcE,EAAoB3U,EAASsT,GACpF,IAAIwB,EAAcH,EAAmBG,YAAcH,EAAmBG,aACnEjC,EAAW,CACZuF,MAAO0B,IAEThF,EAAYlE,QAAU,CACpB5Q,QAASA,EACTsT,IAAKA,EACLgF,aAAc7D,EAAa6D,aAC3BtE,UAAWA,GAGb,IAAIgB,EAAeF,EAAYE,aAAeF,EAAYE,cAAgBtc,IACtEsgB,EAAavE,EAAauE,WAC1BC,EAAkBxE,EAAawE,gBAC/Bc,GAAkB,EAClBC,EAAkBvF,EAAauF,gBAkBnC,SAASC,EAAWrD,GAClB,IAAIrB,EAAaqB,EAAYhC,IACzBK,EAAOD,EAAalc,IAAIyc,GAEvBN,IACHA,EAAOD,EAAahc,IAAIuc,EAAY1C,EAAW,CAC7CuF,MAAO8B,EACPC,QAASC,KAIXtF,EAAYja,SAGdoa,EAAKrE,QAAU,CACb+E,MAAOiB,EACPmD,gBAAiBA,EACjBC,gBAAiBA,GAEnB/E,EAAKoF,MAAQvF,EACbG,EAAKyD,QAAUqB,EACfjC,EAAK9D,EAAW4C,EAAa3B,GAlC3B+D,EACFhZ,EAAQ2Z,oBAAoBX,EAAYiB,GAC/BhB,EACTA,EAAgBjZ,EAASsT,GAAKxB,KAAKmI,IAMjCF,GAAkB,EAClBjI,EAAK9R,EAAQsa,YAAaL,IA4B9B,IAAI3C,EAActD,EAAU+B,aAC5Bf,EAAalD,MAAK,SAAUmD,EAAMM,GAC3B+B,EAAYxe,IAAIyc,KACnBN,EAAK2E,UAGL9E,EAAYja,QACZma,EAAa6E,UAAUtE,OAK7B,SAASuE,EAAiBlJ,GACxBA,EAAQ0H,aAAa1H,EAAQ5Q,QAAS4Q,EAAQ0C,IAAK1C,EAAQsD,SAG7D,SAASgG,EAAUtJ,EAAS2J,GAC1B,OAAO3J,EAAQmJ,iBAAmBS,EAGpC,SAASA,IACPve,KAAKoe,MAAMxf,QACXoB,KAAKwe,gBAAgB5f,QAGvB,SAASuf,IACPne,KAAKoe,OAASpe,KAAKoe,MAAMxf,QAG3B,SAASse,EAAevI,GACtB,OAAOA,EAAQkI,MAAQlI,EAAQkI,KAAKlI,EAAQ+E,MAAO/E,EAAQ5Q,QAAS4Q,EAAQ0C,IAAK1C,EAAQsD,SAG3F,SAASkF,EAAgBxI,GACnBA,EAAQ0I,gBACV1I,EAAQkG,KAAK4D,iBAGf,IAAIC,EAAe/J,EAAQ+J,aAAexH,EAAiBvC,EAAQwH,MAAMxH,EAAQ+E,MAAO/E,EAAQ5Q,QAAS4Q,EAAQ0C,IAAK1C,EAAQsD,UAC9H,OAAOyG,EAAalT,OAAS,EAAIpB,EAAIsU,GAAc,SAAU3M,EAAGzC,GAC9D,OAAOqP,EAAuBrP,MAC3BsP,EAGP,IAAIA,EAA2BD,EAAuB,GAEtD,SAASA,EAAuBE,GAC9B,OAAO,SAAUC,EAAQnK,GACvB,IAAIkG,EAAOlG,EAAQkG,KACfkE,EAAcpK,EAAQ+J,aAAaG,GAEvC,GAAIE,GAAeA,EAAYC,SAC7B,IAAK,IAAI1T,EAAIwT,EAAOG,MAAO3T,EAAIwT,EAAOI,IAAK5T,IACzCyT,EAAYC,SAASnE,EAAMvP,QAEpByT,GAAeA,EAAYI,UACpCJ,EAAYI,SAASL,EAAQjE,IAKnC,SAASuC,EAAgBzI,GACvB,OAAOA,EAAQkG,KAAKvM,QAGtB,SAASuN,EAAK9D,EAAW4C,EAAaxC,GACpC,IAAImB,EAAaqB,EAAYhC,IAEzBkB,EAAW9B,EAAU+B,aAAajd,IAAIyc,IAEzCO,EAAS4B,OAAS5B,EAAS4B,KAAOtD,GACnC0B,EAAS6B,MAAQ7B,EAAS6B,KAAKG,KAAK1D,GACpC0B,EAAS6B,KAAOvD,EAChBA,EAAKgC,gBAAkBN,EAASvL,QAChC6J,EAAKG,WAAauB,EAwBpB,SAASuF,EAAiBC,GACxBtC,EAAa,KAEb,IAEEsC,EAAWC,EAAaC,GACxB,MAAOzf,IAET,OAAOid,EA7BT5F,EAAUqI,iBAAmB,SAAUhH,EAAcC,GAUnD,OATItW,EAAWqW,KACbA,EAAe,CACb6D,aAAc7D,EACduE,WAAYqC,EAAiB5G,KAIjCA,EAAaG,IAAM7B,EAAO,gBAC1B2B,IAAeD,EAAaC,WAAaA,GAClCD,GAsBT,IAEIuE,EAFAuC,EAAc,GACdC,EAAU,GAed,SAASE,EAAYtX,EAAQoM,GAE3B,IAAK,IAAIta,KAAQsa,EAAIN,UAEnB9L,EAAOlO,GAAQyc,EAjBnB+I,EAAYH,EAAavI,GACzB0I,EAAYF,EAASvI,GAErBsI,EAAYI,iBAAmBJ,EAAY5B,oBAAsB,SAAUvf,GACzE4e,EAAa5e,GAGfmhB,EAAYK,cAAgB,SAAUC,GACd,WAAlBA,EAAKC,UAAyBD,EAAKpK,UACrCuH,EAAa6C,EAAKpK,UActB,IAAIsK,EAAW3I,EACf4I,EAAOxoB,QAAUuoB,G,uBC3iBjB,IAAIrJ,EAAQ,EAAQ,QAEhBtU,EAAasU,EAAMtU,WAoBvB,SAAS2d,EAAS/C,EAAYiD,EAAmBC,GAE/C,MAAO,CACLlD,WAAYA,EAEZvD,kBAAkB,EAClB2C,MAAO,SAAUxB,EAAa5W,EAASsT,GACrC,IAAIwD,EAAOF,EAAYG,UACnBoF,EAAavF,EAAY9d,IAAI,UAC7BsjB,EAAaxF,EAAY9d,IAAI,cAC7BujB,EAAazF,EAAY9d,IAAI,oBAC7BwjB,EAAe1F,EAAY9d,IAAI,gBAC/ByjB,EAAwBne,EAAW+d,GACnCK,EAAwBpe,EAAWge,GACnCK,EAA0Bre,EAAWke,GACrCI,EAAcH,GAAyBC,GAAyBC,EAChEE,GAAgBJ,GAAyBJ,EAAaA,EAAaF,EACnEW,EAAoBJ,EAAqC,KAAbJ,EAchD,GAZAtF,EAAK+F,UAAU,CACbX,aAAcA,GAAgBS,EAK9BG,OAAQH,EACRP,WAAYQ,EACZG,iBAAkBV,EAClBC,aAAcA,KAGZtc,EAAQ0V,iBAAiBkB,GAuC7B,MAAO,CACLqE,SAAUnE,EAAKkG,eAAiBN,EAAczB,EAAW,MApC3D,SAASA,EAASnE,EAAMvL,GACtB,GAAImR,EAAa,CACf,IAAIO,EAAWrG,EAAYsG,YAAY3R,GACnCwP,EAASnE,EAAYuG,cAAc5R,GACvCgR,GAAyBzF,EAAKsG,cAAc7R,EAAK,SAAU4Q,EAAWc,EAAUlC,IAChFyB,GAAyB1F,EAAKsG,cAAc7R,EAAK,aAAc6Q,EAAWa,EAAUlC,IACpF0B,GAA2B3F,EAAKsG,cAAc7R,EAAK,eAAgB+Q,EAAaW,EAAUlC,IAG5F,GAAIjE,EAAKkG,cAAe,CACtB,IAAIK,EAAYvG,EAAKwG,aAAa/R,GAC9BgS,EAAiBF,EAAUpf,WAAW,UAAU,GAChDuf,EAAiBH,EAAUpf,WAAW,cAAc,GACpDwf,EAAmBJ,EAAUpf,WAAW,gBAAgB,GACxDyf,EAAuBL,EAAUpf,WAAW,oBAAoB,GAE9C,MAAlBsf,GACFzG,EAAKsG,cAAc7R,EAAK,SAAUgS,GAGd,MAAlBC,GAEF1G,EAAKsG,cAAc7R,EAAK,aAAciS,GAGhB,MAApBC,GACF3G,EAAKsG,cAAc7R,EAAK,eAAgBkS,GAGd,MAAxBC,GACF5G,EAAKsG,cAAc7R,EAAK,mBAAoBmS,OAYxD1B,EAAOxoB,QAAUuoB,G,qBCjFjB,IAAI4B,EAAgB,2BAChBC,EAAO,mBACPC,EAAgB,mBAWpB,SAASC,EAASC,EAAIC,EAAOC,GAC3B,IAAIC,EAIAC,EACAC,EACAtN,EACAuN,EANAC,EAAW,EACXC,EAAW,EACXC,EAAQ,KAOZ,SAASxR,IACPuR,GAAW,IAAIxR,MAAO0R,UACtBD,EAAQ,KACRT,EAAG/N,MAAMoO,EAAOtN,GAAQ,IAL1BkN,EAAQA,GAAS,EAQjB,IAAI1a,EAAK,WACP4a,GAAW,IAAInR,MAAO0R,UACtBL,EAAQniB,KACR6U,EAAOb,UACP,IAAIyO,EAAYL,GAAoBL,EAChCW,EAAeN,GAAoBJ,EACvCI,EAAmB,KACnBF,EAAOD,GAAYS,EAAeL,EAAWC,GAAYG,EACzDE,aAAaJ,GASTG,EACFH,EAAQK,WAAW7R,EAAM0R,GAErBP,GAAQ,EACVnR,IAEAwR,EAAQK,WAAW7R,GAAOmR,GAI9BG,EAAWJ,GAuBb,OAfA5a,EAAGwb,MAAQ,WACLN,IACFI,aAAaJ,GACbA,EAAQ,OAQZlb,EAAG+a,iBAAmB,SAAUU,GAC9BV,EAAmBU,GAGdzb,EA+BT,SAAS0b,EAAejZ,EAAKkZ,EAAQC,EAAMC,GACzC,IAAIpB,EAAKhY,EAAIkZ,GAEb,GAAKlB,EAAL,CAIA,IAAIqB,EAAWrB,EAAGJ,IAAkBI,EAChCsB,EAAmBtB,EAAGF,GACtByB,EAAWvB,EAAGH,GAElB,GAAI0B,IAAaJ,GAAQG,IAAqBF,EAAc,CAC1D,GAAY,MAARD,IAAiBC,EACnB,OAAOpZ,EAAIkZ,GAAUG,EAGvBrB,EAAKhY,EAAIkZ,GAAUnB,EAASsB,EAAUF,EAAuB,aAAjBC,GAC5CpB,EAAGJ,GAAiByB,EACpBrB,EAAGF,GAAiBsB,EACpBpB,EAAGH,GAAQsB,EAGb,OAAOnB,GAWT,SAASe,EAAM/Y,EAAKkZ,GAClB,IAAIlB,EAAKhY,EAAIkZ,GAETlB,GAAMA,EAAGJ,KACX5X,EAAIkZ,GAAUlB,EAAGJ,IAIrBnqB,EAAQsqB,SAAWA,EACnBtqB,EAAQwrB,eAAiBA,EACzBxrB,EAAQsrB,MAAQA,G,qBC5KhB,IAAI9rB,EAAS,EAAQ,QAEjBusB,EAAS,EAAQ,QAEjBvQ,EAAiBuQ,EAAOvQ,eAoBxBwQ,EAAO,EAOX,SAASzM,EAAO3Y,GAGd,MAAO,CAACA,GAAQ,GAAIolB,IAAQ5qB,KAAK8b,SAAS3G,QAAQ,IAAI/G,KAAK,KAO7D,SAASyc,EAAuBzO,GAC9B,IAAI0O,EAAoB,GAqBxB,OAnBA1O,EAAO2O,yBAA2B,SAAU1Q,EAAe2Q,GACzD3Q,EAAgBD,EAAeC,GAC/ByQ,EAAkBzQ,EAAcE,MAAQyQ,GAG1C5O,EAAO6O,iBAAmB,SAAU5Q,EAAe/O,GACjD,IAAI9F,EAAO8F,EAAO9F,KAElB,IAAKA,EAAM,CACT,IAAI0lB,EAAoB9Q,EAAeC,GAAeE,KAElD6B,EAAOoB,YAAYnD,IAAkByQ,EAAkBI,KACzD1lB,EAAOslB,EAAkBI,GAAmB5f,IAIhD,OAAO9F,GAGF4W,EAaT,SAAS+O,EAAwB/O,EAAQgP,GAqEvC,SAASC,EAAmBC,GAC1B,IAAIC,EAAQ,GACRC,EAAc,GAuBlB,OAtBAptB,EAAO8e,KAAKoO,GAAc,SAAUhqB,GAClC,IAAImqB,EAAWC,EAA0BH,EAAOjqB,GAC5CqqB,EAAeF,EAASE,aAAeP,EAAiB9pB,GACxDsqB,EAAgBC,EAAyBF,EAAcL,GAC3DG,EAASK,WAAaF,EAAc/Y,OAER,IAAxB4Y,EAASK,YACXN,EAAYpO,KAAK9b,GAGnBlD,EAAO8e,KAAK0O,GAAe,SAAUG,GAC/B3tB,EAAO2P,QAAQ0d,EAASO,YAAaD,GAAiB,GACxDN,EAASO,YAAY5O,KAAK2O,GAG5B,IAAIE,EAAWP,EAA0BH,EAAOQ,GAE5C3tB,EAAO2P,QAAQke,EAASC,UAAWH,GAAiB,GACtDE,EAASC,UAAU9O,KAAK9b,SAIvB,CACLiqB,MAAOA,EACPC,YAAaA,GAIjB,SAASE,EAA0BH,EAAOjqB,GAQxC,OAPKiqB,EAAMjqB,KACTiqB,EAAMjqB,GAAQ,CACZ0qB,YAAa,GACbE,UAAW,KAIRX,EAAMjqB,GAGf,SAASuqB,EAAyBF,EAAcL,GAC9C,IAAIM,EAAgB,GAIpB,OAHAxtB,EAAO8e,KAAKyO,GAAc,SAAUQ,GAClC/tB,EAAO2P,QAAQud,EAAca,IAAQ,GAAKP,EAAcxO,KAAK+O,MAExDP,EA3GTxP,EAAOgQ,kBAAoB,SAAUC,EAAgBf,EAAcgB,EAAUtQ,GAC3E,GAAKqQ,EAAexZ,OAApB,CAIA,IAAIoK,EAASoO,EAAmBC,GAC5BC,EAAQtO,EAAOsO,MACfgB,EAAQtP,EAAOuO,YACfgB,EAAgB,GACpBpuB,EAAO8e,KAAKmP,GAAgB,SAAU/qB,GACpCkrB,EAAclrB,IAAQ,KAGxB,MAAOirB,EAAM1Z,OAAQ,CACnB,IAAI4Z,EAAoBF,EAAMG,MAC1BC,EAAapB,EAAMkB,GACnBG,IAAsBJ,EAAcC,GAEpCG,IACFN,EAAS3O,KAAK3B,EAASyQ,EAAmBE,EAAWhB,aAAaxZ,gBAC3Dqa,EAAcC,IAGvBruB,EAAO8e,KAAKyP,EAAWT,UAAWU,EAAoBC,EAAmBC,GAG3E1uB,EAAO8e,KAAKsP,GAAe,WACzB,MAAM,IAAIzP,MAAM,mCAGlB,SAAS+P,EAAWC,GAClBxB,EAAMwB,GAAmBjB,aAEmB,IAAxCP,EAAMwB,GAAmBjB,YAC3BS,EAAMnP,KAAK2P,GAUf,SAASF,EAAiBE,GACxBP,EAAcO,IAAqB,EACnCD,EAAWC,KAiEjBnuB,EAAQuf,OAASA,EACjBvf,EAAQisB,uBAAyBA,EACjCjsB,EAAQusB,wBAA0BA,G,qBCtMlC,IAAI/sB,EAAS,EAAQ,QAEjB4uB,EAAU,EAAQ,QAElBptB,EAAe,EAAQ,QAEvBqtB,EAAQ,EAAQ,QAEhBC,EAAwBD,EAAMC,sBA0B9BC,EAAWH,EAAQjsB,YAAY,CACjCyE,KAAM,WACNhC,MAAO,CACLT,GAAI,EACJC,GAAI,EACJR,MAAO,EACPC,OAAQ,GAEV2qB,UAAW,SAAUvrB,EAAM2B,GACzB,IAAIT,EAAKS,EAAMT,GACXC,EAAKQ,EAAMR,GACXR,EAAQgB,EAAMhB,MAAQ,EACtBC,EAASe,EAAMf,OAAS,EAC5BZ,EAAKwrB,OAAOtqB,EAAIC,EAAKP,GACrBZ,EAAKyrB,OAAOvqB,EAAKP,EAAOQ,EAAKP,GAC7BZ,EAAKyrB,OAAOvqB,EAAKP,EAAOQ,EAAKP,GAC7BZ,EAAK0rB,eAQLC,EAAUR,EAAQjsB,YAAY,CAChCyE,KAAM,UACNhC,MAAO,CACLT,GAAI,EACJC,GAAI,EACJR,MAAO,EACPC,OAAQ,GAEV2qB,UAAW,SAAUvrB,EAAM2B,GACzB,IAAIT,EAAKS,EAAMT,GACXC,EAAKQ,EAAMR,GACXR,EAAQgB,EAAMhB,MAAQ,EACtBC,EAASe,EAAMf,OAAS,EAC5BZ,EAAKwrB,OAAOtqB,EAAIC,EAAKP,GACrBZ,EAAKyrB,OAAOvqB,EAAKP,EAAOQ,GACxBnB,EAAKyrB,OAAOvqB,EAAIC,EAAKP,GACrBZ,EAAKyrB,OAAOvqB,EAAKP,EAAOQ,GACxBnB,EAAK0rB,eAQLE,EAAMT,EAAQjsB,YAAY,CAC5ByE,KAAM,MACNhC,MAAO,CAELlB,EAAG,EACHC,EAAG,EACHC,MAAO,EACPC,OAAQ,GAEV2qB,UAAW,SAAUvrB,EAAM2B,GACzB,IAAIlB,EAAIkB,EAAMlB,EACVC,EAAIiB,EAAMjB,EACVmrB,EAAIlqB,EAAMhB,MAAQ,EAAI,EAEtB2W,EAAInZ,KAAKC,IAAIytB,EAAGlqB,EAAMf,QACtBkrB,EAAID,EAAI,EAERE,EAAKD,EAAIA,GAAKxU,EAAIwU,GAClB3qB,EAAKT,EAAI4W,EAAIwU,EAAIC,EACjBC,EAAQ7tB,KAAK8tB,KAAKF,EAAKD,GAEvBI,EAAK/tB,KAAKguB,IAAIH,GAASF,EACvBM,EAAOjuB,KAAKkuB,IAAIL,GAChBM,EAAOnuB,KAAKguB,IAAIH,GAChBO,EAAY,GAAJT,EACRU,EAAa,GAAJV,EACb9rB,EAAKwrB,OAAO/qB,EAAIyrB,EAAI/qB,EAAK4qB,GACzB/rB,EAAKysB,IAAIhsB,EAAGU,EAAI2qB,EAAG3tB,KAAKgL,GAAK6iB,EAAiB,EAAV7tB,KAAKgL,GAAS6iB,GAClDhsB,EAAK0sB,cAAcjsB,EAAIyrB,EAAKE,EAAOG,EAAOprB,EAAK4qB,EAAKO,EAAOC,EAAO9rB,EAAGC,EAAI8rB,EAAQ/rB,EAAGC,GACpFV,EAAK0sB,cAAcjsB,EAAGC,EAAI8rB,EAAQ/rB,EAAIyrB,EAAKE,EAAOG,EAAOprB,EAAK4qB,EAAKO,EAAOC,EAAO9rB,EAAIyrB,EAAI/qB,EAAK4qB,GAC9F/rB,EAAK0rB,eAQLiB,EAAQxB,EAAQjsB,YAAY,CAC9ByE,KAAM,QACNhC,MAAO,CACLlB,EAAG,EACHC,EAAG,EACHC,MAAO,EACPC,OAAQ,GAEV2qB,UAAW,SAAUqB,EAAKjrB,GACxB,IAAIf,EAASe,EAAMf,OACfD,EAAQgB,EAAMhB,MACdF,EAAIkB,EAAMlB,EACVC,EAAIiB,EAAMjB,EACVwrB,EAAKvrB,EAAQ,EAAI,EACrBisB,EAAIpB,OAAO/qB,EAAGC,GACdksB,EAAInB,OAAOhrB,EAAIyrB,EAAIxrB,EAAIE,GACvBgsB,EAAInB,OAAOhrB,EAAGC,EAAIE,EAAS,EAAI,GAC/BgsB,EAAInB,OAAOhrB,EAAIyrB,EAAIxrB,EAAIE,GACvBgsB,EAAInB,OAAOhrB,EAAGC,GACdksB,EAAIlB,eAQJmB,EAAc,CAChBC,KAAM3B,EAAQ1tB,KACdqC,KAAMqrB,EAAQ3tB,KACduvB,UAAW5B,EAAQ3tB,KACnBwvB,OAAQ7B,EAAQ3tB,KAChByvB,OAAQ9B,EAAQhuB,OAChB+vB,QAASvB,EACTwB,IAAKvB,EACLwB,MAAOT,EACPU,SAAU/B,GAERgC,EAAoB,CACtBR,KAAM,SAAUrsB,EAAGC,EAAGmrB,EAAGvU,EAAG3V,GAE1BA,EAAMsQ,GAAKxR,EACXkB,EAAMuQ,GAAKxR,EAAI4W,EAAI,EACnB3V,EAAMqO,GAAKvP,EAAIorB,EACflqB,EAAMsO,GAAKvP,EAAI4W,EAAI,GAErBxX,KAAM,SAAUW,EAAGC,EAAGmrB,EAAGvU,EAAG3V,GAC1BA,EAAMlB,EAAIA,EACVkB,EAAMjB,EAAIA,EACViB,EAAMhB,MAAQkrB,EACdlqB,EAAMf,OAAS0W,GAEjByV,UAAW,SAAUtsB,EAAGC,EAAGmrB,EAAGvU,EAAG3V,GAC/BA,EAAMlB,EAAIA,EACVkB,EAAMjB,EAAIA,EACViB,EAAMhB,MAAQkrB,EACdlqB,EAAMf,OAAS0W,EACf3V,EAAMmqB,EAAI3tB,KAAKG,IAAIutB,EAAGvU,GAAK,GAE7B0V,OAAQ,SAAUvsB,EAAGC,EAAGmrB,EAAGvU,EAAG3V,GAC5B,IAAI4rB,EAAOpvB,KAAKG,IAAIutB,EAAGvU,GACvB3V,EAAMlB,EAAIA,EACVkB,EAAMjB,EAAIA,EACViB,EAAMhB,MAAQ4sB,EACd5rB,EAAMf,OAAS2sB,GAEjBN,OAAQ,SAAUxsB,EAAGC,EAAGmrB,EAAGvU,EAAG3V,GAE5BA,EAAMT,GAAKT,EAAIorB,EAAI,EACnBlqB,EAAMR,GAAKT,EAAI4W,EAAI,EACnB3V,EAAMmqB,EAAI3tB,KAAKG,IAAIutB,EAAGvU,GAAK,GAE7B4V,QAAS,SAAUzsB,EAAGC,EAAGmrB,EAAGvU,EAAG3V,GAC7BA,EAAMT,GAAKT,EAAIorB,EAAI,EACnBlqB,EAAMR,GAAKT,EAAI4W,EAAI,EACnB3V,EAAMhB,MAAQkrB,EACdlqB,EAAMf,OAAS0W,GAEjB6V,IAAK,SAAU1sB,EAAGC,EAAGmrB,EAAGvU,EAAG3V,GACzBA,EAAMlB,EAAIA,EAAIorB,EAAI,EAClBlqB,EAAMjB,EAAIA,EAAI4W,EAAI,EAClB3V,EAAMhB,MAAQkrB,EACdlqB,EAAMf,OAAS0W,GAEjB8V,MAAO,SAAU3sB,EAAGC,EAAGmrB,EAAGvU,EAAG3V,GAC3BA,EAAMlB,EAAIA,EAAIorB,EAAI,EAClBlqB,EAAMjB,EAAIA,EAAI4W,EAAI,EAClB3V,EAAMhB,MAAQkrB,EACdlqB,EAAMf,OAAS0W,GAEjB+V,SAAU,SAAU5sB,EAAGC,EAAGmrB,EAAGvU,EAAG3V,GAC9BA,EAAMT,GAAKT,EAAIorB,EAAI,EACnBlqB,EAAMR,GAAKT,EAAI4W,EAAI,EACnB3V,EAAMhB,MAAQkrB,EACdlqB,EAAMf,OAAS0W,IAGfkW,EAAqB,GACzBjxB,EAAO8e,KAAKwR,GAAa,SAAUY,EAAMhuB,GACvC+tB,EAAmB/tB,GAAQ,IAAIguB,KAEjC,IAAIC,EAAYvC,EAAQjsB,YAAY,CAClCyE,KAAM,SACNhC,MAAO,CACL+jB,WAAY,GACZjlB,EAAG,EACHC,EAAG,EACHC,MAAO,EACPC,OAAQ,GAEVyqB,sBAAuB,SAAUsC,EAAKptB,EAAOT,GAC3C,IAAI8tB,EAAMvC,EAAsBsC,EAAKptB,EAAOT,GACxC6B,EAAQ6D,KAAK7D,MAMjB,OAJIA,GAA8B,QAArBA,EAAM+jB,YAA+C,WAAvBnlB,EAAMwI,eAC/C6kB,EAAIltB,EAAIZ,EAAKY,EAAkB,GAAdZ,EAAKc,QAGjBgtB,GAETrC,UAAW,SAAUqB,EAAKjrB,EAAOksB,GAC/B,IAAInI,EAAa/jB,EAAM+jB,WAEvB,GAAmB,SAAfA,EAAuB,CACzB,IAAIoI,EAAcN,EAAmB9H,GAEhCoI,IAEHpI,EAAa,OACboI,EAAcN,EAAmB9H,IAGnC4H,EAAkB5H,GAAY/jB,EAAMlB,EAAGkB,EAAMjB,EAAGiB,EAAMhB,MAAOgB,EAAMf,OAAQktB,EAAYnsB,OACvFmsB,EAAYvC,UAAUqB,EAAKkB,EAAYnsB,MAAOksB,OAKpD,SAASE,EAAmBrvB,EAAOsvB,GACjC,GAAkB,UAAdxoB,KAAK7B,KAAkB,CACzB,IAAIsqB,EAAczoB,KAAKjF,MACnB2tB,EAAc1oB,KAAK7D,MAEnBusB,GAA0C,SAA3BA,EAAYxI,WAC7BuI,EAAY9qB,OAASzE,EACZ8G,KAAK2oB,gBACdF,EAAY9qB,OAASzE,EACrBuvB,EAAY/qB,KAAO8qB,GAAc,SAGjCC,EAAY/qB,OAAS+qB,EAAY/qB,KAAOxE,GACxCuvB,EAAY9qB,SAAW8qB,EAAY9qB,OAASzE,IAG9C8G,KAAKpB,OAAM,IAgBf,SAASgqB,EAAa1I,EAAYjlB,EAAGC,EAAGmrB,EAAGvU,EAAG5Y,EAAOknB,GAEnD,IAMIyI,EANAC,EAA0C,IAAhC5I,EAAWxZ,QAAQ,SA2BjC,OAzBIoiB,IACF5I,EAAaA,EAAW6I,OAAO,EAAG,GAAGC,cAAgB9I,EAAW6I,OAAO,IAMvEF,EADqC,IAAnC3I,EAAWxZ,QAAQ,YACRif,EAAQ9qB,UAAUqlB,EAAWpV,MAAM,GAAI,IAAIvS,EAAa0C,EAAGC,EAAGmrB,EAAGvU,GAAIsO,EAAa,SAAW,SAC/D,IAAlCF,EAAWxZ,QAAQ,WACfif,EAAQtrB,SAAS6lB,EAAWpV,MAAM,GAAI,GAAI,IAAIvS,EAAa0C,EAAGC,EAAGmrB,EAAGvU,GAAIsO,EAAa,SAAW,SAEhG,IAAI8H,EAAU,CACzB/rB,MAAO,CACL+jB,WAAYA,EACZjlB,EAAGA,EACHC,EAAGA,EACHC,MAAOkrB,EACPjrB,OAAQ0W,KAKd+W,EAAWF,eAAiBG,EAC5BD,EAAWI,SAAWV,EACtBM,EAAWI,SAAS/vB,GACb2vB,EAGTtxB,EAAQqxB,aAAeA,G,qBCnUvB,IAAInxB,EAAQ,EAAQ,QAEhByxB,EAAgB,EAAQ,QAExBC,EAAY,EAAQ,QAoBpBC,EAAY,WAKdppB,KAAKqpB,MAAQ,IAAI5xB,EAMjBuI,KAAK2Y,IAAMuQ,EAAcpS,OAAO,kBAGlCsS,EAAUnV,UAAY,CACpBqV,YAAaF,EACbG,KAAM,SAAUxlB,EAASsT,KACzBmS,OAAQ,SAAUC,EAAgB1lB,EAASsT,EAAKY,KAChD0F,QAAS,aAST+L,sBAAuB,MAEzB,IAAIC,EAAiBP,EAAUnV,UAE/B0V,EAAeC,WAAaD,EAAeE,aAAeF,EAAeG,aAAe,SAAUnP,EAAa5W,EAASsT,EAAKY,KAI7HkR,EAAU3V,kBAAkB4V,GAE5BD,EAAUrU,sBAAsBsU,EAAW,CACzChT,oBAAoB,IAEtB,IAAI0J,EAAWsJ,EACfrJ,EAAOxoB,QAAUuoB,G,qBCjEjB,IAAI/oB,EAAS,EAAQ,QAEjBgzB,EAAO,EAAQ,QAEfC,EAAgB,EAAQ,QAExBC,EAAmBD,EAAcC,iBAoBrC,SAASnK,EAASoK,EAAKnmB,GACrB,IAAIomB,EAAYpmB,EAAQM,SAAS,QAEjC,GAAK8lB,EAAUttB,IAAI,QAEZ,GAAIstB,EAAUttB,IAAI,eACvBqtB,EAAIE,aAAa,aAAcD,EAAUttB,IAAI,oBADxC,CAKP,IAAIwtB,EAAY,EAChBtmB,EAAQuX,YAAW,SAAUX,EAAarL,KACtC+a,IACDrqB,MACH,IAGIsqB,EAHAC,EAAaJ,EAAUttB,IAAI,kBAAoB,GAC/C2tB,EAAeL,EAAUttB,IAAI,oBAAsB,GACnD4tB,EAAmB9xB,KAAKG,IAAIuxB,EAAWG,GAG3C,KAAIH,EAAY,GAAhB,CAIE,IAAIK,EAAQC,IAGVL,EADEI,EACU1f,EAAQ4f,EAAU,qBAAsB,CAClDF,MAAOA,IAGGE,EAAU,wBAGxB,IAAIC,EAAe,GACfC,EAAST,EAAY,EAAI,yBAA2B,uBACxDC,GAAatf,EAAQ4f,EAAUE,GAAS,CACtCC,YAAaV,IAEftmB,EAAQuX,YAAW,SAAUX,EAAarL,GACxC,GAAIA,EAAMmb,EAAkB,CAC1B,IAAIO,EACAC,EAAatQ,EAAY9d,IAAI,QAC7BquB,EAAY,WAAab,EAAY,EAAI,WAAa,UAAY,IACtEW,EAAcJ,EAAUK,EAAaC,EAAY,WAAaA,EAAY,eAC1EF,EAAchgB,EAAQggB,EAAa,CACjCG,SAAUxQ,EAAYyQ,YACtBH,WAAYtQ,EAAY9d,IAAI,QAC5BkgB,WAAYsO,EAAkB1Q,EAAYnF,WAE5C,IAAIqF,EAAOF,EAAYG,UACvBwQ,OAAOzQ,KAAOA,EAEVA,EAAKvM,QAAUic,EAEjBS,GAAehgB,EAAQ4f,EAAU,oBAAqB,CACpDW,WAAYhB,IAGdS,GAAeJ,EAAU,gBAK3B,IAFA,IAAIY,EAAa,GAERlgB,EAAI,EAAGA,EAAIuP,EAAKvM,QAAShD,IAChC,GAAIA,EAAIif,EAAY,CAClB,IAAItwB,EAAO4gB,EAAK4Q,QAAQngB,GACpBuF,EAAQoZ,EAAiBpP,EAAMvP,GACnCkgB,EAAWzV,KAAK/K,EAAe4f,EAAP3wB,EAAiB,gBAA6B,oBAAqB,CACzFA,KAAMA,EACN4W,MAAOA,KAKbma,GAAeQ,EAAWzkB,KAAK6jB,EAAU,0BAA4BA,EAAU,sBAC/EC,EAAa9U,KAAKiV,OAGtBV,GAAaO,EAAa9jB,KAAK6jB,EAAU,qCAAuCA,EAAU,iCAC1FV,EAAIE,aAAa,aAAcE,IAGjC,SAAStf,EAAQ8B,EAAK4e,GACpB,GAAmB,kBAAR5e,EACT,OAAOA,EAGT,IAAI8I,EAAS9I,EAIb,OAHA/V,EAAO8e,KAAK6V,GAAW,SAAU7a,EAAO8a,GACtC/V,EAASA,EAAO5K,QAAQ,IAAI4gB,OAAO,UAAYD,EAAM,UAAW,KAAM9a,MAEjE+E,EAGT,SAASgV,EAAUpwB,GACjB,IAAIqxB,EAAa1B,EAAUttB,IAAIrC,GAE/B,GAAkB,MAAdqxB,EAAoB,CAItB,IAHA,IAAIC,EAAUtxB,EAAK4Y,MAAM,KACrBwC,EAASmU,EAAKgC,KAETzgB,EAAI,EAAGA,EAAIwgB,EAAQtgB,SAAUF,EACpCsK,EAASA,EAAOkW,EAAQxgB,IAG1B,OAAOsK,EAEP,OAAOiW,EAIX,SAASlB,IACP,IAAID,EAAQ3mB,EAAQM,SAAS,SAASJ,OAMtC,OAJIymB,GAASA,EAAMlf,SACjBkf,EAAQA,EAAM,IAGTA,GAASA,EAAMjoB,KAGxB,SAAS4oB,EAAkBltB,GACzB,OAAO4rB,EAAKiC,OAAOC,UAAU9tB,IAAS,QAI1C4hB,EAAOxoB,QAAUuoB,G,qBCxJjB,IAAIoM,EAAW,EAAQ,QAEnBxyB,EAAcwyB,EAASxyB,YAyBvBomB,EAAWpmB,EAAY,CACzByE,KAAM,UACNhC,MAAO,CACLT,GAAI,EACJC,GAAI,EACJwwB,GAAI,EACJ7F,EAAG,EACH8F,WAAY,EACZC,SAAoB,EAAV1zB,KAAKgL,GACf2oB,WAAW,GAEbvG,UAAW,SAAUqB,EAAKjrB,GACxB,IAAIlB,EAAIkB,EAAMT,GACVR,EAAIiB,EAAMR,GACVwwB,EAAKxzB,KAAKC,IAAIuD,EAAMgwB,IAAM,EAAG,GAC7B7F,EAAI3tB,KAAKC,IAAIuD,EAAMmqB,EAAG,GACtBiG,EAAgB,IAAVjG,EAAI6F,GACVK,EAAUL,EAAKI,EACfH,EAAajwB,EAAMiwB,WACnBC,EAAWlwB,EAAMkwB,SACjBC,EAAYnwB,EAAMmwB,UAClBG,EAAa9zB,KAAKguB,IAAIyF,GACtBM,EAAa/zB,KAAKkuB,IAAIuF,GACtBO,EAAWh0B,KAAKguB,IAAI0F,GACpBO,EAAWj0B,KAAKkuB,IAAIwF,GACpBQ,EAAiBP,EAAYD,EAAWD,EAAuB,EAAVzzB,KAAKgL,GAASyoB,EAAaC,EAAqB,EAAV1zB,KAAKgL,GAEhGkpB,IACFzF,EAAIpB,OAAOyG,EAAaN,EAAKlxB,EAAGyxB,EAAaP,EAAKjxB,GAClDksB,EAAIH,IAAIwF,EAAaD,EAAUvxB,EAAGyxB,EAAaF,EAAUtxB,EAAGqxB,GAAK5zB,KAAKgL,GAAKyoB,EAAYA,GAAaE,IAGtGlF,EAAIH,IAAIhsB,EAAGC,EAAGorB,EAAG8F,EAAYC,GAAWC,GACxClF,EAAIpB,OAAO2G,EAAWrG,EAAIrrB,EAAG2xB,EAAWtG,EAAIprB,GAC5CksB,EAAIH,IAAI0F,EAAWH,EAAUvxB,EAAG2xB,EAAWJ,EAAUtxB,EAAGqxB,EAAIF,EAAqB,EAAV1zB,KAAKgL,GAAQ0oB,EAAW1zB,KAAKgL,IAAK2oB,GAE9F,IAAPH,IACF/E,EAAIH,IAAIhsB,EAAGC,EAAGixB,EAAIE,EAAUD,EAAYE,GACxClF,EAAIpB,OAAOyG,EAAaN,EAAKlxB,EAAG2xB,EAAWT,EAAKjxB,IAGlDksB,EAAIlB,eAIRnG,EAAOxoB,QAAUuoB,G,mBCtDjB,IAAIgN,EAAW,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,WAChJhN,EAAW,CACb5mB,MAAO4zB,EACPC,WAAY,CAAC,CAAC,UAAW,UAAW,WAAY,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,WAAY,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,WAAYD,IAE3N/M,EAAOxoB,QAAUuoB,G,qBCvBjB,IAAI/oB,EAAS,EAAQ,QAEjBi2B,EAAM,EAAQ,QAoBdnX,EAAO9e,EAAO8e,KACdoX,EAAWl2B,EAAOk2B,SAClBC,EAAUn2B,EAAOm2B,QAOjBC,EAA8B,WAOlC,SAASjW,EAAiBrG,GACxB,OAAOA,aAAiBuc,MAAQvc,EAAiB,MAATA,EAAgB,GAAK,CAACA,GAmBhE,SAASwc,EAAgB9rB,EAAKoqB,EAAK2B,GAEjC,GAAI/rB,EAAK,CACPA,EAAIoqB,GAAOpqB,EAAIoqB,IAAQ,GACvBpqB,EAAIgsB,SAAWhsB,EAAIgsB,UAAY,GAC/BhsB,EAAIgsB,SAAS5B,GAAOpqB,EAAIgsB,SAAS5B,IAAQ,GAEzC,IAAK,IAAIrgB,EAAI,EAAG+E,EAAMid,EAAQ9hB,OAAQF,EAAI+E,EAAK/E,IAAK,CAClD,IAAIkiB,EAAaF,EAAQhiB,IAEpB/J,EAAIgsB,SAAS5B,GAAKvxB,eAAeozB,IAAejsB,EAAIoqB,GAAKvxB,eAAeozB,KAC3EjsB,EAAIgsB,SAAS5B,GAAK6B,GAAcjsB,EAAIoqB,GAAK6B,MAMjD,IAAIC,EAAqB,CAAC,YAAa,aAAc,WAAY,aAAc,OAAQ,MAAO,QAAS,kBAAmB,kBAAmB,QAAS,SAAU,aAAc,QAAS,gBAAiB,WAAY,cAAe,aAAc,gBAAiB,gBAAiB,kBAAmB,iBAAkB,oBAAqB,oBAAqB,kBAAmB,cAAe,cAAe,eAAgB,WAena,SAASC,EAAiBC,GACxB,OAAOV,EAASU,IAAcT,EAAQS,IAAeA,aAAoB7c,KAAyB6c,EAAjBA,EAAS9c,MAS5F,SAAS+c,EAAiBD,GACxB,OAAOV,EAASU,MAAeA,aAAoBP,OAcrD,SAASS,EAAgBC,EAAQC,GAO/BA,GAAiBA,GAAiB,IAAIjjB,QACtC,IAAI8K,EAAS7e,EAAOqT,IAAI0jB,GAAU,IAAI,SAAUhkB,EAAKkkB,GACnD,MAAO,CACLC,MAAOnkB,MA+DX,OA3DA+L,EAAKkY,GAAe,SAAUG,EAAWF,GACvC,GAAKf,EAASiB,GAAd,CAKA,IAAK,IAAI5iB,EAAI,EAAGA,EAAIsK,EAAOpK,OAAQF,IACjC,IAAKsK,EAAOtK,GAAGrH,QACI,MAAhBiqB,EAAU3V,IAAc3C,EAAOtK,GAAG2iB,MAAM1V,KAAO2V,EAAU3V,GAAK,GAG/D,OAFA3C,EAAOtK,GAAGrH,OAASiqB,OACnBH,EAAcC,GAAS,MAK3B,IAAS1iB,EAAI,EAAGA,EAAIsK,EAAOpK,OAAQF,IAAK,CACtC,IAAI2iB,EAAQrY,EAAOtK,GAAG2iB,MAEtB,IAAKrY,EAAOtK,GAAGrH,SAEC,MAAZgqB,EAAM1V,IAA8B,MAAhB2V,EAAU3V,KAAiC,MAAlB2V,EAAUj0B,OAAiBk0B,EAAUD,KAAeC,EAAUF,IAAUA,EAAMh0B,OAASi0B,EAAUj0B,KAAO,GAGvJ,OAFA2b,EAAOtK,GAAGrH,OAASiqB,OACnBH,EAAcC,GAAS,WAM7BnY,EAAKkY,GAAe,SAAUG,EAAWF,GACvC,GAAKf,EAASiB,GAAd,CAMA,IAFA,IAAI5iB,EAAI,EAEDA,EAAIsK,EAAOpK,OAAQF,IAAK,CAC7B,IAAI2iB,EAAQrY,EAAOtK,GAAG2iB,MAEtB,IAAKrY,EAAOtK,GAAGrH,SAIXkqB,EAAUF,IAKK,MAAhBC,EAAU3V,GAAY,CACvB3C,EAAOtK,GAAGrH,OAASiqB,EACnB,OAIA5iB,GAAKsK,EAAOpK,QACdoK,EAAOG,KAAK,CACV9R,OAAQiqB,QAIPtY,EAaT,SAASwY,EAAcC,GAUrB,IAAIC,EAAQv3B,EAAO0F,gBACnBoZ,EAAKwY,GAAW,SAAUE,EAAMP,GAC9B,IAAIQ,EAAWD,EAAKN,MACpBO,GAAYF,EAAMvxB,IAAIyxB,EAASjW,GAAIgW,MAErC1Y,EAAKwY,GAAW,SAAUE,EAAMP,GAC9B,IAAIzsB,EAAMgtB,EAAKtqB,OACflN,EAAOuc,QAAQ/R,GAAiB,MAAVA,EAAIgX,KAAe+V,EAAMzxB,IAAI0E,EAAIgX,KAAO+V,EAAMzxB,IAAI0E,EAAIgX,MAAQgW,EAAM,mBAAqBhtB,GAAOA,EAAIgX,KAC1HhX,GAAiB,MAAVA,EAAIgX,IAAc+V,EAAMvxB,IAAIwE,EAAIgX,GAAIgW,IAC1CA,EAAKE,UAAYF,EAAKE,QAAU,OAGnC5Y,EAAKwY,GAAW,SAAUE,EAAMP,GAC9B,IAAIQ,EAAWD,EAAKN,MAChB1sB,EAAMgtB,EAAKtqB,OACXwqB,EAAUF,EAAKE,QAEnB,GAAKxB,EAAS1rB,GAAd,CAYA,GAJAktB,EAAQx0B,KAAmB,MAAZsH,EAAItH,KAAesH,EAAItH,KAAO,GAAKu0B,EAAWA,EAASv0B,KAEpEkzB,EAA8Ba,EAE5BQ,EACFC,EAAQlW,GAAKiW,EAASjW,QACjB,GAAc,MAAVhX,EAAIgX,GACbkW,EAAQlW,GAAKhX,EAAIgX,GAAK,OACjB,CAML,IAAImW,EAAQ,EAEZ,GACED,EAAQlW,GAAK,KAAOkW,EAAQx0B,KAAO,KAAOy0B,UACnCJ,EAAMzxB,IAAI4xB,EAAQlW,KAG7B+V,EAAMvxB,IAAI0xB,EAAQlW,GAAIgW,OAI1B,SAASI,EAAgBlF,GACvB,IAAIxvB,EAAOwvB,EAAexvB,KAE1B,SAAUA,IAAQA,EAAKyM,QAAQymB,IASjC,SAASgB,EAAUD,GACjB,OAAOjB,EAASiB,IAAcA,EAAU3V,IAAkD,KAA3C2V,EAAU3V,GAAK,IAAI7R,QAAQ,YAY5E,SAASkoB,EAAgBC,EAAQC,GAC/B,IAAIC,EAAO,GACPC,EAAO,GAGX,OAFAC,EAAQJ,GAAU,GAAIE,GACtBE,EAAQH,GAAU,GAAIE,EAAMD,GACrB,CAACG,EAAWH,GAAOG,EAAWF,IAErC,SAASC,EAAQE,EAAa/kB,EAAKglB,GACjC,IAAK,IAAI9jB,EAAI,EAAG+E,EAAM8e,EAAY3jB,OAAQF,EAAI+E,EAAK/E,IAKjD,IAJA,IAAI6f,EAAWgE,EAAY7jB,GAAG6f,SAC1BkE,EAAcnY,EAAiBiY,EAAY7jB,GAAGlE,WAC9CkoB,EAAmBF,GAAYA,EAASjE,GAEnCoE,EAAI,EAAGC,EAAOH,EAAY7jB,OAAQ+jB,EAAIC,EAAMD,IAAK,CACxD,IAAInoB,EAAYioB,EAAYE,GAExBD,GAAoBA,EAAiBloB,GACvCkoB,EAAiBloB,GAAa,MAE7BgD,EAAI+gB,KAAc/gB,EAAI+gB,GAAY,KAAK/jB,GAAa,GAM7D,SAAS8nB,EAAW9kB,EAAKqlB,GACvB,IAAI7Z,EAAS,GAEb,IAAK,IAAItK,KAAKlB,EACZ,GAAIA,EAAIhQ,eAAekR,IAAgB,MAAVlB,EAAIkB,GAC/B,GAAImkB,EACF7Z,EAAOG,MAAMzK,OACR,CACL,IAAI+jB,EAAcH,EAAW9kB,EAAIkB,IAAI,GACrC+jB,EAAY7jB,QAAUoK,EAAOG,KAAK,CAChCoV,SAAU7f,EACVlE,UAAWioB,IAMnB,OAAOzZ,GAWX,SAAS8Z,EAAe7U,EAAM5C,GAC5B,OAA+B,MAA3BA,EAAQ0X,gBACH1X,EAAQ0X,gBACe,MAArB1X,EAAQ7Q,UACVrQ,EAAOm2B,QAAQjV,EAAQ7Q,WAAarQ,EAAOqT,IAAI6N,EAAQ7Q,WAAW,SAAUyJ,GACjF,OAAOgK,EAAK+U,gBAAgB/e,MACzBgK,EAAK+U,gBAAgB3X,EAAQ7Q,WACT,MAAhB6Q,EAAQhe,KACVlD,EAAOm2B,QAAQjV,EAAQhe,MAAQlD,EAAOqT,IAAI6N,EAAQhe,MAAM,SAAU4W,GACvE,OAAOgK,EAAKgV,YAAYhf,MACrBgK,EAAKgV,YAAY5X,EAAQhe,WAHzB,EA4BT,SAAS61B,IAEP,IAAInE,EAAM,gBAAkBoE,IAAqB,IAAMp3B,KAAK8b,SAAS3G,QAAQ,GAC7E,OAAO,SAAUkiB,GACf,OAAOA,EAAQrE,KAASqE,EAAQrE,GAAO,KAI3C,IAAIoE,EAAmB,EAqCvB,SAASE,EAAYlsB,EAASmsB,EAAQ3uB,GACpC,GAAIxK,EAAOo5B,SAASD,GAAS,CAC3B,IAAIpmB,EAAM,GACVA,EAAIomB,EAAS,SAAW,EACxBA,EAASpmB,EAGX,IAAIsmB,EAAkB7uB,GAAOA,EAAI6uB,iBAE7BA,GAAoBC,EAAIH,EAAQE,EAAkB,UAAaC,EAAIH,EAAQE,EAAkB,OAAUC,EAAIH,EAAQE,EAAkB,UACvIF,EAAOE,EAAkB,SAAW,GAGtC,IAAIxa,EAAS,GA6Bb,OA5BAC,EAAKqa,GAAQ,SAAUrf,EAAO8a,GACxB9a,EAAQqf,EAAOvE,GAEnB,GAAY,cAARA,GAA+B,oBAARA,EAA3B,CAKA,IAAI2E,EAAY3E,EAAIne,MAAM,2BAA6B,GACnDqS,EAAWyQ,EAAU,GACrBC,GAAaD,EAAU,IAAM,IAAItH,cAErC,MAAKnJ,IAAa0Q,GAAsB,MAAT1f,GAA+B,UAAd0f,GAAmC,SAAV1f,GAAoBtP,GAAOA,EAAIivB,kBAAoBz5B,EAAO2P,QAAQnF,EAAIivB,iBAAkB3Q,GAAY,GAA7K,CAIA,IAAI4Q,EAAa,CACf5Q,SAAUA,GAGM,UAAd0Q,GAAmC,QAAV1f,IAC3B4f,EAAWF,GAAa1f,GAG1B,IAAI6f,EAAS3sB,EAAQ4sB,gBAAgBF,GACrC7a,EAAOiK,EAAW,UAAY6Q,EAC9B9a,EAAOiK,EAAW,SAAW6Q,EAAO,SAtBlC9a,EAAO+V,GAAO9a,KAwBX+E,EAGT,SAASya,EAAIvmB,EAAKjL,GAChB,OAAOiL,GAAOA,EAAI1P,eAAeyE,GAGnC,SAASurB,EAAaF,EAAKyB,EAAK9a,GAC9BqZ,EAAIE,aAAeF,EAAIE,aAAauB,EAAK9a,GAASqZ,EAAIyB,GAAO9a,EAG/D,SAAS+f,EAAa1G,EAAKyB,GACzB,OAAOzB,EAAI0G,aAAe1G,EAAI0G,aAAajF,GAAOzB,EAAIyB,GAGxD,SAASkF,EAAqBC,GAC5B,MAAyB,SAArBA,EAEK9D,EAAI+D,aAAe,OAAS,WAE5BD,GAAoB,OAgB/B,SAASE,EAAUC,EAAOC,GACxB,IAAIC,EAAUp6B,EAAO0F,gBACjB20B,EAAO,GAKX,OAJAr6B,EAAO8e,KAAKob,GAAO,SAAU1C,GAC3B,IAAI5C,EAAMuF,EAAO3C,IAChB4C,EAAQt0B,IAAI8uB,KAASyF,EAAKrb,KAAK4V,GAAMwF,EAAQp0B,IAAI4uB,EAAK,MAAM5V,KAAKwY,MAE7D,CACL6C,KAAMA,EACND,QAASA,GAIb55B,EAAQ2f,iBAAmBA,EAC3B3f,EAAQ81B,gBAAkBA,EAC1B91B,EAAQk2B,mBAAqBA,EAC7Bl2B,EAAQm2B,iBAAmBA,EAC3Bn2B,EAAQq2B,iBAAmBA,EAC3Br2B,EAAQs2B,gBAAkBA,EAC1Bt2B,EAAQ62B,cAAgBA,EACxB72B,EAAQo3B,gBAAkBA,EAC1Bp3B,EAAQ42B,UAAYA,EACpB52B,EAAQq3B,gBAAkBA,EAC1Br3B,EAAQm4B,eAAiBA,EACzBn4B,EAAQu4B,UAAYA,EACpBv4B,EAAQ04B,YAAcA,EACtB14B,EAAQ6yB,aAAeA,EACvB7yB,EAAQq5B,aAAeA,EACvBr5B,EAAQs5B,qBAAuBA,EAC/Bt5B,EAAQy5B,UAAYA,G,qBC9gBpB,IAAIva,EAAQ,EAAQ,QAEhBZ,EAAOY,EAAMZ,KAEbpe,EAAQ,EAAQ,QAEhByxB,EAAgB,EAAQ,QAExBC,EAAY,EAAQ,QAEpBkI,EAAY,EAAQ,QAEpBC,EAAc,EAAQ,QAEtB3a,EAAQ,EAAQ,QAEhBC,EAAaD,EAAMC,WAEnB2a,EAAsB,EAAQ,QAoB9BC,EAAQH,EAAUvB,YAClB2B,EAAgBF,IAEpB,SAASG,IAKP1xB,KAAKqpB,MAAQ,IAAI5xB,EAMjBuI,KAAK2Y,IAAMuQ,EAAcpS,OAAO,aAChC9W,KAAKwc,WAAa5F,EAAW,CAC3BiG,KAAM8U,EACNxV,MAAOyV,IAET5xB,KAAKwc,WAAW7H,QAAU,CACxBiG,KAAM5a,MAIV0xB,EAAMzd,UAAY,CAChB9V,KAAM,QAONorB,KAAM,SAAUxlB,EAASsT,KASzBmS,OAAQ,SAAU7O,EAAa5W,EAASsT,EAAKY,KAS7C4Z,UAAW,SAAUlX,EAAa5W,EAASsT,EAAKY,GAC9C6Z,EAAgBnX,EAAYG,UAAW7C,EAAS,aAUlD8Z,SAAU,SAAUpX,EAAa5W,EAASsT,EAAKY,GAC7C6Z,EAAgBnX,EAAYG,UAAW7C,EAAS,WAQlD+Z,OAAQ,SAAUjuB,EAASsT,GACzBrX,KAAKqpB,MAAM4I,aAQbtU,QAAS,aAST3C,yBAA0B,KAU1BkX,kBAAmB,KAUnBC,gBAAiB,KAiBjBzI,sBAAuB,MAEzB,IAAI0I,EAAaV,EAAMzd,UAavB,SAASoe,EAAWp1B,EAAIq1B,EAAOlyB,GAC7B,GAAInD,IACFA,EAAGqC,QAAQgzB,EAAOlyB,GAEdnD,EAAGmB,UACHkzB,EAAYtwB,qBAAqB/D,IACnC,IAAK,IAAIqO,EAAI,EAAG+E,EAAMpT,EAAGs1B,aAAcjnB,EAAI+E,EAAK/E,IAC9C+mB,EAAWp1B,EAAGu1B,QAAQlnB,GAAIgnB,EAAOlyB,GAYzC,SAAS0xB,EAAgBjX,EAAM5C,EAASqa,GACtC,IAAIlrB,EAAYiqB,EAAU3B,eAAe7U,EAAM5C,GAC3C7X,EAAiB6X,GAAmC,MAAxBA,EAAQ/W,aAAuBowB,EAAYrwB,kBAAkBgX,EAAQ/W,cAAgB,KAEpG,MAAbkG,EACFyO,EAAKwb,EAAUna,iBAAiB9P,IAAY,SAAUqrB,GACpDJ,EAAWxX,EAAK6X,iBAAiBD,GAAUH,EAAOlyB,MAGpDya,EAAK8X,mBAAkB,SAAU11B,GAC/Bo1B,EAAWp1B,EAAIq1B,EAAOlyB,MAgB5B,SAASuxB,EAAehd,GACtB,OAAO8c,EAAc9c,EAAQ+E,OAG/B,SAASkY,EAAgBjd,GACvB,IAAIgG,EAAchG,EAAQ+E,MACtB3V,EAAU4Q,EAAQ5Q,QAClBsT,EAAM1C,EAAQ0C,IACdY,EAAUtD,EAAQsD,QAElBiC,EAAoBS,EAAYQ,gBAAgBjB,kBAChDU,EAAOjG,EAAQiG,KACfgY,EAAe3a,GAAWuZ,EAAMvZ,GAAS2a,aACzChe,EAAasF,EAAoB,2BAA6B0Y,GAAgBhY,EAAKgY,GAAgBA,EAErG,SAMF,MAJmB,WAAfhe,GACFgG,EAAKhG,GAAY+F,EAAa5W,EAASsT,EAAKY,GAGvC4a,EAAkBje,GA7E3Bwd,EAAWxI,WAAawI,EAAWvI,aAAeuI,EAAWtI,aAAe,SAAUnP,EAAa5W,EAASsT,EAAKY,GAC/GjY,KAAKwpB,OAAO7O,EAAa5W,EAASsT,EAAKY,IA6CzCkR,EAAU3V,kBAAkBke,EAAO,CAAC,YAEpCvI,EAAUrU,sBAAsB4c,EAAO,CACrCtb,oBAAoB,IAGtBsb,EAAMoB,iBAAmB,SAAU7a,EAASrD,GAC1C4c,EAAMvZ,GAAS2a,aAAehe,GA2BhC,IAAIie,EAAoB,CACtB7X,yBAA0B,CACxBmE,SAAU,SAAUL,EAAQnK,GAC1BA,EAAQiG,KAAKsX,kBAAkBpT,EAAQnK,EAAQ+E,MAAO/E,EAAQ5Q,QAAS4Q,EAAQ0C,IAAK1C,EAAQsD,WAGhGuR,OAAQ,CAKNuJ,oBAAoB,EACpB5T,SAAU,SAAUL,EAAQnK,GAC1BA,EAAQiG,KAAK4O,OAAO7U,EAAQ+E,MAAO/E,EAAQ5Q,QAAS4Q,EAAQ0C,IAAK1C,EAAQsD,YAI3E6H,EAAW4R,EACf3R,EAAOxoB,QAAUuoB,G,qBCzQjB,IAAI/oB,EAAS,EAAQ,QAEjBi8B,EAAc,EAAQ,QAEtBC,EAAa,EAAQ,QA2BzB,SAASC,EAAUj4B,GACjB,OAAIoT,MAAMpT,GACD,KAGTA,GAAKA,EAAI,IAAImY,MAAM,KACZnY,EAAE,GAAG+P,QAAQ,iCAAkC,QAAU/P,EAAEuQ,OAAS,EAAI,IAAMvQ,EAAE,GAAK,KAS9F,SAASk4B,EAAYrmB,EAAKsmB,GASxB,OARAtmB,GAAOA,GAAO,IAAIkc,cAAche,QAAQ,SAAS,SAAUwC,EAAO6lB,GAChE,OAAOA,EAAOpiB,iBAGZmiB,GAAkBtmB,IACpBA,EAAMA,EAAIwmB,OAAO,GAAGriB,cAAgBnE,EAAIhC,MAAM,IAGzCgC,EAGT,IAAIymB,EAAoBx8B,EAAOw8B,kBAC3BC,EAAa,aACbC,EAAa,CACf,IAAK,QACL,IAAK,OACL,IAAK,OACL,IAAK,SACLC,IAAM,SAGR,SAASC,EAAWC,GAClB,OAAiB,MAAVA,EAAiB,IAAMA,EAAS,IAAI5oB,QAAQwoB,GAAY,SAAU1mB,EAAK+mB,GAC5E,OAAOJ,EAAWI,MAItB,IAAIC,EAAgB,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAE/CC,EAAU,SAAUC,EAASC,GAC/B,MAAO,IAAMD,GAAwB,MAAbC,EAAoB,GAAKA,GAAa,KAWhE,SAASC,EAAUC,EAAKC,EAAYC,GAC7Bt9B,EAAOm2B,QAAQkH,KAClBA,EAAa,CAACA,IAGhB,IAAIE,EAAYF,EAAW5oB,OAE3B,IAAK8oB,EACH,MAAO,GAKT,IAFA,IAAIC,EAAQH,EAAW,GAAGG,OAAS,GAE1BjpB,EAAI,EAAGA,EAAIipB,EAAM/oB,OAAQF,IAAK,CACrC,IAAIkpB,EAAQV,EAAcxoB,GAC1B6oB,EAAMA,EAAInpB,QAAQ+oB,EAAQS,GAAQT,EAAQS,EAAO,IAGnD,IAAK,IAAIP,EAAY,EAAGA,EAAYK,EAAWL,IAC7C,IAAK,IAAIQ,EAAI,EAAGA,EAAIF,EAAM/oB,OAAQipB,IAAK,CACrC,IAAI9nB,EAAMynB,EAAWH,GAAWM,EAAME,IACtCN,EAAMA,EAAInpB,QAAQ+oB,EAAQD,EAAcW,GAAIR,GAAYI,EAASV,EAAWhnB,GAAOA,GAIvF,OAAOwnB,EAYT,SAASO,EAAgBP,EAAKj4B,EAAOm4B,GAInC,OAHAt9B,EAAO8e,KAAK3Z,GAAO,SAAU2U,EAAO8a,GAClCwI,EAAMA,EAAInpB,QAAQ,IAAM2gB,EAAM,IAAK0I,EAASV,EAAW9iB,GAASA,MAE3DsjB,EAaT,SAASQ,EAAiBpzB,EAAKqzB,GAC7BrzB,EAAMxK,EAAOo5B,SAAS5uB,GAAO,CAC3BrI,MAAOqI,EACPqzB,aAAcA,GACZrzB,GAAO,GACX,IAAIrI,EAAQqI,EAAIrI,MACZiF,EAAOoD,EAAIpD,KAEX02B,GADAD,EAAerzB,EAAIqzB,aACNrzB,EAAIszB,YAAc,QAC/BC,EAAWvzB,EAAIuzB,UAAY,IAE/B,OAAK57B,EAIc,SAAf27B,EACc,YAAT12B,EAAqB,oJAA2Jw1B,EAAWz6B,GAAS,KAAO07B,GAAgB,IAAM,YAAc,iHAAwHjB,EAAWz6B,GAAS,KAAO07B,GAAgB,IAAM,YAGxZ,CACLC,WAAYA,EACZE,QAAS,UAAYD,EAAW,OAChC/5B,MAAO,CACL7B,MAAOA,IAXJ,GAiBX,SAAS87B,EAAIloB,EAAKuD,GAEhB,OADAvD,GAAO,GACA,OAAOic,OAAO,EAAG1Y,EAAMvD,EAAItB,QAAUsB,EAa9C,SAASmoB,EAAWd,EAAKtjB,EAAOqkB,GAClB,SAARf,GAA0B,UAARA,GAA2B,YAARA,GAA6B,cAARA,GAA+B,SAARA,IACnFA,EAAM,eAGR,IAAIgB,EAAOlC,EAAWriB,UAAUC,GAC5BukB,EAAMF,EAAQ,MAAQ,GACtBh6B,EAAIi6B,EAAK,MAAQC,EAAM,cACvBC,EAAIF,EAAK,MAAQC,EAAM,WAAa,EACpCE,EAAIH,EAAK,MAAQC,EAAM,UACvBtjB,EAAIqjB,EAAK,MAAQC,EAAM,WACvBr5B,EAAIo5B,EAAK,MAAQC,EAAM,aACvBG,EAAIJ,EAAK,MAAQC,EAAM,aACvBI,EAAIL,EAAK,MAAQC,EAAM,kBAE3B,OADAjB,EAAMA,EAAInpB,QAAQ,KAAMgqB,EAAIK,EAAG,IAAIrqB,QAAQ,IAAKqqB,GAAGrqB,QAAQ,OAAQ9P,GAAG8P,QAAQ,KAAM9P,EAAI,KAAK8P,QAAQ,KAAMgqB,EAAIM,EAAG,IAAItqB,QAAQ,IAAKsqB,GAAGtqB,QAAQ,KAAMgqB,EAAIljB,EAAG,IAAI9G,QAAQ,IAAK8G,GAAG9G,QAAQ,KAAMgqB,EAAIj5B,EAAG,IAAIiP,QAAQ,IAAKjP,GAAGiP,QAAQ,KAAMgqB,EAAIO,EAAG,IAAIvqB,QAAQ,IAAKuqB,GAAGvqB,QAAQ,MAAOgqB,EAAIQ,EAAG,IAChRrB,EAST,SAASsB,EAAa3oB,GACpB,OAAOA,EAAMA,EAAIwmB,OAAO,GAAGriB,cAAgBnE,EAAIic,OAAO,GAAKjc,EAG7D,IAAI4oB,EAAe1C,EAAY0C,aAe/B,SAASC,EAAoBp0B,GAC3B,OAAOyxB,EAAYr4B,gBAAgB4G,EAAIkB,KAAMlB,EAAIq0B,KAAMr0B,EAAI8D,UAAW9D,EAAI+D,kBAAmB/D,EAAIsE,YAAatE,EAAIgE,eAAgBhE,EAAIgD,KAAMhD,EAAIs0B,UAUlJ,SAASC,EAAYrzB,EAAMmzB,EAAMvwB,EAAWC,EAAmBO,EAAatB,EAAMsxB,EAAUtwB,GAC1F,OAAOytB,EAAYr4B,gBAAgB8H,EAAMmzB,EAAMvwB,EAAWC,EAAmBO,EAAaN,EAAgBhB,EAAMsxB,GASlH,SAASE,EAAWC,EAAM7tB,GACxB,GAAe,WAAXA,GAAkC,UAAXA,EAAoB,CAC7C,IAAI8tB,EAAQ3K,OAAO4K,OACnBD,EAAME,OAAS,KACfF,EAAMG,SAAWJ,OAEjB1K,OAAO4K,KAAKF,EAAM7tB,GAItB5Q,EAAQ27B,UAAYA,EACpB37B,EAAQ47B,YAAcA,EACtB57B,EAAQg8B,kBAAoBA,EAC5Bh8B,EAAQo8B,WAAaA,EACrBp8B,EAAQ28B,UAAYA,EACpB38B,EAAQm9B,gBAAkBA,EAC1Bn9B,EAAQo9B,iBAAmBA,EAC3Bp9B,EAAQ09B,WAAaA,EACrB19B,EAAQk+B,aAAeA,EACvBl+B,EAAQm+B,aAAeA,EACvBn+B,EAAQo+B,oBAAsBA,EAC9Bp+B,EAAQu+B,YAAcA,EACtBv+B,EAAQw+B,WAAaA,G,mBC9PrB,IAAIM,EAAgB,OAEhBC,EAAa,WACf,MAAO,CACLC,SAAU,CACRC,UAAW,CACTt9B,MAAOm9B,IAGXI,SAAU,CACRD,UAAW,CACTt9B,MAAOm9B,IAGXK,UAAW,CACT7zB,UAAW,CACT3J,MAAOm9B,IAGXM,UAAW,CACTH,UAAW,CACTr4B,KAAM,SACNjF,MAAO,SAGX09B,UAAW,CACTC,UAAW,CACT39B,MAAOm9B,MAMXS,EAAe,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,WAC9HC,EAAQ,CACV79B,MAAO49B,EACPE,gBAAiB,OACjBC,QAAS,CACPC,YAAa,CACXV,UAAW,CACTt9B,MAAOm9B,GAETc,WAAY,CACVj+B,MAAOm9B,GAETe,MAAO,CACLl+B,MAAO,UAIbm+B,OAAQ,CACNx0B,UAAW,CACT3J,MAAOm9B,IAGXxzB,UAAW,CACT3J,MAAOm9B,GAET3L,MAAO,CACL7nB,UAAW,CACT3J,MAAOm9B,IAGXiB,QAAS,CACPC,UAAW,CACTC,OAAQ,CACNC,YAAapB,KAInBqB,SAAU,CACR70B,UAAW,CACT3J,MAAOm9B,IAGXsB,UAAW,CACT90B,UAAW,CACT3J,MAAOm9B,IAGXuB,SAAU,CACRpB,UAAW,CACTt9B,MAAOm9B,GAETwB,UAAW,CACTL,OAAQ,CACNt+B,MAAO49B,EAAa,KAGxBM,MAAO,CACLI,OAAQ,CACN30B,UAAW,CACT3J,MAAOm9B,KAIbyB,aAAc,CACZN,OAAQ,CACNt+B,MAAOm9B,EACPoB,YAAapB,KAInB0B,SAAUzB,IACV0B,QAAS1B,IACT2B,UAAW3B,IACX4B,aAAc5B,IACdhP,KAAM,CACJzG,OAAQ,UAEVqD,MAAO,CACLhrB,MAAO49B,GAETqB,MAAO,CACLzN,MAAO,CACL7nB,UAAW,CACT3J,MAAOm9B,KAIb+B,YAAa,CACXP,UAAW,CACTL,OAAQ,CACNt+B,MAAO,UACPm/B,OAAQ,UACRZ,YAAa,UACba,aAAc,cAKtBvB,EAAMmB,aAAavB,UAAU4B,MAAO,EACpC,IAAIzY,EAAWiX,EACfhX,EAAOxoB,QAAUuoB,G,qBCvJjB,IAAIrJ,EAAQ,EAAQ,QAGhByW,GADSzW,EAAMnD,OACLmD,EAAMyW,SAEhBva,EAAU,EAAQ,QAERA,EAAQC,QAyBtB,SAASgE,EAAW4hB,GAClB,OAAO,IAAIC,EAAKD,GAYlB,SAASC,EAAKD,GACZA,EAASA,GAAU,GACnBx4B,KAAK04B,OAASF,EAAOrc,MACrBnc,KAAK24B,MAAQH,EAAO3b,KACpB7c,KAAK44B,OAASJ,EAAOlqB,MACrBtO,KAAK64B,SAAWL,EAAOta,QACvBle,KAAK84B,QAAS,EAGd94B,KAAK2U,QAGP,IAAIokB,EAAYN,EAAKxkB,UASrB8kB,EAAU1f,QAAU,SAAUH,GAC5B,IAcI8f,EAdAC,EAASj5B,KAAKk5B,UACd3f,EAAOL,GAAeA,EAAYK,KAItC,GAAIvZ,KAAK84B,QAAUG,EAAQ,CACzB,IAAItkB,EAAU3U,KAAK2U,QACnBA,EAAQkG,KAAOlG,EAAQwkB,WAAaF,EAAOtkB,QAAQwkB,WAGjDn5B,KAAKsY,aACPtY,KAAKsY,WAAW8gB,YAAcp5B,MAK5BA,KAAK24B,QAAUpf,IACjByf,EAAah5B,KAAK24B,MAAM34B,KAAK2U,UAK/B,IAeIoe,EAfAsG,EAAYC,EAAet5B,KAAKu5B,QAChCC,EAAmBx5B,KAAKy5B,eAAiB,EACzClf,EAAQ+e,EAAepgB,GAAeA,EAAYqB,OAClDD,EAAepB,GAAeA,EAAYoB,cAAgB,EAM9D,SAASgf,EAAe3sB,GAGtB,QAFEA,GAAO,KAAOA,EAAM,GAEfA,EAPL0sB,IAAc9e,GAASif,IAAqBlf,IAC9C0e,EAAa,UAWXh5B,KAAK84B,QAAyB,UAAfE,KACjBh5B,KAAK84B,QAAS,EACd/F,EAAqB5W,EAAMnc,KAAMuZ,IAGnCvZ,KAAKu5B,OAAShf,EACdva,KAAKy5B,cAAgBnf,EACrB,IAAID,EAAOnB,GAAeA,EAAYmB,KAWtC,GAREra,KAAK05B,QADHT,EACaA,EAAOU,cAGL35B,KAAK44B,OAAS54B,KAAK44B,OAAO54B,KAAK2U,SAAWvC,IAKzDpS,KAAK45B,UAAW,CAClB,IAAI3a,EAAQjf,KAAK65B,UACb3a,EAAMvmB,KAAKG,IAAY,MAARuhB,EAAera,KAAK65B,UAAYxf,EAAOjI,IAAUpS,KAAK05B,SAEzE,IAAKngB,IAASwZ,GAAsB9T,EAAQC,GAAM,CAChD,IAAIC,EAAWnf,KAAK45B,UAEpB,GAAI1M,EAAQ/N,GACV,IAAK,IAAI7T,EAAI,EAAGA,EAAI6T,EAAS3T,OAAQF,IACnCwuB,EAAW95B,KAAMmf,EAAS7T,GAAI2T,EAAOC,EAAK3E,EAAOD,QAGnDwf,EAAW95B,KAAMmf,EAAUF,EAAOC,EAAK3E,EAAOD,GAIlDta,KAAK65B,UAAY3a,EAGjB,IAAI6a,EAAwC,MAAzB/5B,KAAKg6B,iBAA2Bh6B,KAAKg6B,iBAAmB9a,EAC3Elf,KAAK25B,cAAgBI,OAKrB/5B,KAAK65B,UAAY75B,KAAK25B,cAAyC,MAAzB35B,KAAKg6B,iBAA2Bh6B,KAAKg6B,iBAAmBh6B,KAAK05B,QAGrG,OAAO15B,KAAKwX,cAGd,IAAIyiB,EAAW,WACb,IAAI/a,EACAgb,EACA3f,EACAD,EACA6f,EACAC,EAAK,CACPje,MAAO,SAAUoZ,EAAGz1B,EAAGu6B,EAAOC,GAC5BJ,EAAU3E,EACVrW,EAAMpf,EACNya,EAAQ8f,EACR/f,EAAeggB,EACfH,EAAWxhC,KAAK6hB,KAAKF,EAAeC,GACpC6f,EAAGG,KAAOhgB,EAAQ,GAAKD,EAAe,EAAIkgB,EAAUC,IAGxD,OAAOL,EAEP,SAASK,IACP,OAAOP,EAAUhb,EAAMgb,IAAY,KAGrC,SAASM,IACP,IAAIpzB,EAAY8yB,EAAUC,EAAW5f,EAAQ5hB,KAAK6hB,KAAK0f,EAAUC,GAC7DvkB,EAASskB,GAAWhb,EAAM,KAAO9X,EAAYkT,EAAelT,EAE9D8yB,EAEF,OADAA,IACOtkB,GA5BI,GAqCf,SAASkkB,EAAWY,EAASvb,EAAUF,EAAOC,EAAK3E,EAAOD,GACxD2f,EAAS9d,MAAM8C,EAAOC,EAAK3E,EAAOD,GAClCogB,EAAQC,iBAAmBxb,EAE3Bub,EAAQC,iBAAiB,CACvB1b,MAAOA,EACPC,IAAKA,EACL5Q,MAAO4Q,EAAMD,EACbsb,KAAMN,EAASM,MACdG,EAAQ/lB,SAGb,SAASwH,EAAMue,EAASnhB,GAGtB,IAAI4F,EACA4T,EAHJ2H,EAAQb,UAAYa,EAAQf,cAAgBe,EAAQhB,QAAU,EAC9DgB,EAAQV,iBAAmB,MAItBzgB,GAAQmhB,EAAQhC,SACnBvZ,EAAWub,EAAQhC,OAAOgC,EAAQ/lB,SAE9BwK,GAAYA,EAASA,WACvB4T,EAAqB5T,EAAS4T,mBAC9B5T,EAAWA,EAASA,UAIlB+N,EAAQ/N,KAAcA,EAAS3T,SACjC2T,EAAW,OAIfub,EAAQd,UAAYza,EACpBub,EAAQnB,OAASmB,EAAQjB,cAAgB,KACzC,IAAImB,EAAaF,EAAQG,YAEzB,OADAD,GAAcA,EAAWh8B,QAClBm0B,EAzCTgG,EAAUn6B,MAAQ,WAChBoB,KAAK84B,QAAS,EACd94B,KAAK64B,UAAY74B,KAAK64B,SAAS74B,KAAK2U,UA8CtCokB,EAAUvhB,WAAa,WACrB,OAAOxX,KAAK45B,WAAa55B,KAAK65B,UAAY75B,KAAK05B,SAQjDX,EAAUld,KAAO,SAAUif,IAErB96B,KAAK66B,cAAgBC,GAAY96B,KAAK84B,UACxC94B,KAAK66B,YAAcC,EACnBA,EAAS5B,UAAYl5B,KACrB86B,EAASl8B,UAIbm6B,EAAUpb,QAAU,WACd3d,KAAK+6B,YAIT/6B,KAAKk5B,YAAcl5B,KAAKk5B,UAAU2B,YAAc,MAChD76B,KAAK66B,cAAgB76B,KAAK66B,YAAY3B,UAAY,MAClDl5B,KAAK84B,QAAS,EACd94B,KAAK+6B,WAAY,IAGnBhC,EAAUjc,YAAc,WACtB,OAAO9c,KAAKk5B,WAGdH,EAAUva,cAAgB,WACxB,OAAOxe,KAAK66B,aAGd9B,EAAUiC,aAAe,SAAU9b,GAMjClf,KAAK25B,cAAgB35B,KAAKg6B,iBAAmB9a,GA8C/C3nB,EAAQqf,WAAaA,G,qBCpUrB,IAAI7f,EAAS,EAAQ,QAEjBwB,EAAe,EAAQ,QAEvB0iC,EAAU,EAAQ,QAElB5tB,EAAe4tB,EAAQ5tB,aAEvB6tB,EAAa,EAAQ,QAqBrBrlB,EAAO9e,EAAO8e,KAKdslB,EAAkB,CAAC,OAAQ,QAAS,MAAO,SAAU,QAAS,UAK9DC,EAAW,CAAC,CAAC,QAAS,OAAQ,SAAU,CAAC,SAAU,MAAO,WAE9D,SAASC,EAAUC,EAAQjS,EAAOkS,EAAKC,EAAUC,GAC/C,IAAIxgC,EAAI,EACJC,EAAI,EAEQ,MAAZsgC,IACFA,EAAWppB,KAGI,MAAbqpB,IACFA,EAAYrpB,KAGd,IAAIspB,EAAqB,EACzBrS,EAAMsS,WAAU,SAAUj8B,EAAO4P,GAC/B,IAIIssB,EACAC,EALA9xB,EAAWrK,EAAMqK,SACjBzP,EAAOoF,EAAM/E,kBACbmhC,EAAYzS,EAAMmJ,QAAQljB,EAAM,GAChCysB,EAAgBD,GAAaA,EAAUnhC,kBAI3C,GAAe,eAAX2gC,EAAyB,CAC3B,IAAIU,EAAQ1hC,EAAKa,OAAS4gC,GAAiBA,EAAc9gC,EAAIX,EAAKW,EAAI,GACtE2gC,EAAQ3gC,EAAI+gC,EAGRJ,EAAQJ,GAAY97B,EAAMu8B,SAC5BhhC,EAAI,EACJ2gC,EAAQI,EACR9gC,GAAKwgC,EAAqBH,EAC1BG,EAAqBphC,EAAKc,QAG1BsgC,EAAqB/iC,KAAKC,IAAI8iC,EAAoBphC,EAAKc,YAEpD,CACL,IAAI8gC,EAAQ5hC,EAAKc,QAAU2gC,GAAiBA,EAAc7gC,EAAIZ,EAAKY,EAAI,GACvE2gC,EAAQ3gC,EAAIghC,EAERL,EAAQJ,GAAa/7B,EAAMu8B,SAC7BhhC,GAAKygC,EAAqBH,EAC1BrgC,EAAI,EACJ2gC,EAAQK,EACRR,EAAqBphC,EAAKa,OAE1BugC,EAAqB/iC,KAAKC,IAAI8iC,EAAoBphC,EAAKa,OAIvDuE,EAAMu8B,UAIVlyB,EAAS,GAAK9O,EACd8O,EAAS,GAAK7O,EACH,eAAXogC,EAA0BrgC,EAAI2gC,EAAQL,EAAMrgC,EAAI2gC,EAAQN,MAa5D,IAAIY,EAAMd,EASNe,EAAOrlC,EAAOslC,MAAMhB,EAAW,YAS/BiB,EAAOvlC,EAAOslC,MAAMhB,EAAW,cAiBnC,SAASkB,EAAiBC,EAAcC,EAAeC,GACrD,IAAIC,EAAiBF,EAActhC,MAC/ByhC,EAAkBH,EAAcrhC,OAChCH,EAAIoS,EAAamvB,EAAavhC,EAAG0hC,GACjCzhC,EAAImS,EAAamvB,EAAathC,EAAG0hC,GACjCpyB,EAAK6C,EAAamvB,EAAahyB,GAAImyB,GACnClyB,EAAK4C,EAAamvB,EAAa/xB,GAAImyB,GAMvC,OALCvuB,MAAMpT,IAAMoT,MAAMZ,WAAW+uB,EAAavhC,OAASA,EAAI,IACvDoT,MAAM7D,IAAO6D,MAAMZ,WAAW+uB,EAAahyB,QAAUA,EAAKmyB,IAC1DtuB,MAAMnT,IAAMmT,MAAMZ,WAAW+uB,EAAathC,OAASA,EAAI,IACvDmT,MAAM5D,IAAO4D,MAAMZ,WAAW+uB,EAAa/xB,QAAUA,EAAKmyB,GAC3DF,EAASxB,EAAW3H,kBAAkBmJ,GAAU,GACzC,CACLvhC,MAAOxC,KAAKC,IAAI4R,EAAKvP,EAAIyhC,EAAO,GAAKA,EAAO,GAAI,GAChDthC,OAAQzC,KAAKC,IAAI6R,EAAKvP,EAAIwhC,EAAO,GAAKA,EAAO,GAAI,IAqBrD,SAASG,EAAcL,EAAcC,EAAeC,GAClDA,EAASxB,EAAW3H,kBAAkBmJ,GAAU,GAChD,IAAIC,EAAiBF,EAActhC,MAC/ByhC,EAAkBH,EAAcrhC,OAChC0hC,EAAOzvB,EAAamvB,EAAaM,KAAMH,GACvCI,EAAM1vB,EAAamvB,EAAaO,IAAKH,GACrCI,EAAQ3vB,EAAamvB,EAAaQ,MAAOL,GACzCM,EAAS5vB,EAAamvB,EAAaS,OAAQL,GAC3CzhC,EAAQkS,EAAamvB,EAAarhC,MAAOwhC,GACzCvhC,EAASiS,EAAamvB,EAAaphC,OAAQwhC,GAC3CM,EAAiBR,EAAO,GAAKA,EAAO,GACpCS,EAAmBT,EAAO,GAAKA,EAAO,GACtCjhC,EAAS+gC,EAAa/gC,OA8C1B,OA5CI4S,MAAMlT,KACRA,EAAQwhC,EAAiBK,EAAQG,EAAmBL,GAGlDzuB,MAAMjT,KACRA,EAASwhC,EAAkBK,EAASC,EAAiBH,GAGzC,MAAVthC,IAQE4S,MAAMlT,IAAUkT,MAAMjT,KACpBK,EAASkhC,EAAiBC,EAC5BzhC,EAAyB,GAAjBwhC,EAERvhC,EAA2B,GAAlBwhC,GAKTvuB,MAAMlT,KACRA,EAAQM,EAASL,GAGfiT,MAAMjT,KACRA,EAASD,EAAQM,IAKjB4S,MAAMyuB,KACRA,EAAOH,EAAiBK,EAAQ7hC,EAAQgiC,GAGtC9uB,MAAM0uB,KACRA,EAAMH,EAAkBK,EAAS7hC,EAAS8hC,GAIpCV,EAAaM,MAAQN,EAAaQ,OACxC,IAAK,SACHF,EAAOH,EAAiB,EAAIxhC,EAAQ,EAAIuhC,EAAO,GAC/C,MAEF,IAAK,QACHI,EAAOH,EAAiBxhC,EAAQgiC,EAChC,MAGJ,OAAQX,EAAaO,KAAOP,EAAaS,QACvC,IAAK,SACL,IAAK,SACHF,EAAMH,EAAkB,EAAIxhC,EAAS,EAAIshC,EAAO,GAChD,MAEF,IAAK,SACHK,EAAMH,EAAkBxhC,EAAS8hC,EACjC,MAIJJ,EAAOA,GAAQ,EACfC,EAAMA,GAAO,EAET1uB,MAAMlT,KAERA,EAAQwhC,EAAiBQ,EAAmBL,GAAQE,GAAS,IAG3D3uB,MAAMjT,KAERA,EAASwhC,EAAkBM,EAAiBH,GAAOE,GAAU,IAG/D,IAAI3iC,EAAO,IAAI/B,EAAaukC,EAAOJ,EAAO,GAAIK,EAAML,EAAO,GAAIvhC,EAAOC,GAEtE,OADAd,EAAKoiC,OAASA,EACPpiC,EA0CT,SAAS8iC,EAAgBngC,EAAIu/B,EAAcC,EAAeC,EAAQn7B,GAChE,IAAIuQ,GAAKvQ,IAAQA,EAAI87B,IAAM97B,EAAI87B,GAAG,GAC9BtrB,GAAKxQ,IAAQA,EAAI87B,IAAM97B,EAAI87B,GAAG,GAC9BC,EAAe/7B,GAAOA,EAAI+7B,cAAgB,MAE9C,GAAKxrB,GAAMC,EAAX,CAIA,IAAIzX,EAEJ,GAAqB,QAAjBgjC,EACFhjC,EAAmB,UAAZ2C,EAAGkB,KAAmB,IAAI5F,EAAa,EAAG,GAAIikC,EAAarhC,OAAS,GAAIqhC,EAAaphC,QAAU,GAAK6B,EAAGtC,uBAI9G,GAFAL,EAAO2C,EAAGtC,kBAENsC,EAAGsgC,qBAAsB,CAC3B,IAAI70B,EAAYzL,EAAGuL,oBAGnBlO,EAAOA,EAAK0P,QACZ1P,EAAKuB,eAAe6M,GAKxB8zB,EAAeK,EAAc9lC,EAAOgU,SAAS,CAC3C5P,MAAOb,EAAKa,MACZC,OAAQd,EAAKc,QACZohC,GAAeC,EAAeC,GAIjC,IAAIc,EAAQvgC,EAAG8M,SACX2c,EAAK5U,EAAI0qB,EAAavhC,EAAIX,EAAKW,EAAI,EACnCsrB,EAAKxU,EAAIyqB,EAAathC,EAAIZ,EAAKY,EAAI,EACvC+B,EAAG8K,KAAK,WAA6B,QAAjBu1B,EAAyB,CAAC5W,EAAIH,GAAM,CAACiX,EAAM,GAAK9W,EAAI8W,EAAM,GAAKjX,KAQrF,SAASkX,EAAex5B,EAAQy5B,GAC9B,OAAqC,MAA9Bz5B,EAAOm3B,EAASsC,GAAO,KAA6C,MAA9Bz5B,EAAOm3B,EAASsC,GAAO,KAA6C,MAA9Bz5B,EAAOm3B,EAASsC,GAAO,IA6B5G,SAASC,EAAiBC,EAAcC,EAAWt8B,IAChDxK,EAAOk2B,SAAS1rB,KAASA,EAAM,IAChC,IAAIu8B,EAAav8B,EAAIu8B,YACpB/mC,EAAOm2B,QAAQ4Q,KAAgBA,EAAa,CAACA,EAAYA,IAC1D,IAAIC,EAAUC,EAAM5C,EAAS,GAAI,GAC7B6C,EAAUD,EAAM5C,EAAS,GAAI,GAIjC,SAAS4C,EAAME,EAAOR,GACpB,IAAIS,EAAY,GACZC,EAAgB,EAChBC,EAAS,GACTC,EAAmB,EACnBC,EAAoB,EAYxB,GAXA1oB,EAAKqoB,GAAO,SAAUjkC,GACpBokC,EAAOpkC,GAAQ2jC,EAAa3jC,MAE9B4b,EAAKqoB,GAAO,SAAUjkC,GAGpBukC,EAAQX,EAAW5jC,KAAUkkC,EAAUlkC,GAAQokC,EAAOpkC,GAAQ4jC,EAAU5jC,IACxEwkC,EAASN,EAAWlkC,IAASmkC,IAC7BK,EAASJ,EAAQpkC,IAASqkC,OAGxBR,EAAWJ,GAQb,OANIe,EAASZ,EAAWK,EAAM,IAC5BG,EAAOH,EAAM,IAAM,KACVO,EAASZ,EAAWK,EAAM,MACnCG,EAAOH,EAAM,IAAM,MAGdG,EAOT,GAAIC,IAAqBC,GAAsBH,EAK1C,IAAIA,GAAiBG,EACtB,OAAOJ,EAGP,IAAK,IAAI7yB,EAAI,EAAGA,EAAI4yB,EAAM1yB,OAAQF,IAAK,CACrC,IAAIrR,EAAOikC,EAAM5yB,GAEjB,IAAKkzB,EAAQL,EAAWlkC,IAASukC,EAAQZ,EAAc3jC,GAAO,CAC5DkkC,EAAUlkC,GAAQ2jC,EAAa3jC,GAC/B,OAIJ,OAAOkkC,EAjBT,OAAOE,EAqBX,SAASG,EAAQ10B,EAAK7P,GACpB,OAAO6P,EAAI1P,eAAeH,GAG5B,SAASwkC,EAAS30B,EAAK7P,GACrB,OAAoB,MAAb6P,EAAI7P,IAA+B,SAAd6P,EAAI7P,GAGlC,SAASykC,EAAKR,EAAO/1B,EAAQyrB,GAC3B/d,EAAKqoB,GAAO,SAAUjkC,GACpBkO,EAAOlO,GAAQ25B,EAAO35B,MAnE1BykC,EAAKtD,EAAS,GAAIwC,EAAcG,GAChCW,EAAKtD,EAAS,GAAIwC,EAAcK,GA6ElC,SAASU,EAAgB/K,GACvB,OAAOgL,EAAiB,GAAIhL,GAS9B,SAASgL,EAAiBz2B,EAAQyrB,GAIhC,OAHAA,GAAUzrB,GAAU0N,EAAKslB,GAAiB,SAAUlhC,GAClD25B,EAAOx5B,eAAeH,KAAUkO,EAAOlO,GAAQ25B,EAAO35B,OAEjDkO,EAGT5Q,EAAQ4jC,gBAAkBA,EAC1B5jC,EAAQ6jC,SAAWA,EACnB7jC,EAAQ4kC,IAAMA,EACd5kC,EAAQ6kC,KAAOA,EACf7kC,EAAQ+kC,KAAOA,EACf/kC,EAAQglC,iBAAmBA,EAC3BhlC,EAAQslC,cAAgBA,EACxBtlC,EAAQ6lC,gBAAkBA,EAC1B7lC,EAAQkmC,eAAiBA,EACzBlmC,EAAQomC,iBAAmBA,EAC3BpmC,EAAQonC,gBAAkBA,EAC1BpnC,EAAQqnC,iBAAmBA,G,qBCtf3B,IAAIC,EAAW,EAAQ,QAEnBpoB,EAAQ,EAAQ,QAEhBtU,EAAasU,EAAMtU,WAoBnB2d,EAAW,CACbtC,mBAAmB,EACnBhE,kBAAkB,EAClB2C,MAAO,SAAUxB,EAAa5W,GAC5B,IAAI8W,EAAOF,EAAYG,UACnBgkB,GAAmBnkB,EAAYokB,uBAAyB,mBAAmB3rB,MAAM,KAEjFla,EAAQyhB,EAAY9d,IAAIiiC,GACxBE,GAAgB78B,EAAWjJ,IAAYA,aAAiB2lC,EAAoB,KAAR3lC,EAEnEA,IAAS8lC,IACZ9lC,EAAQyhB,EAAYskB,oBACpBtkB,EAAY1gB,KAAM,KAAM8J,EAAQm7B,mBAGlCrkB,EAAK+F,UAAU,QAAS1nB,GACxB,IAAIimC,GAAyBxkB,EAAYykB,6BAA+B,yBAAyBhsB,MAAM,KACnGqkB,EAAc9c,EAAY9d,IAAIsiC,GAGlC,GAFAtkB,EAAK+F,UAAU,cAAe6W,IAEzB1zB,EAAQ0V,iBAAiBkB,GAAc,CACtCqkB,GACFnkB,EAAKhF,MAAK,SAAUvG,GAClBuL,EAAKsG,cAAc7R,EAAK,QAAS0vB,EAAcrkB,EAAYuG,cAAc5R,QAK7E,IAAI0P,EAAW,SAAUnE,EAAMvL,GAC7B,IAAI8R,EAAYvG,EAAKwG,aAAa/R,GAC9BpW,EAAQkoB,EAAUvkB,IAAIiiC,GAAiB,GACvCrH,EAAcrW,EAAUvkB,IAAIsiC,GAAuB,GAE1C,MAATjmC,GACF2hB,EAAKsG,cAAc7R,EAAK,QAASpW,GAGhB,MAAfu+B,GACF5c,EAAKsG,cAAc7R,EAAK,cAAemoB,IAI3C,MAAO,CACLzY,SAAUnE,EAAKkG,cAAgB/B,EAAW,SAKlDe,EAAOxoB,QAAUuoB","file":"js/chunk-vendors~deda5bc4.8a1c4dff.js","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar pathTool = require(\"zrender/lib/tool/path\");\n\nvar colorTool = require(\"zrender/lib/tool/color\");\n\nvar matrix = require(\"zrender/lib/core/matrix\");\n\nvar vector = require(\"zrender/lib/core/vector\");\n\nvar Path = require(\"zrender/lib/graphic/Path\");\n\nvar Transformable = require(\"zrender/lib/mixin/Transformable\");\n\nvar ZImage = require(\"zrender/lib/graphic/Image\");\n\nexports.Image = ZImage;\n\nvar Group = require(\"zrender/lib/container/Group\");\n\nexports.Group = Group;\n\nvar Text = require(\"zrender/lib/graphic/Text\");\n\nexports.Text = Text;\n\nvar Circle = require(\"zrender/lib/graphic/shape/Circle\");\n\nexports.Circle = Circle;\n\nvar Sector = require(\"zrender/lib/graphic/shape/Sector\");\n\nexports.Sector = Sector;\n\nvar Ring = require(\"zrender/lib/graphic/shape/Ring\");\n\nexports.Ring = Ring;\n\nvar Polygon = require(\"zrender/lib/graphic/shape/Polygon\");\n\nexports.Polygon = Polygon;\n\nvar Polyline = require(\"zrender/lib/graphic/shape/Polyline\");\n\nexports.Polyline = Polyline;\n\nvar Rect = require(\"zrender/lib/graphic/shape/Rect\");\n\nexports.Rect = Rect;\n\nvar Line = require(\"zrender/lib/graphic/shape/Line\");\n\nexports.Line = Line;\n\nvar BezierCurve = require(\"zrender/lib/graphic/shape/BezierCurve\");\n\nexports.BezierCurve = BezierCurve;\n\nvar Arc = require(\"zrender/lib/graphic/shape/Arc\");\n\nexports.Arc = Arc;\n\nvar CompoundPath = require(\"zrender/lib/graphic/CompoundPath\");\n\nexports.CompoundPath = CompoundPath;\n\nvar LinearGradient = require(\"zrender/lib/graphic/LinearGradient\");\n\nexports.LinearGradient = LinearGradient;\n\nvar RadialGradient = require(\"zrender/lib/graphic/RadialGradient\");\n\nexports.RadialGradient = RadialGradient;\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\nexports.BoundingRect = BoundingRect;\n\nvar IncrementalDisplayable = require(\"zrender/lib/graphic/IncrementalDisplayable\");\n\nexports.IncrementalDisplayable = IncrementalDisplayable;\n\nvar subPixelOptimizeUtil = require(\"zrender/lib/graphic/helper/subPixelOptimize\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar mathMax = Math.max;\nvar mathMin = Math.min;\nvar EMPTY_OBJ = {};\nvar Z2_EMPHASIS_LIFT = 1; // key: label model property nane, value: style property name.\n\nvar CACHED_LABEL_STYLE_PROPERTIES = {\n  color: 'textFill',\n  textBorderColor: 'textStroke',\n  textBorderWidth: 'textStrokeWidth'\n};\nvar EMPHASIS = 'emphasis';\nvar NORMAL = 'normal'; // Reserve 0 as default.\n\nvar _highlightNextDigit = 1;\nvar _highlightKeyMap = {};\nvar _customShapeMap = {};\n/**\n * Extend shape with parameters\n */\n\nfunction extendShape(opts) {\n  return Path.extend(opts);\n}\n/**\n * Extend path\n */\n\n\nfunction extendPath(pathData, opts) {\n  return pathTool.extendFromString(pathData, opts);\n}\n/**\n * Register a user defined shape.\n * The shape class can be fetched by `getShapeClass`\n * This method will overwrite the registered shapes, including\n * the registered built-in shapes, if using the same `name`.\n * The shape can be used in `custom series` and\n * `graphic component` by declaring `{type: name}`.\n *\n * @param {string} name\n * @param {Object} ShapeClass Can be generated by `extendShape`.\n */\n\n\nfunction registerShape(name, ShapeClass) {\n  _customShapeMap[name] = ShapeClass;\n}\n/**\n * Find shape class registered by `registerShape`. Usually used in\n * fetching user defined shape.\n *\n * [Caution]:\n * (1) This method **MUST NOT be used inside echarts !!!**, unless it is prepared\n * to use user registered shapes.\n * Because the built-in shape (see `getBuiltInShape`) will be registered by\n * `registerShape` by default. That enables users to get both built-in\n * shapes as well as the shapes belonging to themsleves. But users can overwrite\n * the built-in shapes by using names like 'circle', 'rect' via calling\n * `registerShape`. So the echarts inner featrues should not fetch shapes from here\n * in case that it is overwritten by users, except that some features, like\n * `custom series`, `graphic component`, do it deliberately.\n *\n * (2) In the features like `custom series`, `graphic component`, the user input\n * `{tpye: 'xxx'}` does not only specify shapes but also specify other graphic\n * elements like `'group'`, `'text'`, `'image'` or event `'path'`. Those names\n * are reserved names, that is, if some user register a shape named `'image'`,\n * the shape will not be used. If we intending to add some more reserved names\n * in feature, that might bring break changes (disable some existing user shape\n * names). But that case probably rearly happen. So we dont make more mechanism\n * to resolve this issue here.\n *\n * @param {string} name\n * @return {Object} The shape class. If not found, return nothing.\n */\n\n\nfunction getShapeClass(name) {\n  if (_customShapeMap.hasOwnProperty(name)) {\n    return _customShapeMap[name];\n  }\n}\n/**\n * Create a path element from path data string\n * @param {string} pathData\n * @param {Object} opts\n * @param {module:zrender/core/BoundingRect} rect\n * @param {string} [layout=cover] 'center' or 'cover'\n */\n\n\nfunction makePath(pathData, opts, rect, layout) {\n  var path = pathTool.createFromString(pathData, opts);\n\n  if (rect) {\n    if (layout === 'center') {\n      rect = centerGraphic(rect, path.getBoundingRect());\n    }\n\n    resizePath(path, rect);\n  }\n\n  return path;\n}\n/**\n * Create a image element from image url\n * @param {string} imageUrl image url\n * @param {Object} opts options\n * @param {module:zrender/core/BoundingRect} rect constrain rect\n * @param {string} [layout=cover] 'center' or 'cover'\n */\n\n\nfunction makeImage(imageUrl, rect, layout) {\n  var path = new ZImage({\n    style: {\n      image: imageUrl,\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height\n    },\n    onload: function (img) {\n      if (layout === 'center') {\n        var boundingRect = {\n          width: img.width,\n          height: img.height\n        };\n        path.setStyle(centerGraphic(rect, boundingRect));\n      }\n    }\n  });\n  return path;\n}\n/**\n * Get position of centered element in bounding box.\n *\n * @param  {Object} rect         element local bounding box\n * @param  {Object} boundingRect constraint bounding box\n * @return {Object} element position containing x, y, width, and height\n */\n\n\nfunction centerGraphic(rect, boundingRect) {\n  // Set rect to center, keep width / height ratio.\n  var aspect = boundingRect.width / boundingRect.height;\n  var width = rect.height * aspect;\n  var height;\n\n  if (width <= rect.width) {\n    height = rect.height;\n  } else {\n    width = rect.width;\n    height = width / aspect;\n  }\n\n  var cx = rect.x + rect.width / 2;\n  var cy = rect.y + rect.height / 2;\n  return {\n    x: cx - width / 2,\n    y: cy - height / 2,\n    width: width,\n    height: height\n  };\n}\n\nvar mergePath = pathTool.mergePath;\n/**\n * Resize a path to fit the rect\n * @param {module:zrender/graphic/Path} path\n * @param {Object} rect\n */\n\nfunction resizePath(path, rect) {\n  if (!path.applyTransform) {\n    return;\n  }\n\n  var pathRect = path.getBoundingRect();\n  var m = pathRect.calculateTransform(rect);\n  path.applyTransform(m);\n}\n/**\n * Sub pixel optimize line for canvas\n *\n * @param {Object} param\n * @param {Object} [param.shape]\n * @param {number} [param.shape.x1]\n * @param {number} [param.shape.y1]\n * @param {number} [param.shape.x2]\n * @param {number} [param.shape.y2]\n * @param {Object} [param.style]\n * @param {number} [param.style.lineWidth]\n * @return {Object} Modified param\n */\n\n\nfunction subPixelOptimizeLine(param) {\n  subPixelOptimizeUtil.subPixelOptimizeLine(param.shape, param.shape, param.style);\n  return param;\n}\n/**\n * Sub pixel optimize rect for canvas\n *\n * @param {Object} param\n * @param {Object} [param.shape]\n * @param {number} [param.shape.x]\n * @param {number} [param.shape.y]\n * @param {number} [param.shape.width]\n * @param {number} [param.shape.height]\n * @param {Object} [param.style]\n * @param {number} [param.style.lineWidth]\n * @return {Object} Modified param\n */\n\n\nfunction subPixelOptimizeRect(param) {\n  subPixelOptimizeUtil.subPixelOptimizeRect(param.shape, param.shape, param.style);\n  return param;\n}\n/**\n * Sub pixel optimize for canvas\n *\n * @param {number} position Coordinate, such as x, y\n * @param {number} lineWidth Should be nonnegative integer.\n * @param {boolean=} positiveOrNegative Default false (negative).\n * @return {number} Optimized position.\n */\n\n\nvar subPixelOptimize = subPixelOptimizeUtil.subPixelOptimize;\n\nfunction hasFillOrStroke(fillOrStroke) {\n  return fillOrStroke != null && fillOrStroke !== 'none';\n} // Most lifted color are duplicated.\n\n\nvar liftedColorMap = zrUtil.createHashMap();\nvar liftedColorCount = 0;\n\nfunction liftColor(color) {\n  if (typeof color !== 'string') {\n    return color;\n  }\n\n  var liftedColor = liftedColorMap.get(color);\n\n  if (!liftedColor) {\n    liftedColor = colorTool.lift(color, -0.1);\n\n    if (liftedColorCount < 10000) {\n      liftedColorMap.set(color, liftedColor);\n      liftedColorCount++;\n    }\n  }\n\n  return liftedColor;\n}\n\nfunction cacheElementStl(el) {\n  if (!el.__hoverStlDirty) {\n    return;\n  }\n\n  el.__hoverStlDirty = false;\n  var hoverStyle = el.__hoverStl;\n\n  if (!hoverStyle) {\n    el.__cachedNormalStl = el.__cachedNormalZ2 = null;\n    return;\n  }\n\n  var normalStyle = el.__cachedNormalStl = {};\n  el.__cachedNormalZ2 = el.z2;\n  var elStyle = el.style;\n\n  for (var name in hoverStyle) {\n    // See comment in `singleEnterEmphasis`.\n    if (hoverStyle[name] != null) {\n      normalStyle[name] = elStyle[name];\n    }\n  } // Always cache fill and stroke to normalStyle for lifting color.\n\n\n  normalStyle.fill = elStyle.fill;\n  normalStyle.stroke = elStyle.stroke;\n}\n\nfunction singleEnterEmphasis(el) {\n  var hoverStl = el.__hoverStl;\n\n  if (!hoverStl || el.__highlighted) {\n    return;\n  }\n\n  var zr = el.__zr;\n  var useHoverLayer = el.useHoverLayer && zr && zr.painter.type === 'canvas';\n  el.__highlighted = useHoverLayer ? 'layer' : 'plain';\n\n  if (el.isGroup || !zr && el.useHoverLayer) {\n    return;\n  }\n\n  var elTarget = el;\n  var targetStyle = el.style;\n\n  if (useHoverLayer) {\n    elTarget = zr.addHover(el);\n    targetStyle = elTarget.style;\n  }\n\n  rollbackDefaultTextStyle(targetStyle);\n\n  if (!useHoverLayer) {\n    cacheElementStl(elTarget);\n  } // styles can be:\n  // {\n  //    label: {\n  //        show: false,\n  //        position: 'outside',\n  //        fontSize: 18\n  //    },\n  //    emphasis: {\n  //        label: {\n  //            show: true\n  //        }\n  //    }\n  // },\n  // where properties of `emphasis` may not appear in `normal`. We previously use\n  // module:echarts/util/model#defaultEmphasis to merge `normal` to `emphasis`.\n  // But consider rich text and setOption in merge mode, it is impossible to cover\n  // all properties in merge. So we use merge mode when setting style here.\n  // But we choose the merge strategy that only properties that is not `null/undefined`.\n  // Because when making a textStyle (espacially rich text), it is not easy to distinguish\n  // `hasOwnProperty` and `null/undefined` in code, so we trade them as the same for simplicity.\n  // But this strategy brings a trouble that `null/undefined` can not be used to remove\n  // style any more in `emphasis`. Users can both set properties directly on normal and\n  // emphasis to avoid this issue, or we might support `'none'` for this case if required.\n\n\n  targetStyle.extendFrom(hoverStl);\n  setDefaultHoverFillStroke(targetStyle, hoverStl, 'fill');\n  setDefaultHoverFillStroke(targetStyle, hoverStl, 'stroke');\n  applyDefaultTextStyle(targetStyle);\n\n  if (!useHoverLayer) {\n    el.dirty(false);\n    el.z2 += Z2_EMPHASIS_LIFT;\n  }\n}\n\nfunction setDefaultHoverFillStroke(targetStyle, hoverStyle, prop) {\n  if (!hasFillOrStroke(hoverStyle[prop]) && hasFillOrStroke(targetStyle[prop])) {\n    targetStyle[prop] = liftColor(targetStyle[prop]);\n  }\n}\n\nfunction singleEnterNormal(el) {\n  var highlighted = el.__highlighted;\n\n  if (!highlighted) {\n    return;\n  }\n\n  el.__highlighted = false;\n\n  if (el.isGroup) {\n    return;\n  }\n\n  if (highlighted === 'layer') {\n    el.__zr && el.__zr.removeHover(el);\n  } else {\n    var style = el.style;\n    var normalStl = el.__cachedNormalStl;\n\n    if (normalStl) {\n      rollbackDefaultTextStyle(style);\n      el.setStyle(normalStl);\n      applyDefaultTextStyle(style);\n    } // `__cachedNormalZ2` will not be reset if calling `setElementHoverStyle`\n    // when `el` is on emphasis state. So here by comparing with 1, we try\n    // hard to make the bug case rare.\n\n\n    var normalZ2 = el.__cachedNormalZ2;\n\n    if (normalZ2 != null && el.z2 - normalZ2 === Z2_EMPHASIS_LIFT) {\n      el.z2 = normalZ2;\n    }\n  }\n}\n\nfunction traverseUpdate(el, updater, commonParam) {\n  // If root is group, also enter updater for `highDownOnUpdate`.\n  var fromState = NORMAL;\n  var toState = NORMAL;\n  var trigger; // See the rule of `highDownOnUpdate` on `graphic.setAsHighDownDispatcher`.\n\n  el.__highlighted && (fromState = EMPHASIS, trigger = true);\n  updater(el, commonParam);\n  el.__highlighted && (toState = EMPHASIS, trigger = true);\n  el.isGroup && el.traverse(function (child) {\n    !child.isGroup && updater(child, commonParam);\n  });\n  trigger && el.__highDownOnUpdate && el.__highDownOnUpdate(fromState, toState);\n}\n/**\n * Set hover style (namely \"emphasis style\") of element, based on the current\n * style of the given `el`.\n * This method should be called after all of the normal styles have been adopted\n * to the `el`. See the reason on `setHoverStyle`.\n *\n * @param {module:zrender/Element} el Should not be `zrender/container/Group`.\n * @param {Object} [el.hoverStyle] Can be set on el or its descendants,\n *        e.g., `el.hoverStyle = ...; graphic.setHoverStyle(el); `.\n *        Often used when item group has a label element and it's hoverStyle is different.\n * @param {Object|boolean} [hoverStl] The specified hover style.\n *        If set as `false`, disable the hover style.\n *        Similarly, The `el.hoverStyle` can alse be set\n *        as `false` to disable the hover style.\n *        Otherwise, use the default hover style if not provided.\n */\n\n\nfunction setElementHoverStyle(el, hoverStl) {\n  // For performance consideration, it might be better to make the \"hover style\" only the\n  // difference properties from the \"normal style\", but not a entire copy of all styles.\n  hoverStl = el.__hoverStl = hoverStl !== false && (el.hoverStyle || hoverStl || {});\n  el.__hoverStlDirty = true; // FIXME\n  // It is not completely right to save \"normal\"/\"emphasis\" flag on elements.\n  // It probably should be saved on `data` of series. Consider the cases:\n  // (1) A highlighted elements are moved out of the view port and re-enter\n  // again by dataZoom.\n  // (2) call `setOption` and replace elements totally when they are highlighted.\n\n  if (el.__highlighted) {\n    // Consider the case:\n    // The styles of a highlighted `el` is being updated. The new \"emphasis style\"\n    // should be adapted to the `el`. Notice here new \"normal styles\" should have\n    // been set outside and the cached \"normal style\" is out of date.\n    el.__cachedNormalStl = null; // Do not clear `__cachedNormalZ2` here, because setting `z2` is not a constraint\n    // of this method. In most cases, `z2` is not set and hover style should be able\n    // to rollback. Of course, that would bring bug, but only in a rare case, see\n    // `doSingleLeaveHover` for details.\n\n    singleEnterNormal(el);\n    singleEnterEmphasis(el);\n  }\n}\n\nfunction onElementMouseOver(e) {\n  !shouldSilent(this, e) // \"emphasis\" event highlight has higher priority than mouse highlight.\n  && !this.__highByOuter && traverseUpdate(this, singleEnterEmphasis);\n}\n\nfunction onElementMouseOut(e) {\n  !shouldSilent(this, e) // \"emphasis\" event highlight has higher priority than mouse highlight.\n  && !this.__highByOuter && traverseUpdate(this, singleEnterNormal);\n}\n\nfunction onElementEmphasisEvent(highlightDigit) {\n  this.__highByOuter |= 1 << (highlightDigit || 0);\n  traverseUpdate(this, singleEnterEmphasis);\n}\n\nfunction onElementNormalEvent(highlightDigit) {\n  !(this.__highByOuter &= ~(1 << (highlightDigit || 0))) && traverseUpdate(this, singleEnterNormal);\n}\n\nfunction shouldSilent(el, e) {\n  return el.__highDownSilentOnTouch && e.zrByTouch;\n}\n/**\n * Set hover style (namely \"emphasis style\") of element,\n * based on the current style of the given `el`.\n *\n * (1)\n * **CONSTRAINTS** for this method:\n * <A> This method MUST be called after all of the normal styles having been adopted\n * to the `el`.\n * <B> The input `hoverStyle` (that is, \"emphasis style\") MUST be the subset of the\n * \"normal style\" having been set to the el.\n * <C> `color` MUST be one of the \"normal styles\" (because color might be lifted as\n * a default hover style).\n *\n * The reason: this method treat the current style of the `el` as the \"normal style\"\n * and cache them when enter/update the \"emphasis style\". Consider the case: the `el`\n * is in \"emphasis\" state and `setOption`/`dispatchAction` trigger the style updating\n * logic, where the el should shift from the original emphasis style to the new\n * \"emphasis style\" and should be able to \"downplay\" back to the new \"normal style\".\n *\n * Indeed, it is error-prone to make a interface has so many constraints, but I have\n * not found a better solution yet to fit the backward compatibility, performance and\n * the current programming style.\n *\n * (2)\n * Call the method for a \"root\" element once. Do not call it for each descendants.\n * If the descendants elemenets of a group has itself hover style different from the\n * root group, we can simply mount the style on `el.hoverStyle` for them, but should\n * not call this method for them.\n *\n * (3) These input parameters can be set directly on `el`:\n *\n * @param {module:zrender/Element} el\n * @param {Object} [el.hoverStyle] See `graphic.setElementHoverStyle`.\n * @param {boolean} [el.highDownSilentOnTouch=false] See `graphic.setAsHighDownDispatcher`.\n * @param {Function} [el.highDownOnUpdate] See `graphic.setAsHighDownDispatcher`.\n * @param {Object|boolean} [hoverStyle] See `graphic.setElementHoverStyle`.\n */\n\n\nfunction setHoverStyle(el, hoverStyle) {\n  setAsHighDownDispatcher(el, true);\n  traverseUpdate(el, setElementHoverStyle, hoverStyle);\n}\n/**\n * @param {module:zrender/Element} el\n * @param {Function} [el.highDownOnUpdate] Called when state updated.\n *        Since `setHoverStyle` has the constraint that it must be called after\n *        all of the normal style updated, `highDownOnUpdate` is not needed to\n *        trigger if both `fromState` and `toState` is 'normal', and needed to\n *        trigger if both `fromState` and `toState` is 'emphasis', which enables\n *        to sync outside style settings to \"emphasis\" state.\n *        @this {string} This dispatcher `el`.\n *        @param {string} fromState Can be \"normal\" or \"emphasis\".\n *               `fromState` might equal to `toState`,\n *               for example, when this method is called when `el` is\n *               on \"emphasis\" state.\n *        @param {string} toState Can be \"normal\" or \"emphasis\".\n *\n *        FIXME\n *        CAUTION: Do not expose `highDownOnUpdate` outside echarts.\n *        Because it is not a complete solution. The update\n *        listener should not have been mount in element,\n *        and the normal/emphasis state should not have\n *        mantained on elements.\n *\n * @param {boolean} [el.highDownSilentOnTouch=false]\n *        In touch device, mouseover event will be trigger on touchstart event\n *        (see module:zrender/dom/HandlerProxy). By this mechanism, we can\n *        conveniently use hoverStyle when tap on touch screen without additional\n *        code for compatibility.\n *        But if the chart/component has select feature, which usually also use\n *        hoverStyle, there might be conflict between 'select-highlight' and\n *        'hover-highlight' especially when roam is enabled (see geo for example).\n *        In this case, `highDownSilentOnTouch` should be used to disable\n *        hover-highlight on touch device.\n * @param {boolean} [asDispatcher=true] If `false`, do not set as \"highDownDispatcher\".\n */\n\n\nfunction setAsHighDownDispatcher(el, asDispatcher) {\n  var disable = asDispatcher === false; // Make `highDownSilentOnTouch` and `highDownOnUpdate` only work after\n  // `setAsHighDownDispatcher` called. Avoid it is modified by user unexpectedly.\n\n  el.__highDownSilentOnTouch = el.highDownSilentOnTouch;\n  el.__highDownOnUpdate = el.highDownOnUpdate; // Simple optimize, since this method might be\n  // called for each elements of a group in some cases.\n\n  if (!disable || el.__highDownDispatcher) {\n    var method = disable ? 'off' : 'on'; // Duplicated function will be auto-ignored, see Eventful.js.\n\n    el[method]('mouseover', onElementMouseOver)[method]('mouseout', onElementMouseOut); // Emphasis, normal can be triggered manually by API or other components like hover link.\n\n    el[method]('emphasis', onElementEmphasisEvent)[method]('normal', onElementNormalEvent); // Also keep previous record.\n\n    el.__highByOuter = el.__highByOuter || 0;\n    el.__highDownDispatcher = !disable;\n  }\n}\n/**\n * @param {module:zrender/src/Element} el\n * @return {boolean}\n */\n\n\nfunction isHighDownDispatcher(el) {\n  return !!(el && el.__highDownDispatcher);\n}\n/**\n * Support hightlight/downplay record on each elements.\n * For the case: hover highlight/downplay (legend, visualMap, ...) and\n * user triggerred hightlight/downplay should not conflict.\n * Only all of the highlightDigit cleared, return to normal.\n * @param {string} highlightKey\n * @return {number} highlightDigit\n */\n\n\nfunction getHighlightDigit(highlightKey) {\n  var highlightDigit = _highlightKeyMap[highlightKey];\n\n  if (highlightDigit == null && _highlightNextDigit <= 32) {\n    highlightDigit = _highlightKeyMap[highlightKey] = _highlightNextDigit++;\n  }\n\n  return highlightDigit;\n}\n/**\n * See more info in `setTextStyleCommon`.\n * @param {Object|module:zrender/graphic/Style} normalStyle\n * @param {Object} emphasisStyle\n * @param {module:echarts/model/Model} normalModel\n * @param {module:echarts/model/Model} emphasisModel\n * @param {Object} opt Check `opt` of `setTextStyleCommon` to find other props.\n * @param {string|Function} [opt.defaultText]\n * @param {module:echarts/model/Model} [opt.labelFetcher] Fetch text by\n *      `opt.labelFetcher.getFormattedLabel(opt.labelDataIndex, 'normal'/'emphasis', null, opt.labelDimIndex, opt.labelProp)`\n * @param {number} [opt.labelDataIndex] Fetch text by\n *      `opt.textFetcher.getFormattedLabel(opt.labelDataIndex, 'normal'/'emphasis', null, opt.labelDimIndex, opt.labelProp)`\n * @param {number} [opt.labelDimIndex] Fetch text by\n *      `opt.textFetcher.getFormattedLabel(opt.labelDataIndex, 'normal'/'emphasis', null, opt.labelDimIndex, opt.labelProp)`\n * @param {string} [opt.labelProp] Fetch text by\n *      `opt.textFetcher.getFormattedLabel(opt.labelDataIndex, 'normal'/'emphasis', null, opt.labelDimIndex, opt.labelProp)`\n * @param {Object} [normalSpecified]\n * @param {Object} [emphasisSpecified]\n */\n\n\nfunction setLabelStyle(normalStyle, emphasisStyle, normalModel, emphasisModel, opt, normalSpecified, emphasisSpecified) {\n  opt = opt || EMPTY_OBJ;\n  var labelFetcher = opt.labelFetcher;\n  var labelDataIndex = opt.labelDataIndex;\n  var labelDimIndex = opt.labelDimIndex;\n  var labelProp = opt.labelProp; // This scenario, `label.normal.show = true; label.emphasis.show = false`,\n  // is not supported util someone requests.\n\n  var showNormal = normalModel.getShallow('show');\n  var showEmphasis = emphasisModel.getShallow('show'); // Consider performance, only fetch label when necessary.\n  // If `normal.show` is `false` and `emphasis.show` is `true` and `emphasis.formatter` is not set,\n  // label should be displayed, where text is fetched by `normal.formatter` or `opt.defaultText`.\n\n  var baseText;\n\n  if (showNormal || showEmphasis) {\n    if (labelFetcher) {\n      baseText = labelFetcher.getFormattedLabel(labelDataIndex, 'normal', null, labelDimIndex, labelProp);\n    }\n\n    if (baseText == null) {\n      baseText = zrUtil.isFunction(opt.defaultText) ? opt.defaultText(labelDataIndex, opt) : opt.defaultText;\n    }\n  }\n\n  var normalStyleText = showNormal ? baseText : null;\n  var emphasisStyleText = showEmphasis ? zrUtil.retrieve2(labelFetcher ? labelFetcher.getFormattedLabel(labelDataIndex, 'emphasis', null, labelDimIndex, labelProp) : null, baseText) : null; // Optimize: If style.text is null, text will not be drawn.\n\n  if (normalStyleText != null || emphasisStyleText != null) {\n    // Always set `textStyle` even if `normalStyle.text` is null, because default\n    // values have to be set on `normalStyle`.\n    // If we set default values on `emphasisStyle`, consider case:\n    // Firstly, `setOption(... label: {normal: {text: null}, emphasis: {show: true}} ...);`\n    // Secondly, `setOption(... label: {noraml: {show: true, text: 'abc', color: 'red'} ...);`\n    // Then the 'red' will not work on emphasis.\n    setTextStyle(normalStyle, normalModel, normalSpecified, opt);\n    setTextStyle(emphasisStyle, emphasisModel, emphasisSpecified, opt, true);\n  }\n\n  normalStyle.text = normalStyleText;\n  emphasisStyle.text = emphasisStyleText;\n}\n/**\n * Modify label style manually.\n * Only works after `setLabelStyle` and `setElementHoverStyle` called.\n *\n * @param {module:zrender/src/Element} el\n * @param {Object} [normalStyleProps] optional\n * @param {Object} [emphasisStyleProps] optional\n */\n\n\nfunction modifyLabelStyle(el, normalStyleProps, emphasisStyleProps) {\n  var elStyle = el.style;\n\n  if (normalStyleProps) {\n    rollbackDefaultTextStyle(elStyle);\n    el.setStyle(normalStyleProps);\n    applyDefaultTextStyle(elStyle);\n  }\n\n  elStyle = el.__hoverStl;\n\n  if (emphasisStyleProps && elStyle) {\n    rollbackDefaultTextStyle(elStyle);\n    zrUtil.extend(elStyle, emphasisStyleProps);\n    applyDefaultTextStyle(elStyle);\n  }\n}\n/**\n * Set basic textStyle properties.\n * See more info in `setTextStyleCommon`.\n * @param {Object|module:zrender/graphic/Style} textStyle\n * @param {module:echarts/model/Model} model\n * @param {Object} [specifiedTextStyle] Can be overrided by settings in model.\n * @param {Object} [opt] See `opt` of `setTextStyleCommon`.\n * @param {boolean} [isEmphasis]\n */\n\n\nfunction setTextStyle(textStyle, textStyleModel, specifiedTextStyle, opt, isEmphasis) {\n  setTextStyleCommon(textStyle, textStyleModel, opt, isEmphasis);\n  specifiedTextStyle && zrUtil.extend(textStyle, specifiedTextStyle); // textStyle.host && textStyle.host.dirty && textStyle.host.dirty(false);\n\n  return textStyle;\n}\n/**\n * Set text option in the style.\n * See more info in `setTextStyleCommon`.\n * @deprecated\n * @param {Object} textStyle\n * @param {module:echarts/model/Model} labelModel\n * @param {string|boolean} defaultColor Default text color.\n *        If set as false, it will be processed as a emphasis style.\n */\n\n\nfunction setText(textStyle, labelModel, defaultColor) {\n  var opt = {\n    isRectText: true\n  };\n  var isEmphasis;\n\n  if (defaultColor === false) {\n    isEmphasis = true;\n  } else {\n    // Support setting color as 'auto' to get visual color.\n    opt.autoColor = defaultColor;\n  }\n\n  setTextStyleCommon(textStyle, labelModel, opt, isEmphasis); // textStyle.host && textStyle.host.dirty && textStyle.host.dirty(false);\n}\n/**\n * The uniform entry of set text style, that is, retrieve style definitions\n * from `model` and set to `textStyle` object.\n *\n * Never in merge mode, but in overwrite mode, that is, all of the text style\n * properties will be set. (Consider the states of normal and emphasis and\n * default value can be adopted, merge would make the logic too complicated\n * to manage.)\n *\n * The `textStyle` object can either be a plain object or an instance of\n * `zrender/src/graphic/Style`, and either be the style of normal or emphasis.\n * After this mothod called, the `textStyle` object can then be used in\n * `el.setStyle(textStyle)` or `el.hoverStyle = textStyle`.\n *\n * Default value will be adopted and `insideRollbackOpt` will be created.\n * See `applyDefaultTextStyle` `rollbackDefaultTextStyle` for more details.\n *\n * opt: {\n *      disableBox: boolean, Whether diable drawing box of block (outer most).\n *      isRectText: boolean,\n *      autoColor: string, specify a color when color is 'auto',\n *              for textFill, textStroke, textBackgroundColor, and textBorderColor.\n *              If autoColor specified, it is used as default textFill.\n *      useInsideStyle:\n *              `true`: Use inside style (textFill, textStroke, textStrokeWidth)\n *                  if `textFill` is not specified.\n *              `false`: Do not use inside style.\n *              `null/undefined`: use inside style if `isRectText` is true and\n *                  `textFill` is not specified and textPosition contains `'inside'`.\n *      forceRich: boolean\n * }\n */\n\n\nfunction setTextStyleCommon(textStyle, textStyleModel, opt, isEmphasis) {\n  // Consider there will be abnormal when merge hover style to normal style if given default value.\n  opt = opt || EMPTY_OBJ;\n\n  if (opt.isRectText) {\n    var textPosition;\n\n    if (opt.getTextPosition) {\n      textPosition = opt.getTextPosition(textStyleModel, isEmphasis);\n    } else {\n      textPosition = textStyleModel.getShallow('position') || (isEmphasis ? null : 'inside'); // 'outside' is not a valid zr textPostion value, but used\n      // in bar series, and magric type should be considered.\n\n      textPosition === 'outside' && (textPosition = 'top');\n    }\n\n    textStyle.textPosition = textPosition;\n    textStyle.textOffset = textStyleModel.getShallow('offset');\n    var labelRotate = textStyleModel.getShallow('rotate');\n    labelRotate != null && (labelRotate *= Math.PI / 180);\n    textStyle.textRotation = labelRotate;\n    textStyle.textDistance = zrUtil.retrieve2(textStyleModel.getShallow('distance'), isEmphasis ? null : 5);\n  }\n\n  var ecModel = textStyleModel.ecModel;\n  var globalTextStyle = ecModel && ecModel.option.textStyle; // Consider case:\n  // {\n  //     data: [{\n  //         value: 12,\n  //         label: {\n  //             rich: {\n  //                 // no 'a' here but using parent 'a'.\n  //             }\n  //         }\n  //     }],\n  //     rich: {\n  //         a: { ... }\n  //     }\n  // }\n\n  var richItemNames = getRichItemNames(textStyleModel);\n  var richResult;\n\n  if (richItemNames) {\n    richResult = {};\n\n    for (var name in richItemNames) {\n      if (richItemNames.hasOwnProperty(name)) {\n        // Cascade is supported in rich.\n        var richTextStyle = textStyleModel.getModel(['rich', name]); // In rich, never `disableBox`.\n        // FIXME: consider `label: {formatter: '{a|xx}', color: 'blue', rich: {a: {}}}`,\n        // the default color `'blue'` will not be adopted if no color declared in `rich`.\n        // That might confuses users. So probably we should put `textStyleModel` as the\n        // root ancestor of the `richTextStyle`. But that would be a break change.\n\n        setTokenTextStyle(richResult[name] = {}, richTextStyle, globalTextStyle, opt, isEmphasis);\n      }\n    }\n  }\n\n  textStyle.rich = richResult;\n  setTokenTextStyle(textStyle, textStyleModel, globalTextStyle, opt, isEmphasis, true);\n\n  if (opt.forceRich && !opt.textStyle) {\n    opt.textStyle = {};\n  }\n\n  return textStyle;\n} // Consider case:\n// {\n//     data: [{\n//         value: 12,\n//         label: {\n//             rich: {\n//                 // no 'a' here but using parent 'a'.\n//             }\n//         }\n//     }],\n//     rich: {\n//         a: { ... }\n//     }\n// }\n\n\nfunction getRichItemNames(textStyleModel) {\n  // Use object to remove duplicated names.\n  var richItemNameMap;\n\n  while (textStyleModel && textStyleModel !== textStyleModel.ecModel) {\n    var rich = (textStyleModel.option || EMPTY_OBJ).rich;\n\n    if (rich) {\n      richItemNameMap = richItemNameMap || {};\n\n      for (var name in rich) {\n        if (rich.hasOwnProperty(name)) {\n          richItemNameMap[name] = 1;\n        }\n      }\n    }\n\n    textStyleModel = textStyleModel.parentModel;\n  }\n\n  return richItemNameMap;\n}\n\nfunction setTokenTextStyle(textStyle, textStyleModel, globalTextStyle, opt, isEmphasis, isBlock) {\n  // In merge mode, default value should not be given.\n  globalTextStyle = !isEmphasis && globalTextStyle || EMPTY_OBJ;\n  textStyle.textFill = getAutoColor(textStyleModel.getShallow('color'), opt) || globalTextStyle.color;\n  textStyle.textStroke = getAutoColor(textStyleModel.getShallow('textBorderColor'), opt) || globalTextStyle.textBorderColor;\n  textStyle.textStrokeWidth = zrUtil.retrieve2(textStyleModel.getShallow('textBorderWidth'), globalTextStyle.textBorderWidth);\n\n  if (!isEmphasis) {\n    if (isBlock) {\n      textStyle.insideRollbackOpt = opt;\n      applyDefaultTextStyle(textStyle);\n    } // Set default finally.\n\n\n    if (textStyle.textFill == null) {\n      textStyle.textFill = opt.autoColor;\n    }\n  } // Do not use `getFont` here, because merge should be supported, where\n  // part of these properties may be changed in emphasis style, and the\n  // others should remain their original value got from normal style.\n\n\n  textStyle.fontStyle = textStyleModel.getShallow('fontStyle') || globalTextStyle.fontStyle;\n  textStyle.fontWeight = textStyleModel.getShallow('fontWeight') || globalTextStyle.fontWeight;\n  textStyle.fontSize = textStyleModel.getShallow('fontSize') || globalTextStyle.fontSize;\n  textStyle.fontFamily = textStyleModel.getShallow('fontFamily') || globalTextStyle.fontFamily;\n  textStyle.textAlign = textStyleModel.getShallow('align');\n  textStyle.textVerticalAlign = textStyleModel.getShallow('verticalAlign') || textStyleModel.getShallow('baseline');\n  textStyle.textLineHeight = textStyleModel.getShallow('lineHeight');\n  textStyle.textWidth = textStyleModel.getShallow('width');\n  textStyle.textHeight = textStyleModel.getShallow('height');\n  textStyle.textTag = textStyleModel.getShallow('tag');\n\n  if (!isBlock || !opt.disableBox) {\n    textStyle.textBackgroundColor = getAutoColor(textStyleModel.getShallow('backgroundColor'), opt);\n    textStyle.textPadding = textStyleModel.getShallow('padding');\n    textStyle.textBorderColor = getAutoColor(textStyleModel.getShallow('borderColor'), opt);\n    textStyle.textBorderWidth = textStyleModel.getShallow('borderWidth');\n    textStyle.textBorderRadius = textStyleModel.getShallow('borderRadius');\n    textStyle.textBoxShadowColor = textStyleModel.getShallow('shadowColor');\n    textStyle.textBoxShadowBlur = textStyleModel.getShallow('shadowBlur');\n    textStyle.textBoxShadowOffsetX = textStyleModel.getShallow('shadowOffsetX');\n    textStyle.textBoxShadowOffsetY = textStyleModel.getShallow('shadowOffsetY');\n  }\n\n  textStyle.textShadowColor = textStyleModel.getShallow('textShadowColor') || globalTextStyle.textShadowColor;\n  textStyle.textShadowBlur = textStyleModel.getShallow('textShadowBlur') || globalTextStyle.textShadowBlur;\n  textStyle.textShadowOffsetX = textStyleModel.getShallow('textShadowOffsetX') || globalTextStyle.textShadowOffsetX;\n  textStyle.textShadowOffsetY = textStyleModel.getShallow('textShadowOffsetY') || globalTextStyle.textShadowOffsetY;\n}\n\nfunction getAutoColor(color, opt) {\n  return color !== 'auto' ? color : opt && opt.autoColor ? opt.autoColor : null;\n}\n/**\n * Give some default value to the input `textStyle` object, based on the current settings\n * in this `textStyle` object.\n *\n * The Scenario:\n * when text position is `inside` and `textFill` is not specified, we show\n * text border by default for better view. But it should be considered that text position\n * might be changed when hovering or being emphasis, where the `insideRollback` is used to\n * restore the style.\n *\n * Usage (& NOTICE):\n * When a style object (eithor plain object or instance of `zrender/src/graphic/Style`) is\n * about to be modified on its text related properties, `rollbackDefaultTextStyle` should\n * be called before the modification and `applyDefaultTextStyle` should be called after that.\n * (For the case that all of the text related properties is reset, like `setTextStyleCommon`\n * does, `rollbackDefaultTextStyle` is not needed to be called).\n */\n\n\nfunction applyDefaultTextStyle(textStyle) {\n  var textPosition = textStyle.textPosition;\n  var opt = textStyle.insideRollbackOpt;\n  var insideRollback;\n\n  if (opt && textStyle.textFill == null) {\n    var autoColor = opt.autoColor;\n    var isRectText = opt.isRectText;\n    var useInsideStyle = opt.useInsideStyle;\n    var useInsideStyleCache = useInsideStyle !== false && (useInsideStyle === true || isRectText && textPosition // textPosition can be [10, 30]\n    && typeof textPosition === 'string' && textPosition.indexOf('inside') >= 0);\n    var useAutoColorCache = !useInsideStyleCache && autoColor != null; // All of the props declared in `CACHED_LABEL_STYLE_PROPERTIES` are to be cached.\n\n    if (useInsideStyleCache || useAutoColorCache) {\n      insideRollback = {\n        textFill: textStyle.textFill,\n        textStroke: textStyle.textStroke,\n        textStrokeWidth: textStyle.textStrokeWidth\n      };\n    }\n\n    if (useInsideStyleCache) {\n      textStyle.textFill = '#fff'; // Consider text with #fff overflow its container.\n\n      if (textStyle.textStroke == null) {\n        textStyle.textStroke = autoColor;\n        textStyle.textStrokeWidth == null && (textStyle.textStrokeWidth = 2);\n      }\n    }\n\n    if (useAutoColorCache) {\n      textStyle.textFill = autoColor;\n    }\n  } // Always set `insideRollback`, so that the previous one can be cleared.\n\n\n  textStyle.insideRollback = insideRollback;\n}\n/**\n * Consider the case: in a scatter,\n * label: {\n *     normal: {position: 'inside'},\n *     emphasis: {position: 'top'}\n * }\n * In the normal state, the `textFill` will be set as '#fff' for pretty view (see\n * `applyDefaultTextStyle`), but when switching to emphasis state, the `textFill`\n * should be retured to 'autoColor', but not keep '#fff'.\n */\n\n\nfunction rollbackDefaultTextStyle(style) {\n  var insideRollback = style.insideRollback;\n\n  if (insideRollback) {\n    // Reset all of the props in `CACHED_LABEL_STYLE_PROPERTIES`.\n    style.textFill = insideRollback.textFill;\n    style.textStroke = insideRollback.textStroke;\n    style.textStrokeWidth = insideRollback.textStrokeWidth;\n    style.insideRollback = null;\n  }\n}\n\nfunction getFont(opt, ecModel) {\n  var gTextStyleModel = ecModel && ecModel.getModel('textStyle');\n  return zrUtil.trim([// FIXME in node-canvas fontWeight is before fontStyle\n  opt.fontStyle || gTextStyleModel && gTextStyleModel.getShallow('fontStyle') || '', opt.fontWeight || gTextStyleModel && gTextStyleModel.getShallow('fontWeight') || '', (opt.fontSize || gTextStyleModel && gTextStyleModel.getShallow('fontSize') || 12) + 'px', opt.fontFamily || gTextStyleModel && gTextStyleModel.getShallow('fontFamily') || 'sans-serif'].join(' '));\n}\n\nfunction animateOrSetProps(isUpdate, el, props, animatableModel, dataIndex, cb) {\n  if (typeof dataIndex === 'function') {\n    cb = dataIndex;\n    dataIndex = null;\n  } // Do not check 'animation' property directly here. Consider this case:\n  // animation model is an `itemModel`, whose does not have `isAnimationEnabled`\n  // but its parent model (`seriesModel`) does.\n\n\n  var animationEnabled = animatableModel && animatableModel.isAnimationEnabled();\n\n  if (animationEnabled) {\n    var postfix = isUpdate ? 'Update' : '';\n    var duration = animatableModel.getShallow('animationDuration' + postfix);\n    var animationEasing = animatableModel.getShallow('animationEasing' + postfix);\n    var animationDelay = animatableModel.getShallow('animationDelay' + postfix);\n\n    if (typeof animationDelay === 'function') {\n      animationDelay = animationDelay(dataIndex, animatableModel.getAnimationDelayParams ? animatableModel.getAnimationDelayParams(el, dataIndex) : null);\n    }\n\n    if (typeof duration === 'function') {\n      duration = duration(dataIndex);\n    }\n\n    duration > 0 ? el.animateTo(props, duration, animationDelay || 0, animationEasing, cb, !!cb) : (el.stopAnimation(), el.attr(props), cb && cb());\n  } else {\n    el.stopAnimation();\n    el.attr(props);\n    cb && cb();\n  }\n}\n/**\n * Update graphic element properties with or without animation according to the\n * configuration in series.\n *\n * Caution: this method will stop previous animation.\n * So do not use this method to one element twice before\n * animation starts, unless you know what you are doing.\n *\n * @param {module:zrender/Element} el\n * @param {Object} props\n * @param {module:echarts/model/Model} [animatableModel]\n * @param {number} [dataIndex]\n * @param {Function} [cb]\n * @example\n *     graphic.updateProps(el, {\n *         position: [100, 100]\n *     }, seriesModel, dataIndex, function () { console.log('Animation done!'); });\n *     // Or\n *     graphic.updateProps(el, {\n *         position: [100, 100]\n *     }, seriesModel, function () { console.log('Animation done!'); });\n */\n\n\nfunction updateProps(el, props, animatableModel, dataIndex, cb) {\n  animateOrSetProps(true, el, props, animatableModel, dataIndex, cb);\n}\n/**\n * Init graphic element properties with or without animation according to the\n * configuration in series.\n *\n * Caution: this method will stop previous animation.\n * So do not use this method to one element twice before\n * animation starts, unless you know what you are doing.\n *\n * @param {module:zrender/Element} el\n * @param {Object} props\n * @param {module:echarts/model/Model} [animatableModel]\n * @param {number} [dataIndex]\n * @param {Function} cb\n */\n\n\nfunction initProps(el, props, animatableModel, dataIndex, cb) {\n  animateOrSetProps(false, el, props, animatableModel, dataIndex, cb);\n}\n/**\n * Get transform matrix of target (param target),\n * in coordinate of its ancestor (param ancestor)\n *\n * @param {module:zrender/mixin/Transformable} target\n * @param {module:zrender/mixin/Transformable} [ancestor]\n */\n\n\nfunction getTransform(target, ancestor) {\n  var mat = matrix.identity([]);\n\n  while (target && target !== ancestor) {\n    matrix.mul(mat, target.getLocalTransform(), mat);\n    target = target.parent;\n  }\n\n  return mat;\n}\n/**\n * Apply transform to an vertex.\n * @param {Array.<number>} target [x, y]\n * @param {Array.<number>|TypedArray.<number>|Object} transform Can be:\n *      + Transform matrix: like [1, 0, 0, 1, 0, 0]\n *      + {position, rotation, scale}, the same as `zrender/Transformable`.\n * @param {boolean=} invert Whether use invert matrix.\n * @return {Array.<number>} [x, y]\n */\n\n\nfunction applyTransform(target, transform, invert) {\n  if (transform && !zrUtil.isArrayLike(transform)) {\n    transform = Transformable.getLocalTransform(transform);\n  }\n\n  if (invert) {\n    transform = matrix.invert([], transform);\n  }\n\n  return vector.applyTransform([], target, transform);\n}\n/**\n * @param {string} direction 'left' 'right' 'top' 'bottom'\n * @param {Array.<number>} transform Transform matrix: like [1, 0, 0, 1, 0, 0]\n * @param {boolean=} invert Whether use invert matrix.\n * @return {string} Transformed direction. 'left' 'right' 'top' 'bottom'\n */\n\n\nfunction transformDirection(direction, transform, invert) {\n  // Pick a base, ensure that transform result will not be (0, 0).\n  var hBase = transform[4] === 0 || transform[5] === 0 || transform[0] === 0 ? 1 : Math.abs(2 * transform[4] / transform[0]);\n  var vBase = transform[4] === 0 || transform[5] === 0 || transform[2] === 0 ? 1 : Math.abs(2 * transform[4] / transform[2]);\n  var vertex = [direction === 'left' ? -hBase : direction === 'right' ? hBase : 0, direction === 'top' ? -vBase : direction === 'bottom' ? vBase : 0];\n  vertex = applyTransform(vertex, transform, invert);\n  return Math.abs(vertex[0]) > Math.abs(vertex[1]) ? vertex[0] > 0 ? 'right' : 'left' : vertex[1] > 0 ? 'bottom' : 'top';\n}\n/**\n * Apply group transition animation from g1 to g2.\n * If no animatableModel, no animation.\n */\n\n\nfunction groupTransition(g1, g2, animatableModel, cb) {\n  if (!g1 || !g2) {\n    return;\n  }\n\n  function getElMap(g) {\n    var elMap = {};\n    g.traverse(function (el) {\n      if (!el.isGroup && el.anid) {\n        elMap[el.anid] = el;\n      }\n    });\n    return elMap;\n  }\n\n  function getAnimatableProps(el) {\n    var obj = {\n      position: vector.clone(el.position),\n      rotation: el.rotation\n    };\n\n    if (el.shape) {\n      obj.shape = zrUtil.extend({}, el.shape);\n    }\n\n    return obj;\n  }\n\n  var elMap1 = getElMap(g1);\n  g2.traverse(function (el) {\n    if (!el.isGroup && el.anid) {\n      var oldEl = elMap1[el.anid];\n\n      if (oldEl) {\n        var newProp = getAnimatableProps(el);\n        el.attr(getAnimatableProps(oldEl));\n        updateProps(el, newProp, animatableModel, el.dataIndex);\n      } // else {\n      //     if (el.previousProps) {\n      //         graphic.updateProps\n      //     }\n      // }\n\n    }\n  });\n}\n/**\n * @param {Array.<Array.<number>>} points Like: [[23, 44], [53, 66], ...]\n * @param {Object} rect {x, y, width, height}\n * @return {Array.<Array.<number>>} A new clipped points.\n */\n\n\nfunction clipPointsByRect(points, rect) {\n  // FIXME: this way migth be incorrect when grpahic clipped by a corner.\n  // and when element have border.\n  return zrUtil.map(points, function (point) {\n    var x = point[0];\n    x = mathMax(x, rect.x);\n    x = mathMin(x, rect.x + rect.width);\n    var y = point[1];\n    y = mathMax(y, rect.y);\n    y = mathMin(y, rect.y + rect.height);\n    return [x, y];\n  });\n}\n/**\n * @param {Object} targetRect {x, y, width, height}\n * @param {Object} rect {x, y, width, height}\n * @return {Object} A new clipped rect. If rect size are negative, return undefined.\n */\n\n\nfunction clipRectByRect(targetRect, rect) {\n  var x = mathMax(targetRect.x, rect.x);\n  var x2 = mathMin(targetRect.x + targetRect.width, rect.x + rect.width);\n  var y = mathMax(targetRect.y, rect.y);\n  var y2 = mathMin(targetRect.y + targetRect.height, rect.y + rect.height); // If the total rect is cliped, nothing, including the border,\n  // should be painted. So return undefined.\n\n  if (x2 >= x && y2 >= y) {\n    return {\n      x: x,\n      y: y,\n      width: x2 - x,\n      height: y2 - y\n    };\n  }\n}\n/**\n * @param {string} iconStr Support 'image://' or 'path://' or direct svg path.\n * @param {Object} [opt] Properties of `module:zrender/Element`, except `style`.\n * @param {Object} [rect] {x, y, width, height}\n * @return {module:zrender/Element} Icon path or image element.\n */\n\n\nfunction createIcon(iconStr, opt, rect) {\n  opt = zrUtil.extend({\n    rectHover: true\n  }, opt);\n  var style = opt.style = {\n    strokeNoScale: true\n  };\n  rect = rect || {\n    x: -1,\n    y: -1,\n    width: 2,\n    height: 2\n  };\n\n  if (iconStr) {\n    return iconStr.indexOf('image://') === 0 ? (style.image = iconStr.slice(8), zrUtil.defaults(style, rect), new ZImage(opt)) : makePath(iconStr.replace('path://', ''), opt, rect, 'center');\n  }\n}\n/**\n * Return `true` if the given line (line `a`) and the given polygon\n * are intersect.\n * Note that we do not count colinear as intersect here because no\n * requirement for that. We could do that if required in future.\n *\n * @param {number} a1x\n * @param {number} a1y\n * @param {number} a2x\n * @param {number} a2y\n * @param {Array.<Array.<number>>} points Points of the polygon.\n * @return {boolean}\n */\n\n\nfunction linePolygonIntersect(a1x, a1y, a2x, a2y, points) {\n  for (var i = 0, p2 = points[points.length - 1]; i < points.length; i++) {\n    var p = points[i];\n\n    if (lineLineIntersect(a1x, a1y, a2x, a2y, p[0], p[1], p2[0], p2[1])) {\n      return true;\n    }\n\n    p2 = p;\n  }\n}\n/**\n * Return `true` if the given two lines (line `a` and line `b`)\n * are intersect.\n * Note that we do not count colinear as intersect here because no\n * requirement for that. We could do that if required in future.\n *\n * @param {number} a1x\n * @param {number} a1y\n * @param {number} a2x\n * @param {number} a2y\n * @param {number} b1x\n * @param {number} b1y\n * @param {number} b2x\n * @param {number} b2y\n * @return {boolean}\n */\n\n\nfunction lineLineIntersect(a1x, a1y, a2x, a2y, b1x, b1y, b2x, b2y) {\n  // let `vec_m` to be `vec_a2 - vec_a1` and `vec_n` to be `vec_b2 - vec_b1`.\n  var mx = a2x - a1x;\n  var my = a2y - a1y;\n  var nx = b2x - b1x;\n  var ny = b2y - b1y; // `vec_m` and `vec_n` are parallel iff\n  //     exising `k` such that `vec_m = k · vec_n`, equivalent to `vec_m X vec_n = 0`.\n\n  var nmCrossProduct = crossProduct2d(nx, ny, mx, my);\n\n  if (nearZero(nmCrossProduct)) {\n    return false;\n  } // `vec_m` and `vec_n` are intersect iff\n  //     existing `p` and `q` in [0, 1] such that `vec_a1 + p * vec_m = vec_b1 + q * vec_n`,\n  //     such that `q = ((vec_a1 - vec_b1) X vec_m) / (vec_n X vec_m)`\n  //           and `p = ((vec_a1 - vec_b1) X vec_n) / (vec_n X vec_m)`.\n\n\n  var b1a1x = a1x - b1x;\n  var b1a1y = a1y - b1y;\n  var q = crossProduct2d(b1a1x, b1a1y, mx, my) / nmCrossProduct;\n\n  if (q < 0 || q > 1) {\n    return false;\n  }\n\n  var p = crossProduct2d(b1a1x, b1a1y, nx, ny) / nmCrossProduct;\n\n  if (p < 0 || p > 1) {\n    return false;\n  }\n\n  return true;\n}\n/**\n * Cross product of 2-dimension vector.\n */\n\n\nfunction crossProduct2d(x1, y1, x2, y2) {\n  return x1 * y2 - x2 * y1;\n}\n\nfunction nearZero(val) {\n  return val <= 1e-6 && val >= -1e-6;\n} // Register built-in shapes. These shapes might be overwirtten\n// by users, although we do not recommend that.\n\n\nregisterShape('circle', Circle);\nregisterShape('sector', Sector);\nregisterShape('ring', Ring);\nregisterShape('polygon', Polygon);\nregisterShape('polyline', Polyline);\nregisterShape('rect', Rect);\nregisterShape('line', Line);\nregisterShape('bezierCurve', BezierCurve);\nregisterShape('arc', Arc);\nexports.Z2_EMPHASIS_LIFT = Z2_EMPHASIS_LIFT;\nexports.CACHED_LABEL_STYLE_PROPERTIES = CACHED_LABEL_STYLE_PROPERTIES;\nexports.extendShape = extendShape;\nexports.extendPath = extendPath;\nexports.registerShape = registerShape;\nexports.getShapeClass = getShapeClass;\nexports.makePath = makePath;\nexports.makeImage = makeImage;\nexports.mergePath = mergePath;\nexports.resizePath = resizePath;\nexports.subPixelOptimizeLine = subPixelOptimizeLine;\nexports.subPixelOptimizeRect = subPixelOptimizeRect;\nexports.subPixelOptimize = subPixelOptimize;\nexports.setElementHoverStyle = setElementHoverStyle;\nexports.setHoverStyle = setHoverStyle;\nexports.setAsHighDownDispatcher = setAsHighDownDispatcher;\nexports.isHighDownDispatcher = isHighDownDispatcher;\nexports.getHighlightDigit = getHighlightDigit;\nexports.setLabelStyle = setLabelStyle;\nexports.modifyLabelStyle = modifyLabelStyle;\nexports.setTextStyle = setTextStyle;\nexports.setText = setText;\nexports.getFont = getFont;\nexports.updateProps = updateProps;\nexports.initProps = initProps;\nexports.getTransform = getTransform;\nexports.applyTransform = applyTransform;\nexports.transformDirection = transformDirection;\nexports.groupTransition = groupTransition;\nexports.clipPointsByRect = clipPointsByRect;\nexports.clipRectByRect = clipRectByRect;\nexports.createIcon = createIcon;\nexports.linePolygonIntersect = linePolygonIntersect;\nexports.lineLineIntersect = lineLineIntersect;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* A third-party license is embeded for some of the code in this file:\n* The method \"quantile\" was copied from \"d3.js\".\n* (See more details in the comment of the method below.)\n* The use of the source code of this file is also subject to the terms\n* and consitions of the license of \"d3.js\" (BSD-3Clause, see\n* </licenses/LICENSE-d3>).\n*/\nvar RADIAN_EPSILON = 1e-4;\n\nfunction _trim(str) {\n  return str.replace(/^\\s+|\\s+$/g, '');\n}\n/**\n * Linear mapping a value from domain to range\n * @memberOf module:echarts/util/number\n * @param  {(number|Array.<number>)} val\n * @param  {Array.<number>} domain Domain extent domain[0] can be bigger than domain[1]\n * @param  {Array.<number>} range  Range extent range[0] can be bigger than range[1]\n * @param  {boolean} clamp\n * @return {(number|Array.<number>}\n */\n\n\nfunction linearMap(val, domain, range, clamp) {\n  var subDomain = domain[1] - domain[0];\n  var subRange = range[1] - range[0];\n\n  if (subDomain === 0) {\n    return subRange === 0 ? range[0] : (range[0] + range[1]) / 2;\n  } // Avoid accuracy problem in edge, such as\n  // 146.39 - 62.83 === 83.55999999999999.\n  // See echarts/test/ut/spec/util/number.js#linearMap#accuracyError\n  // It is a little verbose for efficiency considering this method\n  // is a hotspot.\n\n\n  if (clamp) {\n    if (subDomain > 0) {\n      if (val <= domain[0]) {\n        return range[0];\n      } else if (val >= domain[1]) {\n        return range[1];\n      }\n    } else {\n      if (val >= domain[0]) {\n        return range[0];\n      } else if (val <= domain[1]) {\n        return range[1];\n      }\n    }\n  } else {\n    if (val === domain[0]) {\n      return range[0];\n    }\n\n    if (val === domain[1]) {\n      return range[1];\n    }\n  }\n\n  return (val - domain[0]) / subDomain * subRange + range[0];\n}\n/**\n * Convert a percent string to absolute number.\n * Returns NaN if percent is not a valid string or number\n * @memberOf module:echarts/util/number\n * @param {string|number} percent\n * @param {number} all\n * @return {number}\n */\n\n\nfunction parsePercent(percent, all) {\n  switch (percent) {\n    case 'center':\n    case 'middle':\n      percent = '50%';\n      break;\n\n    case 'left':\n    case 'top':\n      percent = '0%';\n      break;\n\n    case 'right':\n    case 'bottom':\n      percent = '100%';\n      break;\n  }\n\n  if (typeof percent === 'string') {\n    if (_trim(percent).match(/%$/)) {\n      return parseFloat(percent) / 100 * all;\n    }\n\n    return parseFloat(percent);\n  }\n\n  return percent == null ? NaN : +percent;\n}\n/**\n * (1) Fix rounding error of float numbers.\n * (2) Support return string to avoid scientific notation like '3.5e-7'.\n *\n * @param {number} x\n * @param {number} [precision]\n * @param {boolean} [returnStr]\n * @return {number|string}\n */\n\n\nfunction round(x, precision, returnStr) {\n  if (precision == null) {\n    precision = 10;\n  } // Avoid range error\n\n\n  precision = Math.min(Math.max(0, precision), 20);\n  x = (+x).toFixed(precision);\n  return returnStr ? x : +x;\n}\n/**\n * asc sort arr.\n * The input arr will be modified.\n *\n * @param {Array} arr\n * @return {Array} The input arr.\n */\n\n\nfunction asc(arr) {\n  arr.sort(function (a, b) {\n    return a - b;\n  });\n  return arr;\n}\n/**\n * Get precision\n * @param {number} val\n */\n\n\nfunction getPrecision(val) {\n  val = +val;\n\n  if (isNaN(val)) {\n    return 0;\n  } // It is much faster than methods converting number to string as follows\n  //      var tmp = val.toString();\n  //      return tmp.length - 1 - tmp.indexOf('.');\n  // especially when precision is low\n\n\n  var e = 1;\n  var count = 0;\n\n  while (Math.round(val * e) / e !== val) {\n    e *= 10;\n    count++;\n  }\n\n  return count;\n}\n/**\n * @param {string|number} val\n * @return {number}\n */\n\n\nfunction getPrecisionSafe(val) {\n  var str = val.toString(); // Consider scientific notation: '3.4e-12' '3.4e+12'\n\n  var eIndex = str.indexOf('e');\n\n  if (eIndex > 0) {\n    var precision = +str.slice(eIndex + 1);\n    return precision < 0 ? -precision : 0;\n  } else {\n    var dotIndex = str.indexOf('.');\n    return dotIndex < 0 ? 0 : str.length - 1 - dotIndex;\n  }\n}\n/**\n * Minimal dicernible data precisioin according to a single pixel.\n *\n * @param {Array.<number>} dataExtent\n * @param {Array.<number>} pixelExtent\n * @return {number} precision\n */\n\n\nfunction getPixelPrecision(dataExtent, pixelExtent) {\n  var log = Math.log;\n  var LN10 = Math.LN10;\n  var dataQuantity = Math.floor(log(dataExtent[1] - dataExtent[0]) / LN10);\n  var sizeQuantity = Math.round(log(Math.abs(pixelExtent[1] - pixelExtent[0])) / LN10); // toFixed() digits argument must be between 0 and 20.\n\n  var precision = Math.min(Math.max(-dataQuantity + sizeQuantity, 0), 20);\n  return !isFinite(precision) ? 20 : precision;\n}\n/**\n * Get a data of given precision, assuring the sum of percentages\n * in valueList is 1.\n * The largest remainer method is used.\n * https://en.wikipedia.org/wiki/Largest_remainder_method\n *\n * @param {Array.<number>} valueList a list of all data\n * @param {number} idx index of the data to be processed in valueList\n * @param {number} precision integer number showing digits of precision\n * @return {number} percent ranging from 0 to 100\n */\n\n\nfunction getPercentWithPrecision(valueList, idx, precision) {\n  if (!valueList[idx]) {\n    return 0;\n  }\n\n  var sum = zrUtil.reduce(valueList, function (acc, val) {\n    return acc + (isNaN(val) ? 0 : val);\n  }, 0);\n\n  if (sum === 0) {\n    return 0;\n  }\n\n  var digits = Math.pow(10, precision);\n  var votesPerQuota = zrUtil.map(valueList, function (val) {\n    return (isNaN(val) ? 0 : val) / sum * digits * 100;\n  });\n  var targetSeats = digits * 100;\n  var seats = zrUtil.map(votesPerQuota, function (votes) {\n    // Assign automatic seats.\n    return Math.floor(votes);\n  });\n  var currentSum = zrUtil.reduce(seats, function (acc, val) {\n    return acc + val;\n  }, 0);\n  var remainder = zrUtil.map(votesPerQuota, function (votes, idx) {\n    return votes - seats[idx];\n  }); // Has remainding votes.\n\n  while (currentSum < targetSeats) {\n    // Find next largest remainder.\n    var max = Number.NEGATIVE_INFINITY;\n    var maxId = null;\n\n    for (var i = 0, len = remainder.length; i < len; ++i) {\n      if (remainder[i] > max) {\n        max = remainder[i];\n        maxId = i;\n      }\n    } // Add a vote to max remainder.\n\n\n    ++seats[maxId];\n    remainder[maxId] = 0;\n    ++currentSum;\n  }\n\n  return seats[idx] / digits;\n} // Number.MAX_SAFE_INTEGER, ie do not support.\n\n\nvar MAX_SAFE_INTEGER = 9007199254740991;\n/**\n * To 0 - 2 * PI, considering negative radian.\n * @param {number} radian\n * @return {number}\n */\n\nfunction remRadian(radian) {\n  var pi2 = Math.PI * 2;\n  return (radian % pi2 + pi2) % pi2;\n}\n/**\n * @param {type} radian\n * @return {boolean}\n */\n\n\nfunction isRadianAroundZero(val) {\n  return val > -RADIAN_EPSILON && val < RADIAN_EPSILON;\n}\n/* eslint-disable */\n\n\nvar TIME_REG = /^(?:(\\d{4})(?:[-\\/](\\d{1,2})(?:[-\\/](\\d{1,2})(?:[T ](\\d{1,2})(?::(\\d\\d)(?::(\\d\\d)(?:[.,](\\d+))?)?)?(Z|[\\+\\-]\\d\\d:?\\d\\d)?)?)?)?)?$/; // jshint ignore:line\n\n/* eslint-enable */\n\n/**\n * @param {string|Date|number} value These values can be accepted:\n *   + An instance of Date, represent a time in its own time zone.\n *   + Or string in a subset of ISO 8601, only including:\n *     + only year, month, date: '2012-03', '2012-03-01', '2012-03-01 05', '2012-03-01 05:06',\n *     + separated with T or space: '2012-03-01T12:22:33.123', '2012-03-01 12:22:33.123',\n *     + time zone: '2012-03-01T12:22:33Z', '2012-03-01T12:22:33+8000', '2012-03-01T12:22:33-05:00',\n *     all of which will be treated as local time if time zone is not specified\n *     (see <https://momentjs.com/>).\n *   + Or other string format, including (all of which will be treated as loacal time):\n *     '2012', '2012-3-1', '2012/3/1', '2012/03/01',\n *     '2009/6/12 2:00', '2009/6/12 2:05:08', '2009/6/12 2:05:08.123'\n *   + a timestamp, which represent a time in UTC.\n * @return {Date} date\n */\n\nfunction parseDate(value) {\n  if (value instanceof Date) {\n    return value;\n  } else if (typeof value === 'string') {\n    // Different browsers parse date in different way, so we parse it manually.\n    // Some other issues:\n    // new Date('1970-01-01') is UTC,\n    // new Date('1970/01/01') and new Date('1970-1-01') is local.\n    // See issue #3623\n    var match = TIME_REG.exec(value);\n\n    if (!match) {\n      // return Invalid Date.\n      return new Date(NaN);\n    } // Use local time when no timezone offset specifed.\n\n\n    if (!match[8]) {\n      // match[n] can only be string or undefined.\n      // But take care of '12' + 1 => '121'.\n      return new Date(+match[1], +(match[2] || 1) - 1, +match[3] || 1, +match[4] || 0, +(match[5] || 0), +match[6] || 0, +match[7] || 0);\n    } // Timezoneoffset of Javascript Date has considered DST (Daylight Saving Time,\n    // https://tc39.github.io/ecma262/#sec-daylight-saving-time-adjustment).\n    // For example, system timezone is set as \"Time Zone: America/Toronto\",\n    // then these code will get different result:\n    // `new Date(1478411999999).getTimezoneOffset();  // get 240`\n    // `new Date(1478412000000).getTimezoneOffset();  // get 300`\n    // So we should not use `new Date`, but use `Date.UTC`.\n    else {\n        var hour = +match[4] || 0;\n\n        if (match[8].toUpperCase() !== 'Z') {\n          hour -= match[8].slice(0, 3);\n        }\n\n        return new Date(Date.UTC(+match[1], +(match[2] || 1) - 1, +match[3] || 1, hour, +(match[5] || 0), +match[6] || 0, +match[7] || 0));\n      }\n  } else if (value == null) {\n    return new Date(NaN);\n  }\n\n  return new Date(Math.round(value));\n}\n/**\n * Quantity of a number. e.g. 0.1, 1, 10, 100\n *\n * @param  {number} val\n * @return {number}\n */\n\n\nfunction quantity(val) {\n  return Math.pow(10, quantityExponent(val));\n}\n/**\n * Exponent of the quantity of a number\n * e.g., 1234 equals to 1.234*10^3, so quantityExponent(1234) is 3\n *\n * @param  {number} val non-negative value\n * @return {number}\n */\n\n\nfunction quantityExponent(val) {\n  if (val === 0) {\n    return 0;\n  }\n\n  var exp = Math.floor(Math.log(val) / Math.LN10);\n  /**\n   * exp is expected to be the rounded-down result of the base-10 log of val.\n   * But due to the precision loss with Math.log(val), we need to restore it\n   * using 10^exp to make sure we can get val back from exp. #11249\n   */\n\n  if (val / Math.pow(10, exp) >= 10) {\n    exp++;\n  }\n\n  return exp;\n}\n/**\n * find a “nice” number approximately equal to x. Round the number if round = true,\n * take ceiling if round = false. The primary observation is that the “nicest”\n * numbers in decimal are 1, 2, and 5, and all power-of-ten multiples of these numbers.\n *\n * See \"Nice Numbers for Graph Labels\" of Graphic Gems.\n *\n * @param  {number} val Non-negative value.\n * @param  {boolean} round\n * @return {number}\n */\n\n\nfunction nice(val, round) {\n  var exponent = quantityExponent(val);\n  var exp10 = Math.pow(10, exponent);\n  var f = val / exp10; // 1 <= f < 10\n\n  var nf;\n\n  if (round) {\n    if (f < 1.5) {\n      nf = 1;\n    } else if (f < 2.5) {\n      nf = 2;\n    } else if (f < 4) {\n      nf = 3;\n    } else if (f < 7) {\n      nf = 5;\n    } else {\n      nf = 10;\n    }\n  } else {\n    if (f < 1) {\n      nf = 1;\n    } else if (f < 2) {\n      nf = 2;\n    } else if (f < 3) {\n      nf = 3;\n    } else if (f < 5) {\n      nf = 5;\n    } else {\n      nf = 10;\n    }\n  }\n\n  val = nf * exp10; // Fix 3 * 0.1 === 0.30000000000000004 issue (see IEEE 754).\n  // 20 is the uppper bound of toFixed.\n\n  return exponent >= -20 ? +val.toFixed(exponent < 0 ? -exponent : 0) : val;\n}\n/**\n * This code was copied from \"d3.js\"\n * <https://github.com/d3/d3/blob/9cc9a875e636a1dcf36cc1e07bdf77e1ad6e2c74/src/arrays/quantile.js>.\n * See the license statement at the head of this file.\n * @param {Array.<number>} ascArr\n */\n\n\nfunction quantile(ascArr, p) {\n  var H = (ascArr.length - 1) * p + 1;\n  var h = Math.floor(H);\n  var v = +ascArr[h - 1];\n  var e = H - h;\n  return e ? v + e * (ascArr[h] - v) : v;\n}\n/**\n * Order intervals asc, and split them when overlap.\n * expect(numberUtil.reformIntervals([\n *     {interval: [18, 62], close: [1, 1]},\n *     {interval: [-Infinity, -70], close: [0, 0]},\n *     {interval: [-70, -26], close: [1, 1]},\n *     {interval: [-26, 18], close: [1, 1]},\n *     {interval: [62, 150], close: [1, 1]},\n *     {interval: [106, 150], close: [1, 1]},\n *     {interval: [150, Infinity], close: [0, 0]}\n * ])).toEqual([\n *     {interval: [-Infinity, -70], close: [0, 0]},\n *     {interval: [-70, -26], close: [1, 1]},\n *     {interval: [-26, 18], close: [0, 1]},\n *     {interval: [18, 62], close: [0, 1]},\n *     {interval: [62, 150], close: [0, 1]},\n *     {interval: [150, Infinity], close: [0, 0]}\n * ]);\n * @param {Array.<Object>} list, where `close` mean open or close\n *        of the interval, and Infinity can be used.\n * @return {Array.<Object>} The origin list, which has been reformed.\n */\n\n\nfunction reformIntervals(list) {\n  list.sort(function (a, b) {\n    return littleThan(a, b, 0) ? -1 : 1;\n  });\n  var curr = -Infinity;\n  var currClose = 1;\n\n  for (var i = 0; i < list.length;) {\n    var interval = list[i].interval;\n    var close = list[i].close;\n\n    for (var lg = 0; lg < 2; lg++) {\n      if (interval[lg] <= curr) {\n        interval[lg] = curr;\n        close[lg] = !lg ? 1 - currClose : 1;\n      }\n\n      curr = interval[lg];\n      currClose = close[lg];\n    }\n\n    if (interval[0] === interval[1] && close[0] * close[1] !== 1) {\n      list.splice(i, 1);\n    } else {\n      i++;\n    }\n  }\n\n  return list;\n\n  function littleThan(a, b, lg) {\n    return a.interval[lg] < b.interval[lg] || a.interval[lg] === b.interval[lg] && (a.close[lg] - b.close[lg] === (!lg ? 1 : -1) || !lg && littleThan(a, b, 1));\n  }\n}\n/**\n * parseFloat NaNs numeric-cast false positives (null|true|false|\"\")\n * ...but misinterprets leading-number strings, particularly hex literals (\"0x...\")\n * subtraction forces infinities to NaN\n *\n * @param {*} v\n * @return {boolean}\n */\n\n\nfunction isNumeric(v) {\n  return v - parseFloat(v) >= 0;\n}\n\nexports.linearMap = linearMap;\nexports.parsePercent = parsePercent;\nexports.round = round;\nexports.asc = asc;\nexports.getPrecision = getPrecision;\nexports.getPrecisionSafe = getPrecisionSafe;\nexports.getPixelPrecision = getPixelPrecision;\nexports.getPercentWithPrecision = getPercentWithPrecision;\nexports.MAX_SAFE_INTEGER = MAX_SAFE_INTEGER;\nexports.remRadian = remRadian;\nexports.isRadianAroundZero = isRadianAroundZero;\nexports.parseDate = parseDate;\nexports.quantity = quantity;\nexports.quantityExponent = quantityExponent;\nexports.nice = nice;\nexports.quantile = quantile;\nexports.reformIntervals = reformIntervals;\nexports.isNumeric = isNumeric;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar TYPE_DELIMITER = '.';\nvar IS_CONTAINER = '___EC__COMPONENT__CONTAINER___';\n/**\n * Notice, parseClassType('') should returns {main: '', sub: ''}\n * @public\n */\n\nfunction parseClassType(componentType) {\n  var ret = {\n    main: '',\n    sub: ''\n  };\n\n  if (componentType) {\n    componentType = componentType.split(TYPE_DELIMITER);\n    ret.main = componentType[0] || '';\n    ret.sub = componentType[1] || '';\n  }\n\n  return ret;\n}\n/**\n * @public\n */\n\n\nfunction checkClassType(componentType) {\n  zrUtil.assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(componentType), 'componentType \"' + componentType + '\" illegal');\n}\n/**\n * @public\n */\n\n\nfunction enableClassExtend(RootClass, mandatoryMethods) {\n  RootClass.$constructor = RootClass;\n\n  RootClass.extend = function (proto) {\n    var superClass = this;\n\n    var ExtendedClass = function () {\n      if (!proto.$constructor) {\n        superClass.apply(this, arguments);\n      } else {\n        proto.$constructor.apply(this, arguments);\n      }\n    };\n\n    zrUtil.extend(ExtendedClass.prototype, proto);\n    ExtendedClass.extend = this.extend;\n    ExtendedClass.superCall = superCall;\n    ExtendedClass.superApply = superApply;\n    zrUtil.inherits(ExtendedClass, this);\n    ExtendedClass.superClass = superClass;\n    return ExtendedClass;\n  };\n}\n\nvar classBase = 0;\n/**\n * Can not use instanceof, consider different scope by\n * cross domain or es module import in ec extensions.\n * Mount a method \"isInstance()\" to Clz.\n */\n\nfunction enableClassCheck(Clz) {\n  var classAttr = ['__\\0is_clz', classBase++, Math.random().toFixed(3)].join('_');\n  Clz.prototype[classAttr] = true;\n\n  Clz.isInstance = function (obj) {\n    return !!(obj && obj[classAttr]);\n  };\n} // superCall should have class info, which can not be fetch from 'this'.\n// Consider this case:\n// class A has method f,\n// class B inherits class A, overrides method f, f call superApply('f'),\n// class C inherits class B, do not overrides method f,\n// then when method of class C is called, dead loop occured.\n\n\nfunction superCall(context, methodName) {\n  var args = zrUtil.slice(arguments, 2);\n  return this.superClass.prototype[methodName].apply(context, args);\n}\n\nfunction superApply(context, methodName, args) {\n  return this.superClass.prototype[methodName].apply(context, args);\n}\n/**\n * @param {Object} entity\n * @param {Object} options\n * @param {boolean} [options.registerWhenExtend]\n * @public\n */\n\n\nfunction enableClassManagement(entity, options) {\n  options = options || {};\n  /**\n   * Component model classes\n   * key: componentType,\n   * value:\n   *     componentClass, when componentType is 'xxx'\n   *     or Object.<subKey, componentClass>, when componentType is 'xxx.yy'\n   * @type {Object}\n   */\n\n  var storage = {};\n\n  entity.registerClass = function (Clazz, componentType) {\n    if (componentType) {\n      checkClassType(componentType);\n      componentType = parseClassType(componentType);\n\n      if (!componentType.sub) {\n        storage[componentType.main] = Clazz;\n      } else if (componentType.sub !== IS_CONTAINER) {\n        var container = makeContainer(componentType);\n        container[componentType.sub] = Clazz;\n      }\n    }\n\n    return Clazz;\n  };\n\n  entity.getClass = function (componentMainType, subType, throwWhenNotFound) {\n    var Clazz = storage[componentMainType];\n\n    if (Clazz && Clazz[IS_CONTAINER]) {\n      Clazz = subType ? Clazz[subType] : null;\n    }\n\n    if (throwWhenNotFound && !Clazz) {\n      throw new Error(!subType ? componentMainType + '.' + 'type should be specified.' : 'Component ' + componentMainType + '.' + (subType || '') + ' not exists. Load it first.');\n    }\n\n    return Clazz;\n  };\n\n  entity.getClassesByMainType = function (componentType) {\n    componentType = parseClassType(componentType);\n    var result = [];\n    var obj = storage[componentType.main];\n\n    if (obj && obj[IS_CONTAINER]) {\n      zrUtil.each(obj, function (o, type) {\n        type !== IS_CONTAINER && result.push(o);\n      });\n    } else {\n      result.push(obj);\n    }\n\n    return result;\n  };\n\n  entity.hasClass = function (componentType) {\n    // Just consider componentType.main.\n    componentType = parseClassType(componentType);\n    return !!storage[componentType.main];\n  };\n  /**\n   * @return {Array.<string>} Like ['aa', 'bb'], but can not be ['aa.xx']\n   */\n\n\n  entity.getAllClassMainTypes = function () {\n    var types = [];\n    zrUtil.each(storage, function (obj, type) {\n      types.push(type);\n    });\n    return types;\n  };\n  /**\n   * If a main type is container and has sub types\n   * @param  {string}  mainType\n   * @return {boolean}\n   */\n\n\n  entity.hasSubTypes = function (componentType) {\n    componentType = parseClassType(componentType);\n    var obj = storage[componentType.main];\n    return obj && obj[IS_CONTAINER];\n  };\n\n  entity.parseClassType = parseClassType;\n\n  function makeContainer(componentType) {\n    var container = storage[componentType.main];\n\n    if (!container || !container[IS_CONTAINER]) {\n      container = storage[componentType.main] = {};\n      container[IS_CONTAINER] = true;\n    }\n\n    return container;\n  }\n\n  if (options.registerWhenExtend) {\n    var originalExtend = entity.extend;\n\n    if (originalExtend) {\n      entity.extend = function (proto) {\n        var ExtendedClass = originalExtend.call(this, proto);\n        return entity.registerClass(ExtendedClass, proto.type);\n      };\n    }\n  }\n\n  return entity;\n}\n/**\n * @param {string|Array.<string>} properties\n */\n\n\nfunction setReadOnly(obj, properties) {// FIXME It seems broken in IE8 simulation of IE11\n  // if (!zrUtil.isArray(properties)) {\n  //     properties = properties != null ? [properties] : [];\n  // }\n  // zrUtil.each(properties, function (prop) {\n  //     var value = obj[prop];\n  //     Object.defineProperty\n  //         && Object.defineProperty(obj, prop, {\n  //             value: value, writable: false\n  //         });\n  //     zrUtil.isArray(obj[prop])\n  //         && Object.freeze\n  //         && Object.freeze(obj[prop]);\n  // });\n}\n\nexports.parseClassType = parseClassType;\nexports.enableClassExtend = enableClassExtend;\nexports.enableClassCheck = enableClassCheck;\nexports.enableClassManagement = enableClassManagement;\nexports.setReadOnly = setReadOnly;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar each = _util.each;\nvar map = _util.map;\nvar isFunction = _util.isFunction;\nvar createHashMap = _util.createHashMap;\nvar noop = _util.noop;\n\nvar _task = require(\"./task\");\n\nvar createTask = _task.createTask;\n\nvar _component = require(\"../util/component\");\n\nvar getUID = _component.getUID;\n\nvar GlobalModel = require(\"../model/Global\");\n\nvar ExtensionAPI = require(\"../ExtensionAPI\");\n\nvar _model = require(\"../util/model\");\n\nvar normalizeToArray = _model.normalizeToArray;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @module echarts/stream/Scheduler\n */\n\n/**\n * @constructor\n */\nfunction Scheduler(ecInstance, api, dataProcessorHandlers, visualHandlers) {\n  this.ecInstance = ecInstance;\n  this.api = api;\n  this.unfinished; // Fix current processors in case that in some rear cases that\n  // processors might be registered after echarts instance created.\n  // Register processors incrementally for a echarts instance is\n  // not supported by this stream architecture.\n\n  var dataProcessorHandlers = this._dataProcessorHandlers = dataProcessorHandlers.slice();\n  var visualHandlers = this._visualHandlers = visualHandlers.slice();\n  this._allHandlers = dataProcessorHandlers.concat(visualHandlers);\n  /**\n   * @private\n   * @type {\n   *     [handlerUID: string]: {\n   *         seriesTaskMap?: {\n   *             [seriesUID: string]: Task\n   *         },\n   *         overallTask?: Task\n   *     }\n   * }\n   */\n\n  this._stageTaskMap = createHashMap();\n}\n\nvar proto = Scheduler.prototype;\n/**\n * @param {module:echarts/model/Global} ecModel\n * @param {Object} payload\n */\n\nproto.restoreData = function (ecModel, payload) {\n  // TODO: Only restroe needed series and components, but not all components.\n  // Currently `restoreData` of all of the series and component will be called.\n  // But some independent components like `title`, `legend`, `graphic`, `toolbox`,\n  // `tooltip`, `axisPointer`, etc, do not need series refresh when `setOption`,\n  // and some components like coordinate system, axes, dataZoom, visualMap only\n  // need their target series refresh.\n  // (1) If we are implementing this feature some day, we should consider these cases:\n  // if a data processor depends on a component (e.g., dataZoomProcessor depends\n  // on the settings of `dataZoom`), it should be re-performed if the component\n  // is modified by `setOption`.\n  // (2) If a processor depends on sevral series, speicified by its `getTargetSeries`,\n  // it should be re-performed when the result array of `getTargetSeries` changed.\n  // We use `dependencies` to cover these issues.\n  // (3) How to update target series when coordinate system related components modified.\n  // TODO: simply the dirty mechanism? Check whether only the case here can set tasks dirty,\n  // and this case all of the tasks will be set as dirty.\n  ecModel.restoreData(payload); // Theoretically an overall task not only depends on each of its target series, but also\n  // depends on all of the series.\n  // The overall task is not in pipeline, and `ecModel.restoreData` only set pipeline tasks\n  // dirty. If `getTargetSeries` of an overall task returns nothing, we should also ensure\n  // that the overall task is set as dirty and to be performed, otherwise it probably cause\n  // state chaos. So we have to set dirty of all of the overall tasks manually, otherwise it\n  // probably cause state chaos (consider `dataZoomProcessor`).\n\n  this._stageTaskMap.each(function (taskRecord) {\n    var overallTask = taskRecord.overallTask;\n    overallTask && overallTask.dirty();\n  });\n}; // If seriesModel provided, incremental threshold is check by series data.\n\n\nproto.getPerformArgs = function (task, isBlock) {\n  // For overall task\n  if (!task.__pipeline) {\n    return;\n  }\n\n  var pipeline = this._pipelineMap.get(task.__pipeline.id);\n\n  var pCtx = pipeline.context;\n  var incremental = !isBlock && pipeline.progressiveEnabled && (!pCtx || pCtx.progressiveRender) && task.__idxInPipeline > pipeline.blockIndex;\n  var step = incremental ? pipeline.step : null;\n  var modDataCount = pCtx && pCtx.modDataCount;\n  var modBy = modDataCount != null ? Math.ceil(modDataCount / step) : null;\n  return {\n    step: step,\n    modBy: modBy,\n    modDataCount: modDataCount\n  };\n};\n\nproto.getPipeline = function (pipelineId) {\n  return this._pipelineMap.get(pipelineId);\n};\n/**\n * Current, progressive rendering starts from visual and layout.\n * Always detect render mode in the same stage, avoiding that incorrect\n * detection caused by data filtering.\n * Caution:\n * `updateStreamModes` use `seriesModel.getData()`.\n */\n\n\nproto.updateStreamModes = function (seriesModel, view) {\n  var pipeline = this._pipelineMap.get(seriesModel.uid);\n\n  var data = seriesModel.getData();\n  var dataLen = data.count(); // `progressiveRender` means that can render progressively in each\n  // animation frame. Note that some types of series do not provide\n  // `view.incrementalPrepareRender` but support `chart.appendData`. We\n  // use the term `incremental` but not `progressive` to describe the\n  // case that `chart.appendData`.\n\n  var progressiveRender = pipeline.progressiveEnabled && view.incrementalPrepareRender && dataLen >= pipeline.threshold;\n  var large = seriesModel.get('large') && dataLen >= seriesModel.get('largeThreshold'); // TODO: modDataCount should not updated if `appendData`, otherwise cause whole repaint.\n  // see `test/candlestick-large3.html`\n\n  var modDataCount = seriesModel.get('progressiveChunkMode') === 'mod' ? dataLen : null;\n  seriesModel.pipelineContext = pipeline.context = {\n    progressiveRender: progressiveRender,\n    modDataCount: modDataCount,\n    large: large\n  };\n};\n\nproto.restorePipelines = function (ecModel) {\n  var scheduler = this;\n  var pipelineMap = scheduler._pipelineMap = createHashMap();\n  ecModel.eachSeries(function (seriesModel) {\n    var progressive = seriesModel.getProgressive();\n    var pipelineId = seriesModel.uid;\n    pipelineMap.set(pipelineId, {\n      id: pipelineId,\n      head: null,\n      tail: null,\n      threshold: seriesModel.getProgressiveThreshold(),\n      progressiveEnabled: progressive && !(seriesModel.preventIncremental && seriesModel.preventIncremental()),\n      blockIndex: -1,\n      step: Math.round(progressive || 700),\n      count: 0\n    });\n    pipe(scheduler, seriesModel, seriesModel.dataTask);\n  });\n};\n\nproto.prepareStageTasks = function () {\n  var stageTaskMap = this._stageTaskMap;\n  var ecModel = this.ecInstance.getModel();\n  var api = this.api;\n  each(this._allHandlers, function (handler) {\n    var record = stageTaskMap.get(handler.uid) || stageTaskMap.set(handler.uid, []);\n    handler.reset && createSeriesStageTask(this, handler, record, ecModel, api);\n    handler.overallReset && createOverallStageTask(this, handler, record, ecModel, api);\n  }, this);\n};\n\nproto.prepareView = function (view, model, ecModel, api) {\n  var renderTask = view.renderTask;\n  var context = renderTask.context;\n  context.model = model;\n  context.ecModel = ecModel;\n  context.api = api;\n  renderTask.__block = !view.incrementalPrepareRender;\n  pipe(this, model, renderTask);\n};\n\nproto.performDataProcessorTasks = function (ecModel, payload) {\n  // If we do not use `block` here, it should be considered when to update modes.\n  performStageTasks(this, this._dataProcessorHandlers, ecModel, payload, {\n    block: true\n  });\n}; // opt\n// opt.visualType: 'visual' or 'layout'\n// opt.setDirty\n\n\nproto.performVisualTasks = function (ecModel, payload, opt) {\n  performStageTasks(this, this._visualHandlers, ecModel, payload, opt);\n};\n\nfunction performStageTasks(scheduler, stageHandlers, ecModel, payload, opt) {\n  opt = opt || {};\n  var unfinished;\n  each(stageHandlers, function (stageHandler, idx) {\n    if (opt.visualType && opt.visualType !== stageHandler.visualType) {\n      return;\n    }\n\n    var stageHandlerRecord = scheduler._stageTaskMap.get(stageHandler.uid);\n\n    var seriesTaskMap = stageHandlerRecord.seriesTaskMap;\n    var overallTask = stageHandlerRecord.overallTask;\n\n    if (overallTask) {\n      var overallNeedDirty;\n      var agentStubMap = overallTask.agentStubMap;\n      agentStubMap.each(function (stub) {\n        if (needSetDirty(opt, stub)) {\n          stub.dirty();\n          overallNeedDirty = true;\n        }\n      });\n      overallNeedDirty && overallTask.dirty();\n      updatePayload(overallTask, payload);\n      var performArgs = scheduler.getPerformArgs(overallTask, opt.block); // Execute stubs firstly, which may set the overall task dirty,\n      // then execute the overall task. And stub will call seriesModel.setData,\n      // which ensures that in the overallTask seriesModel.getData() will not\n      // return incorrect data.\n\n      agentStubMap.each(function (stub) {\n        stub.perform(performArgs);\n      });\n      unfinished |= overallTask.perform(performArgs);\n    } else if (seriesTaskMap) {\n      seriesTaskMap.each(function (task, pipelineId) {\n        if (needSetDirty(opt, task)) {\n          task.dirty();\n        }\n\n        var performArgs = scheduler.getPerformArgs(task, opt.block); // FIXME\n        // if intending to decalare `performRawSeries` in handlers, only\n        // stream-independent (specifically, data item independent) operations can be\n        // performed. Because is a series is filtered, most of the tasks will not\n        // be performed. A stream-dependent operation probably cause wrong biz logic.\n        // Perhaps we should not provide a separate callback for this case instead\n        // of providing the config `performRawSeries`. The stream-dependent operaions\n        // and stream-independent operations should better not be mixed.\n\n        performArgs.skip = !stageHandler.performRawSeries && ecModel.isSeriesFiltered(task.context.model);\n        updatePayload(task, payload);\n        unfinished |= task.perform(performArgs);\n      });\n    }\n  });\n\n  function needSetDirty(opt, task) {\n    return opt.setDirty && (!opt.dirtyMap || opt.dirtyMap.get(task.__pipeline.id));\n  }\n\n  scheduler.unfinished |= unfinished;\n}\n\nproto.performSeriesTasks = function (ecModel) {\n  var unfinished;\n  ecModel.eachSeries(function (seriesModel) {\n    // Progress to the end for dataInit and dataRestore.\n    unfinished |= seriesModel.dataTask.perform();\n  });\n  this.unfinished |= unfinished;\n};\n\nproto.plan = function () {\n  // Travel pipelines, check block.\n  this._pipelineMap.each(function (pipeline) {\n    var task = pipeline.tail;\n\n    do {\n      if (task.__block) {\n        pipeline.blockIndex = task.__idxInPipeline;\n        break;\n      }\n\n      task = task.getUpstream();\n    } while (task);\n  });\n};\n\nvar updatePayload = proto.updatePayload = function (task, payload) {\n  payload !== 'remain' && (task.context.payload = payload);\n};\n\nfunction createSeriesStageTask(scheduler, stageHandler, stageHandlerRecord, ecModel, api) {\n  var seriesTaskMap = stageHandlerRecord.seriesTaskMap || (stageHandlerRecord.seriesTaskMap = createHashMap());\n  var seriesType = stageHandler.seriesType;\n  var getTargetSeries = stageHandler.getTargetSeries; // If a stageHandler should cover all series, `createOnAllSeries` should be declared mandatorily,\n  // to avoid some typo or abuse. Otherwise if an extension do not specify a `seriesType`,\n  // it works but it may cause other irrelevant charts blocked.\n\n  if (stageHandler.createOnAllSeries) {\n    ecModel.eachRawSeries(create);\n  } else if (seriesType) {\n    ecModel.eachRawSeriesByType(seriesType, create);\n  } else if (getTargetSeries) {\n    getTargetSeries(ecModel, api).each(create);\n  }\n\n  function create(seriesModel) {\n    var pipelineId = seriesModel.uid; // Init tasks for each seriesModel only once.\n    // Reuse original task instance.\n\n    var task = seriesTaskMap.get(pipelineId) || seriesTaskMap.set(pipelineId, createTask({\n      plan: seriesTaskPlan,\n      reset: seriesTaskReset,\n      count: seriesTaskCount\n    }));\n    task.context = {\n      model: seriesModel,\n      ecModel: ecModel,\n      api: api,\n      useClearVisual: stageHandler.isVisual && !stageHandler.isLayout,\n      plan: stageHandler.plan,\n      reset: stageHandler.reset,\n      scheduler: scheduler\n    };\n    pipe(scheduler, seriesModel, task);\n  } // Clear unused series tasks.\n\n\n  var pipelineMap = scheduler._pipelineMap;\n  seriesTaskMap.each(function (task, pipelineId) {\n    if (!pipelineMap.get(pipelineId)) {\n      task.dispose();\n      seriesTaskMap.removeKey(pipelineId);\n    }\n  });\n}\n\nfunction createOverallStageTask(scheduler, stageHandler, stageHandlerRecord, ecModel, api) {\n  var overallTask = stageHandlerRecord.overallTask = stageHandlerRecord.overallTask // For overall task, the function only be called on reset stage.\n  || createTask({\n    reset: overallTaskReset\n  });\n  overallTask.context = {\n    ecModel: ecModel,\n    api: api,\n    overallReset: stageHandler.overallReset,\n    scheduler: scheduler\n  }; // Reuse orignal stubs.\n\n  var agentStubMap = overallTask.agentStubMap = overallTask.agentStubMap || createHashMap();\n  var seriesType = stageHandler.seriesType;\n  var getTargetSeries = stageHandler.getTargetSeries;\n  var overallProgress = true;\n  var modifyOutputEnd = stageHandler.modifyOutputEnd; // An overall task with seriesType detected or has `getTargetSeries`, we add\n  // stub in each pipelines, it will set the overall task dirty when the pipeline\n  // progress. Moreover, to avoid call the overall task each frame (too frequent),\n  // we set the pipeline block.\n\n  if (seriesType) {\n    ecModel.eachRawSeriesByType(seriesType, createStub);\n  } else if (getTargetSeries) {\n    getTargetSeries(ecModel, api).each(createStub);\n  } // Otherwise, (usually it is legancy case), the overall task will only be\n  // executed when upstream dirty. Otherwise the progressive rendering of all\n  // pipelines will be disabled unexpectedly. But it still needs stubs to receive\n  // dirty info from upsteam.\n  else {\n      overallProgress = false;\n      each(ecModel.getSeries(), createStub);\n    }\n\n  function createStub(seriesModel) {\n    var pipelineId = seriesModel.uid;\n    var stub = agentStubMap.get(pipelineId);\n\n    if (!stub) {\n      stub = agentStubMap.set(pipelineId, createTask({\n        reset: stubReset,\n        onDirty: stubOnDirty\n      })); // When the result of `getTargetSeries` changed, the overallTask\n      // should be set as dirty and re-performed.\n\n      overallTask.dirty();\n    }\n\n    stub.context = {\n      model: seriesModel,\n      overallProgress: overallProgress,\n      modifyOutputEnd: modifyOutputEnd\n    };\n    stub.agent = overallTask;\n    stub.__block = overallProgress;\n    pipe(scheduler, seriesModel, stub);\n  } // Clear unused stubs.\n\n\n  var pipelineMap = scheduler._pipelineMap;\n  agentStubMap.each(function (stub, pipelineId) {\n    if (!pipelineMap.get(pipelineId)) {\n      stub.dispose(); // When the result of `getTargetSeries` changed, the overallTask\n      // should be set as dirty and re-performed.\n\n      overallTask.dirty();\n      agentStubMap.removeKey(pipelineId);\n    }\n  });\n}\n\nfunction overallTaskReset(context) {\n  context.overallReset(context.ecModel, context.api, context.payload);\n}\n\nfunction stubReset(context, upstreamContext) {\n  return context.overallProgress && stubProgress;\n}\n\nfunction stubProgress() {\n  this.agent.dirty();\n  this.getDownstream().dirty();\n}\n\nfunction stubOnDirty() {\n  this.agent && this.agent.dirty();\n}\n\nfunction seriesTaskPlan(context) {\n  return context.plan && context.plan(context.model, context.ecModel, context.api, context.payload);\n}\n\nfunction seriesTaskReset(context) {\n  if (context.useClearVisual) {\n    context.data.clearAllVisual();\n  }\n\n  var resetDefines = context.resetDefines = normalizeToArray(context.reset(context.model, context.ecModel, context.api, context.payload));\n  return resetDefines.length > 1 ? map(resetDefines, function (v, idx) {\n    return makeSeriesTaskProgress(idx);\n  }) : singleSeriesTaskProgress;\n}\n\nvar singleSeriesTaskProgress = makeSeriesTaskProgress(0);\n\nfunction makeSeriesTaskProgress(resetDefineIdx) {\n  return function (params, context) {\n    var data = context.data;\n    var resetDefine = context.resetDefines[resetDefineIdx];\n\n    if (resetDefine && resetDefine.dataEach) {\n      for (var i = params.start; i < params.end; i++) {\n        resetDefine.dataEach(data, i);\n      }\n    } else if (resetDefine && resetDefine.progress) {\n      resetDefine.progress(params, data);\n    }\n  };\n}\n\nfunction seriesTaskCount(context) {\n  return context.data.count();\n}\n\nfunction pipe(scheduler, seriesModel, task) {\n  var pipelineId = seriesModel.uid;\n\n  var pipeline = scheduler._pipelineMap.get(pipelineId);\n\n  !pipeline.head && (pipeline.head = task);\n  pipeline.tail && pipeline.tail.pipe(task);\n  pipeline.tail = task;\n  task.__idxInPipeline = pipeline.count++;\n  task.__pipeline = pipeline;\n}\n\nScheduler.wrapStageHandler = function (stageHandler, visualType) {\n  if (isFunction(stageHandler)) {\n    stageHandler = {\n      overallReset: stageHandler,\n      seriesType: detectSeriseType(stageHandler)\n    };\n  }\n\n  stageHandler.uid = getUID('stageHandler');\n  visualType && (stageHandler.visualType = visualType);\n  return stageHandler;\n};\n/**\n * Only some legacy stage handlers (usually in echarts extensions) are pure function.\n * To ensure that they can work normally, they should work in block mode, that is,\n * they should not be started util the previous tasks finished. So they cause the\n * progressive rendering disabled. We try to detect the series type, to narrow down\n * the block range to only the series type they concern, but not all series.\n */\n\n\nfunction detectSeriseType(legacyFunc) {\n  seriesType = null;\n\n  try {\n    // Assume there is no async when calling `eachSeriesByType`.\n    legacyFunc(ecModelMock, apiMock);\n  } catch (e) {}\n\n  return seriesType;\n}\n\nvar ecModelMock = {};\nvar apiMock = {};\nvar seriesType;\nmockMethods(ecModelMock, GlobalModel);\nmockMethods(apiMock, ExtensionAPI);\n\necModelMock.eachSeriesByType = ecModelMock.eachRawSeriesByType = function (type) {\n  seriesType = type;\n};\n\necModelMock.eachComponent = function (cond) {\n  if (cond.mainType === 'series' && cond.subType) {\n    seriesType = cond.subType;\n  }\n};\n\nfunction mockMethods(target, Clz) {\n  /* eslint-disable */\n  for (var name in Clz.prototype) {\n    // Do not use hasOwnProperty\n    target[name] = noop;\n  }\n  /* eslint-enable */\n\n}\n\nvar _default = Scheduler;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar isFunction = _util.isFunction;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(seriesType, defaultSymbolType, legendSymbol) {\n  // Encoding visual for all series include which is filtered for legend drawing\n  return {\n    seriesType: seriesType,\n    // For legend.\n    performRawSeries: true,\n    reset: function (seriesModel, ecModel, api) {\n      var data = seriesModel.getData();\n      var symbolType = seriesModel.get('symbol');\n      var symbolSize = seriesModel.get('symbolSize');\n      var keepAspect = seriesModel.get('symbolKeepAspect');\n      var symbolRotate = seriesModel.get('symbolRotate');\n      var hasSymbolTypeCallback = isFunction(symbolType);\n      var hasSymbolSizeCallback = isFunction(symbolSize);\n      var hasSymbolRotateCallback = isFunction(symbolRotate);\n      var hasCallback = hasSymbolTypeCallback || hasSymbolSizeCallback || hasSymbolRotateCallback;\n      var seriesSymbol = !hasSymbolTypeCallback && symbolType ? symbolType : defaultSymbolType;\n      var seriesSymbolSize = !hasSymbolSizeCallback ? symbolSize : null;\n      var seriesSymbolRotate = !hasSymbolRotateCallback ? seriesSymbolRotate : null;\n      data.setVisual({\n        legendSymbol: legendSymbol || seriesSymbol,\n        // If seting callback functions on `symbol` or `symbolSize`, for simplicity and avoiding\n        // to bring trouble, we do not pick a reuslt from one of its calling on data item here,\n        // but just use the default value. Callback on `symbol` or `symbolSize` is convenient in\n        // some cases but generally it is not recommanded.\n        symbol: seriesSymbol,\n        symbolSize: seriesSymbolSize,\n        symbolKeepAspect: keepAspect,\n        symbolRotate: symbolRotate\n      }); // Only visible series has each data be visual encoded\n\n      if (ecModel.isSeriesFiltered(seriesModel)) {\n        return;\n      }\n\n      function dataEach(data, idx) {\n        if (hasCallback) {\n          var rawValue = seriesModel.getRawValue(idx);\n          var params = seriesModel.getDataParams(idx);\n          hasSymbolTypeCallback && data.setItemVisual(idx, 'symbol', symbolType(rawValue, params));\n          hasSymbolSizeCallback && data.setItemVisual(idx, 'symbolSize', symbolSize(rawValue, params));\n          hasSymbolRotateCallback && data.setItemVisual(idx, 'symbolRotate', symbolRotate(rawValue, params));\n        }\n\n        if (data.hasItemOption) {\n          var itemModel = data.getItemModel(idx);\n          var itemSymbolType = itemModel.getShallow('symbol', true);\n          var itemSymbolSize = itemModel.getShallow('symbolSize', true);\n          var itemSymbolRotate = itemModel.getShallow('symbolRotate', true);\n          var itemSymbolKeepAspect = itemModel.getShallow('symbolKeepAspect', true); // If has item symbol\n\n          if (itemSymbolType != null) {\n            data.setItemVisual(idx, 'symbol', itemSymbolType);\n          }\n\n          if (itemSymbolSize != null) {\n            // PENDING Transform symbolSize ?\n            data.setItemVisual(idx, 'symbolSize', itemSymbolSize);\n          }\n\n          if (itemSymbolRotate != null) {\n            data.setItemVisual(idx, 'symbolRotate', itemSymbolRotate);\n          }\n\n          if (itemSymbolKeepAspect != null) {\n            data.setItemVisual(idx, 'symbolKeepAspect', itemSymbolKeepAspect);\n          }\n        }\n      }\n\n      return {\n        dataEach: data.hasItemOption || hasCallback ? dataEach : null\n      };\n    }\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar ORIGIN_METHOD = '\\0__throttleOriginMethod';\nvar RATE = '\\0__throttleRate';\nvar THROTTLE_TYPE = '\\0__throttleType';\n/**\n * @public\n * @param {(Function)} fn\n * @param {number} [delay=0] Unit: ms.\n * @param {boolean} [debounce=false]\n *        true: If call interval less than `delay`, only the last call works.\n *        false: If call interval less than `delay, call works on fixed rate.\n * @return {(Function)} throttled fn.\n */\n\nfunction throttle(fn, delay, debounce) {\n  var currCall;\n  var lastCall = 0;\n  var lastExec = 0;\n  var timer = null;\n  var diff;\n  var scope;\n  var args;\n  var debounceNextCall;\n  delay = delay || 0;\n\n  function exec() {\n    lastExec = new Date().getTime();\n    timer = null;\n    fn.apply(scope, args || []);\n  }\n\n  var cb = function () {\n    currCall = new Date().getTime();\n    scope = this;\n    args = arguments;\n    var thisDelay = debounceNextCall || delay;\n    var thisDebounce = debounceNextCall || debounce;\n    debounceNextCall = null;\n    diff = currCall - (thisDebounce ? lastCall : lastExec) - thisDelay;\n    clearTimeout(timer); // Here we should make sure that: the `exec` SHOULD NOT be called later\n    // than a new call of `cb`, that is, preserving the command order. Consider\n    // calculating \"scale rate\" when roaming as an example. When a call of `cb`\n    // happens, either the `exec` is called dierectly, or the call is delayed.\n    // But the delayed call should never be later than next call of `cb`. Under\n    // this assurance, we can simply update view state each time `dispatchAction`\n    // triggered by user roaming, but not need to add extra code to avoid the\n    // state being \"rolled-back\".\n\n    if (thisDebounce) {\n      timer = setTimeout(exec, thisDelay);\n    } else {\n      if (diff >= 0) {\n        exec();\n      } else {\n        timer = setTimeout(exec, -diff);\n      }\n    }\n\n    lastCall = currCall;\n  };\n  /**\n   * Clear throttle.\n   * @public\n   */\n\n\n  cb.clear = function () {\n    if (timer) {\n      clearTimeout(timer);\n      timer = null;\n    }\n  };\n  /**\n   * Enable debounce once.\n   */\n\n\n  cb.debounceNextCall = function (debounceDelay) {\n    debounceNextCall = debounceDelay;\n  };\n\n  return cb;\n}\n/**\n * Create throttle method or update throttle rate.\n *\n * @example\n * ComponentView.prototype.render = function () {\n *     ...\n *     throttle.createOrUpdate(\n *         this,\n *         '_dispatchAction',\n *         this.model.get('throttle'),\n *         'fixRate'\n *     );\n * };\n * ComponentView.prototype.remove = function () {\n *     throttle.clear(this, '_dispatchAction');\n * };\n * ComponentView.prototype.dispose = function () {\n *     throttle.clear(this, '_dispatchAction');\n * };\n *\n * @public\n * @param {Object} obj\n * @param {string} fnAttr\n * @param {number} [rate]\n * @param {string} [throttleType='fixRate'] 'fixRate' or 'debounce'\n * @return {Function} throttled function.\n */\n\n\nfunction createOrUpdate(obj, fnAttr, rate, throttleType) {\n  var fn = obj[fnAttr];\n\n  if (!fn) {\n    return;\n  }\n\n  var originFn = fn[ORIGIN_METHOD] || fn;\n  var lastThrottleType = fn[THROTTLE_TYPE];\n  var lastRate = fn[RATE];\n\n  if (lastRate !== rate || lastThrottleType !== throttleType) {\n    if (rate == null || !throttleType) {\n      return obj[fnAttr] = originFn;\n    }\n\n    fn = obj[fnAttr] = throttle(originFn, rate, throttleType === 'debounce');\n    fn[ORIGIN_METHOD] = originFn;\n    fn[THROTTLE_TYPE] = throttleType;\n    fn[RATE] = rate;\n  }\n\n  return fn;\n}\n/**\n * Clear throttle. Example see throttle.createOrUpdate.\n *\n * @public\n * @param {Object} obj\n * @param {string} fnAttr\n */\n\n\nfunction clear(obj, fnAttr) {\n  var fn = obj[fnAttr];\n\n  if (fn && fn[ORIGIN_METHOD]) {\n    obj[fnAttr] = fn[ORIGIN_METHOD];\n  }\n}\n\nexports.throttle = throttle;\nexports.createOrUpdate = createOrUpdate;\nexports.clear = clear;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _clazz = require(\"./clazz\");\n\nvar parseClassType = _clazz.parseClassType;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar base = 0;\n/**\n * @public\n * @param {string} type\n * @return {string}\n */\n\nfunction getUID(type) {\n  // Considering the case of crossing js context,\n  // use Math.random to make id as unique as possible.\n  return [type || '', base++, Math.random().toFixed(5)].join('_');\n}\n/**\n * @inner\n */\n\n\nfunction enableSubTypeDefaulter(entity) {\n  var subTypeDefaulters = {};\n\n  entity.registerSubTypeDefaulter = function (componentType, defaulter) {\n    componentType = parseClassType(componentType);\n    subTypeDefaulters[componentType.main] = defaulter;\n  };\n\n  entity.determineSubType = function (componentType, option) {\n    var type = option.type;\n\n    if (!type) {\n      var componentTypeMain = parseClassType(componentType).main;\n\n      if (entity.hasSubTypes(componentType) && subTypeDefaulters[componentTypeMain]) {\n        type = subTypeDefaulters[componentTypeMain](option);\n      }\n    }\n\n    return type;\n  };\n\n  return entity;\n}\n/**\n * Topological travel on Activity Network (Activity On Vertices).\n * Dependencies is defined in Model.prototype.dependencies, like ['xAxis', 'yAxis'].\n *\n * If 'xAxis' or 'yAxis' is absent in componentTypeList, just ignore it in topology.\n *\n * If there is circle dependencey, Error will be thrown.\n *\n */\n\n\nfunction enableTopologicalTravel(entity, dependencyGetter) {\n  /**\n   * @public\n   * @param {Array.<string>} targetNameList Target Component type list.\n   *                                           Can be ['aa', 'bb', 'aa.xx']\n   * @param {Array.<string>} fullNameList By which we can build dependency graph.\n   * @param {Function} callback Params: componentType, dependencies.\n   * @param {Object} context Scope of callback.\n   */\n  entity.topologicalTravel = function (targetNameList, fullNameList, callback, context) {\n    if (!targetNameList.length) {\n      return;\n    }\n\n    var result = makeDepndencyGraph(fullNameList);\n    var graph = result.graph;\n    var stack = result.noEntryList;\n    var targetNameSet = {};\n    zrUtil.each(targetNameList, function (name) {\n      targetNameSet[name] = true;\n    });\n\n    while (stack.length) {\n      var currComponentType = stack.pop();\n      var currVertex = graph[currComponentType];\n      var isInTargetNameSet = !!targetNameSet[currComponentType];\n\n      if (isInTargetNameSet) {\n        callback.call(context, currComponentType, currVertex.originalDeps.slice());\n        delete targetNameSet[currComponentType];\n      }\n\n      zrUtil.each(currVertex.successor, isInTargetNameSet ? removeEdgeAndAdd : removeEdge);\n    }\n\n    zrUtil.each(targetNameSet, function () {\n      throw new Error('Circle dependency may exists');\n    });\n\n    function removeEdge(succComponentType) {\n      graph[succComponentType].entryCount--;\n\n      if (graph[succComponentType].entryCount === 0) {\n        stack.push(succComponentType);\n      }\n    } // Consider this case: legend depends on series, and we call\n    // chart.setOption({series: [...]}), where only series is in option.\n    // If we do not have 'removeEdgeAndAdd', legendModel.mergeOption will\n    // not be called, but only sereis.mergeOption is called. Thus legend\n    // have no chance to update its local record about series (like which\n    // name of series is available in legend).\n\n\n    function removeEdgeAndAdd(succComponentType) {\n      targetNameSet[succComponentType] = true;\n      removeEdge(succComponentType);\n    }\n  };\n  /**\n   * DepndencyGraph: {Object}\n   * key: conponentType,\n   * value: {\n   *     successor: [conponentTypes...],\n   *     originalDeps: [conponentTypes...],\n   *     entryCount: {number}\n   * }\n   */\n\n\n  function makeDepndencyGraph(fullNameList) {\n    var graph = {};\n    var noEntryList = [];\n    zrUtil.each(fullNameList, function (name) {\n      var thisItem = createDependencyGraphItem(graph, name);\n      var originalDeps = thisItem.originalDeps = dependencyGetter(name);\n      var availableDeps = getAvailableDependencies(originalDeps, fullNameList);\n      thisItem.entryCount = availableDeps.length;\n\n      if (thisItem.entryCount === 0) {\n        noEntryList.push(name);\n      }\n\n      zrUtil.each(availableDeps, function (dependentName) {\n        if (zrUtil.indexOf(thisItem.predecessor, dependentName) < 0) {\n          thisItem.predecessor.push(dependentName);\n        }\n\n        var thatItem = createDependencyGraphItem(graph, dependentName);\n\n        if (zrUtil.indexOf(thatItem.successor, dependentName) < 0) {\n          thatItem.successor.push(name);\n        }\n      });\n    });\n    return {\n      graph: graph,\n      noEntryList: noEntryList\n    };\n  }\n\n  function createDependencyGraphItem(graph, name) {\n    if (!graph[name]) {\n      graph[name] = {\n        predecessor: [],\n        successor: []\n      };\n    }\n\n    return graph[name];\n  }\n\n  function getAvailableDependencies(originalDeps, fullNameList) {\n    var availableDeps = [];\n    zrUtil.each(originalDeps, function (dep) {\n      zrUtil.indexOf(fullNameList, dep) >= 0 && availableDeps.push(dep);\n    });\n    return availableDeps;\n  }\n}\n\nexports.getUID = getUID;\nexports.enableSubTypeDefaulter = enableSubTypeDefaulter;\nexports.enableTopologicalTravel = enableTopologicalTravel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"./graphic\");\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\nvar _text = require(\"zrender/lib/contain/text\");\n\nvar calculateTextPosition = _text.calculateTextPosition;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Symbol factory\n\n/**\n * Triangle shape\n * @inner\n */\nvar Triangle = graphic.extendShape({\n  type: 'triangle',\n  shape: {\n    cx: 0,\n    cy: 0,\n    width: 0,\n    height: 0\n  },\n  buildPath: function (path, shape) {\n    var cx = shape.cx;\n    var cy = shape.cy;\n    var width = shape.width / 2;\n    var height = shape.height / 2;\n    path.moveTo(cx, cy - height);\n    path.lineTo(cx + width, cy + height);\n    path.lineTo(cx - width, cy + height);\n    path.closePath();\n  }\n});\n/**\n * Diamond shape\n * @inner\n */\n\nvar Diamond = graphic.extendShape({\n  type: 'diamond',\n  shape: {\n    cx: 0,\n    cy: 0,\n    width: 0,\n    height: 0\n  },\n  buildPath: function (path, shape) {\n    var cx = shape.cx;\n    var cy = shape.cy;\n    var width = shape.width / 2;\n    var height = shape.height / 2;\n    path.moveTo(cx, cy - height);\n    path.lineTo(cx + width, cy);\n    path.lineTo(cx, cy + height);\n    path.lineTo(cx - width, cy);\n    path.closePath();\n  }\n});\n/**\n * Pin shape\n * @inner\n */\n\nvar Pin = graphic.extendShape({\n  type: 'pin',\n  shape: {\n    // x, y on the cusp\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n  },\n  buildPath: function (path, shape) {\n    var x = shape.x;\n    var y = shape.y;\n    var w = shape.width / 5 * 3; // Height must be larger than width\n\n    var h = Math.max(w, shape.height);\n    var r = w / 2; // Dist on y with tangent point and circle center\n\n    var dy = r * r / (h - r);\n    var cy = y - h + r + dy;\n    var angle = Math.asin(dy / r); // Dist on x with tangent point and circle center\n\n    var dx = Math.cos(angle) * r;\n    var tanX = Math.sin(angle);\n    var tanY = Math.cos(angle);\n    var cpLen = r * 0.6;\n    var cpLen2 = r * 0.7;\n    path.moveTo(x - dx, cy + dy);\n    path.arc(x, cy, r, Math.PI - angle, Math.PI * 2 + angle);\n    path.bezierCurveTo(x + dx - tanX * cpLen, cy + dy + tanY * cpLen, x, y - cpLen2, x, y);\n    path.bezierCurveTo(x, y - cpLen2, x - dx + tanX * cpLen, cy + dy + tanY * cpLen, x - dx, cy + dy);\n    path.closePath();\n  }\n});\n/**\n * Arrow shape\n * @inner\n */\n\nvar Arrow = graphic.extendShape({\n  type: 'arrow',\n  shape: {\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n  },\n  buildPath: function (ctx, shape) {\n    var height = shape.height;\n    var width = shape.width;\n    var x = shape.x;\n    var y = shape.y;\n    var dx = width / 3 * 2;\n    ctx.moveTo(x, y);\n    ctx.lineTo(x + dx, y + height);\n    ctx.lineTo(x, y + height / 4 * 3);\n    ctx.lineTo(x - dx, y + height);\n    ctx.lineTo(x, y);\n    ctx.closePath();\n  }\n});\n/**\n * Map of path contructors\n * @type {Object.<string, module:zrender/graphic/Path>}\n */\n\nvar symbolCtors = {\n  line: graphic.Line,\n  rect: graphic.Rect,\n  roundRect: graphic.Rect,\n  square: graphic.Rect,\n  circle: graphic.Circle,\n  diamond: Diamond,\n  pin: Pin,\n  arrow: Arrow,\n  triangle: Triangle\n};\nvar symbolShapeMakers = {\n  line: function (x, y, w, h, shape) {\n    // FIXME\n    shape.x1 = x;\n    shape.y1 = y + h / 2;\n    shape.x2 = x + w;\n    shape.y2 = y + h / 2;\n  },\n  rect: function (x, y, w, h, shape) {\n    shape.x = x;\n    shape.y = y;\n    shape.width = w;\n    shape.height = h;\n  },\n  roundRect: function (x, y, w, h, shape) {\n    shape.x = x;\n    shape.y = y;\n    shape.width = w;\n    shape.height = h;\n    shape.r = Math.min(w, h) / 4;\n  },\n  square: function (x, y, w, h, shape) {\n    var size = Math.min(w, h);\n    shape.x = x;\n    shape.y = y;\n    shape.width = size;\n    shape.height = size;\n  },\n  circle: function (x, y, w, h, shape) {\n    // Put circle in the center of square\n    shape.cx = x + w / 2;\n    shape.cy = y + h / 2;\n    shape.r = Math.min(w, h) / 2;\n  },\n  diamond: function (x, y, w, h, shape) {\n    shape.cx = x + w / 2;\n    shape.cy = y + h / 2;\n    shape.width = w;\n    shape.height = h;\n  },\n  pin: function (x, y, w, h, shape) {\n    shape.x = x + w / 2;\n    shape.y = y + h / 2;\n    shape.width = w;\n    shape.height = h;\n  },\n  arrow: function (x, y, w, h, shape) {\n    shape.x = x + w / 2;\n    shape.y = y + h / 2;\n    shape.width = w;\n    shape.height = h;\n  },\n  triangle: function (x, y, w, h, shape) {\n    shape.cx = x + w / 2;\n    shape.cy = y + h / 2;\n    shape.width = w;\n    shape.height = h;\n  }\n};\nvar symbolBuildProxies = {};\nzrUtil.each(symbolCtors, function (Ctor, name) {\n  symbolBuildProxies[name] = new Ctor();\n});\nvar SymbolClz = graphic.extendShape({\n  type: 'symbol',\n  shape: {\n    symbolType: '',\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n  },\n  calculateTextPosition: function (out, style, rect) {\n    var res = calculateTextPosition(out, style, rect);\n    var shape = this.shape;\n\n    if (shape && shape.symbolType === 'pin' && style.textPosition === 'inside') {\n      res.y = rect.y + rect.height * 0.4;\n    }\n\n    return res;\n  },\n  buildPath: function (ctx, shape, inBundle) {\n    var symbolType = shape.symbolType;\n\n    if (symbolType !== 'none') {\n      var proxySymbol = symbolBuildProxies[symbolType];\n\n      if (!proxySymbol) {\n        // Default rect\n        symbolType = 'rect';\n        proxySymbol = symbolBuildProxies[symbolType];\n      }\n\n      symbolShapeMakers[symbolType](shape.x, shape.y, shape.width, shape.height, proxySymbol.shape);\n      proxySymbol.buildPath(ctx, proxySymbol.shape, inBundle);\n    }\n  }\n}); // Provide setColor helper method to avoid determine if set the fill or stroke outside\n\nfunction symbolPathSetColor(color, innerColor) {\n  if (this.type !== 'image') {\n    var symbolStyle = this.style;\n    var symbolShape = this.shape;\n\n    if (symbolShape && symbolShape.symbolType === 'line') {\n      symbolStyle.stroke = color;\n    } else if (this.__isEmptyBrush) {\n      symbolStyle.stroke = color;\n      symbolStyle.fill = innerColor || '#fff';\n    } else {\n      // FIXME 判断图形默认是填充还是描边，使用 onlyStroke ?\n      symbolStyle.fill && (symbolStyle.fill = color);\n      symbolStyle.stroke && (symbolStyle.stroke = color);\n    }\n\n    this.dirty(false);\n  }\n}\n/**\n * Create a symbol element with given symbol configuration: shape, x, y, width, height, color\n * @param {string} symbolType\n * @param {number} x\n * @param {number} y\n * @param {number} w\n * @param {number} h\n * @param {string} color\n * @param {boolean} [keepAspect=false] whether to keep the ratio of w/h,\n *                            for path and image only.\n */\n\n\nfunction createSymbol(symbolType, x, y, w, h, color, keepAspect) {\n  // TODO Support image object, DynamicImage.\n  var isEmpty = symbolType.indexOf('empty') === 0;\n\n  if (isEmpty) {\n    symbolType = symbolType.substr(5, 1).toLowerCase() + symbolType.substr(6);\n  }\n\n  var symbolPath;\n\n  if (symbolType.indexOf('image://') === 0) {\n    symbolPath = graphic.makeImage(symbolType.slice(8), new BoundingRect(x, y, w, h), keepAspect ? 'center' : 'cover');\n  } else if (symbolType.indexOf('path://') === 0) {\n    symbolPath = graphic.makePath(symbolType.slice(7), {}, new BoundingRect(x, y, w, h), keepAspect ? 'center' : 'cover');\n  } else {\n    symbolPath = new SymbolClz({\n      shape: {\n        symbolType: symbolType,\n        x: x,\n        y: y,\n        width: w,\n        height: h\n      }\n    });\n  }\n\n  symbolPath.__isEmptyBrush = isEmpty;\n  symbolPath.setColor = symbolPathSetColor;\n  symbolPath.setColor(color);\n  return symbolPath;\n}\n\nexports.createSymbol = createSymbol;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar Group = require(\"zrender/lib/container/Group\");\n\nvar componentUtil = require(\"../util/component\");\n\nvar clazzUtil = require(\"../util/clazz\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar Component = function () {\n  /**\n   * @type {module:zrender/container/Group}\n   * @readOnly\n   */\n  this.group = new Group();\n  /**\n   * @type {string}\n   * @readOnly\n   */\n\n  this.uid = componentUtil.getUID('viewComponent');\n};\n\nComponent.prototype = {\n  constructor: Component,\n  init: function (ecModel, api) {},\n  render: function (componentModel, ecModel, api, payload) {},\n  dispose: function () {},\n\n  /**\n   * @param {string} eventType\n   * @param {Object} query\n   * @param {module:zrender/Element} targetEl\n   * @param {Object} packedEvent\n   * @return {boolen} Pass only when return `true`.\n   */\n  filterForExposedEvent: null\n};\nvar componentProto = Component.prototype;\n\ncomponentProto.updateView = componentProto.updateLayout = componentProto.updateVisual = function (seriesModel, ecModel, api, payload) {// Do nothing;\n}; // Enable Component.extend.\n\n\nclazzUtil.enableClassExtend(Component); // Enable capability of registerClass, getClass, hasClass, registerSubTypeDefaulter and so on.\n\nclazzUtil.enableClassManagement(Component, {\n  registerWhenExtend: true\n});\nvar _default = Component;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar lang = require(\"../lang\");\n\nvar _dataProvider = require(\"../data/helper/dataProvider\");\n\nvar retrieveRawValue = _dataProvider.retrieveRawValue;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(dom, ecModel) {\n  var ariaModel = ecModel.getModel('aria');\n\n  if (!ariaModel.get('show')) {\n    return;\n  } else if (ariaModel.get('description')) {\n    dom.setAttribute('aria-label', ariaModel.get('description'));\n    return;\n  }\n\n  var seriesCnt = 0;\n  ecModel.eachSeries(function (seriesModel, idx) {\n    ++seriesCnt;\n  }, this);\n  var maxDataCnt = ariaModel.get('data.maxCount') || 10;\n  var maxSeriesCnt = ariaModel.get('series.maxCount') || 10;\n  var displaySeriesCnt = Math.min(seriesCnt, maxSeriesCnt);\n  var ariaLabel;\n\n  if (seriesCnt < 1) {\n    // No series, no aria label\n    return;\n  } else {\n    var title = getTitle();\n\n    if (title) {\n      ariaLabel = replace(getConfig('general.withTitle'), {\n        title: title\n      });\n    } else {\n      ariaLabel = getConfig('general.withoutTitle');\n    }\n\n    var seriesLabels = [];\n    var prefix = seriesCnt > 1 ? 'series.multiple.prefix' : 'series.single.prefix';\n    ariaLabel += replace(getConfig(prefix), {\n      seriesCount: seriesCnt\n    });\n    ecModel.eachSeries(function (seriesModel, idx) {\n      if (idx < displaySeriesCnt) {\n        var seriesLabel;\n        var seriesName = seriesModel.get('name');\n        var seriesTpl = 'series.' + (seriesCnt > 1 ? 'multiple' : 'single') + '.';\n        seriesLabel = getConfig(seriesName ? seriesTpl + 'withName' : seriesTpl + 'withoutName');\n        seriesLabel = replace(seriesLabel, {\n          seriesId: seriesModel.seriesIndex,\n          seriesName: seriesModel.get('name'),\n          seriesType: getSeriesTypeName(seriesModel.subType)\n        });\n        var data = seriesModel.getData();\n        window.data = data;\n\n        if (data.count() > maxDataCnt) {\n          // Show part of data\n          seriesLabel += replace(getConfig('data.partialData'), {\n            displayCnt: maxDataCnt\n          });\n        } else {\n          seriesLabel += getConfig('data.allData');\n        }\n\n        var dataLabels = [];\n\n        for (var i = 0; i < data.count(); i++) {\n          if (i < maxDataCnt) {\n            var name = data.getName(i);\n            var value = retrieveRawValue(data, i);\n            dataLabels.push(replace(name ? getConfig('data.withName') : getConfig('data.withoutName'), {\n              name: name,\n              value: value\n            }));\n          }\n        }\n\n        seriesLabel += dataLabels.join(getConfig('data.separator.middle')) + getConfig('data.separator.end');\n        seriesLabels.push(seriesLabel);\n      }\n    });\n    ariaLabel += seriesLabels.join(getConfig('series.multiple.separator.middle')) + getConfig('series.multiple.separator.end');\n    dom.setAttribute('aria-label', ariaLabel);\n  }\n\n  function replace(str, keyValues) {\n    if (typeof str !== 'string') {\n      return str;\n    }\n\n    var result = str;\n    zrUtil.each(keyValues, function (value, key) {\n      result = result.replace(new RegExp('\\\\{\\\\s*' + key + '\\\\s*\\\\}', 'g'), value);\n    });\n    return result;\n  }\n\n  function getConfig(path) {\n    var userConfig = ariaModel.get(path);\n\n    if (userConfig == null) {\n      var pathArr = path.split('.');\n      var result = lang.aria;\n\n      for (var i = 0; i < pathArr.length; ++i) {\n        result = result[pathArr[i]];\n      }\n\n      return result;\n    } else {\n      return userConfig;\n    }\n  }\n\n  function getTitle() {\n    var title = ecModel.getModel('title').option;\n\n    if (title && title.length) {\n      title = title[0];\n    }\n\n    return title && title.text;\n  }\n\n  function getSeriesTypeName(type) {\n    return lang.series.typeNames[type] || '自定义图';\n  }\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _graphic = require(\"../graphic\");\n\nvar extendShape = _graphic.extendShape;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Sausage: similar to sector, but have half circle on both sides\n * @public\n */\nvar _default = extendShape({\n  type: 'sausage',\n  shape: {\n    cx: 0,\n    cy: 0,\n    r0: 0,\n    r: 0,\n    startAngle: 0,\n    endAngle: Math.PI * 2,\n    clockwise: true\n  },\n  buildPath: function (ctx, shape) {\n    var x = shape.cx;\n    var y = shape.cy;\n    var r0 = Math.max(shape.r0 || 0, 0);\n    var r = Math.max(shape.r, 0);\n    var dr = (r - r0) * 0.5;\n    var rCenter = r0 + dr;\n    var startAngle = shape.startAngle;\n    var endAngle = shape.endAngle;\n    var clockwise = shape.clockwise;\n    var unitStartX = Math.cos(startAngle);\n    var unitStartY = Math.sin(startAngle);\n    var unitEndX = Math.cos(endAngle);\n    var unitEndY = Math.sin(endAngle);\n    var lessThanCircle = clockwise ? endAngle - startAngle < Math.PI * 2 : startAngle - endAngle < Math.PI * 2;\n\n    if (lessThanCircle) {\n      ctx.moveTo(unitStartX * r0 + x, unitStartY * r0 + y);\n      ctx.arc(unitStartX * rCenter + x, unitStartY * rCenter + y, dr, -Math.PI + startAngle, startAngle, !clockwise);\n    }\n\n    ctx.arc(x, y, r, startAngle, endAngle, !clockwise);\n    ctx.moveTo(unitEndX * r + x, unitEndY * r + y);\n    ctx.arc(unitEndX * rCenter + x, unitEndY * rCenter + y, dr, endAngle - Math.PI * 2, endAngle - Math.PI, !clockwise);\n\n    if (r0 !== 0) {\n      ctx.arc(x, y, r0, endAngle, startAngle, clockwise);\n      ctx.moveTo(unitStartX * r0 + x, unitEndY * r0 + y);\n    }\n\n    ctx.closePath();\n  }\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar colorAll = ['#37A2DA', '#32C5E9', '#67E0E3', '#9FE6B8', '#FFDB5C', '#ff9f7f', '#fb7293', '#E062AE', '#E690D1', '#e7bcf3', '#9d96f5', '#8378EA', '#96BFFF'];\nvar _default = {\n  color: colorAll,\n  colorLayer: [['#37A2DA', '#ffd85c', '#fd7b5f'], ['#37A2DA', '#67E0E3', '#FFDB5C', '#ff9f7f', '#E062AE', '#9d96f5'], ['#37A2DA', '#32C5E9', '#9FE6B8', '#FFDB5C', '#ff9f7f', '#fb7293', '#e7bcf3', '#8378EA', '#96BFFF'], colorAll]\n};\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\nvar isObject = zrUtil.isObject;\nvar isArray = zrUtil.isArray;\n/**\n * Make the name displayable. But we should\n * make sure it is not duplicated with user\n * specified name, so use '\\0';\n */\n\nvar DUMMY_COMPONENT_NAME_PREFIX = 'series\\0';\n/**\n * If value is not array, then translate it to array.\n * @param  {*} value\n * @return {Array} [value] or value\n */\n\nfunction normalizeToArray(value) {\n  return value instanceof Array ? value : value == null ? [] : [value];\n}\n/**\n * Sync default option between normal and emphasis like `position` and `show`\n * In case some one will write code like\n *     label: {\n *          show: false,\n *          position: 'outside',\n *          fontSize: 18\n *     },\n *     emphasis: {\n *          label: { show: true }\n *     }\n * @param {Object} opt\n * @param {string} key\n * @param {Array.<string>} subOpts\n */\n\n\nfunction defaultEmphasis(opt, key, subOpts) {\n  // Caution: performance sensitive.\n  if (opt) {\n    opt[key] = opt[key] || {};\n    opt.emphasis = opt.emphasis || {};\n    opt.emphasis[key] = opt.emphasis[key] || {}; // Default emphasis option from normal\n\n    for (var i = 0, len = subOpts.length; i < len; i++) {\n      var subOptName = subOpts[i];\n\n      if (!opt.emphasis[key].hasOwnProperty(subOptName) && opt[key].hasOwnProperty(subOptName)) {\n        opt.emphasis[key][subOptName] = opt[key][subOptName];\n      }\n    }\n  }\n}\n\nvar TEXT_STYLE_OPTIONS = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily', 'rich', 'tag', 'color', 'textBorderColor', 'textBorderWidth', 'width', 'height', 'lineHeight', 'align', 'verticalAlign', 'baseline', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY', 'textShadowColor', 'textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY', 'backgroundColor', 'borderColor', 'borderWidth', 'borderRadius', 'padding']; // modelUtil.LABEL_OPTIONS = modelUtil.TEXT_STYLE_OPTIONS.concat([\n//     'position', 'offset', 'rotate', 'origin', 'show', 'distance', 'formatter',\n//     'fontStyle', 'fontWeight', 'fontSize', 'fontFamily',\n//     // FIXME: deprecated, check and remove it.\n//     'textStyle'\n// ]);\n\n/**\n * The method do not ensure performance.\n * data could be [12, 2323, {value: 223}, [1221, 23], {value: [2, 23]}]\n * This helper method retieves value from data.\n * @param {string|number|Date|Array|Object} dataItem\n * @return {number|string|Date|Array.<number|string|Date>}\n */\n\nfunction getDataItemValue(dataItem) {\n  return isObject(dataItem) && !isArray(dataItem) && !(dataItem instanceof Date) ? dataItem.value : dataItem;\n}\n/**\n * data could be [12, 2323, {value: 223}, [1221, 23], {value: [2, 23]}]\n * This helper method determine if dataItem has extra option besides value\n * @param {string|number|Date|Array|Object} dataItem\n */\n\n\nfunction isDataItemOption(dataItem) {\n  return isObject(dataItem) && !(dataItem instanceof Array); // // markLine data can be array\n  // && !(dataItem[0] && isObject(dataItem[0]) && !(dataItem[0] instanceof Array));\n}\n/**\n * Mapping to exists for merge.\n *\n * @public\n * @param {Array.<Object>|Array.<module:echarts/model/Component>} exists\n * @param {Object|Array.<Object>} newCptOptions\n * @return {Array.<Object>} Result, like [{exist: ..., option: ...}, {}],\n *                          index of which is the same as exists.\n */\n\n\nfunction mappingToExists(exists, newCptOptions) {\n  // Mapping by the order by original option (but not order of\n  // new option) in merge mode. Because we should ensure\n  // some specified index (like xAxisIndex) is consistent with\n  // original option, which is easy to understand, espatially in\n  // media query. And in most case, merge option is used to\n  // update partial option but not be expected to change order.\n  newCptOptions = (newCptOptions || []).slice();\n  var result = zrUtil.map(exists || [], function (obj, index) {\n    return {\n      exist: obj\n    };\n  }); // Mapping by id or name if specified.\n\n  each(newCptOptions, function (cptOption, index) {\n    if (!isObject(cptOption)) {\n      return;\n    } // id has highest priority.\n\n\n    for (var i = 0; i < result.length; i++) {\n      if (!result[i].option // Consider name: two map to one.\n      && cptOption.id != null && result[i].exist.id === cptOption.id + '') {\n        result[i].option = cptOption;\n        newCptOptions[index] = null;\n        return;\n      }\n    }\n\n    for (var i = 0; i < result.length; i++) {\n      var exist = result[i].exist;\n\n      if (!result[i].option // Consider name: two map to one.\n      // Can not match when both ids exist but different.\n      && (exist.id == null || cptOption.id == null) && cptOption.name != null && !isIdInner(cptOption) && !isIdInner(exist) && exist.name === cptOption.name + '') {\n        result[i].option = cptOption;\n        newCptOptions[index] = null;\n        return;\n      }\n    }\n  }); // Otherwise mapping by index.\n\n  each(newCptOptions, function (cptOption, index) {\n    if (!isObject(cptOption)) {\n      return;\n    }\n\n    var i = 0;\n\n    for (; i < result.length; i++) {\n      var exist = result[i].exist;\n\n      if (!result[i].option // Existing model that already has id should be able to\n      // mapped to (because after mapping performed model may\n      // be assigned with a id, whish should not affect next\n      // mapping), except those has inner id.\n      && !isIdInner(exist) // Caution:\n      // Do not overwrite id. But name can be overwritten,\n      // because axis use name as 'show label text'.\n      // 'exist' always has id and name and we dont\n      // need to check it.\n      && cptOption.id == null) {\n        result[i].option = cptOption;\n        break;\n      }\n    }\n\n    if (i >= result.length) {\n      result.push({\n        option: cptOption\n      });\n    }\n  });\n  return result;\n}\n/**\n * Make id and name for mapping result (result of mappingToExists)\n * into `keyInfo` field.\n *\n * @public\n * @param {Array.<Object>} Result, like [{exist: ..., option: ...}, {}],\n *                          which order is the same as exists.\n * @return {Array.<Object>} The input.\n */\n\n\nfunction makeIdAndName(mapResult) {\n  // We use this id to hash component models and view instances\n  // in echarts. id can be specified by user, or auto generated.\n  // The id generation rule ensures new view instance are able\n  // to mapped to old instance when setOption are called in\n  // no-merge mode. So we generate model id by name and plus\n  // type in view id.\n  // name can be duplicated among components, which is convenient\n  // to specify multi components (like series) by one name.\n  // Ensure that each id is distinct.\n  var idMap = zrUtil.createHashMap();\n  each(mapResult, function (item, index) {\n    var existCpt = item.exist;\n    existCpt && idMap.set(existCpt.id, item);\n  });\n  each(mapResult, function (item, index) {\n    var opt = item.option;\n    zrUtil.assert(!opt || opt.id == null || !idMap.get(opt.id) || idMap.get(opt.id) === item, 'id duplicates: ' + (opt && opt.id));\n    opt && opt.id != null && idMap.set(opt.id, item);\n    !item.keyInfo && (item.keyInfo = {});\n  }); // Make name and id.\n\n  each(mapResult, function (item, index) {\n    var existCpt = item.exist;\n    var opt = item.option;\n    var keyInfo = item.keyInfo;\n\n    if (!isObject(opt)) {\n      return;\n    } // name can be overwitten. Consider case: axis.name = '20km'.\n    // But id generated by name will not be changed, which affect\n    // only in that case: setOption with 'not merge mode' and view\n    // instance will be recreated, which can be accepted.\n\n\n    keyInfo.name = opt.name != null ? opt.name + '' : existCpt ? existCpt.name // Avoid diffferent series has the same name,\n    // because name may be used like in color pallet.\n    : DUMMY_COMPONENT_NAME_PREFIX + index;\n\n    if (existCpt) {\n      keyInfo.id = existCpt.id;\n    } else if (opt.id != null) {\n      keyInfo.id = opt.id + '';\n    } else {\n      // Consider this situatoin:\n      //  optionA: [{name: 'a'}, {name: 'a'}, {..}]\n      //  optionB [{..}, {name: 'a'}, {name: 'a'}]\n      // Series with the same name between optionA and optionB\n      // should be mapped.\n      var idNum = 0;\n\n      do {\n        keyInfo.id = '\\0' + keyInfo.name + '\\0' + idNum++;\n      } while (idMap.get(keyInfo.id));\n    }\n\n    idMap.set(keyInfo.id, item);\n  });\n}\n\nfunction isNameSpecified(componentModel) {\n  var name = componentModel.name; // Is specified when `indexOf` get -1 or > 0.\n\n  return !!(name && name.indexOf(DUMMY_COMPONENT_NAME_PREFIX));\n}\n/**\n * @public\n * @param {Object} cptOption\n * @return {boolean}\n */\n\n\nfunction isIdInner(cptOption) {\n  return isObject(cptOption) && cptOption.id && (cptOption.id + '').indexOf('\\0_ec_\\0') === 0;\n}\n/**\n * A helper for removing duplicate items between batchA and batchB,\n * and in themselves, and categorize by series.\n *\n * @param {Array.<Object>} batchA Like: [{seriesId: 2, dataIndex: [32, 4, 5]}, ...]\n * @param {Array.<Object>} batchB Like: [{seriesId: 2, dataIndex: [32, 4, 5]}, ...]\n * @return {Array.<Array.<Object>, Array.<Object>>} result: [resultBatchA, resultBatchB]\n */\n\n\nfunction compressBatches(batchA, batchB) {\n  var mapA = {};\n  var mapB = {};\n  makeMap(batchA || [], mapA);\n  makeMap(batchB || [], mapB, mapA);\n  return [mapToArray(mapA), mapToArray(mapB)];\n\n  function makeMap(sourceBatch, map, otherMap) {\n    for (var i = 0, len = sourceBatch.length; i < len; i++) {\n      var seriesId = sourceBatch[i].seriesId;\n      var dataIndices = normalizeToArray(sourceBatch[i].dataIndex);\n      var otherDataIndices = otherMap && otherMap[seriesId];\n\n      for (var j = 0, lenj = dataIndices.length; j < lenj; j++) {\n        var dataIndex = dataIndices[j];\n\n        if (otherDataIndices && otherDataIndices[dataIndex]) {\n          otherDataIndices[dataIndex] = null;\n        } else {\n          (map[seriesId] || (map[seriesId] = {}))[dataIndex] = 1;\n        }\n      }\n    }\n  }\n\n  function mapToArray(map, isData) {\n    var result = [];\n\n    for (var i in map) {\n      if (map.hasOwnProperty(i) && map[i] != null) {\n        if (isData) {\n          result.push(+i);\n        } else {\n          var dataIndices = mapToArray(map[i], true);\n          dataIndices.length && result.push({\n            seriesId: i,\n            dataIndex: dataIndices\n          });\n        }\n      }\n    }\n\n    return result;\n  }\n}\n/**\n * @param {module:echarts/data/List} data\n * @param {Object} payload Contains dataIndex (means rawIndex) / dataIndexInside / name\n *                         each of which can be Array or primary type.\n * @return {number|Array.<number>} dataIndex If not found, return undefined/null.\n */\n\n\nfunction queryDataIndex(data, payload) {\n  if (payload.dataIndexInside != null) {\n    return payload.dataIndexInside;\n  } else if (payload.dataIndex != null) {\n    return zrUtil.isArray(payload.dataIndex) ? zrUtil.map(payload.dataIndex, function (value) {\n      return data.indexOfRawIndex(value);\n    }) : data.indexOfRawIndex(payload.dataIndex);\n  } else if (payload.name != null) {\n    return zrUtil.isArray(payload.name) ? zrUtil.map(payload.name, function (value) {\n      return data.indexOfName(value);\n    }) : data.indexOfName(payload.name);\n  }\n}\n/**\n * Enable property storage to any host object.\n * Notice: Serialization is not supported.\n *\n * For example:\n * var inner = zrUitl.makeInner();\n *\n * function some1(hostObj) {\n *      inner(hostObj).someProperty = 1212;\n *      ...\n * }\n * function some2() {\n *      var fields = inner(this);\n *      fields.someProperty1 = 1212;\n *      fields.someProperty2 = 'xx';\n *      ...\n * }\n *\n * @return {Function}\n */\n\n\nfunction makeInner() {\n  // Consider different scope by es module import.\n  var key = '__\\0ec_inner_' + innerUniqueIndex++ + '_' + Math.random().toFixed(5);\n  return function (hostObj) {\n    return hostObj[key] || (hostObj[key] = {});\n  };\n}\n\nvar innerUniqueIndex = 0;\n/**\n * @param {module:echarts/model/Global} ecModel\n * @param {string|Object} finder\n *        If string, e.g., 'geo', means {geoIndex: 0}.\n *        If Object, could contain some of these properties below:\n *        {\n *            seriesIndex, seriesId, seriesName,\n *            geoIndex, geoId, geoName,\n *            bmapIndex, bmapId, bmapName,\n *            xAxisIndex, xAxisId, xAxisName,\n *            yAxisIndex, yAxisId, yAxisName,\n *            gridIndex, gridId, gridName,\n *            ... (can be extended)\n *        }\n *        Each properties can be number|string|Array.<number>|Array.<string>\n *        For example, a finder could be\n *        {\n *            seriesIndex: 3,\n *            geoId: ['aa', 'cc'],\n *            gridName: ['xx', 'rr']\n *        }\n *        xxxIndex can be set as 'all' (means all xxx) or 'none' (means not specify)\n *        If nothing or null/undefined specified, return nothing.\n * @param {Object} [opt]\n * @param {string} [opt.defaultMainType]\n * @param {Array.<string>} [opt.includeMainTypes]\n * @return {Object} result like:\n *        {\n *            seriesModels: [seriesModel1, seriesModel2],\n *            seriesModel: seriesModel1, // The first model\n *            geoModels: [geoModel1, geoModel2],\n *            geoModel: geoModel1, // The first model\n *            ...\n *        }\n */\n\nfunction parseFinder(ecModel, finder, opt) {\n  if (zrUtil.isString(finder)) {\n    var obj = {};\n    obj[finder + 'Index'] = 0;\n    finder = obj;\n  }\n\n  var defaultMainType = opt && opt.defaultMainType;\n\n  if (defaultMainType && !has(finder, defaultMainType + 'Index') && !has(finder, defaultMainType + 'Id') && !has(finder, defaultMainType + 'Name')) {\n    finder[defaultMainType + 'Index'] = 0;\n  }\n\n  var result = {};\n  each(finder, function (value, key) {\n    var value = finder[key]; // Exclude 'dataIndex' and other illgal keys.\n\n    if (key === 'dataIndex' || key === 'dataIndexInside') {\n      result[key] = value;\n      return;\n    }\n\n    var parsedKey = key.match(/^(\\w+)(Index|Id|Name)$/) || [];\n    var mainType = parsedKey[1];\n    var queryType = (parsedKey[2] || '').toLowerCase();\n\n    if (!mainType || !queryType || value == null || queryType === 'index' && value === 'none' || opt && opt.includeMainTypes && zrUtil.indexOf(opt.includeMainTypes, mainType) < 0) {\n      return;\n    }\n\n    var queryParam = {\n      mainType: mainType\n    };\n\n    if (queryType !== 'index' || value !== 'all') {\n      queryParam[queryType] = value;\n    }\n\n    var models = ecModel.queryComponents(queryParam);\n    result[mainType + 'Models'] = models;\n    result[mainType + 'Model'] = models[0];\n  });\n  return result;\n}\n\nfunction has(obj, prop) {\n  return obj && obj.hasOwnProperty(prop);\n}\n\nfunction setAttribute(dom, key, value) {\n  dom.setAttribute ? dom.setAttribute(key, value) : dom[key] = value;\n}\n\nfunction getAttribute(dom, key) {\n  return dom.getAttribute ? dom.getAttribute(key) : dom[key];\n}\n\nfunction getTooltipRenderMode(renderModeOption) {\n  if (renderModeOption === 'auto') {\n    // Using html when `document` exists, use richText otherwise\n    return env.domSupported ? 'html' : 'richText';\n  } else {\n    return renderModeOption || 'html';\n  }\n}\n/**\n * Group a list by key.\n *\n * @param {Array} array\n * @param {Function} getKey\n *        param {*} Array item\n *        return {string} key\n * @return {Object} Result\n *        {Array}: keys,\n *        {module:zrender/core/util/HashMap} buckets: {key -> Array}\n */\n\n\nfunction groupData(array, getKey) {\n  var buckets = zrUtil.createHashMap();\n  var keys = [];\n  zrUtil.each(array, function (item) {\n    var key = getKey(item);\n    (buckets.get(key) || (keys.push(key), buckets.set(key, []))).push(item);\n  });\n  return {\n    keys: keys,\n    buckets: buckets\n  };\n}\n\nexports.normalizeToArray = normalizeToArray;\nexports.defaultEmphasis = defaultEmphasis;\nexports.TEXT_STYLE_OPTIONS = TEXT_STYLE_OPTIONS;\nexports.getDataItemValue = getDataItemValue;\nexports.isDataItemOption = isDataItemOption;\nexports.mappingToExists = mappingToExists;\nexports.makeIdAndName = makeIdAndName;\nexports.isNameSpecified = isNameSpecified;\nexports.isIdInner = isIdInner;\nexports.compressBatches = compressBatches;\nexports.queryDataIndex = queryDataIndex;\nexports.makeInner = makeInner;\nexports.parseFinder = parseFinder;\nexports.setAttribute = setAttribute;\nexports.getAttribute = getAttribute;\nexports.getTooltipRenderMode = getTooltipRenderMode;\nexports.groupData = groupData;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar each = _util.each;\n\nvar Group = require(\"zrender/lib/container/Group\");\n\nvar componentUtil = require(\"../util/component\");\n\nvar clazzUtil = require(\"../util/clazz\");\n\nvar modelUtil = require(\"../util/model\");\n\nvar graphicUtil = require(\"../util/graphic\");\n\nvar _task = require(\"../stream/task\");\n\nvar createTask = _task.createTask;\n\nvar createRenderPlanner = require(\"../chart/helper/createRenderPlanner\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar inner = modelUtil.makeInner();\nvar renderPlanner = createRenderPlanner();\n\nfunction Chart() {\n  /**\n   * @type {module:zrender/container/Group}\n   * @readOnly\n   */\n  this.group = new Group();\n  /**\n   * @type {string}\n   * @readOnly\n   */\n\n  this.uid = componentUtil.getUID('viewChart');\n  this.renderTask = createTask({\n    plan: renderTaskPlan,\n    reset: renderTaskReset\n  });\n  this.renderTask.context = {\n    view: this\n  };\n}\n\nChart.prototype = {\n  type: 'chart',\n\n  /**\n   * Init the chart.\n   * @param  {module:echarts/model/Global} ecModel\n   * @param  {module:echarts/ExtensionAPI} api\n   */\n  init: function (ecModel, api) {},\n\n  /**\n   * Render the chart.\n   * @param  {module:echarts/model/Series} seriesModel\n   * @param  {module:echarts/model/Global} ecModel\n   * @param  {module:echarts/ExtensionAPI} api\n   * @param  {Object} payload\n   */\n  render: function (seriesModel, ecModel, api, payload) {},\n\n  /**\n   * Highlight series or specified data item.\n   * @param  {module:echarts/model/Series} seriesModel\n   * @param  {module:echarts/model/Global} ecModel\n   * @param  {module:echarts/ExtensionAPI} api\n   * @param  {Object} payload\n   */\n  highlight: function (seriesModel, ecModel, api, payload) {\n    toggleHighlight(seriesModel.getData(), payload, 'emphasis');\n  },\n\n  /**\n   * Downplay series or specified data item.\n   * @param  {module:echarts/model/Series} seriesModel\n   * @param  {module:echarts/model/Global} ecModel\n   * @param  {module:echarts/ExtensionAPI} api\n   * @param  {Object} payload\n   */\n  downplay: function (seriesModel, ecModel, api, payload) {\n    toggleHighlight(seriesModel.getData(), payload, 'normal');\n  },\n\n  /**\n   * Remove self.\n   * @param  {module:echarts/model/Global} ecModel\n   * @param  {module:echarts/ExtensionAPI} api\n   */\n  remove: function (ecModel, api) {\n    this.group.removeAll();\n  },\n\n  /**\n   * Dispose self.\n   * @param  {module:echarts/model/Global} ecModel\n   * @param  {module:echarts/ExtensionAPI} api\n   */\n  dispose: function () {},\n\n  /**\n   * Rendering preparation in progressive mode.\n   * @param  {module:echarts/model/Series} seriesModel\n   * @param  {module:echarts/model/Global} ecModel\n   * @param  {module:echarts/ExtensionAPI} api\n   * @param  {Object} payload\n   */\n  incrementalPrepareRender: null,\n\n  /**\n   * Render in progressive mode.\n   * @param  {Object} params See taskParams in `stream/task.js`\n   * @param  {module:echarts/model/Series} seriesModel\n   * @param  {module:echarts/model/Global} ecModel\n   * @param  {module:echarts/ExtensionAPI} api\n   * @param  {Object} payload\n   */\n  incrementalRender: null,\n\n  /**\n   * Update transform directly.\n   * @param  {module:echarts/model/Series} seriesModel\n   * @param  {module:echarts/model/Global} ecModel\n   * @param  {module:echarts/ExtensionAPI} api\n   * @param  {Object} payload\n   * @return {Object} {update: true}\n   */\n  updateTransform: null,\n\n  /**\n   * The view contains the given point.\n   * @interface\n   * @param {Array.<number>} point\n   * @return {boolean}\n   */\n  // containPoint: function () {}\n\n  /**\n   * @param {string} eventType\n   * @param {Object} query\n   * @param {module:zrender/Element} targetEl\n   * @param {Object} packedEvent\n   * @return {boolen} Pass only when return `true`.\n   */\n  filterForExposedEvent: null\n};\nvar chartProto = Chart.prototype;\n\nchartProto.updateView = chartProto.updateLayout = chartProto.updateVisual = function (seriesModel, ecModel, api, payload) {\n  this.render(seriesModel, ecModel, api, payload);\n};\n/**\n * Set state of single element\n * @param {module:zrender/Element} el\n * @param {string} state 'normal'|'emphasis'\n * @param {number} highlightDigit\n */\n\n\nfunction elSetState(el, state, highlightDigit) {\n  if (el) {\n    el.trigger(state, highlightDigit);\n\n    if (el.isGroup // Simple optimize.\n    && !graphicUtil.isHighDownDispatcher(el)) {\n      for (var i = 0, len = el.childCount(); i < len; i++) {\n        elSetState(el.childAt(i), state, highlightDigit);\n      }\n    }\n  }\n}\n/**\n * @param {module:echarts/data/List} data\n * @param {Object} payload\n * @param {string} state 'normal'|'emphasis'\n */\n\n\nfunction toggleHighlight(data, payload, state) {\n  var dataIndex = modelUtil.queryDataIndex(data, payload);\n  var highlightDigit = payload && payload.highlightKey != null ? graphicUtil.getHighlightDigit(payload.highlightKey) : null;\n\n  if (dataIndex != null) {\n    each(modelUtil.normalizeToArray(dataIndex), function (dataIdx) {\n      elSetState(data.getItemGraphicEl(dataIdx), state, highlightDigit);\n    });\n  } else {\n    data.eachItemGraphicEl(function (el) {\n      elSetState(el, state, highlightDigit);\n    });\n  }\n} // Enable Chart.extend.\n\n\nclazzUtil.enableClassExtend(Chart, ['dispose']); // Add capability of registerClass, getClass, hasClass, registerSubTypeDefaulter and so on.\n\nclazzUtil.enableClassManagement(Chart, {\n  registerWhenExtend: true\n});\n\nChart.markUpdateMethod = function (payload, methodName) {\n  inner(payload).updateMethod = methodName;\n};\n\nfunction renderTaskPlan(context) {\n  return renderPlanner(context.model);\n}\n\nfunction renderTaskReset(context) {\n  var seriesModel = context.model;\n  var ecModel = context.ecModel;\n  var api = context.api;\n  var payload = context.payload; // ???! remove updateView updateVisual\n\n  var progressiveRender = seriesModel.pipelineContext.progressiveRender;\n  var view = context.view;\n  var updateMethod = payload && inner(payload).updateMethod;\n  var methodName = progressiveRender ? 'incrementalPrepareRender' : updateMethod && view[updateMethod] ? updateMethod // `appendData` is also supported when data amount\n  // is less than progressive threshold.\n  : 'render';\n\n  if (methodName !== 'render') {\n    view[methodName](seriesModel, ecModel, api, payload);\n  }\n\n  return progressMethodMap[methodName];\n}\n\nvar progressMethodMap = {\n  incrementalPrepareRender: {\n    progress: function (params, context) {\n      context.view.incrementalRender(params, context.model, context.ecModel, context.api, context.payload);\n    }\n  },\n  render: {\n    // Put view.render in `progress` to support appendData. But in this case\n    // view.render should not be called in reset, otherwise it will be called\n    // twise. Use `forceFirstProgress` to make sure that view.render is called\n    // in any cases.\n    forceFirstProgress: true,\n    progress: function (params, context) {\n      context.view.render(context.model, context.ecModel, context.api, context.payload);\n    }\n  }\n};\nvar _default = Chart;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar textContain = require(\"zrender/lib/contain/text\");\n\nvar numberUtil = require(\"./number\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// import Text from 'zrender/src/graphic/Text';\n\n/**\n * add commas after every three numbers\n * @param {string|number} x\n * @return {string}\n */\nfunction addCommas(x) {\n  if (isNaN(x)) {\n    return '-';\n  }\n\n  x = (x + '').split('.');\n  return x[0].replace(/(\\d{1,3})(?=(?:\\d{3})+(?!\\d))/g, '$1,') + (x.length > 1 ? '.' + x[1] : '');\n}\n/**\n * @param {string} str\n * @param {boolean} [upperCaseFirst=false]\n * @return {string} str\n */\n\n\nfunction toCamelCase(str, upperCaseFirst) {\n  str = (str || '').toLowerCase().replace(/-(.)/g, function (match, group1) {\n    return group1.toUpperCase();\n  });\n\n  if (upperCaseFirst && str) {\n    str = str.charAt(0).toUpperCase() + str.slice(1);\n  }\n\n  return str;\n}\n\nvar normalizeCssArray = zrUtil.normalizeCssArray;\nvar replaceReg = /([&<>\"'])/g;\nvar replaceMap = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  '\\'': '&#39;'\n};\n\nfunction encodeHTML(source) {\n  return source == null ? '' : (source + '').replace(replaceReg, function (str, c) {\n    return replaceMap[c];\n  });\n}\n\nvar TPL_VAR_ALIAS = ['a', 'b', 'c', 'd', 'e', 'f', 'g'];\n\nvar wrapVar = function (varName, seriesIdx) {\n  return '{' + varName + (seriesIdx == null ? '' : seriesIdx) + '}';\n};\n/**\n * Template formatter\n * @param {string} tpl\n * @param {Array.<Object>|Object} paramsList\n * @param {boolean} [encode=false]\n * @return {string}\n */\n\n\nfunction formatTpl(tpl, paramsList, encode) {\n  if (!zrUtil.isArray(paramsList)) {\n    paramsList = [paramsList];\n  }\n\n  var seriesLen = paramsList.length;\n\n  if (!seriesLen) {\n    return '';\n  }\n\n  var $vars = paramsList[0].$vars || [];\n\n  for (var i = 0; i < $vars.length; i++) {\n    var alias = TPL_VAR_ALIAS[i];\n    tpl = tpl.replace(wrapVar(alias), wrapVar(alias, 0));\n  }\n\n  for (var seriesIdx = 0; seriesIdx < seriesLen; seriesIdx++) {\n    for (var k = 0; k < $vars.length; k++) {\n      var val = paramsList[seriesIdx][$vars[k]];\n      tpl = tpl.replace(wrapVar(TPL_VAR_ALIAS[k], seriesIdx), encode ? encodeHTML(val) : val);\n    }\n  }\n\n  return tpl;\n}\n/**\n * simple Template formatter\n *\n * @param {string} tpl\n * @param {Object} param\n * @param {boolean} [encode=false]\n * @return {string}\n */\n\n\nfunction formatTplSimple(tpl, param, encode) {\n  zrUtil.each(param, function (value, key) {\n    tpl = tpl.replace('{' + key + '}', encode ? encodeHTML(value) : value);\n  });\n  return tpl;\n}\n/**\n * @param {Object|string} [opt] If string, means color.\n * @param {string} [opt.color]\n * @param {string} [opt.extraCssText]\n * @param {string} [opt.type='item'] 'item' or 'subItem'\n * @param {string} [opt.renderMode='html'] render mode of tooltip, 'html' or 'richText'\n * @param {string} [opt.markerId='X'] id name for marker. If only one marker is in a rich text, this can be omitted.\n * @return {string}\n */\n\n\nfunction getTooltipMarker(opt, extraCssText) {\n  opt = zrUtil.isString(opt) ? {\n    color: opt,\n    extraCssText: extraCssText\n  } : opt || {};\n  var color = opt.color;\n  var type = opt.type;\n  var extraCssText = opt.extraCssText;\n  var renderMode = opt.renderMode || 'html';\n  var markerId = opt.markerId || 'X';\n\n  if (!color) {\n    return '';\n  }\n\n  if (renderMode === 'html') {\n    return type === 'subItem' ? '<span style=\"display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;' + 'border-radius:4px;width:4px;height:4px;background-color:' + encodeHTML(color) + ';' + (extraCssText || '') + '\"></span>' : '<span style=\"display:inline-block;margin-right:5px;' + 'border-radius:10px;width:10px;height:10px;background-color:' + encodeHTML(color) + ';' + (extraCssText || '') + '\"></span>';\n  } else {\n    // Space for rich element marker\n    return {\n      renderMode: renderMode,\n      content: '{marker' + markerId + '|}  ',\n      style: {\n        color: color\n      }\n    };\n  }\n}\n\nfunction pad(str, len) {\n  str += '';\n  return '0000'.substr(0, len - str.length) + str;\n}\n/**\n * ISO Date format\n * @param {string} tpl\n * @param {number} value\n * @param {boolean} [isUTC=false] Default in local time.\n *           see `module:echarts/scale/Time`\n *           and `module:echarts/util/number#parseDate`.\n * @inner\n */\n\n\nfunction formatTime(tpl, value, isUTC) {\n  if (tpl === 'week' || tpl === 'month' || tpl === 'quarter' || tpl === 'half-year' || tpl === 'year') {\n    tpl = 'MM-dd\\nyyyy';\n  }\n\n  var date = numberUtil.parseDate(value);\n  var utc = isUTC ? 'UTC' : '';\n  var y = date['get' + utc + 'FullYear']();\n  var M = date['get' + utc + 'Month']() + 1;\n  var d = date['get' + utc + 'Date']();\n  var h = date['get' + utc + 'Hours']();\n  var m = date['get' + utc + 'Minutes']();\n  var s = date['get' + utc + 'Seconds']();\n  var S = date['get' + utc + 'Milliseconds']();\n  tpl = tpl.replace('MM', pad(M, 2)).replace('M', M).replace('yyyy', y).replace('yy', y % 100).replace('dd', pad(d, 2)).replace('d', d).replace('hh', pad(h, 2)).replace('h', h).replace('mm', pad(m, 2)).replace('m', m).replace('ss', pad(s, 2)).replace('s', s).replace('SSS', pad(S, 3));\n  return tpl;\n}\n/**\n * Capital first\n * @param {string} str\n * @return {string}\n */\n\n\nfunction capitalFirst(str) {\n  return str ? str.charAt(0).toUpperCase() + str.substr(1) : str;\n}\n\nvar truncateText = textContain.truncateText;\n/**\n * @public\n * @param {Object} opt\n * @param {string} opt.text\n * @param {string} opt.font\n * @param {string} [opt.textAlign='left']\n * @param {string} [opt.textVerticalAlign='top']\n * @param {Array.<number>} [opt.textPadding]\n * @param {number} [opt.textLineHeight]\n * @param {Object} [opt.rich]\n * @param {Object} [opt.truncate]\n * @return {Object} {x, y, width, height, lineHeight}\n */\n\nfunction getTextBoundingRect(opt) {\n  return textContain.getBoundingRect(opt.text, opt.font, opt.textAlign, opt.textVerticalAlign, opt.textPadding, opt.textLineHeight, opt.rich, opt.truncate);\n}\n/**\n * @deprecated\n * the `textLineHeight` was added later.\n * For backward compatiblility, put it as the last parameter.\n * But deprecated this interface. Please use `getTextBoundingRect` instead.\n */\n\n\nfunction getTextRect(text, font, textAlign, textVerticalAlign, textPadding, rich, truncate, textLineHeight) {\n  return textContain.getBoundingRect(text, font, textAlign, textVerticalAlign, textPadding, textLineHeight, rich, truncate);\n}\n/**\n * open new tab\n * @param {string} link url\n * @param {string} target blank or self\n */\n\n\nfunction windowOpen(link, target) {\n  if (target === '_blank' || target === 'blank') {\n    var blank = window.open();\n    blank.opener = null;\n    blank.location = link;\n  } else {\n    window.open(link, target);\n  }\n}\n\nexports.addCommas = addCommas;\nexports.toCamelCase = toCamelCase;\nexports.normalizeCssArray = normalizeCssArray;\nexports.encodeHTML = encodeHTML;\nexports.formatTpl = formatTpl;\nexports.formatTplSimple = formatTplSimple;\nexports.getTooltipMarker = getTooltipMarker;\nexports.formatTime = formatTime;\nexports.capitalFirst = capitalFirst;\nexports.truncateText = truncateText;\nexports.getTextBoundingRect = getTextBoundingRect;\nexports.getTextRect = getTextRect;\nexports.windowOpen = windowOpen;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar contrastColor = '#eee';\n\nvar axisCommon = function () {\n  return {\n    axisLine: {\n      lineStyle: {\n        color: contrastColor\n      }\n    },\n    axisTick: {\n      lineStyle: {\n        color: contrastColor\n      }\n    },\n    axisLabel: {\n      textStyle: {\n        color: contrastColor\n      }\n    },\n    splitLine: {\n      lineStyle: {\n        type: 'dashed',\n        color: '#aaa'\n      }\n    },\n    splitArea: {\n      areaStyle: {\n        color: contrastColor\n      }\n    }\n  };\n};\n\nvar colorPalette = ['#dd6b66', '#759aa0', '#e69d87', '#8dc1a9', '#ea7e53', '#eedd78', '#73a373', '#73b9bc', '#7289ab', '#91ca8c', '#f49f42'];\nvar theme = {\n  color: colorPalette,\n  backgroundColor: '#333',\n  tooltip: {\n    axisPointer: {\n      lineStyle: {\n        color: contrastColor\n      },\n      crossStyle: {\n        color: contrastColor\n      },\n      label: {\n        color: '#000'\n      }\n    }\n  },\n  legend: {\n    textStyle: {\n      color: contrastColor\n    }\n  },\n  textStyle: {\n    color: contrastColor\n  },\n  title: {\n    textStyle: {\n      color: contrastColor\n    }\n  },\n  toolbox: {\n    iconStyle: {\n      normal: {\n        borderColor: contrastColor\n      }\n    }\n  },\n  dataZoom: {\n    textStyle: {\n      color: contrastColor\n    }\n  },\n  visualMap: {\n    textStyle: {\n      color: contrastColor\n    }\n  },\n  timeline: {\n    lineStyle: {\n      color: contrastColor\n    },\n    itemStyle: {\n      normal: {\n        color: colorPalette[1]\n      }\n    },\n    label: {\n      normal: {\n        textStyle: {\n          color: contrastColor\n        }\n      }\n    },\n    controlStyle: {\n      normal: {\n        color: contrastColor,\n        borderColor: contrastColor\n      }\n    }\n  },\n  timeAxis: axisCommon(),\n  logAxis: axisCommon(),\n  valueAxis: axisCommon(),\n  categoryAxis: axisCommon(),\n  line: {\n    symbol: 'circle'\n  },\n  graph: {\n    color: colorPalette\n  },\n  gauge: {\n    title: {\n      textStyle: {\n        color: contrastColor\n      }\n    }\n  },\n  candlestick: {\n    itemStyle: {\n      normal: {\n        color: '#FD1050',\n        color0: '#0CF49B',\n        borderColor: '#FD1050',\n        borderColor0: '#0CF49B'\n      }\n    }\n  }\n};\ntheme.categoryAxis.splitLine.show = false;\nvar _default = theme;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar assert = _util.assert;\nvar isArray = _util.isArray;\n\nvar _config = require(\"../config\");\n\nvar __DEV__ = _config.__DEV__;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {Object} define\n * @return See the return of `createTask`.\n */\nfunction createTask(define) {\n  return new Task(define);\n}\n/**\n * @constructor\n * @param {Object} define\n * @param {Function} define.reset Custom reset\n * @param {Function} [define.plan] Returns 'reset' indicate reset immediately.\n * @param {Function} [define.count] count is used to determin data task.\n * @param {Function} [define.onDirty] count is used to determin data task.\n */\n\n\nfunction Task(define) {\n  define = define || {};\n  this._reset = define.reset;\n  this._plan = define.plan;\n  this._count = define.count;\n  this._onDirty = define.onDirty;\n  this._dirty = true; // Context must be specified implicitly, to\n  // avoid miss update context when model changed.\n\n  this.context;\n}\n\nvar taskProto = Task.prototype;\n/**\n * @param {Object} performArgs\n * @param {number} [performArgs.step] Specified step.\n * @param {number} [performArgs.skip] Skip customer perform call.\n * @param {number} [performArgs.modBy] Sampling window size.\n * @param {number} [performArgs.modDataCount] Sampling count.\n */\n\ntaskProto.perform = function (performArgs) {\n  var upTask = this._upstream;\n  var skip = performArgs && performArgs.skip; // TODO some refactor.\n  // Pull data. Must pull data each time, because context.data\n  // may be updated by Series.setData.\n\n  if (this._dirty && upTask) {\n    var context = this.context;\n    context.data = context.outputData = upTask.context.outputData;\n  }\n\n  if (this.__pipeline) {\n    this.__pipeline.currentTask = this;\n  }\n\n  var planResult;\n\n  if (this._plan && !skip) {\n    planResult = this._plan(this.context);\n  } // Support sharding by mod, which changes the render sequence and makes the rendered graphic\n  // elements uniformed distributed when progress, especially when moving or zooming.\n\n\n  var lastModBy = normalizeModBy(this._modBy);\n  var lastModDataCount = this._modDataCount || 0;\n  var modBy = normalizeModBy(performArgs && performArgs.modBy);\n  var modDataCount = performArgs && performArgs.modDataCount || 0;\n\n  if (lastModBy !== modBy || lastModDataCount !== modDataCount) {\n    planResult = 'reset';\n  }\n\n  function normalizeModBy(val) {\n    !(val >= 1) && (val = 1); // jshint ignore:line\n\n    return val;\n  }\n\n  var forceFirstProgress;\n\n  if (this._dirty || planResult === 'reset') {\n    this._dirty = false;\n    forceFirstProgress = reset(this, skip);\n  }\n\n  this._modBy = modBy;\n  this._modDataCount = modDataCount;\n  var step = performArgs && performArgs.step;\n\n  if (upTask) {\n    this._dueEnd = upTask._outputDueEnd;\n  } // DataTask or overallTask\n  else {\n      this._dueEnd = this._count ? this._count(this.context) : Infinity;\n    } // Note: Stubs, that its host overall task let it has progress, has progress.\n  // If no progress, pass index from upstream to downstream each time plan called.\n\n\n  if (this._progress) {\n    var start = this._dueIndex;\n    var end = Math.min(step != null ? this._dueIndex + step : Infinity, this._dueEnd);\n\n    if (!skip && (forceFirstProgress || start < end)) {\n      var progress = this._progress;\n\n      if (isArray(progress)) {\n        for (var i = 0; i < progress.length; i++) {\n          doProgress(this, progress[i], start, end, modBy, modDataCount);\n        }\n      } else {\n        doProgress(this, progress, start, end, modBy, modDataCount);\n      }\n    }\n\n    this._dueIndex = end; // If no `outputDueEnd`, assume that output data and\n    // input data is the same, so use `dueIndex` as `outputDueEnd`.\n\n    var outputDueEnd = this._settedOutputEnd != null ? this._settedOutputEnd : end;\n    this._outputDueEnd = outputDueEnd;\n  } else {\n    // (1) Some overall task has no progress.\n    // (2) Stubs, that its host overall task do not let it has progress, has no progress.\n    // This should always be performed so it can be passed to downstream.\n    this._dueIndex = this._outputDueEnd = this._settedOutputEnd != null ? this._settedOutputEnd : this._dueEnd;\n  }\n\n  return this.unfinished();\n};\n\nvar iterator = function () {\n  var end;\n  var current;\n  var modBy;\n  var modDataCount;\n  var winCount;\n  var it = {\n    reset: function (s, e, sStep, sCount) {\n      current = s;\n      end = e;\n      modBy = sStep;\n      modDataCount = sCount;\n      winCount = Math.ceil(modDataCount / modBy);\n      it.next = modBy > 1 && modDataCount > 0 ? modNext : sequentialNext;\n    }\n  };\n  return it;\n\n  function sequentialNext() {\n    return current < end ? current++ : null;\n  }\n\n  function modNext() {\n    var dataIndex = current % winCount * modBy + Math.ceil(current / winCount);\n    var result = current >= end ? null : dataIndex < modDataCount ? dataIndex // If modDataCount is smaller than data.count() (consider `appendData` case),\n    // Use normal linear rendering mode.\n    : current;\n    current++;\n    return result;\n  }\n}();\n\ntaskProto.dirty = function () {\n  this._dirty = true;\n  this._onDirty && this._onDirty(this.context);\n};\n\nfunction doProgress(taskIns, progress, start, end, modBy, modDataCount) {\n  iterator.reset(start, end, modBy, modDataCount);\n  taskIns._callingProgress = progress;\n\n  taskIns._callingProgress({\n    start: start,\n    end: end,\n    count: end - start,\n    next: iterator.next\n  }, taskIns.context);\n}\n\nfunction reset(taskIns, skip) {\n  taskIns._dueIndex = taskIns._outputDueEnd = taskIns._dueEnd = 0;\n  taskIns._settedOutputEnd = null;\n  var progress;\n  var forceFirstProgress;\n\n  if (!skip && taskIns._reset) {\n    progress = taskIns._reset(taskIns.context);\n\n    if (progress && progress.progress) {\n      forceFirstProgress = progress.forceFirstProgress;\n      progress = progress.progress;\n    } // To simplify no progress checking, array must has item.\n\n\n    if (isArray(progress) && !progress.length) {\n      progress = null;\n    }\n  }\n\n  taskIns._progress = progress;\n  taskIns._modBy = taskIns._modDataCount = null;\n  var downstream = taskIns._downstream;\n  downstream && downstream.dirty();\n  return forceFirstProgress;\n}\n/**\n * @return {boolean}\n */\n\n\ntaskProto.unfinished = function () {\n  return this._progress && this._dueIndex < this._dueEnd;\n};\n/**\n * @param {Object} downTask The downstream task.\n * @return {Object} The downstream task.\n */\n\n\ntaskProto.pipe = function (downTask) {\n  // If already downstream, do not dirty downTask.\n  if (this._downstream !== downTask || this._dirty) {\n    this._downstream = downTask;\n    downTask._upstream = this;\n    downTask.dirty();\n  }\n};\n\ntaskProto.dispose = function () {\n  if (this._disposed) {\n    return;\n  }\n\n  this._upstream && (this._upstream._downstream = null);\n  this._downstream && (this._downstream._upstream = null);\n  this._dirty = false;\n  this._disposed = true;\n};\n\ntaskProto.getUpstream = function () {\n  return this._upstream;\n};\n\ntaskProto.getDownstream = function () {\n  return this._downstream;\n};\n\ntaskProto.setOutputEnd = function (end) {\n  // This only happend in dataTask, dataZoom, map, currently.\n  // where dataZoom do not set end each time, but only set\n  // when reset. So we should record the setted end, in case\n  // that the stub of dataZoom perform again and earse the\n  // setted end by upstream.\n  this._outputDueEnd = this._settedOutputEnd = end;\n}; ///////////////////////////////////////////////////////////\n// For stream debug (Should be commented out after used!)\n// Usage: printTask(this, 'begin');\n// Usage: printTask(this, null, {someExtraProp});\n// function printTask(task, prefix, extra) {\n//     window.ecTaskUID == null && (window.ecTaskUID = 0);\n//     task.uidDebug == null && (task.uidDebug = `task_${window.ecTaskUID++}`);\n//     task.agent && task.agent.uidDebug == null && (task.agent.uidDebug = `task_${window.ecTaskUID++}`);\n//     var props = [];\n//     if (task.__pipeline) {\n//         var val = `${task.__idxInPipeline}/${task.__pipeline.tail.__idxInPipeline} ${task.agent ? '(stub)' : ''}`;\n//         props.push({text: 'idx', value: val});\n//     } else {\n//         var stubCount = 0;\n//         task.agentStubMap.each(() => stubCount++);\n//         props.push({text: 'idx', value: `overall (stubs: ${stubCount})`});\n//     }\n//     props.push({text: 'uid', value: task.uidDebug});\n//     if (task.__pipeline) {\n//         props.push({text: 'pid', value: task.__pipeline.id});\n//         task.agent && props.push(\n//             {text: 'stubFor', value: task.agent.uidDebug}\n//         );\n//     }\n//     props.push(\n//         {text: 'dirty', value: task._dirty},\n//         {text: 'dueIndex', value: task._dueIndex},\n//         {text: 'dueEnd', value: task._dueEnd},\n//         {text: 'outputDueEnd', value: task._outputDueEnd}\n//     );\n//     if (extra) {\n//         Object.keys(extra).forEach(key => {\n//             props.push({text: key, value: extra[key]});\n//         });\n//     }\n//     var args = ['color: blue'];\n//     var msg = `%c[${prefix || 'T'}] %c` + props.map(item => (\n//         args.push('color: black', 'color: red'),\n//         `${item.text}: %c${item.value}`\n//     )).join('%c, ');\n//     console.log.apply(console, [msg].concat(args));\n//     // console.log(this);\n// }\n\n\nexports.createTask = createTask;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\nvar _number = require(\"./number\");\n\nvar parsePercent = _number.parsePercent;\n\nvar formatUtil = require(\"./format\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Layout helpers for each component positioning\nvar each = zrUtil.each;\n/**\n * @public\n */\n\nvar LOCATION_PARAMS = ['left', 'right', 'top', 'bottom', 'width', 'height'];\n/**\n * @public\n */\n\nvar HV_NAMES = [['width', 'left', 'right'], ['height', 'top', 'bottom']];\n\nfunction boxLayout(orient, group, gap, maxWidth, maxHeight) {\n  var x = 0;\n  var y = 0;\n\n  if (maxWidth == null) {\n    maxWidth = Infinity;\n  }\n\n  if (maxHeight == null) {\n    maxHeight = Infinity;\n  }\n\n  var currentLineMaxSize = 0;\n  group.eachChild(function (child, idx) {\n    var position = child.position;\n    var rect = child.getBoundingRect();\n    var nextChild = group.childAt(idx + 1);\n    var nextChildRect = nextChild && nextChild.getBoundingRect();\n    var nextX;\n    var nextY;\n\n    if (orient === 'horizontal') {\n      var moveX = rect.width + (nextChildRect ? -nextChildRect.x + rect.x : 0);\n      nextX = x + moveX; // Wrap when width exceeds maxWidth or meet a `newline` group\n      // FIXME compare before adding gap?\n\n      if (nextX > maxWidth || child.newline) {\n        x = 0;\n        nextX = moveX;\n        y += currentLineMaxSize + gap;\n        currentLineMaxSize = rect.height;\n      } else {\n        // FIXME: consider rect.y is not `0`?\n        currentLineMaxSize = Math.max(currentLineMaxSize, rect.height);\n      }\n    } else {\n      var moveY = rect.height + (nextChildRect ? -nextChildRect.y + rect.y : 0);\n      nextY = y + moveY; // Wrap when width exceeds maxHeight or meet a `newline` group\n\n      if (nextY > maxHeight || child.newline) {\n        x += currentLineMaxSize + gap;\n        y = 0;\n        nextY = moveY;\n        currentLineMaxSize = rect.width;\n      } else {\n        currentLineMaxSize = Math.max(currentLineMaxSize, rect.width);\n      }\n    }\n\n    if (child.newline) {\n      return;\n    }\n\n    position[0] = x;\n    position[1] = y;\n    orient === 'horizontal' ? x = nextX + gap : y = nextY + gap;\n  });\n}\n/**\n * VBox or HBox layouting\n * @param {string} orient\n * @param {module:zrender/container/Group} group\n * @param {number} gap\n * @param {number} [width=Infinity]\n * @param {number} [height=Infinity]\n */\n\n\nvar box = boxLayout;\n/**\n * VBox layouting\n * @param {module:zrender/container/Group} group\n * @param {number} gap\n * @param {number} [width=Infinity]\n * @param {number} [height=Infinity]\n */\n\nvar vbox = zrUtil.curry(boxLayout, 'vertical');\n/**\n * HBox layouting\n * @param {module:zrender/container/Group} group\n * @param {number} gap\n * @param {number} [width=Infinity]\n * @param {number} [height=Infinity]\n */\n\nvar hbox = zrUtil.curry(boxLayout, 'horizontal');\n/**\n * If x or x2 is not specified or 'center' 'left' 'right',\n * the width would be as long as possible.\n * If y or y2 is not specified or 'middle' 'top' 'bottom',\n * the height would be as long as possible.\n *\n * @param {Object} positionInfo\n * @param {number|string} [positionInfo.x]\n * @param {number|string} [positionInfo.y]\n * @param {number|string} [positionInfo.x2]\n * @param {number|string} [positionInfo.y2]\n * @param {Object} containerRect {width, height}\n * @param {string|number} margin\n * @return {Object} {width, height}\n */\n\nfunction getAvailableSize(positionInfo, containerRect, margin) {\n  var containerWidth = containerRect.width;\n  var containerHeight = containerRect.height;\n  var x = parsePercent(positionInfo.x, containerWidth);\n  var y = parsePercent(positionInfo.y, containerHeight);\n  var x2 = parsePercent(positionInfo.x2, containerWidth);\n  var y2 = parsePercent(positionInfo.y2, containerHeight);\n  (isNaN(x) || isNaN(parseFloat(positionInfo.x))) && (x = 0);\n  (isNaN(x2) || isNaN(parseFloat(positionInfo.x2))) && (x2 = containerWidth);\n  (isNaN(y) || isNaN(parseFloat(positionInfo.y))) && (y = 0);\n  (isNaN(y2) || isNaN(parseFloat(positionInfo.y2))) && (y2 = containerHeight);\n  margin = formatUtil.normalizeCssArray(margin || 0);\n  return {\n    width: Math.max(x2 - x - margin[1] - margin[3], 0),\n    height: Math.max(y2 - y - margin[0] - margin[2], 0)\n  };\n}\n/**\n * Parse position info.\n *\n * @param {Object} positionInfo\n * @param {number|string} [positionInfo.left]\n * @param {number|string} [positionInfo.top]\n * @param {number|string} [positionInfo.right]\n * @param {number|string} [positionInfo.bottom]\n * @param {number|string} [positionInfo.width]\n * @param {number|string} [positionInfo.height]\n * @param {number|string} [positionInfo.aspect] Aspect is width / height\n * @param {Object} containerRect\n * @param {string|number} [margin]\n *\n * @return {module:zrender/core/BoundingRect}\n */\n\n\nfunction getLayoutRect(positionInfo, containerRect, margin) {\n  margin = formatUtil.normalizeCssArray(margin || 0);\n  var containerWidth = containerRect.width;\n  var containerHeight = containerRect.height;\n  var left = parsePercent(positionInfo.left, containerWidth);\n  var top = parsePercent(positionInfo.top, containerHeight);\n  var right = parsePercent(positionInfo.right, containerWidth);\n  var bottom = parsePercent(positionInfo.bottom, containerHeight);\n  var width = parsePercent(positionInfo.width, containerWidth);\n  var height = parsePercent(positionInfo.height, containerHeight);\n  var verticalMargin = margin[2] + margin[0];\n  var horizontalMargin = margin[1] + margin[3];\n  var aspect = positionInfo.aspect; // If width is not specified, calculate width from left and right\n\n  if (isNaN(width)) {\n    width = containerWidth - right - horizontalMargin - left;\n  }\n\n  if (isNaN(height)) {\n    height = containerHeight - bottom - verticalMargin - top;\n  }\n\n  if (aspect != null) {\n    // If width and height are not given\n    // 1. Graph should not exceeds the container\n    // 2. Aspect must be keeped\n    // 3. Graph should take the space as more as possible\n    // FIXME\n    // Margin is not considered, because there is no case that both\n    // using margin and aspect so far.\n    if (isNaN(width) && isNaN(height)) {\n      if (aspect > containerWidth / containerHeight) {\n        width = containerWidth * 0.8;\n      } else {\n        height = containerHeight * 0.8;\n      }\n    } // Calculate width or height with given aspect\n\n\n    if (isNaN(width)) {\n      width = aspect * height;\n    }\n\n    if (isNaN(height)) {\n      height = width / aspect;\n    }\n  } // If left is not specified, calculate left from right and width\n\n\n  if (isNaN(left)) {\n    left = containerWidth - right - width - horizontalMargin;\n  }\n\n  if (isNaN(top)) {\n    top = containerHeight - bottom - height - verticalMargin;\n  } // Align left and top\n\n\n  switch (positionInfo.left || positionInfo.right) {\n    case 'center':\n      left = containerWidth / 2 - width / 2 - margin[3];\n      break;\n\n    case 'right':\n      left = containerWidth - width - horizontalMargin;\n      break;\n  }\n\n  switch (positionInfo.top || positionInfo.bottom) {\n    case 'middle':\n    case 'center':\n      top = containerHeight / 2 - height / 2 - margin[0];\n      break;\n\n    case 'bottom':\n      top = containerHeight - height - verticalMargin;\n      break;\n  } // If something is wrong and left, top, width, height are calculated as NaN\n\n\n  left = left || 0;\n  top = top || 0;\n\n  if (isNaN(width)) {\n    // Width may be NaN if only one value is given except width\n    width = containerWidth - horizontalMargin - left - (right || 0);\n  }\n\n  if (isNaN(height)) {\n    // Height may be NaN if only one value is given except height\n    height = containerHeight - verticalMargin - top - (bottom || 0);\n  }\n\n  var rect = new BoundingRect(left + margin[3], top + margin[0], width, height);\n  rect.margin = margin;\n  return rect;\n}\n/**\n * Position a zr element in viewport\n *  Group position is specified by either\n *  {left, top}, {right, bottom}\n *  If all properties exists, right and bottom will be igonred.\n *\n * Logic:\n *     1. Scale (against origin point in parent coord)\n *     2. Rotate (against origin point in parent coord)\n *     3. Traslate (with el.position by this method)\n * So this method only fixes the last step 'Traslate', which does not affect\n * scaling and rotating.\n *\n * If be called repeatly with the same input el, the same result will be gotten.\n *\n * @param {module:zrender/Element} el Should have `getBoundingRect` method.\n * @param {Object} positionInfo\n * @param {number|string} [positionInfo.left]\n * @param {number|string} [positionInfo.top]\n * @param {number|string} [positionInfo.right]\n * @param {number|string} [positionInfo.bottom]\n * @param {number|string} [positionInfo.width] Only for opt.boundingModel: 'raw'\n * @param {number|string} [positionInfo.height] Only for opt.boundingModel: 'raw'\n * @param {Object} containerRect\n * @param {string|number} margin\n * @param {Object} [opt]\n * @param {Array.<number>} [opt.hv=[1,1]] Only horizontal or only vertical.\n * @param {Array.<number>} [opt.boundingMode='all']\n *        Specify how to calculate boundingRect when locating.\n *        'all': Position the boundingRect that is transformed and uioned\n *               both itself and its descendants.\n *               This mode simplies confine the elements in the bounding\n *               of their container (e.g., using 'right: 0').\n *        'raw': Position the boundingRect that is not transformed and only itself.\n *               This mode is useful when you want a element can overflow its\n *               container. (Consider a rotated circle needs to be located in a corner.)\n *               In this mode positionInfo.width/height can only be number.\n */\n\n\nfunction positionElement(el, positionInfo, containerRect, margin, opt) {\n  var h = !opt || !opt.hv || opt.hv[0];\n  var v = !opt || !opt.hv || opt.hv[1];\n  var boundingMode = opt && opt.boundingMode || 'all';\n\n  if (!h && !v) {\n    return;\n  }\n\n  var rect;\n\n  if (boundingMode === 'raw') {\n    rect = el.type === 'group' ? new BoundingRect(0, 0, +positionInfo.width || 0, +positionInfo.height || 0) : el.getBoundingRect();\n  } else {\n    rect = el.getBoundingRect();\n\n    if (el.needLocalTransform()) {\n      var transform = el.getLocalTransform(); // Notice: raw rect may be inner object of el,\n      // which should not be modified.\n\n      rect = rect.clone();\n      rect.applyTransform(transform);\n    }\n  } // The real width and height can not be specified but calculated by the given el.\n\n\n  positionInfo = getLayoutRect(zrUtil.defaults({\n    width: rect.width,\n    height: rect.height\n  }, positionInfo), containerRect, margin); // Because 'tranlate' is the last step in transform\n  // (see zrender/core/Transformable#getLocalTransform),\n  // we can just only modify el.position to get final result.\n\n  var elPos = el.position;\n  var dx = h ? positionInfo.x - rect.x : 0;\n  var dy = v ? positionInfo.y - rect.y : 0;\n  el.attr('position', boundingMode === 'raw' ? [dx, dy] : [elPos[0] + dx, elPos[1] + dy]);\n}\n/**\n * @param {Object} option Contains some of the properties in HV_NAMES.\n * @param {number} hvIdx 0: horizontal; 1: vertical.\n */\n\n\nfunction sizeCalculable(option, hvIdx) {\n  return option[HV_NAMES[hvIdx][0]] != null || option[HV_NAMES[hvIdx][1]] != null && option[HV_NAMES[hvIdx][2]] != null;\n}\n/**\n * Consider Case:\n * When defulat option has {left: 0, width: 100}, and we set {right: 0}\n * through setOption or media query, using normal zrUtil.merge will cause\n * {right: 0} does not take effect.\n *\n * @example\n * ComponentModel.extend({\n *     init: function () {\n *         ...\n *         var inputPositionParams = layout.getLayoutParams(option);\n *         this.mergeOption(inputPositionParams);\n *     },\n *     mergeOption: function (newOption) {\n *         newOption && zrUtil.merge(thisOption, newOption, true);\n *         layout.mergeLayoutParam(thisOption, newOption);\n *     }\n * });\n *\n * @param {Object} targetOption\n * @param {Object} newOption\n * @param {Object|string} [opt]\n * @param {boolean|Array.<boolean>} [opt.ignoreSize=false] Used for the components\n *  that width (or height) should not be calculated by left and right (or top and bottom).\n */\n\n\nfunction mergeLayoutParam(targetOption, newOption, opt) {\n  !zrUtil.isObject(opt) && (opt = {});\n  var ignoreSize = opt.ignoreSize;\n  !zrUtil.isArray(ignoreSize) && (ignoreSize = [ignoreSize, ignoreSize]);\n  var hResult = merge(HV_NAMES[0], 0);\n  var vResult = merge(HV_NAMES[1], 1);\n  copy(HV_NAMES[0], targetOption, hResult);\n  copy(HV_NAMES[1], targetOption, vResult);\n\n  function merge(names, hvIdx) {\n    var newParams = {};\n    var newValueCount = 0;\n    var merged = {};\n    var mergedValueCount = 0;\n    var enoughParamNumber = 2;\n    each(names, function (name) {\n      merged[name] = targetOption[name];\n    });\n    each(names, function (name) {\n      // Consider case: newOption.width is null, which is\n      // set by user for removing width setting.\n      hasProp(newOption, name) && (newParams[name] = merged[name] = newOption[name]);\n      hasValue(newParams, name) && newValueCount++;\n      hasValue(merged, name) && mergedValueCount++;\n    });\n\n    if (ignoreSize[hvIdx]) {\n      // Only one of left/right is premitted to exist.\n      if (hasValue(newOption, names[1])) {\n        merged[names[2]] = null;\n      } else if (hasValue(newOption, names[2])) {\n        merged[names[1]] = null;\n      }\n\n      return merged;\n    } // Case: newOption: {width: ..., right: ...},\n    // or targetOption: {right: ...} and newOption: {width: ...},\n    // There is no conflict when merged only has params count\n    // little than enoughParamNumber.\n\n\n    if (mergedValueCount === enoughParamNumber || !newValueCount) {\n      return merged;\n    } // Case: newOption: {width: ..., right: ...},\n    // Than we can make sure user only want those two, and ignore\n    // all origin params in targetOption.\n    else if (newValueCount >= enoughParamNumber) {\n        return newParams;\n      } else {\n        // Chose another param from targetOption by priority.\n        for (var i = 0; i < names.length; i++) {\n          var name = names[i];\n\n          if (!hasProp(newParams, name) && hasProp(targetOption, name)) {\n            newParams[name] = targetOption[name];\n            break;\n          }\n        }\n\n        return newParams;\n      }\n  }\n\n  function hasProp(obj, name) {\n    return obj.hasOwnProperty(name);\n  }\n\n  function hasValue(obj, name) {\n    return obj[name] != null && obj[name] !== 'auto';\n  }\n\n  function copy(names, target, source) {\n    each(names, function (name) {\n      target[name] = source[name];\n    });\n  }\n}\n/**\n * Retrieve 'left', 'right', 'top', 'bottom', 'width', 'height' from object.\n * @param {Object} source\n * @return {Object} Result contains those props.\n */\n\n\nfunction getLayoutParams(source) {\n  return copyLayoutParams({}, source);\n}\n/**\n * Retrieve 'left', 'right', 'top', 'bottom', 'width', 'height' from object.\n * @param {Object} source\n * @return {Object} Result contains those props.\n */\n\n\nfunction copyLayoutParams(target, source) {\n  source && target && each(LOCATION_PARAMS, function (name) {\n    source.hasOwnProperty(name) && (target[name] = source[name]);\n  });\n  return target;\n}\n\nexports.LOCATION_PARAMS = LOCATION_PARAMS;\nexports.HV_NAMES = HV_NAMES;\nexports.box = box;\nexports.vbox = vbox;\nexports.hbox = hbox;\nexports.getAvailableSize = getAvailableSize;\nexports.getLayoutRect = getLayoutRect;\nexports.positionElement = positionElement;\nexports.sizeCalculable = sizeCalculable;\nexports.mergeLayoutParam = mergeLayoutParam;\nexports.getLayoutParams = getLayoutParams;\nexports.copyLayoutParams = copyLayoutParams;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar Gradient = require(\"zrender/lib/graphic/Gradient\");\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar isFunction = _util.isFunction;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _default = {\n  createOnAllSeries: true,\n  performRawSeries: true,\n  reset: function (seriesModel, ecModel) {\n    var data = seriesModel.getData();\n    var colorAccessPath = (seriesModel.visualColorAccessPath || 'itemStyle.color').split('.'); // Set in itemStyle\n\n    var color = seriesModel.get(colorAccessPath);\n    var colorCallback = isFunction(color) && !(color instanceof Gradient) ? color : null; // Default color\n\n    if (!color || colorCallback) {\n      color = seriesModel.getColorFromPalette( // TODO series count changed.\n      seriesModel.name, null, ecModel.getSeriesCount());\n    }\n\n    data.setVisual('color', color);\n    var borderColorAccessPath = (seriesModel.visualBorderColorAccessPath || 'itemStyle.borderColor').split('.');\n    var borderColor = seriesModel.get(borderColorAccessPath);\n    data.setVisual('borderColor', borderColor); // Only visible series has each data be visual encoded\n\n    if (!ecModel.isSeriesFiltered(seriesModel)) {\n      if (colorCallback) {\n        data.each(function (idx) {\n          data.setItemVisual(idx, 'color', colorCallback(seriesModel.getDataParams(idx)));\n        });\n      } // itemStyle in each data item\n\n\n      var dataEach = function (data, idx) {\n        var itemModel = data.getItemModel(idx);\n        var color = itemModel.get(colorAccessPath, true);\n        var borderColor = itemModel.get(borderColorAccessPath, true);\n\n        if (color != null) {\n          data.setItemVisual(idx, 'color', color);\n        }\n\n        if (borderColor != null) {\n          data.setItemVisual(idx, 'borderColor', borderColor);\n        }\n      };\n\n      return {\n        dataEach: data.hasItemOption ? dataEach : null\n      };\n    }\n  }\n};\nmodule.exports = _default;"],"sourceRoot":""}