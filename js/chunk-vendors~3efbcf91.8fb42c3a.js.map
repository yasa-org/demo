{"version":3,"sources":["webpack:///./node_modules/monaco-editor/esm/vs/editor/browser/widget/diffReview.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/browser/widget/inlineDiffMargin.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditorWidget.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/browser/widget/codeEditorWidget.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/browser/widget/diffNavigator.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/browser/widget/embeddedCodeEditorWidget.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","this","constructor","prototype","create","DIFF_LINES_PADDING","DiffEntry","originalLineStart","originalLineEnd","modifiedLineStart","modifiedLineEnd","getType","Diff","entries","_super","DiffReview","diffEditor","_this","call","_width","_diffEditor","_isVisible","shadow","document","createElement","setClassName","actionBarContainer","_actionBar","_register","domNode","push","nls","hide","Promise","resolve","label","icon","_content","scrollbar","appendChild","getDomNode","onDidUpdateDiff","_diffs","_compute","_render","getModifiedEditor","onDidChangeCursorPosition","getOriginalEditor","onDidFocusEditorWidget","dom","e","preventDefault","row","target","_goToRow","equals","_getNextRow","_getPrevRow","accept","_currentDiff","prev","index","currentIndex","i","len","length","_findDiffIndex","getPosition","setPosition","doLayout","next","jumpToLineNumber","current","_getCurrentFocusedRow","lineNumber","parseInt","getAttribute","isNaN","revealPosition","focus","previousElementSibling","_getFirstRow","nextElementSibling","querySelector","result","activeElement","test","className","tabIndex","scanDomNode","isVisible","layout","top","width","height","setTop","setWidth","setHeight","setAttribute","setDisplay","lineChanges","getLineChanges","originalModel","getModel","modifiedModel","_mergeAdjacent","getLineCount","originalLineCount","modifiedLineCount","diffs","diffsLength","lineChange","originalStart","originalStartLineNumber","originalEnd","originalEndLineNumber","modifiedStart","modifiedStartLineNumber","modifiedEnd","modifiedEndLineNumber","r_1","rLength_1","originalEqualAbove","modifiedEqualAbove","minOriginal","minModified","prevLineChange","fromOriginal","fromModified","delta","originalEqualBelow","modifiedEqualBelow","maxOriginal","maxModified","nextLineChange","toOriginal","toModified","curr","r","rLength","thisDiff","currLast","thisFirst","concat","slice","pos","diff","lastModifiedLine","originalOptions","getOptions","modifiedOptions","originalModelOpts","modifiedModelOpts","diffIndex","container","applyFontInfoSlow","get","minOriginalLine","maxOriginalLine","minModifiedLine","maxModifiedLine","diffEntry","header","cell","originalChangedLinesCnt","modifiedChangedLinesCnt","createTextNode","String","getAriaLines","lines","originalChangedLinesCntAria","modifiedChangedLinesCntAria","key","comment","modLine","_renderSection","dest","type","rowClassName","lineNumbersExtraClassName","spacerClassName","cnt","Math","max","originalLayoutInfo","originalLineNumbersWidth","glyphMarginWidth","lineNumbersWidth","modifiedLayoutInfo","modifiedLineNumbersWidth","originalLine","modifiedLine","style","minWidth","originalLineNumber","innerHTML","modifiedLineNumber","paddingRight","spacer","lineContent","insertAdjacentHTML","_renderLine","tabSize","getLineContent","ariaLabel","model","options","fontInfo","defaultMetadata","tokens","Uint32Array","lineTokens","isBasicASCII","mightContainNonBasicASCII","containsRTL","mightContainRTL","isMonospace","canUseHalfwidthRightwardsArrow","spaceWidth","middotWidth","OFF","html","theme","collector","lineNumbers","getColor","addRule","DiffReviewNext","id","alias","precondition","has","kbOpts","kbExpr","primary","weight","run","accessor","editor","findFocusedDiffEditor","diffReviewNext","DiffReviewPrev","diffReviewPrev","codeEditorService","diffEditors","listDiffEditors","hasWidgetFocus","__awaiter","thisArg","_arguments","P","generator","adopt","value","reject","fulfilled","step","rejected","done","then","apply","__generator","body","f","y","t","g","_","sent","trys","ops","verb","Symbol","iterator","n","v","op","TypeError","pop","InlineDiffMargin","_viewZoneId","_marginDomNode","_contextMenuService","_clipboardService","_visibility","zIndex","_diffActions","position","lineHeight","getOption","lineFeed","getEOL","right","visibility","actions","undefined","_a","writeText","originalContent","join","currentLineNumberOffset","copyLineAction","readOnly","column","getLineMaxColumn","executeEdits","range","text","showContextMenu","x","getAnchor","getActions","autoSelectFirstItem","pad","floor","posx","onMouseMove","viewZoneId","detail","_updateLightBulbPosition","event","browserEvent","onMouseDown","rightButton","posy","defineProperty","set","enumerable","configurable","marginDomNode","offset","lineNumberOffset","newTop","__decorate","decorators","desc","c","arguments","getOwnPropertyDescriptor","Reflect","decorate","__param","paramIndex","decorator","VisualEditorState","_zones","inlineDiffMargins","_zonesMap","_decorations","getForeignViewZones","allViewZones","filter","z","clean","changeViewZones","viewChangeAccessor","length_1","removeZone","deltaDecorations","overviewRuler","newDecorations","restoreScrollState","scrollState","capture","length_2","length_3","dispose","length_4","zones","viewZone","suppressMouseDown","zoneId","addZone","restore","decorations","setZones","overviewZones","DIFF_EDITOR_ID","DiffEditorWidget","domElement","clipboardService","editorWorkerService","contextKeyService","instantiationService","themeService","notificationService","contextMenuService","_editorProgressService","_onDidDispose","onDidDispose","_onDidUpdateDiff","_lastOriginalWarning","_lastModifiedWarning","_editorWorkerService","_codeEditorService","_contextKeyService","createScoped","createKey","_themeService","_notificationService","_state","_updatingDiffProgress","_domElement","_renderSideBySide","renderSideBySide","_maxComputationTime","maxComputationTime","_ignoreTrimWhitespace","ignoreTrimWhitespace","_renderIndicators","renderIndicators","_originalIsEditable","originalEditable","Boolean","_updateDecorationsRunner","_updateDecorations","_containerDomElement","_getClassName","getTheme","_overviewViewportDomElement","_overviewDomElement","modifiedEditor","delegateVerticalScrollbarMouseDown","_originalDomNode","_modifiedDomNode","_beginUpdateDecorationsTimeout","_currentlyChangingViewZones","_diffComputationToken","_originalEditorState","_modifiedEditorState","_isHandlingScrollEvent","_elementSizeObserver","_onDidContainerSizeChanged","automaticLayout","startObserving","_diffComputationResult","leftContextKeyService","leftServices","leftScopedInstantiationService","createChild","rightContextKeyService","rightServices","rightScopedInstantiationService","originalEditor","_createLeftHandSideEditor","_createRightHandSideEditor","_originalOverviewRuler","_modifiedOverviewRuler","_reviewPane","_enableSplitViewResizing","enableSplitViewResizing","_setStrategy","_createDataSource","onThemeChange","_strategy","applyColors","schedule","contributions","getDiffEditorContributions","_i","contributions_1","createInstance","ctor","err","addDiffEditor","_setState","newState","show","_recreateOverviewRulers","removeChild","hasModel","createOverviewRuler","_layoutOverviewRulers","_createInnerEditor","_adjustOptionsForLeftHandSide","onDidScrollChange","scrollTopChanged","scrollLeftChanged","scrollHeightChanged","setScrollPosition","scrollLeft","scrollTop","_layoutOverviewViewport","onDidChangeViewZones","_onViewZonesChanged","onDidChangeModelContent","_beginUpdateDecorationsSoon","_adjustOptionsForRightHandSide","onDidChangeConfiguration","hasChanged","onDidChangeModelOptions","removeDiffEditor","window","clearTimeout","_cleanViewZonesAndDecorations","fire","getId","getEditorType","editorCommon","IDiffEditor","changes","updateOptions","newOptions","renderSideBySideChanged","beginUpdateDecorations","_beginUpdateDecorations","setEnableSplitViewResizing","original","modified","setModel","Error","cancel","setScrollTop","getVisibleColumnFromPosition","revealLine","scrollType","revealLineInCenter","revealLineInCenterIfOutsideViewport","revealPositionInCenter","revealPositionInCenterIfOutsideViewport","getSelection","getSelections","setSelection","something","setSelections","ranges","revealLines","startLineNumber","endLineNumber","revealLinesInCenter","revealLinesInCenterIfOutsideViewport","revealRange","revealVerticalInCenter","revealHorizontal","revealRangeInCenter","revealRangeInCenterIfOutsideViewport","revealRangeAtTop","getSupportedActions","saveViewState","originalViewState","modifiedViewState","restoreViewState","s","diffEditorState","dimension","observe","hasTextFocus","trigger","source","handlerId","payload","changeDecorations","callback","_doLayout","_getReviewHeight","getHeight","reviewHeight","freeSpace","ENTIRE_DIFF_OVERVIEW_WIDTH","ONE_OVERVIEW_WIDTH","layoutInfo","getLayoutInfo","setLayout","setTimeout","UPDATE_DIFF_DECORATIONS_DELAY","_equals","a","toString","currentOriginalModel","currentModifiedModel","currentToken","canComputeDiff","uri","computeDiff","error","warn","foreignOriginal","getWhitespaces","foreignModified","diffDecorations","getEditorsDiffDecorations","_adjustOptionsForSubEditor","clonedOptions","objects","inDiffEditor","wordWrap","wordWrapMinified","vertical","folding","codeLens","fixedOverflowWidgets","minimap","enabled","isEditable","extraEditorClassName","revealHorizontalRightPadding","defaultValue","verticalHasArrows","getWidth","splitPoint","left","_computeOverviewViewport","getScrollTop","scrollHeight","getScrollHeight","computedAvailableSize","computedRepresentableSize","computedRatio","computedSliderSize","computedSliderPosition","getContainerDomNode","relayoutEditors","newStrategy","_getLineChangeAtOrBeforeLineNumber","startLineNumberExtractor","min","mid","midStart","midEnd","_getEquivalentLineForOriginalLineNumber","originalEquivalentLineNumber","modifiedEquivalentLineNumber","lineChangeOriginalLength","lineChangeModifiedLength","_getEquivalentLineForModifiedLineNumber","getDiffLineInformationForOriginal","equivalentLineNumber","getDiffLineInformationForModified","DiffEditorWidgetStyle","dataSource","_dataSource","_insertColor","_removeColor","newInsertColor","transparent","newRemoveColor","hasChanges","originalWhitespaces","modifiedWhitespaces","sort","afterLineNumber","_getViewZones","originalDecorations","_getOriginalEditorDecorations","modifiedDecorations","_getModifiedEditorDecorations","ForeignViewZonesIterator","_source","_index","advance","ViewZonesComputer","originalForeignVZ","originalLineHeight","modifiedForeignVZ","modifiedLineHeight","getViewZones","originalEndEquivalentLineNumber","modifiedEndEquivalentLineNumber","sortMyViewZones","addAndCombineIfPossible","destination","item","lastItem","heightInLines","length_5","stepOriginal","stepModified","viewZoneLineNumber","_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion","isChangeOrInsert","_produceOriginalFromDiff","isChangeOrDelete","_produceModifiedFromDiff","stepOriginalIndex","stepModifiedIndex","originalDelta","modifiedDelta","shouldNotShrink","_ensureDomNodes","map","createFakeLinesDiv","createDecoration","startColumn","endColumn","DECORATIONS","charDelete","register","charDeleteWholeLine","isWholeLine","charInsert","charInsertWholeLine","lineInsert","marginClassName","lineInsertWithSign","linesDecorationsClassName","lineDelete","lineDeleteWithSign","lineDeleteMargin","DiffEditorWidgetSideBySide","_disableSash","_sashRatio","_sashPosition","_startSashPosition","_sash","state","onDidStart","onSashDragStart","onDidChange","onSashDrag","onDidEnd","onSashDragEnd","onDidReset","onSashReset","newDisableSash","sashRatio","w","contentWidth","sashPosition","midPoint","MINIMUM_EDITOR_WIDTH","currentX","startX","getVerticalSashTop","sash","getVerticalSashLeft","getVerticalSashHeight","SideBySideViewZonesComputer","overviewZoneColor","length_6","charChanges","j","lengthJ","charChange","originalStartColumn","getLineFirstNonWhitespaceColumn","originalEndColumn","getLineLastNonWhitespaceColumn","length_7","modifiedStartColumn","modifiedEndColumn","DiffEditorWidgetInline","decorationsLeft","onDidLayoutChange","computer","length_8","length_9","InlineViewZonesComputer","modifiedEditorOptions","modifiedEditorTabSize","sb","marginHTML","lineDecorationsWidth","decorationsWidth","typicalHalfwidthCharacterWidth","maxCharsPerLine","_renderOriginalLine","build","minWidthInPx","count","getLineTokens","actualDecorations","appendASCIIString","output","absoluteOffsets","characterMapping","getAbsoluteOffsets","added","removed","addedOutline","removedOutline","border","EDITOR_ID","ModelData","viewModel","cursor","view","hasRealView","listenersToRemove","onBeforeDetached","CodeEditorWidget","codeEditorWidgetOptions","commandService","accessibilityService","_onDidChangeModelContent","_onDidChangeModelLanguage","onDidChangeModelLanguage","_onDidChangeModelLanguageConfiguration","onDidChangeModelLanguageConfiguration","_onDidChangeModelOptions","_onDidChangeModelDecorations","onDidChangeModelDecorations","_onDidChangeConfiguration","_onDidChangeModel","onDidChangeModel","_onDidChangeCursorPosition","_onDidChangeCursorSelection","onDidChangeCursorSelection","_onDidAttemptReadOnlyEdit","onDidAttemptReadOnlyEdit","_onDidLayoutChange","_editorTextFocus","BooleanEventEmitter","onDidFocusEditorText","onDidChangeToTrue","onDidBlurEditorText","onDidChangeToFalse","_editorWidgetFocus","onDidBlurEditorWidget","_onWillType","onWillType","_onDidType","onDidType","_onDidCompositionStart","onDidCompositionStart","_onDidCompositionEnd","onDidCompositionEnd","_onDidPaste","onDidPaste","_onMouseUp","onMouseUp","_onMouseDown","_onMouseDrag","onMouseDrag","_onMouseDrop","onMouseDrop","_onContextMenu","onContextMenu","_onMouseMove","_onMouseLeave","onMouseLeave","_onMouseWheel","onMouseWheel","_onKeyUp","onKeyUp","_onKeyDown","onKeyDown","_onDidContentSizeChange","onDidContentSizeChange","_onDidScrollChange","_onDidChangeViewZones","_id","_decorationTypeKeysToIds","_decorationTypeSubtypes","isSimpleWidget","_telemetryData","telemetryData","_configuration","_createConfiguration","_commandService","EditorContextKeysManager","EditorModeContext","_instantiationService","_modelData","_contributions","_actions","_focusTracker","CodeEditorWidgetFocusTracker","onChange","setValue","hasFocus","_contentWidgets","_overlayWidgets","isArray","getEditorContributions","contribution","getEditorActions","forEach","action","internalAction","invokeFunction","runEditorCommand","addCodeEditor","ICodeEditor","removeCodeEditor","keys","contributionId","_removeDecorationTypes","_postDetachModelCleanup","_detachModel","invokeWithinContext","fn","getRawOptions","getValue","preserveBOM","eolPreference","lineEnding","newValue","_model","detachedModel","_attachModel","oldModelUrl","newModelUrl","decorationType","subTypes","subType","_removeDecorationType","getVisibleRanges","viewLayout","_getVerticalOffsetForPosition","modelData","modelLineNumber","modelColumn","modelPosition","validatePosition","viewPosition","coordinatesConverter","convertModelPositionToViewPosition","getVerticalOffsetForLineNumber","getTopForLineNumber","getTopForPosition","setHiddenAreas","lift","rawPosition","visibleColumnFromColumn","isIPosition","selectionStartLineNumber","selectionStartColumn","positionLineNumber","positionColumn","_sendRevealRange","modelRange","verticalType","isIRange","validatedModelRange","validateRange","viewRange","convertModelRangeToViewRange","emitCursorRevealRange","_revealLine","revealType","_revealPosition","isSelection","isISelection","isRange","_setSelectionImpl","selection","sel","_revealLines","_revealRange","getContentWidth","getScrollWidth","getScrollLeft","getCurrentScrollLeft","getContentHeight","getCurrentScrollTop","setScrollLeft","newScrollLeft","setScrollPositionNow","newScrollTop","contributionsState","keys_1","cursorState","saveState","viewState","codeEditorState","restoreState","reducedState","reduceRestoreState","getContribution","isSupported","getAction","Type","Paste","_triggerEditorCommand","CompositionStart","CompositionEnd","startPosition","getStartPosition","endPosition","mode","command","getEditorCommand","_getCursors","pushUndoStop","pushStackElement","edits","endCursorState","cursorStateComputer","executeCommand","ExecuteCommand","executeCommands","commands","ExecuteCommands","getLineDecorations","oldDecorations","removeDecorations","decorationTypeKey","oldDecorationsIds","cssClassName","observeReferenceElement","render","isFocused","addContentWidget","widget","widgetData","console","layoutContentWidget","widgetId","removeContentWidget","addOverlayWidget","layoutOverlayWidget","removeOverlayWidget","change","getTargetAtClientPoint","clientX","clientY","getScrolledVisiblePosition","getOffsetForColumn","forceRedraw","setAriaOptions","applyFontInfo","getLanguageIdentifier","language","setIsDominatedByLongLines","isDominatedByLongLines","setMaxLineNumber","onBeforeAttached","onDidChangeDecorations","onDidChangeLanguage","onDidChangeLanguageConfiguration","onDidChangeContent","onDidChangeOptions","onWillDispose","onDidReachMaxCursorCount","MAX_CURSOR_COUNT","positions","selections","e1","secondaryPositions","reason","e2","secondarySelections","modelVersionId","oldSelections","oldModelVersionId","_createView","commandDelegate","executeEditorCommand","editorCommand","args","runCoreEditorCommand","paste","pasteOnNewLine","multicursorText","replacePreviousChar","replaceCharCnt","ReplacePreviousChar","compositionStart","compositionEnd","cut","Cut","viewOutgoingEvents","onDidScroll","onDidGainFocus","onDidLoseFocus","removeAllDecorationsWithOwnerId","removeDomNode","removeAttribute","removeDecorationType","_onDidChangeToTrue","_onDidChangeToFalse","_value","_editor","_editorSimpleInput","editorSimpleInput","bindTo","_editorFocus","_textInputFocus","textInputFocus","editorTextFocus","_editorTabMovesFocus","tabMovesFocus","_editorReadonly","_hasMultipleSelections","hasMultipleSelections","_hasNonEmptySelection","hasNonEmptySelection","_canUndo","canUndo","_canRedo","canRedo","_updateFromConfig","_updateFromSelection","_updateFromFocus","_updateFromModel","some","isEmpty","reset","_langId","languageId","_hasCompletionItemProvider","hasCompletionItemProvider","_hasCodeActionsProvider","hasCodeActionsProvider","_hasCodeLensProvider","hasCodeLensProvider","_hasDefinitionProvider","hasDefinitionProvider","_hasDeclarationProvider","hasDeclarationProvider","_hasImplementationProvider","hasImplementationProvider","_hasTypeDefinitionProvider","hasTypeDefinitionProvider","_hasHoverProvider","hasHoverProvider","_hasDocumentHighlightProvider","hasDocumentHighlightProvider","_hasDocumentSymbolProvider","hasDocumentSymbolProvider","_hasReferenceProvider","hasReferenceProvider","_hasRenameProvider","hasRenameProvider","_hasSignatureHelpProvider","hasSignatureHelpProvider","_hasDocumentFormattingProvider","hasDocumentFormattingProvider","_hasDocumentSelectionFormattingProvider","hasDocumentSelectionFormattingProvider","_hasMultipleDocumentFormattingProvider","hasMultipleDocumentFormattingProvider","_hasMultipleDocumentSelectionFormattingProvider","hasMultipleDocumentSelectionFormattingProvider","_isInWalkThrough","isInEmbeddedEditor","update","_update","bufferChangeEvents","all","scheme","walkThroughSnippet","_onChange","_hasFocus","_domFocusTracker","onDidFocus","onDidBlur","squigglyStart","encodeURIComponent","squigglyEnd","getSquigglySVGData","color","dotdotdotStart","dotdotdotEnd","getDotDotDotSVGData","errorBorderColor","errorForeground","warningBorderColor","warningForeground","infoBorderColor","infoForeground","hintBorderColor","hintForeground","unnecessaryForeground","rgba","unnecessaryBorder","deprecatedForeground","defaultOptions","followsCaret","ignoreCharChanges","alwaysRevealFirst","DiffNavigator","_onDidUpdate","_options","disposed","nextIdx","ignoreSelectionChange","revealFirst","_onDiffUpdated","_init","rhs","isBeforeOrEqual","_initIdx","fwd","found","_move","canNavigate","info","previous","EmbeddedCodeEditorWidget","parentEditor","_parentEditor","_overwriteOptions","_onParentConfigurationChanged","getParentEditor"],"mappings":"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","file":"js/chunk-vendors~3efbcf91.8fb42c3a.js","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport './media/diffReview.css';\r\nimport * as nls from '../../../nls.js';\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { createFastDomNode } from '../../../base/browser/fastDomNode.js';\r\nimport { ActionBar } from '../../../base/browser/ui/actionbar/actionbar.js';\r\nimport { DomScrollableElement } from '../../../base/browser/ui/scrollbar/scrollableElement.js';\r\nimport { Action } from '../../../base/common/actions.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport { Configuration } from '../config/configuration.js';\r\nimport { EditorAction, registerEditorAction } from '../editorExtensions.js';\r\nimport { ICodeEditorService } from '../services/codeEditorService.js';\r\nimport { EditorFontLigatures } from '../../common/config/editorOptions.js';\r\nimport { LineTokens } from '../../common/core/lineTokens.js';\r\nimport { Position } from '../../common/core/position.js';\r\nimport { editorLineNumbers } from '../../common/view/editorColorRegistry.js';\r\nimport { RenderLineInput, renderViewLine2 as renderViewLine } from '../../common/viewLayout/viewLineRenderer.js';\r\nimport { ViewLineRenderingData } from '../../common/viewModel/viewModel.js';\r\nimport { ContextKeyExpr } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { scrollbarShadow } from '../../../platform/theme/common/colorRegistry.js';\r\nimport { registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\r\nvar DIFF_LINES_PADDING = 3;\r\nvar DiffEntry = /** @class */ (function () {\r\n    function DiffEntry(originalLineStart, originalLineEnd, modifiedLineStart, modifiedLineEnd) {\r\n        this.originalLineStart = originalLineStart;\r\n        this.originalLineEnd = originalLineEnd;\r\n        this.modifiedLineStart = modifiedLineStart;\r\n        this.modifiedLineEnd = modifiedLineEnd;\r\n    }\r\n    DiffEntry.prototype.getType = function () {\r\n        if (this.originalLineStart === 0) {\r\n            return 1 /* Insert */;\r\n        }\r\n        if (this.modifiedLineStart === 0) {\r\n            return 2 /* Delete */;\r\n        }\r\n        return 0 /* Equal */;\r\n    };\r\n    return DiffEntry;\r\n}());\r\nvar Diff = /** @class */ (function () {\r\n    function Diff(entries) {\r\n        this.entries = entries;\r\n    }\r\n    return Diff;\r\n}());\r\nvar DiffReview = /** @class */ (function (_super) {\r\n    __extends(DiffReview, _super);\r\n    function DiffReview(diffEditor) {\r\n        var _this = _super.call(this) || this;\r\n        _this._width = 0;\r\n        _this._diffEditor = diffEditor;\r\n        _this._isVisible = false;\r\n        _this.shadow = createFastDomNode(document.createElement('div'));\r\n        _this.shadow.setClassName('diff-review-shadow');\r\n        _this.actionBarContainer = createFastDomNode(document.createElement('div'));\r\n        _this.actionBarContainer.setClassName('diff-review-actions');\r\n        _this._actionBar = _this._register(new ActionBar(_this.actionBarContainer.domNode));\r\n        _this._actionBar.push(new Action('diffreview.close', nls.localize('label.close', \"Close\"), 'close-diff-review', true, function () {\r\n            _this.hide();\r\n            return Promise.resolve(null);\r\n        }), { label: false, icon: true });\r\n        _this.domNode = createFastDomNode(document.createElement('div'));\r\n        _this.domNode.setClassName('diff-review monaco-editor-background');\r\n        _this._content = createFastDomNode(document.createElement('div'));\r\n        _this._content.setClassName('diff-review-content');\r\n        _this.scrollbar = _this._register(new DomScrollableElement(_this._content.domNode, {}));\r\n        _this.domNode.domNode.appendChild(_this.scrollbar.getDomNode());\r\n        _this._register(diffEditor.onDidUpdateDiff(function () {\r\n            if (!_this._isVisible) {\r\n                return;\r\n            }\r\n            _this._diffs = _this._compute();\r\n            _this._render();\r\n        }));\r\n        _this._register(diffEditor.getModifiedEditor().onDidChangeCursorPosition(function () {\r\n            if (!_this._isVisible) {\r\n                return;\r\n            }\r\n            _this._render();\r\n        }));\r\n        _this._register(diffEditor.getOriginalEditor().onDidFocusEditorWidget(function () {\r\n            if (_this._isVisible) {\r\n                _this.hide();\r\n            }\r\n        }));\r\n        _this._register(diffEditor.getModifiedEditor().onDidFocusEditorWidget(function () {\r\n            if (_this._isVisible) {\r\n                _this.hide();\r\n            }\r\n        }));\r\n        _this._register(dom.addStandardDisposableListener(_this.domNode.domNode, 'click', function (e) {\r\n            e.preventDefault();\r\n            var row = dom.findParentWithClass(e.target, 'diff-review-row');\r\n            if (row) {\r\n                _this._goToRow(row);\r\n            }\r\n        }));\r\n        _this._register(dom.addStandardDisposableListener(_this.domNode.domNode, 'keydown', function (e) {\r\n            if (e.equals(18 /* DownArrow */)\r\n                || e.equals(2048 /* CtrlCmd */ | 18 /* DownArrow */)\r\n                || e.equals(512 /* Alt */ | 18 /* DownArrow */)) {\r\n                e.preventDefault();\r\n                _this._goToRow(_this._getNextRow());\r\n            }\r\n            if (e.equals(16 /* UpArrow */)\r\n                || e.equals(2048 /* CtrlCmd */ | 16 /* UpArrow */)\r\n                || e.equals(512 /* Alt */ | 16 /* UpArrow */)) {\r\n                e.preventDefault();\r\n                _this._goToRow(_this._getPrevRow());\r\n            }\r\n            if (e.equals(9 /* Escape */)\r\n                || e.equals(2048 /* CtrlCmd */ | 9 /* Escape */)\r\n                || e.equals(512 /* Alt */ | 9 /* Escape */)\r\n                || e.equals(1024 /* Shift */ | 9 /* Escape */)) {\r\n                e.preventDefault();\r\n                _this.hide();\r\n            }\r\n            if (e.equals(10 /* Space */)\r\n                || e.equals(3 /* Enter */)) {\r\n                e.preventDefault();\r\n                _this.accept();\r\n            }\r\n        }));\r\n        _this._diffs = [];\r\n        _this._currentDiff = null;\r\n        return _this;\r\n    }\r\n    DiffReview.prototype.prev = function () {\r\n        var index = 0;\r\n        if (!this._isVisible) {\r\n            this._diffs = this._compute();\r\n        }\r\n        if (this._isVisible) {\r\n            var currentIndex = -1;\r\n            for (var i = 0, len = this._diffs.length; i < len; i++) {\r\n                if (this._diffs[i] === this._currentDiff) {\r\n                    currentIndex = i;\r\n                    break;\r\n                }\r\n            }\r\n            index = (this._diffs.length + currentIndex - 1);\r\n        }\r\n        else {\r\n            index = this._findDiffIndex(this._diffEditor.getPosition());\r\n        }\r\n        if (this._diffs.length === 0) {\r\n            // Nothing to do\r\n            return;\r\n        }\r\n        index = index % this._diffs.length;\r\n        this._diffEditor.setPosition(new Position(this._diffs[index].entries[0].modifiedLineStart, 1));\r\n        this._isVisible = true;\r\n        this._diffEditor.doLayout();\r\n        this._render();\r\n        this._goToRow(this._getNextRow());\r\n    };\r\n    DiffReview.prototype.next = function () {\r\n        var index = 0;\r\n        if (!this._isVisible) {\r\n            this._diffs = this._compute();\r\n        }\r\n        if (this._isVisible) {\r\n            var currentIndex = -1;\r\n            for (var i = 0, len = this._diffs.length; i < len; i++) {\r\n                if (this._diffs[i] === this._currentDiff) {\r\n                    currentIndex = i;\r\n                    break;\r\n                }\r\n            }\r\n            index = (currentIndex + 1);\r\n        }\r\n        else {\r\n            index = this._findDiffIndex(this._diffEditor.getPosition());\r\n        }\r\n        if (this._diffs.length === 0) {\r\n            // Nothing to do\r\n            return;\r\n        }\r\n        index = index % this._diffs.length;\r\n        this._diffEditor.setPosition(new Position(this._diffs[index].entries[0].modifiedLineStart, 1));\r\n        this._isVisible = true;\r\n        this._diffEditor.doLayout();\r\n        this._render();\r\n        this._goToRow(this._getNextRow());\r\n    };\r\n    DiffReview.prototype.accept = function () {\r\n        var jumpToLineNumber = -1;\r\n        var current = this._getCurrentFocusedRow();\r\n        if (current) {\r\n            var lineNumber = parseInt(current.getAttribute('data-line'), 10);\r\n            if (!isNaN(lineNumber)) {\r\n                jumpToLineNumber = lineNumber;\r\n            }\r\n        }\r\n        this.hide();\r\n        if (jumpToLineNumber !== -1) {\r\n            this._diffEditor.setPosition(new Position(jumpToLineNumber, 1));\r\n            this._diffEditor.revealPosition(new Position(jumpToLineNumber, 1), 1 /* Immediate */);\r\n        }\r\n    };\r\n    DiffReview.prototype.hide = function () {\r\n        this._isVisible = false;\r\n        this._diffEditor.focus();\r\n        this._diffEditor.doLayout();\r\n        this._render();\r\n    };\r\n    DiffReview.prototype._getPrevRow = function () {\r\n        var current = this._getCurrentFocusedRow();\r\n        if (!current) {\r\n            return this._getFirstRow();\r\n        }\r\n        if (current.previousElementSibling) {\r\n            return current.previousElementSibling;\r\n        }\r\n        return current;\r\n    };\r\n    DiffReview.prototype._getNextRow = function () {\r\n        var current = this._getCurrentFocusedRow();\r\n        if (!current) {\r\n            return this._getFirstRow();\r\n        }\r\n        if (current.nextElementSibling) {\r\n            return current.nextElementSibling;\r\n        }\r\n        return current;\r\n    };\r\n    DiffReview.prototype._getFirstRow = function () {\r\n        return this.domNode.domNode.querySelector('.diff-review-row');\r\n    };\r\n    DiffReview.prototype._getCurrentFocusedRow = function () {\r\n        var result = document.activeElement;\r\n        if (result && /diff-review-row/.test(result.className)) {\r\n            return result;\r\n        }\r\n        return null;\r\n    };\r\n    DiffReview.prototype._goToRow = function (row) {\r\n        var prev = this._getCurrentFocusedRow();\r\n        row.tabIndex = 0;\r\n        row.focus();\r\n        if (prev && prev !== row) {\r\n            prev.tabIndex = -1;\r\n        }\r\n        this.scrollbar.scanDomNode();\r\n    };\r\n    DiffReview.prototype.isVisible = function () {\r\n        return this._isVisible;\r\n    };\r\n    DiffReview.prototype.layout = function (top, width, height) {\r\n        this._width = width;\r\n        this.shadow.setTop(top - 6);\r\n        this.shadow.setWidth(width);\r\n        this.shadow.setHeight(this._isVisible ? 6 : 0);\r\n        this.domNode.setTop(top);\r\n        this.domNode.setWidth(width);\r\n        this.domNode.setHeight(height);\r\n        this._content.setHeight(height);\r\n        this._content.setWidth(width);\r\n        if (this._isVisible) {\r\n            this.actionBarContainer.setAttribute('aria-hidden', 'false');\r\n            this.actionBarContainer.setDisplay('block');\r\n        }\r\n        else {\r\n            this.actionBarContainer.setAttribute('aria-hidden', 'true');\r\n            this.actionBarContainer.setDisplay('none');\r\n        }\r\n    };\r\n    DiffReview.prototype._compute = function () {\r\n        var lineChanges = this._diffEditor.getLineChanges();\r\n        if (!lineChanges || lineChanges.length === 0) {\r\n            return [];\r\n        }\r\n        var originalModel = this._diffEditor.getOriginalEditor().getModel();\r\n        var modifiedModel = this._diffEditor.getModifiedEditor().getModel();\r\n        if (!originalModel || !modifiedModel) {\r\n            return [];\r\n        }\r\n        return DiffReview._mergeAdjacent(lineChanges, originalModel.getLineCount(), modifiedModel.getLineCount());\r\n    };\r\n    DiffReview._mergeAdjacent = function (lineChanges, originalLineCount, modifiedLineCount) {\r\n        if (!lineChanges || lineChanges.length === 0) {\r\n            return [];\r\n        }\r\n        var diffs = [], diffsLength = 0;\r\n        for (var i = 0, len = lineChanges.length; i < len; i++) {\r\n            var lineChange = lineChanges[i];\r\n            var originalStart = lineChange.originalStartLineNumber;\r\n            var originalEnd = lineChange.originalEndLineNumber;\r\n            var modifiedStart = lineChange.modifiedStartLineNumber;\r\n            var modifiedEnd = lineChange.modifiedEndLineNumber;\r\n            var r_1 = [], rLength_1 = 0;\r\n            // Emit before anchors\r\n            {\r\n                var originalEqualAbove = (originalEnd === 0 ? originalStart : originalStart - 1);\r\n                var modifiedEqualAbove = (modifiedEnd === 0 ? modifiedStart : modifiedStart - 1);\r\n                // Make sure we don't step into the previous diff\r\n                var minOriginal = 1;\r\n                var minModified = 1;\r\n                if (i > 0) {\r\n                    var prevLineChange = lineChanges[i - 1];\r\n                    if (prevLineChange.originalEndLineNumber === 0) {\r\n                        minOriginal = prevLineChange.originalStartLineNumber + 1;\r\n                    }\r\n                    else {\r\n                        minOriginal = prevLineChange.originalEndLineNumber + 1;\r\n                    }\r\n                    if (prevLineChange.modifiedEndLineNumber === 0) {\r\n                        minModified = prevLineChange.modifiedStartLineNumber + 1;\r\n                    }\r\n                    else {\r\n                        minModified = prevLineChange.modifiedEndLineNumber + 1;\r\n                    }\r\n                }\r\n                var fromOriginal = originalEqualAbove - DIFF_LINES_PADDING + 1;\r\n                var fromModified = modifiedEqualAbove - DIFF_LINES_PADDING + 1;\r\n                if (fromOriginal < minOriginal) {\r\n                    var delta = minOriginal - fromOriginal;\r\n                    fromOriginal = fromOriginal + delta;\r\n                    fromModified = fromModified + delta;\r\n                }\r\n                if (fromModified < minModified) {\r\n                    var delta = minModified - fromModified;\r\n                    fromOriginal = fromOriginal + delta;\r\n                    fromModified = fromModified + delta;\r\n                }\r\n                r_1[rLength_1++] = new DiffEntry(fromOriginal, originalEqualAbove, fromModified, modifiedEqualAbove);\r\n            }\r\n            // Emit deleted lines\r\n            {\r\n                if (originalEnd !== 0) {\r\n                    r_1[rLength_1++] = new DiffEntry(originalStart, originalEnd, 0, 0);\r\n                }\r\n            }\r\n            // Emit inserted lines\r\n            {\r\n                if (modifiedEnd !== 0) {\r\n                    r_1[rLength_1++] = new DiffEntry(0, 0, modifiedStart, modifiedEnd);\r\n                }\r\n            }\r\n            // Emit after anchors\r\n            {\r\n                var originalEqualBelow = (originalEnd === 0 ? originalStart + 1 : originalEnd + 1);\r\n                var modifiedEqualBelow = (modifiedEnd === 0 ? modifiedStart + 1 : modifiedEnd + 1);\r\n                // Make sure we don't step into the next diff\r\n                var maxOriginal = originalLineCount;\r\n                var maxModified = modifiedLineCount;\r\n                if (i + 1 < len) {\r\n                    var nextLineChange = lineChanges[i + 1];\r\n                    if (nextLineChange.originalEndLineNumber === 0) {\r\n                        maxOriginal = nextLineChange.originalStartLineNumber;\r\n                    }\r\n                    else {\r\n                        maxOriginal = nextLineChange.originalStartLineNumber - 1;\r\n                    }\r\n                    if (nextLineChange.modifiedEndLineNumber === 0) {\r\n                        maxModified = nextLineChange.modifiedStartLineNumber;\r\n                    }\r\n                    else {\r\n                        maxModified = nextLineChange.modifiedStartLineNumber - 1;\r\n                    }\r\n                }\r\n                var toOriginal = originalEqualBelow + DIFF_LINES_PADDING - 1;\r\n                var toModified = modifiedEqualBelow + DIFF_LINES_PADDING - 1;\r\n                if (toOriginal > maxOriginal) {\r\n                    var delta = maxOriginal - toOriginal;\r\n                    toOriginal = toOriginal + delta;\r\n                    toModified = toModified + delta;\r\n                }\r\n                if (toModified > maxModified) {\r\n                    var delta = maxModified - toModified;\r\n                    toOriginal = toOriginal + delta;\r\n                    toModified = toModified + delta;\r\n                }\r\n                r_1[rLength_1++] = new DiffEntry(originalEqualBelow, toOriginal, modifiedEqualBelow, toModified);\r\n            }\r\n            diffs[diffsLength++] = new Diff(r_1);\r\n        }\r\n        // Merge adjacent diffs\r\n        var curr = diffs[0].entries;\r\n        var r = [], rLength = 0;\r\n        for (var i = 1, len = diffs.length; i < len; i++) {\r\n            var thisDiff = diffs[i].entries;\r\n            var currLast = curr[curr.length - 1];\r\n            var thisFirst = thisDiff[0];\r\n            if (currLast.getType() === 0 /* Equal */\r\n                && thisFirst.getType() === 0 /* Equal */\r\n                && thisFirst.originalLineStart <= currLast.originalLineEnd) {\r\n                // We are dealing with equal lines that overlap\r\n                curr[curr.length - 1] = new DiffEntry(currLast.originalLineStart, thisFirst.originalLineEnd, currLast.modifiedLineStart, thisFirst.modifiedLineEnd);\r\n                curr = curr.concat(thisDiff.slice(1));\r\n                continue;\r\n            }\r\n            r[rLength++] = new Diff(curr);\r\n            curr = thisDiff;\r\n        }\r\n        r[rLength++] = new Diff(curr);\r\n        return r;\r\n    };\r\n    DiffReview.prototype._findDiffIndex = function (pos) {\r\n        var lineNumber = pos.lineNumber;\r\n        for (var i = 0, len = this._diffs.length; i < len; i++) {\r\n            var diff = this._diffs[i].entries;\r\n            var lastModifiedLine = diff[diff.length - 1].modifiedLineEnd;\r\n            if (lineNumber <= lastModifiedLine) {\r\n                return i;\r\n            }\r\n        }\r\n        return 0;\r\n    };\r\n    DiffReview.prototype._render = function () {\r\n        var originalOptions = this._diffEditor.getOriginalEditor().getOptions();\r\n        var modifiedOptions = this._diffEditor.getModifiedEditor().getOptions();\r\n        var originalModel = this._diffEditor.getOriginalEditor().getModel();\r\n        var modifiedModel = this._diffEditor.getModifiedEditor().getModel();\r\n        var originalModelOpts = originalModel.getOptions();\r\n        var modifiedModelOpts = modifiedModel.getOptions();\r\n        if (!this._isVisible || !originalModel || !modifiedModel) {\r\n            dom.clearNode(this._content.domNode);\r\n            this._currentDiff = null;\r\n            this.scrollbar.scanDomNode();\r\n            return;\r\n        }\r\n        var diffIndex = this._findDiffIndex(this._diffEditor.getPosition());\r\n        if (this._diffs[diffIndex] === this._currentDiff) {\r\n            return;\r\n        }\r\n        this._currentDiff = this._diffs[diffIndex];\r\n        var diffs = this._diffs[diffIndex].entries;\r\n        var container = document.createElement('div');\r\n        container.className = 'diff-review-table';\r\n        container.setAttribute('role', 'list');\r\n        Configuration.applyFontInfoSlow(container, modifiedOptions.get(34 /* fontInfo */));\r\n        var minOriginalLine = 0;\r\n        var maxOriginalLine = 0;\r\n        var minModifiedLine = 0;\r\n        var maxModifiedLine = 0;\r\n        for (var i = 0, len = diffs.length; i < len; i++) {\r\n            var diffEntry = diffs[i];\r\n            var originalLineStart = diffEntry.originalLineStart;\r\n            var originalLineEnd = diffEntry.originalLineEnd;\r\n            var modifiedLineStart = diffEntry.modifiedLineStart;\r\n            var modifiedLineEnd = diffEntry.modifiedLineEnd;\r\n            if (originalLineStart !== 0 && ((minOriginalLine === 0 || originalLineStart < minOriginalLine))) {\r\n                minOriginalLine = originalLineStart;\r\n            }\r\n            if (originalLineEnd !== 0 && ((maxOriginalLine === 0 || originalLineEnd > maxOriginalLine))) {\r\n                maxOriginalLine = originalLineEnd;\r\n            }\r\n            if (modifiedLineStart !== 0 && ((minModifiedLine === 0 || modifiedLineStart < minModifiedLine))) {\r\n                minModifiedLine = modifiedLineStart;\r\n            }\r\n            if (modifiedLineEnd !== 0 && ((maxModifiedLine === 0 || modifiedLineEnd > maxModifiedLine))) {\r\n                maxModifiedLine = modifiedLineEnd;\r\n            }\r\n        }\r\n        var header = document.createElement('div');\r\n        header.className = 'diff-review-row';\r\n        var cell = document.createElement('div');\r\n        cell.className = 'diff-review-cell diff-review-summary';\r\n        var originalChangedLinesCnt = maxOriginalLine - minOriginalLine + 1;\r\n        var modifiedChangedLinesCnt = maxModifiedLine - minModifiedLine + 1;\r\n        cell.appendChild(document.createTextNode(diffIndex + 1 + \"/\" + this._diffs.length + \": @@ -\" + minOriginalLine + \",\" + originalChangedLinesCnt + \" +\" + minModifiedLine + \",\" + modifiedChangedLinesCnt + \" @@\"));\r\n        header.setAttribute('data-line', String(minModifiedLine));\r\n        var getAriaLines = function (lines) {\r\n            if (lines === 0) {\r\n                return nls.localize('no_lines', \"no lines\");\r\n            }\r\n            else if (lines === 1) {\r\n                return nls.localize('one_line', \"1 line\");\r\n            }\r\n            else {\r\n                return nls.localize('more_lines', \"{0} lines\", lines);\r\n            }\r\n        };\r\n        var originalChangedLinesCntAria = getAriaLines(originalChangedLinesCnt);\r\n        var modifiedChangedLinesCntAria = getAriaLines(modifiedChangedLinesCnt);\r\n        header.setAttribute('aria-label', nls.localize({\r\n            key: 'header',\r\n            comment: [\r\n                'This is the ARIA label for a git diff header.',\r\n                'A git diff header looks like this: @@ -154,12 +159,39 @@.',\r\n                'That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.',\r\n                'Variables 0 and 1 refer to the diff index out of total number of diffs.',\r\n                'Variables 2 and 4 will be numbers (a line number).',\r\n                'Variables 3 and 5 will be \"no lines\", \"1 line\" or \"X lines\", localized separately.'\r\n            ]\r\n        }, \"Difference {0} of {1}: original {2}, {3}, modified {4}, {5}\", (diffIndex + 1), this._diffs.length, minOriginalLine, originalChangedLinesCntAria, minModifiedLine, modifiedChangedLinesCntAria));\r\n        header.appendChild(cell);\r\n        // @@ -504,7 +517,7 @@\r\n        header.setAttribute('role', 'listitem');\r\n        container.appendChild(header);\r\n        var modLine = minModifiedLine;\r\n        for (var i = 0, len = diffs.length; i < len; i++) {\r\n            var diffEntry = diffs[i];\r\n            DiffReview._renderSection(container, diffEntry, modLine, this._width, originalOptions, originalModel, originalModelOpts, modifiedOptions, modifiedModel, modifiedModelOpts);\r\n            if (diffEntry.modifiedLineStart !== 0) {\r\n                modLine = diffEntry.modifiedLineEnd;\r\n            }\r\n        }\r\n        dom.clearNode(this._content.domNode);\r\n        this._content.domNode.appendChild(container);\r\n        this.scrollbar.scanDomNode();\r\n    };\r\n    DiffReview._renderSection = function (dest, diffEntry, modLine, width, originalOptions, originalModel, originalModelOpts, modifiedOptions, modifiedModel, modifiedModelOpts) {\r\n        var type = diffEntry.getType();\r\n        var rowClassName = 'diff-review-row';\r\n        var lineNumbersExtraClassName = '';\r\n        var spacerClassName = 'diff-review-spacer';\r\n        switch (type) {\r\n            case 1 /* Insert */:\r\n                rowClassName = 'diff-review-row line-insert';\r\n                lineNumbersExtraClassName = ' char-insert';\r\n                spacerClassName = 'diff-review-spacer insert-sign';\r\n                break;\r\n            case 2 /* Delete */:\r\n                rowClassName = 'diff-review-row line-delete';\r\n                lineNumbersExtraClassName = ' char-delete';\r\n                spacerClassName = 'diff-review-spacer delete-sign';\r\n                break;\r\n        }\r\n        var originalLineStart = diffEntry.originalLineStart;\r\n        var originalLineEnd = diffEntry.originalLineEnd;\r\n        var modifiedLineStart = diffEntry.modifiedLineStart;\r\n        var modifiedLineEnd = diffEntry.modifiedLineEnd;\r\n        var cnt = Math.max(modifiedLineEnd - modifiedLineStart, originalLineEnd - originalLineStart);\r\n        var originalLayoutInfo = originalOptions.get(107 /* layoutInfo */);\r\n        var originalLineNumbersWidth = originalLayoutInfo.glyphMarginWidth + originalLayoutInfo.lineNumbersWidth;\r\n        var modifiedLayoutInfo = modifiedOptions.get(107 /* layoutInfo */);\r\n        var modifiedLineNumbersWidth = 10 + modifiedLayoutInfo.glyphMarginWidth + modifiedLayoutInfo.lineNumbersWidth;\r\n        for (var i = 0; i <= cnt; i++) {\r\n            var originalLine = (originalLineStart === 0 ? 0 : originalLineStart + i);\r\n            var modifiedLine = (modifiedLineStart === 0 ? 0 : modifiedLineStart + i);\r\n            var row = document.createElement('div');\r\n            row.style.minWidth = width + 'px';\r\n            row.className = rowClassName;\r\n            row.setAttribute('role', 'listitem');\r\n            if (modifiedLine !== 0) {\r\n                modLine = modifiedLine;\r\n            }\r\n            row.setAttribute('data-line', String(modLine));\r\n            var cell = document.createElement('div');\r\n            cell.className = 'diff-review-cell';\r\n            row.appendChild(cell);\r\n            var originalLineNumber = document.createElement('span');\r\n            originalLineNumber.style.width = (originalLineNumbersWidth + 'px');\r\n            originalLineNumber.style.minWidth = (originalLineNumbersWidth + 'px');\r\n            originalLineNumber.className = 'diff-review-line-number' + lineNumbersExtraClassName;\r\n            if (originalLine !== 0) {\r\n                originalLineNumber.appendChild(document.createTextNode(String(originalLine)));\r\n            }\r\n            else {\r\n                originalLineNumber.innerHTML = '&#160;';\r\n            }\r\n            cell.appendChild(originalLineNumber);\r\n            var modifiedLineNumber = document.createElement('span');\r\n            modifiedLineNumber.style.width = (modifiedLineNumbersWidth + 'px');\r\n            modifiedLineNumber.style.minWidth = (modifiedLineNumbersWidth + 'px');\r\n            modifiedLineNumber.style.paddingRight = '10px';\r\n            modifiedLineNumber.className = 'diff-review-line-number' + lineNumbersExtraClassName;\r\n            if (modifiedLine !== 0) {\r\n                modifiedLineNumber.appendChild(document.createTextNode(String(modifiedLine)));\r\n            }\r\n            else {\r\n                modifiedLineNumber.innerHTML = '&#160;';\r\n            }\r\n            cell.appendChild(modifiedLineNumber);\r\n            var spacer = document.createElement('span');\r\n            spacer.className = spacerClassName;\r\n            spacer.innerHTML = '&#160;&#160;';\r\n            cell.appendChild(spacer);\r\n            var lineContent = void 0;\r\n            if (modifiedLine !== 0) {\r\n                cell.insertAdjacentHTML('beforeend', this._renderLine(modifiedModel, modifiedOptions, modifiedModelOpts.tabSize, modifiedLine));\r\n                lineContent = modifiedModel.getLineContent(modifiedLine);\r\n            }\r\n            else {\r\n                cell.insertAdjacentHTML('beforeend', this._renderLine(originalModel, originalOptions, originalModelOpts.tabSize, originalLine));\r\n                lineContent = originalModel.getLineContent(originalLine);\r\n            }\r\n            if (lineContent.length === 0) {\r\n                lineContent = nls.localize('blankLine', \"blank\");\r\n            }\r\n            var ariaLabel = '';\r\n            switch (type) {\r\n                case 0 /* Equal */:\r\n                    ariaLabel = nls.localize('equalLine', \"original {0}, modified {1}: {2}\", originalLine, modifiedLine, lineContent);\r\n                    break;\r\n                case 1 /* Insert */:\r\n                    ariaLabel = nls.localize('insertLine', \"+ modified {0}: {1}\", modifiedLine, lineContent);\r\n                    break;\r\n                case 2 /* Delete */:\r\n                    ariaLabel = nls.localize('deleteLine', \"- original {0}: {1}\", originalLine, lineContent);\r\n                    break;\r\n            }\r\n            row.setAttribute('aria-label', ariaLabel);\r\n            dest.appendChild(row);\r\n        }\r\n    };\r\n    DiffReview._renderLine = function (model, options, tabSize, lineNumber) {\r\n        var lineContent = model.getLineContent(lineNumber);\r\n        var fontInfo = options.get(34 /* fontInfo */);\r\n        var defaultMetadata = ((0 /* None */ << 11 /* FONT_STYLE_OFFSET */)\r\n            | (1 /* DefaultForeground */ << 14 /* FOREGROUND_OFFSET */)\r\n            | (2 /* DefaultBackground */ << 23 /* BACKGROUND_OFFSET */)) >>> 0;\r\n        var tokens = new Uint32Array(2);\r\n        tokens[0] = lineContent.length;\r\n        tokens[1] = defaultMetadata;\r\n        var lineTokens = new LineTokens(tokens, lineContent);\r\n        var isBasicASCII = ViewLineRenderingData.isBasicASCII(lineContent, model.mightContainNonBasicASCII());\r\n        var containsRTL = ViewLineRenderingData.containsRTL(lineContent, isBasicASCII, model.mightContainRTL());\r\n        var r = renderViewLine(new RenderLineInput((fontInfo.isMonospace && !options.get(23 /* disableMonospaceOptimizations */)), fontInfo.canUseHalfwidthRightwardsArrow, lineContent, false, isBasicASCII, containsRTL, 0, lineTokens, [], tabSize, 0, fontInfo.spaceWidth, fontInfo.middotWidth, options.get(88 /* stopRenderingLineAfter */), options.get(74 /* renderWhitespace */), options.get(69 /* renderControlCharacters */), options.get(35 /* fontLigatures */) !== EditorFontLigatures.OFF, null));\r\n        return r.html;\r\n    };\r\n    return DiffReview;\r\n}(Disposable));\r\nexport { DiffReview };\r\n// theming\r\nregisterThemingParticipant(function (theme, collector) {\r\n    var lineNumbers = theme.getColor(editorLineNumbers);\r\n    if (lineNumbers) {\r\n        collector.addRule(\".monaco-diff-editor .diff-review-line-number { color: \" + lineNumbers + \"; }\");\r\n    }\r\n    var shadow = theme.getColor(scrollbarShadow);\r\n    if (shadow) {\r\n        collector.addRule(\".monaco-diff-editor .diff-review-shadow { box-shadow: \" + shadow + \" 0 -6px 6px -6px inset; }\");\r\n    }\r\n});\r\nvar DiffReviewNext = /** @class */ (function (_super) {\r\n    __extends(DiffReviewNext, _super);\r\n    function DiffReviewNext() {\r\n        return _super.call(this, {\r\n            id: 'editor.action.diffReview.next',\r\n            label: nls.localize('editor.action.diffReview.next', \"Go to Next Difference\"),\r\n            alias: 'Go to Next Difference',\r\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\r\n            kbOpts: {\r\n                kbExpr: null,\r\n                primary: 65 /* F7 */,\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    DiffReviewNext.prototype.run = function (accessor, editor) {\r\n        var diffEditor = findFocusedDiffEditor(accessor);\r\n        if (diffEditor) {\r\n            diffEditor.diffReviewNext();\r\n        }\r\n    };\r\n    return DiffReviewNext;\r\n}(EditorAction));\r\nvar DiffReviewPrev = /** @class */ (function (_super) {\r\n    __extends(DiffReviewPrev, _super);\r\n    function DiffReviewPrev() {\r\n        return _super.call(this, {\r\n            id: 'editor.action.diffReview.prev',\r\n            label: nls.localize('editor.action.diffReview.prev', \"Go to Previous Difference\"),\r\n            alias: 'Go to Previous Difference',\r\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\r\n            kbOpts: {\r\n                kbExpr: null,\r\n                primary: 1024 /* Shift */ | 65 /* F7 */,\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    DiffReviewPrev.prototype.run = function (accessor, editor) {\r\n        var diffEditor = findFocusedDiffEditor(accessor);\r\n        if (diffEditor) {\r\n            diffEditor.diffReviewPrev();\r\n        }\r\n    };\r\n    return DiffReviewPrev;\r\n}(EditorAction));\r\nfunction findFocusedDiffEditor(accessor) {\r\n    var codeEditorService = accessor.get(ICodeEditorService);\r\n    var diffEditors = codeEditorService.listDiffEditors();\r\n    for (var i = 0, len = diffEditors.length; i < len; i++) {\r\n        var diffEditor = diffEditors[i];\r\n        if (diffEditor.hasWidgetFocus()) {\r\n            return diffEditor;\r\n        }\r\n    }\r\n    return null;\r\n}\r\nregisterEditorAction(DiffReviewNext);\r\nregisterEditorAction(DiffReviewPrev);\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport * as nls from '../../../nls.js';\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { Action } from '../../../base/common/actions.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport { Range } from '../../common/core/range.js';\r\nvar InlineDiffMargin = /** @class */ (function (_super) {\r\n    __extends(InlineDiffMargin, _super);\r\n    function InlineDiffMargin(_viewZoneId, _marginDomNode, editor, diff, _contextMenuService, _clipboardService) {\r\n        var _this = _super.call(this) || this;\r\n        _this._viewZoneId = _viewZoneId;\r\n        _this._marginDomNode = _marginDomNode;\r\n        _this.editor = editor;\r\n        _this.diff = diff;\r\n        _this._contextMenuService = _contextMenuService;\r\n        _this._clipboardService = _clipboardService;\r\n        _this._visibility = false;\r\n        // make sure the diff margin shows above overlay.\r\n        _this._marginDomNode.style.zIndex = '10';\r\n        _this._diffActions = document.createElement('div');\r\n        _this._diffActions.className = 'codicon codicon-lightbulb lightbulb-glyph';\r\n        _this._diffActions.style.position = 'absolute';\r\n        var lineHeight = editor.getOption(49 /* lineHeight */);\r\n        var lineFeed = editor.getModel().getEOL();\r\n        _this._diffActions.style.right = '0px';\r\n        _this._diffActions.style.visibility = 'hidden';\r\n        _this._diffActions.style.height = lineHeight + \"px\";\r\n        _this._diffActions.style.lineHeight = lineHeight + \"px\";\r\n        _this._marginDomNode.appendChild(_this._diffActions);\r\n        var actions = [];\r\n        // default action\r\n        actions.push(new Action('diff.clipboard.copyDeletedContent', diff.originalEndLineNumber > diff.modifiedStartLineNumber\r\n            ? nls.localize('diff.clipboard.copyDeletedLinesContent.label', \"Copy deleted lines\")\r\n            : nls.localize('diff.clipboard.copyDeletedLinesContent.single.label', \"Copy deleted line\"), undefined, true, function () { return __awaiter(_this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this._clipboardService.writeText(diff.originalContent.join(lineFeed) + lineFeed)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        }); }));\r\n        var currentLineNumberOffset = 0;\r\n        var copyLineAction = undefined;\r\n        if (diff.originalEndLineNumber > diff.modifiedStartLineNumber) {\r\n            copyLineAction = new Action('diff.clipboard.copyDeletedLineContent', nls.localize('diff.clipboard.copyDeletedLineContent.label', \"Copy deleted line ({0})\", diff.originalStartLineNumber), undefined, true, function () { return __awaiter(_this, void 0, void 0, function () {\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4 /*yield*/, this._clipboardService.writeText(diff.originalContent[currentLineNumberOffset])];\r\n                        case 1:\r\n                            _a.sent();\r\n                            return [2 /*return*/];\r\n                    }\r\n                });\r\n            }); });\r\n            actions.push(copyLineAction);\r\n        }\r\n        var readOnly = editor.getOption(68 /* readOnly */);\r\n        if (!readOnly) {\r\n            actions.push(new Action('diff.inline.revertChange', nls.localize('diff.inline.revertChange.label', \"Revert this change\"), undefined, true, function () { return __awaiter(_this, void 0, void 0, function () {\r\n                var column, column;\r\n                return __generator(this, function (_a) {\r\n                    if (diff.modifiedEndLineNumber === 0) {\r\n                        column = editor.getModel().getLineMaxColumn(diff.modifiedStartLineNumber);\r\n                        editor.executeEdits('diffEditor', [\r\n                            {\r\n                                range: new Range(diff.modifiedStartLineNumber, column, diff.modifiedStartLineNumber, column),\r\n                                text: lineFeed + diff.originalContent.join(lineFeed)\r\n                            }\r\n                        ]);\r\n                    }\r\n                    else {\r\n                        column = editor.getModel().getLineMaxColumn(diff.modifiedEndLineNumber);\r\n                        editor.executeEdits('diffEditor', [\r\n                            {\r\n                                range: new Range(diff.modifiedStartLineNumber, 1, diff.modifiedEndLineNumber, column),\r\n                                text: diff.originalContent.join(lineFeed)\r\n                            }\r\n                        ]);\r\n                    }\r\n                    return [2 /*return*/];\r\n                });\r\n            }); }));\r\n        }\r\n        var showContextMenu = function (x, y) {\r\n            _this._contextMenuService.showContextMenu({\r\n                getAnchor: function () {\r\n                    return {\r\n                        x: x,\r\n                        y: y\r\n                    };\r\n                },\r\n                getActions: function () {\r\n                    if (copyLineAction) {\r\n                        copyLineAction.label = nls.localize('diff.clipboard.copyDeletedLineContent.label', \"Copy deleted line ({0})\", diff.originalStartLineNumber + currentLineNumberOffset);\r\n                    }\r\n                    return actions;\r\n                },\r\n                autoSelectFirstItem: true\r\n            });\r\n        };\r\n        _this._register(dom.addStandardDisposableListener(_this._diffActions, 'mousedown', function (e) {\r\n            var _a = dom.getDomNodePagePosition(_this._diffActions), top = _a.top, height = _a.height;\r\n            var pad = Math.floor(lineHeight / 3);\r\n            e.preventDefault();\r\n            showContextMenu(e.posx, top + height + pad);\r\n        }));\r\n        _this._register(editor.onMouseMove(function (e) {\r\n            if (e.target.type === 8 /* CONTENT_VIEW_ZONE */ || e.target.type === 5 /* GUTTER_VIEW_ZONE */) {\r\n                var viewZoneId = e.target.detail.viewZoneId;\r\n                if (viewZoneId === _this._viewZoneId) {\r\n                    _this.visibility = true;\r\n                    currentLineNumberOffset = _this._updateLightBulbPosition(_this._marginDomNode, e.event.browserEvent.y, lineHeight);\r\n                }\r\n                else {\r\n                    _this.visibility = false;\r\n                }\r\n            }\r\n            else {\r\n                _this.visibility = false;\r\n            }\r\n        }));\r\n        _this._register(editor.onMouseDown(function (e) {\r\n            if (!e.event.rightButton) {\r\n                return;\r\n            }\r\n            if (e.target.type === 8 /* CONTENT_VIEW_ZONE */ || e.target.type === 5 /* GUTTER_VIEW_ZONE */) {\r\n                var viewZoneId = e.target.detail.viewZoneId;\r\n                if (viewZoneId === _this._viewZoneId) {\r\n                    e.event.preventDefault();\r\n                    currentLineNumberOffset = _this._updateLightBulbPosition(_this._marginDomNode, e.event.browserEvent.y, lineHeight);\r\n                    showContextMenu(e.event.posx, e.event.posy + lineHeight);\r\n                }\r\n            }\r\n        }));\r\n        return _this;\r\n    }\r\n    Object.defineProperty(InlineDiffMargin.prototype, \"visibility\", {\r\n        get: function () {\r\n            return this._visibility;\r\n        },\r\n        set: function (_visibility) {\r\n            if (this._visibility !== _visibility) {\r\n                this._visibility = _visibility;\r\n                if (_visibility) {\r\n                    this._diffActions.style.visibility = 'visible';\r\n                }\r\n                else {\r\n                    this._diffActions.style.visibility = 'hidden';\r\n                }\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    InlineDiffMargin.prototype._updateLightBulbPosition = function (marginDomNode, y, lineHeight) {\r\n        var top = dom.getDomNodePagePosition(marginDomNode).top;\r\n        var offset = y - top;\r\n        var lineNumberOffset = Math.floor(offset / lineHeight);\r\n        var newTop = lineNumberOffset * lineHeight;\r\n        this._diffActions.style.top = newTop + \"px\";\r\n        return lineNumberOffset;\r\n    };\r\n    return InlineDiffMargin;\r\n}(Disposable));\r\nexport { InlineDiffMargin };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport './media/diffEditor.css';\r\nimport * as nls from '../../../nls.js';\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { createFastDomNode } from '../../../base/browser/fastDomNode.js';\r\nimport { Sash } from '../../../base/browser/ui/sash/sash.js';\r\nimport { RunOnceScheduler } from '../../../base/common/async.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport * as objects from '../../../base/common/objects.js';\r\nimport { Configuration } from '../config/configuration.js';\r\nimport { StableEditorScrollState } from '../core/editorState.js';\r\nimport { ICodeEditorService } from '../services/codeEditorService.js';\r\nimport { CodeEditorWidget } from './codeEditorWidget.js';\r\nimport { DiffReview } from './diffReview.js';\r\nimport { EditorOptions, EditorFontLigatures } from '../../common/config/editorOptions.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { createStringBuilder } from '../../common/core/stringBuilder.js';\r\nimport * as editorCommon from '../../common/editorCommon.js';\r\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\r\nimport { IEditorWorkerService } from '../../common/services/editorWorkerService.js';\r\nimport { OverviewRulerZone } from '../../common/view/overviewZoneManager.js';\r\nimport { LineDecoration } from '../../common/viewLayout/lineDecorations.js';\r\nimport { RenderLineInput, renderViewLine } from '../../common/viewLayout/viewLineRenderer.js';\r\nimport { InlineDecoration, ViewLineRenderingData } from '../../common/viewModel/viewModel.js';\r\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\r\nimport { ServiceCollection } from '../../../platform/instantiation/common/serviceCollection.js';\r\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\r\nimport { defaultInsertColor, defaultRemoveColor, diffBorder, diffInserted, diffInsertedOutline, diffRemoved, diffRemovedOutline, scrollbarShadow } from '../../../platform/theme/common/colorRegistry.js';\r\nimport { IThemeService, getThemeTypeSelector, registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\r\nimport { IContextMenuService } from '../../../platform/contextview/browser/contextView.js';\r\nimport { InlineDiffMargin } from './inlineDiffMargin.js';\r\nimport { EditorExtensionsRegistry } from '../editorExtensions.js';\r\nimport { onUnexpectedError } from '../../../base/common/errors.js';\r\nimport { IEditorProgressService } from '../../../platform/progress/common/progress.js';\r\nimport { ElementSizeObserver } from '../config/elementSizeObserver.js';\r\nvar VisualEditorState = /** @class */ (function () {\r\n    function VisualEditorState(_contextMenuService, _clipboardService) {\r\n        this._contextMenuService = _contextMenuService;\r\n        this._clipboardService = _clipboardService;\r\n        this._zones = [];\r\n        this.inlineDiffMargins = [];\r\n        this._zonesMap = {};\r\n        this._decorations = [];\r\n    }\r\n    VisualEditorState.prototype.getForeignViewZones = function (allViewZones) {\r\n        var _this = this;\r\n        return allViewZones.filter(function (z) { return !_this._zonesMap[String(z.id)]; });\r\n    };\r\n    VisualEditorState.prototype.clean = function (editor) {\r\n        var _this = this;\r\n        // (1) View zones\r\n        if (this._zones.length > 0) {\r\n            editor.changeViewZones(function (viewChangeAccessor) {\r\n                for (var i = 0, length_1 = _this._zones.length; i < length_1; i++) {\r\n                    viewChangeAccessor.removeZone(_this._zones[i]);\r\n                }\r\n            });\r\n        }\r\n        this._zones = [];\r\n        this._zonesMap = {};\r\n        // (2) Model decorations\r\n        this._decorations = editor.deltaDecorations(this._decorations, []);\r\n    };\r\n    VisualEditorState.prototype.apply = function (editor, overviewRuler, newDecorations, restoreScrollState) {\r\n        var _this = this;\r\n        var scrollState = restoreScrollState ? StableEditorScrollState.capture(editor) : null;\r\n        // view zones\r\n        editor.changeViewZones(function (viewChangeAccessor) {\r\n            for (var i = 0, length_2 = _this._zones.length; i < length_2; i++) {\r\n                viewChangeAccessor.removeZone(_this._zones[i]);\r\n            }\r\n            for (var i = 0, length_3 = _this.inlineDiffMargins.length; i < length_3; i++) {\r\n                _this.inlineDiffMargins[i].dispose();\r\n            }\r\n            _this._zones = [];\r\n            _this._zonesMap = {};\r\n            _this.inlineDiffMargins = [];\r\n            for (var i = 0, length_4 = newDecorations.zones.length; i < length_4; i++) {\r\n                var viewZone = newDecorations.zones[i];\r\n                viewZone.suppressMouseDown = true;\r\n                var zoneId = viewChangeAccessor.addZone(viewZone);\r\n                _this._zones.push(zoneId);\r\n                _this._zonesMap[String(zoneId)] = true;\r\n                if (newDecorations.zones[i].diff && viewZone.marginDomNode && _this._clipboardService) {\r\n                    viewZone.suppressMouseDown = false;\r\n                    _this.inlineDiffMargins.push(new InlineDiffMargin(zoneId, viewZone.marginDomNode, editor, newDecorations.zones[i].diff, _this._contextMenuService, _this._clipboardService));\r\n                }\r\n            }\r\n        });\r\n        if (scrollState) {\r\n            scrollState.restore(editor);\r\n        }\r\n        // decorations\r\n        this._decorations = editor.deltaDecorations(this._decorations, newDecorations.decorations);\r\n        // overview ruler\r\n        if (overviewRuler) {\r\n            overviewRuler.setZones(newDecorations.overviewZones);\r\n        }\r\n    };\r\n    return VisualEditorState;\r\n}());\r\nvar DIFF_EDITOR_ID = 0;\r\nvar DiffEditorWidget = /** @class */ (function (_super) {\r\n    __extends(DiffEditorWidget, _super);\r\n    function DiffEditorWidget(domElement, options, clipboardService, editorWorkerService, contextKeyService, instantiationService, codeEditorService, themeService, notificationService, contextMenuService, _editorProgressService) {\r\n        var _this = _super.call(this) || this;\r\n        _this._editorProgressService = _editorProgressService;\r\n        _this._onDidDispose = _this._register(new Emitter());\r\n        _this.onDidDispose = _this._onDidDispose.event;\r\n        _this._onDidUpdateDiff = _this._register(new Emitter());\r\n        _this.onDidUpdateDiff = _this._onDidUpdateDiff.event;\r\n        _this._lastOriginalWarning = null;\r\n        _this._lastModifiedWarning = null;\r\n        _this._editorWorkerService = editorWorkerService;\r\n        _this._codeEditorService = codeEditorService;\r\n        _this._contextKeyService = _this._register(contextKeyService.createScoped(domElement));\r\n        _this._contextKeyService.createKey('isInDiffEditor', true);\r\n        _this._themeService = themeService;\r\n        _this._notificationService = notificationService;\r\n        _this.id = (++DIFF_EDITOR_ID);\r\n        _this._state = 0 /* Idle */;\r\n        _this._updatingDiffProgress = null;\r\n        _this._domElement = domElement;\r\n        options = options || {};\r\n        // renderSideBySide\r\n        _this._renderSideBySide = true;\r\n        if (typeof options.renderSideBySide !== 'undefined') {\r\n            _this._renderSideBySide = options.renderSideBySide;\r\n        }\r\n        // maxComputationTime\r\n        _this._maxComputationTime = 5000;\r\n        if (typeof options.maxComputationTime !== 'undefined') {\r\n            _this._maxComputationTime = options.maxComputationTime;\r\n        }\r\n        // ignoreTrimWhitespace\r\n        _this._ignoreTrimWhitespace = true;\r\n        if (typeof options.ignoreTrimWhitespace !== 'undefined') {\r\n            _this._ignoreTrimWhitespace = options.ignoreTrimWhitespace;\r\n        }\r\n        // renderIndicators\r\n        _this._renderIndicators = true;\r\n        if (typeof options.renderIndicators !== 'undefined') {\r\n            _this._renderIndicators = options.renderIndicators;\r\n        }\r\n        _this._originalIsEditable = false;\r\n        if (typeof options.originalEditable !== 'undefined') {\r\n            _this._originalIsEditable = Boolean(options.originalEditable);\r\n        }\r\n        _this._updateDecorationsRunner = _this._register(new RunOnceScheduler(function () { return _this._updateDecorations(); }, 0));\r\n        _this._containerDomElement = document.createElement('div');\r\n        _this._containerDomElement.className = DiffEditorWidget._getClassName(_this._themeService.getTheme(), _this._renderSideBySide);\r\n        _this._containerDomElement.style.position = 'relative';\r\n        _this._containerDomElement.style.height = '100%';\r\n        _this._domElement.appendChild(_this._containerDomElement);\r\n        _this._overviewViewportDomElement = createFastDomNode(document.createElement('div'));\r\n        _this._overviewViewportDomElement.setClassName('diffViewport');\r\n        _this._overviewViewportDomElement.setPosition('absolute');\r\n        _this._overviewDomElement = document.createElement('div');\r\n        _this._overviewDomElement.className = 'diffOverview';\r\n        _this._overviewDomElement.style.position = 'absolute';\r\n        _this._overviewDomElement.appendChild(_this._overviewViewportDomElement.domNode);\r\n        _this._register(dom.addStandardDisposableListener(_this._overviewDomElement, 'mousedown', function (e) {\r\n            _this.modifiedEditor.delegateVerticalScrollbarMouseDown(e);\r\n        }));\r\n        _this._containerDomElement.appendChild(_this._overviewDomElement);\r\n        // Create left side\r\n        _this._originalDomNode = document.createElement('div');\r\n        _this._originalDomNode.className = 'editor original';\r\n        _this._originalDomNode.style.position = 'absolute';\r\n        _this._originalDomNode.style.height = '100%';\r\n        _this._containerDomElement.appendChild(_this._originalDomNode);\r\n        // Create right side\r\n        _this._modifiedDomNode = document.createElement('div');\r\n        _this._modifiedDomNode.className = 'editor modified';\r\n        _this._modifiedDomNode.style.position = 'absolute';\r\n        _this._modifiedDomNode.style.height = '100%';\r\n        _this._containerDomElement.appendChild(_this._modifiedDomNode);\r\n        _this._beginUpdateDecorationsTimeout = -1;\r\n        _this._currentlyChangingViewZones = false;\r\n        _this._diffComputationToken = 0;\r\n        _this._originalEditorState = new VisualEditorState(contextMenuService, clipboardService);\r\n        _this._modifiedEditorState = new VisualEditorState(contextMenuService, clipboardService);\r\n        _this._isVisible = true;\r\n        _this._isHandlingScrollEvent = false;\r\n        _this._elementSizeObserver = _this._register(new ElementSizeObserver(_this._containerDomElement, undefined, function () { return _this._onDidContainerSizeChanged(); }));\r\n        if (options.automaticLayout) {\r\n            _this._elementSizeObserver.startObserving();\r\n        }\r\n        _this._diffComputationResult = null;\r\n        var leftContextKeyService = _this._contextKeyService.createScoped();\r\n        leftContextKeyService.createKey('isInDiffLeftEditor', true);\r\n        var leftServices = new ServiceCollection();\r\n        leftServices.set(IContextKeyService, leftContextKeyService);\r\n        var leftScopedInstantiationService = instantiationService.createChild(leftServices);\r\n        var rightContextKeyService = _this._contextKeyService.createScoped();\r\n        rightContextKeyService.createKey('isInDiffRightEditor', true);\r\n        var rightServices = new ServiceCollection();\r\n        rightServices.set(IContextKeyService, rightContextKeyService);\r\n        var rightScopedInstantiationService = instantiationService.createChild(rightServices);\r\n        _this.originalEditor = _this._createLeftHandSideEditor(options, leftScopedInstantiationService);\r\n        _this.modifiedEditor = _this._createRightHandSideEditor(options, rightScopedInstantiationService);\r\n        _this._originalOverviewRuler = null;\r\n        _this._modifiedOverviewRuler = null;\r\n        _this._reviewPane = new DiffReview(_this);\r\n        _this._containerDomElement.appendChild(_this._reviewPane.domNode.domNode);\r\n        _this._containerDomElement.appendChild(_this._reviewPane.shadow.domNode);\r\n        _this._containerDomElement.appendChild(_this._reviewPane.actionBarContainer.domNode);\r\n        // enableSplitViewResizing\r\n        _this._enableSplitViewResizing = true;\r\n        if (typeof options.enableSplitViewResizing !== 'undefined') {\r\n            _this._enableSplitViewResizing = options.enableSplitViewResizing;\r\n        }\r\n        if (_this._renderSideBySide) {\r\n            _this._setStrategy(new DiffEditorWidgetSideBySide(_this._createDataSource(), _this._enableSplitViewResizing));\r\n        }\r\n        else {\r\n            _this._setStrategy(new DiffEditorWidgetInline(_this._createDataSource(), _this._enableSplitViewResizing));\r\n        }\r\n        _this._register(themeService.onThemeChange(function (t) {\r\n            if (_this._strategy && _this._strategy.applyColors(t)) {\r\n                _this._updateDecorationsRunner.schedule();\r\n            }\r\n            _this._containerDomElement.className = DiffEditorWidget._getClassName(_this._themeService.getTheme(), _this._renderSideBySide);\r\n        }));\r\n        var contributions = EditorExtensionsRegistry.getDiffEditorContributions();\r\n        for (var _i = 0, contributions_1 = contributions; _i < contributions_1.length; _i++) {\r\n            var desc = contributions_1[_i];\r\n            try {\r\n                _this._register(instantiationService.createInstance(desc.ctor, _this));\r\n            }\r\n            catch (err) {\r\n                onUnexpectedError(err);\r\n            }\r\n        }\r\n        _this._codeEditorService.addDiffEditor(_this);\r\n        return _this;\r\n    }\r\n    DiffEditorWidget.prototype._setState = function (newState) {\r\n        if (this._state === newState) {\r\n            return;\r\n        }\r\n        this._state = newState;\r\n        if (this._updatingDiffProgress) {\r\n            this._updatingDiffProgress.done();\r\n            this._updatingDiffProgress = null;\r\n        }\r\n        if (this._state === 1 /* ComputingDiff */) {\r\n            this._updatingDiffProgress = this._editorProgressService.show(true, 1000);\r\n        }\r\n    };\r\n    DiffEditorWidget.prototype.hasWidgetFocus = function () {\r\n        return dom.isAncestor(document.activeElement, this._domElement);\r\n    };\r\n    DiffEditorWidget.prototype.diffReviewNext = function () {\r\n        this._reviewPane.next();\r\n    };\r\n    DiffEditorWidget.prototype.diffReviewPrev = function () {\r\n        this._reviewPane.prev();\r\n    };\r\n    DiffEditorWidget._getClassName = function (theme, renderSideBySide) {\r\n        var result = 'monaco-diff-editor monaco-editor-background ';\r\n        if (renderSideBySide) {\r\n            result += 'side-by-side ';\r\n        }\r\n        result += getThemeTypeSelector(theme.type);\r\n        return result;\r\n    };\r\n    DiffEditorWidget.prototype._recreateOverviewRulers = function () {\r\n        if (this._originalOverviewRuler) {\r\n            this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode());\r\n            this._originalOverviewRuler.dispose();\r\n        }\r\n        if (this.originalEditor.hasModel()) {\r\n            this._originalOverviewRuler = this.originalEditor.createOverviewRuler('original diffOverviewRuler');\r\n            this._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode());\r\n        }\r\n        if (this._modifiedOverviewRuler) {\r\n            this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode());\r\n            this._modifiedOverviewRuler.dispose();\r\n        }\r\n        if (this.modifiedEditor.hasModel()) {\r\n            this._modifiedOverviewRuler = this.modifiedEditor.createOverviewRuler('modified diffOverviewRuler');\r\n            this._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode());\r\n        }\r\n        this._layoutOverviewRulers();\r\n    };\r\n    DiffEditorWidget.prototype._createLeftHandSideEditor = function (options, instantiationService) {\r\n        var _this = this;\r\n        var editor = this._createInnerEditor(instantiationService, this._originalDomNode, this._adjustOptionsForLeftHandSide(options, this._originalIsEditable));\r\n        this._register(editor.onDidScrollChange(function (e) {\r\n            if (_this._isHandlingScrollEvent) {\r\n                return;\r\n            }\r\n            if (!e.scrollTopChanged && !e.scrollLeftChanged && !e.scrollHeightChanged) {\r\n                return;\r\n            }\r\n            _this._isHandlingScrollEvent = true;\r\n            _this.modifiedEditor.setScrollPosition({\r\n                scrollLeft: e.scrollLeft,\r\n                scrollTop: e.scrollTop\r\n            });\r\n            _this._isHandlingScrollEvent = false;\r\n            _this._layoutOverviewViewport();\r\n        }));\r\n        this._register(editor.onDidChangeViewZones(function () {\r\n            _this._onViewZonesChanged();\r\n        }));\r\n        this._register(editor.onDidChangeModelContent(function () {\r\n            if (_this._isVisible) {\r\n                _this._beginUpdateDecorationsSoon();\r\n            }\r\n        }));\r\n        return editor;\r\n    };\r\n    DiffEditorWidget.prototype._createRightHandSideEditor = function (options, instantiationService) {\r\n        var _this = this;\r\n        var editor = this._createInnerEditor(instantiationService, this._modifiedDomNode, this._adjustOptionsForRightHandSide(options));\r\n        this._register(editor.onDidScrollChange(function (e) {\r\n            if (_this._isHandlingScrollEvent) {\r\n                return;\r\n            }\r\n            if (!e.scrollTopChanged && !e.scrollLeftChanged && !e.scrollHeightChanged) {\r\n                return;\r\n            }\r\n            _this._isHandlingScrollEvent = true;\r\n            _this.originalEditor.setScrollPosition({\r\n                scrollLeft: e.scrollLeft,\r\n                scrollTop: e.scrollTop\r\n            });\r\n            _this._isHandlingScrollEvent = false;\r\n            _this._layoutOverviewViewport();\r\n        }));\r\n        this._register(editor.onDidChangeViewZones(function () {\r\n            _this._onViewZonesChanged();\r\n        }));\r\n        this._register(editor.onDidChangeConfiguration(function (e) {\r\n            if (e.hasChanged(34 /* fontInfo */) && editor.getModel()) {\r\n                _this._onViewZonesChanged();\r\n            }\r\n        }));\r\n        this._register(editor.onDidChangeModelContent(function () {\r\n            if (_this._isVisible) {\r\n                _this._beginUpdateDecorationsSoon();\r\n            }\r\n        }));\r\n        this._register(editor.onDidChangeModelOptions(function (e) {\r\n            if (e.tabSize) {\r\n                _this._updateDecorationsRunner.schedule();\r\n            }\r\n        }));\r\n        return editor;\r\n    };\r\n    DiffEditorWidget.prototype._createInnerEditor = function (instantiationService, container, options) {\r\n        return instantiationService.createInstance(CodeEditorWidget, container, options, {});\r\n    };\r\n    DiffEditorWidget.prototype.dispose = function () {\r\n        this._codeEditorService.removeDiffEditor(this);\r\n        if (this._beginUpdateDecorationsTimeout !== -1) {\r\n            window.clearTimeout(this._beginUpdateDecorationsTimeout);\r\n            this._beginUpdateDecorationsTimeout = -1;\r\n        }\r\n        this._cleanViewZonesAndDecorations();\r\n        if (this._originalOverviewRuler) {\r\n            this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode());\r\n            this._originalOverviewRuler.dispose();\r\n        }\r\n        if (this._modifiedOverviewRuler) {\r\n            this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode());\r\n            this._modifiedOverviewRuler.dispose();\r\n        }\r\n        this._overviewDomElement.removeChild(this._overviewViewportDomElement.domNode);\r\n        this._containerDomElement.removeChild(this._overviewDomElement);\r\n        this._containerDomElement.removeChild(this._originalDomNode);\r\n        this.originalEditor.dispose();\r\n        this._containerDomElement.removeChild(this._modifiedDomNode);\r\n        this.modifiedEditor.dispose();\r\n        this._strategy.dispose();\r\n        this._containerDomElement.removeChild(this._reviewPane.domNode.domNode);\r\n        this._containerDomElement.removeChild(this._reviewPane.shadow.domNode);\r\n        this._containerDomElement.removeChild(this._reviewPane.actionBarContainer.domNode);\r\n        this._reviewPane.dispose();\r\n        this._domElement.removeChild(this._containerDomElement);\r\n        this._onDidDispose.fire();\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    //------------ begin IDiffEditor methods\r\n    DiffEditorWidget.prototype.getId = function () {\r\n        return this.getEditorType() + ':' + this.id;\r\n    };\r\n    DiffEditorWidget.prototype.getEditorType = function () {\r\n        return editorCommon.EditorType.IDiffEditor;\r\n    };\r\n    DiffEditorWidget.prototype.getLineChanges = function () {\r\n        if (!this._diffComputationResult) {\r\n            return null;\r\n        }\r\n        return this._diffComputationResult.changes;\r\n    };\r\n    DiffEditorWidget.prototype.getOriginalEditor = function () {\r\n        return this.originalEditor;\r\n    };\r\n    DiffEditorWidget.prototype.getModifiedEditor = function () {\r\n        return this.modifiedEditor;\r\n    };\r\n    DiffEditorWidget.prototype.updateOptions = function (newOptions) {\r\n        // Handle side by side\r\n        var renderSideBySideChanged = false;\r\n        if (typeof newOptions.renderSideBySide !== 'undefined') {\r\n            if (this._renderSideBySide !== newOptions.renderSideBySide) {\r\n                this._renderSideBySide = newOptions.renderSideBySide;\r\n                renderSideBySideChanged = true;\r\n            }\r\n        }\r\n        if (typeof newOptions.maxComputationTime !== 'undefined') {\r\n            this._maxComputationTime = newOptions.maxComputationTime;\r\n            if (this._isVisible) {\r\n                this._beginUpdateDecorationsSoon();\r\n            }\r\n        }\r\n        var beginUpdateDecorations = false;\r\n        if (typeof newOptions.ignoreTrimWhitespace !== 'undefined') {\r\n            if (this._ignoreTrimWhitespace !== newOptions.ignoreTrimWhitespace) {\r\n                this._ignoreTrimWhitespace = newOptions.ignoreTrimWhitespace;\r\n                // Begin comparing\r\n                beginUpdateDecorations = true;\r\n            }\r\n        }\r\n        if (typeof newOptions.renderIndicators !== 'undefined') {\r\n            if (this._renderIndicators !== newOptions.renderIndicators) {\r\n                this._renderIndicators = newOptions.renderIndicators;\r\n                beginUpdateDecorations = true;\r\n            }\r\n        }\r\n        if (beginUpdateDecorations) {\r\n            this._beginUpdateDecorations();\r\n        }\r\n        if (typeof newOptions.originalEditable !== 'undefined') {\r\n            this._originalIsEditable = Boolean(newOptions.originalEditable);\r\n        }\r\n        this.modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(newOptions));\r\n        this.originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(newOptions, this._originalIsEditable));\r\n        // enableSplitViewResizing\r\n        if (typeof newOptions.enableSplitViewResizing !== 'undefined') {\r\n            this._enableSplitViewResizing = newOptions.enableSplitViewResizing;\r\n        }\r\n        this._strategy.setEnableSplitViewResizing(this._enableSplitViewResizing);\r\n        // renderSideBySide\r\n        if (renderSideBySideChanged) {\r\n            if (this._renderSideBySide) {\r\n                this._setStrategy(new DiffEditorWidgetSideBySide(this._createDataSource(), this._enableSplitViewResizing));\r\n            }\r\n            else {\r\n                this._setStrategy(new DiffEditorWidgetInline(this._createDataSource(), this._enableSplitViewResizing));\r\n            }\r\n            // Update class name\r\n            this._containerDomElement.className = DiffEditorWidget._getClassName(this._themeService.getTheme(), this._renderSideBySide);\r\n        }\r\n    };\r\n    DiffEditorWidget.prototype.getModel = function () {\r\n        return {\r\n            original: this.originalEditor.getModel(),\r\n            modified: this.modifiedEditor.getModel()\r\n        };\r\n    };\r\n    DiffEditorWidget.prototype.setModel = function (model) {\r\n        // Guard us against partial null model\r\n        if (model && (!model.original || !model.modified)) {\r\n            throw new Error(!model.original ? 'DiffEditorWidget.setModel: Original model is null' : 'DiffEditorWidget.setModel: Modified model is null');\r\n        }\r\n        // Remove all view zones & decorations\r\n        this._cleanViewZonesAndDecorations();\r\n        // Update code editor models\r\n        this.originalEditor.setModel(model ? model.original : null);\r\n        this.modifiedEditor.setModel(model ? model.modified : null);\r\n        this._updateDecorationsRunner.cancel();\r\n        // this.originalEditor.onDidChangeModelOptions\r\n        if (model) {\r\n            this.originalEditor.setScrollTop(0);\r\n            this.modifiedEditor.setScrollTop(0);\r\n        }\r\n        // Disable any diff computations that will come in\r\n        this._diffComputationResult = null;\r\n        this._diffComputationToken++;\r\n        this._setState(0 /* Idle */);\r\n        if (model) {\r\n            this._recreateOverviewRulers();\r\n            // Begin comparing\r\n            this._beginUpdateDecorations();\r\n        }\r\n        this._layoutOverviewViewport();\r\n    };\r\n    DiffEditorWidget.prototype.getDomNode = function () {\r\n        return this._domElement;\r\n    };\r\n    DiffEditorWidget.prototype.getVisibleColumnFromPosition = function (position) {\r\n        return this.modifiedEditor.getVisibleColumnFromPosition(position);\r\n    };\r\n    DiffEditorWidget.prototype.getPosition = function () {\r\n        return this.modifiedEditor.getPosition();\r\n    };\r\n    DiffEditorWidget.prototype.setPosition = function (position) {\r\n        this.modifiedEditor.setPosition(position);\r\n    };\r\n    DiffEditorWidget.prototype.revealLine = function (lineNumber, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this.modifiedEditor.revealLine(lineNumber, scrollType);\r\n    };\r\n    DiffEditorWidget.prototype.revealLineInCenter = function (lineNumber, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this.modifiedEditor.revealLineInCenter(lineNumber, scrollType);\r\n    };\r\n    DiffEditorWidget.prototype.revealLineInCenterIfOutsideViewport = function (lineNumber, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this.modifiedEditor.revealLineInCenterIfOutsideViewport(lineNumber, scrollType);\r\n    };\r\n    DiffEditorWidget.prototype.revealPosition = function (position, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this.modifiedEditor.revealPosition(position, scrollType);\r\n    };\r\n    DiffEditorWidget.prototype.revealPositionInCenter = function (position, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this.modifiedEditor.revealPositionInCenter(position, scrollType);\r\n    };\r\n    DiffEditorWidget.prototype.revealPositionInCenterIfOutsideViewport = function (position, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this.modifiedEditor.revealPositionInCenterIfOutsideViewport(position, scrollType);\r\n    };\r\n    DiffEditorWidget.prototype.getSelection = function () {\r\n        return this.modifiedEditor.getSelection();\r\n    };\r\n    DiffEditorWidget.prototype.getSelections = function () {\r\n        return this.modifiedEditor.getSelections();\r\n    };\r\n    DiffEditorWidget.prototype.setSelection = function (something) {\r\n        this.modifiedEditor.setSelection(something);\r\n    };\r\n    DiffEditorWidget.prototype.setSelections = function (ranges) {\r\n        this.modifiedEditor.setSelections(ranges);\r\n    };\r\n    DiffEditorWidget.prototype.revealLines = function (startLineNumber, endLineNumber, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this.modifiedEditor.revealLines(startLineNumber, endLineNumber, scrollType);\r\n    };\r\n    DiffEditorWidget.prototype.revealLinesInCenter = function (startLineNumber, endLineNumber, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this.modifiedEditor.revealLinesInCenter(startLineNumber, endLineNumber, scrollType);\r\n    };\r\n    DiffEditorWidget.prototype.revealLinesInCenterIfOutsideViewport = function (startLineNumber, endLineNumber, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this.modifiedEditor.revealLinesInCenterIfOutsideViewport(startLineNumber, endLineNumber, scrollType);\r\n    };\r\n    DiffEditorWidget.prototype.revealRange = function (range, scrollType, revealVerticalInCenter, revealHorizontal) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        if (revealVerticalInCenter === void 0) { revealVerticalInCenter = false; }\r\n        if (revealHorizontal === void 0) { revealHorizontal = true; }\r\n        this.modifiedEditor.revealRange(range, scrollType, revealVerticalInCenter, revealHorizontal);\r\n    };\r\n    DiffEditorWidget.prototype.revealRangeInCenter = function (range, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this.modifiedEditor.revealRangeInCenter(range, scrollType);\r\n    };\r\n    DiffEditorWidget.prototype.revealRangeInCenterIfOutsideViewport = function (range, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this.modifiedEditor.revealRangeInCenterIfOutsideViewport(range, scrollType);\r\n    };\r\n    DiffEditorWidget.prototype.revealRangeAtTop = function (range, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this.modifiedEditor.revealRangeAtTop(range, scrollType);\r\n    };\r\n    DiffEditorWidget.prototype.getSupportedActions = function () {\r\n        return this.modifiedEditor.getSupportedActions();\r\n    };\r\n    DiffEditorWidget.prototype.saveViewState = function () {\r\n        var originalViewState = this.originalEditor.saveViewState();\r\n        var modifiedViewState = this.modifiedEditor.saveViewState();\r\n        return {\r\n            original: originalViewState,\r\n            modified: modifiedViewState\r\n        };\r\n    };\r\n    DiffEditorWidget.prototype.restoreViewState = function (s) {\r\n        if (s.original && s.modified) {\r\n            var diffEditorState = s;\r\n            this.originalEditor.restoreViewState(diffEditorState.original);\r\n            this.modifiedEditor.restoreViewState(diffEditorState.modified);\r\n        }\r\n    };\r\n    DiffEditorWidget.prototype.layout = function (dimension) {\r\n        this._elementSizeObserver.observe(dimension);\r\n    };\r\n    DiffEditorWidget.prototype.focus = function () {\r\n        this.modifiedEditor.focus();\r\n    };\r\n    DiffEditorWidget.prototype.hasTextFocus = function () {\r\n        return this.originalEditor.hasTextFocus() || this.modifiedEditor.hasTextFocus();\r\n    };\r\n    DiffEditorWidget.prototype.trigger = function (source, handlerId, payload) {\r\n        this.modifiedEditor.trigger(source, handlerId, payload);\r\n    };\r\n    DiffEditorWidget.prototype.changeDecorations = function (callback) {\r\n        return this.modifiedEditor.changeDecorations(callback);\r\n    };\r\n    //------------ end IDiffEditor methods\r\n    //------------ begin layouting methods\r\n    DiffEditorWidget.prototype._onDidContainerSizeChanged = function () {\r\n        this._doLayout();\r\n    };\r\n    DiffEditorWidget.prototype._getReviewHeight = function () {\r\n        return this._reviewPane.isVisible() ? this._elementSizeObserver.getHeight() : 0;\r\n    };\r\n    DiffEditorWidget.prototype._layoutOverviewRulers = function () {\r\n        if (!this._originalOverviewRuler || !this._modifiedOverviewRuler) {\r\n            return;\r\n        }\r\n        var height = this._elementSizeObserver.getHeight();\r\n        var reviewHeight = this._getReviewHeight();\r\n        var freeSpace = DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH - 2 * DiffEditorWidget.ONE_OVERVIEW_WIDTH;\r\n        var layoutInfo = this.modifiedEditor.getLayoutInfo();\r\n        if (layoutInfo) {\r\n            this._originalOverviewRuler.setLayout({\r\n                top: 0,\r\n                width: DiffEditorWidget.ONE_OVERVIEW_WIDTH,\r\n                right: freeSpace + DiffEditorWidget.ONE_OVERVIEW_WIDTH,\r\n                height: (height - reviewHeight)\r\n            });\r\n            this._modifiedOverviewRuler.setLayout({\r\n                top: 0,\r\n                right: 0,\r\n                width: DiffEditorWidget.ONE_OVERVIEW_WIDTH,\r\n                height: (height - reviewHeight)\r\n            });\r\n        }\r\n    };\r\n    //------------ end layouting methods\r\n    DiffEditorWidget.prototype._onViewZonesChanged = function () {\r\n        if (this._currentlyChangingViewZones) {\r\n            return;\r\n        }\r\n        this._updateDecorationsRunner.schedule();\r\n    };\r\n    DiffEditorWidget.prototype._beginUpdateDecorationsSoon = function () {\r\n        var _this = this;\r\n        // Clear previous timeout if necessary\r\n        if (this._beginUpdateDecorationsTimeout !== -1) {\r\n            window.clearTimeout(this._beginUpdateDecorationsTimeout);\r\n            this._beginUpdateDecorationsTimeout = -1;\r\n        }\r\n        this._beginUpdateDecorationsTimeout = window.setTimeout(function () { return _this._beginUpdateDecorations(); }, DiffEditorWidget.UPDATE_DIFF_DECORATIONS_DELAY);\r\n    };\r\n    DiffEditorWidget._equals = function (a, b) {\r\n        if (!a && !b) {\r\n            return true;\r\n        }\r\n        if (!a || !b) {\r\n            return false;\r\n        }\r\n        return (a.toString() === b.toString());\r\n    };\r\n    DiffEditorWidget.prototype._beginUpdateDecorations = function () {\r\n        var _this = this;\r\n        this._beginUpdateDecorationsTimeout = -1;\r\n        var currentOriginalModel = this.originalEditor.getModel();\r\n        var currentModifiedModel = this.modifiedEditor.getModel();\r\n        if (!currentOriginalModel || !currentModifiedModel) {\r\n            return;\r\n        }\r\n        // Prevent old diff requests to come if a new request has been initiated\r\n        // The best method would be to call cancel on the Promise, but this is not\r\n        // yet supported, so using tokens for now.\r\n        this._diffComputationToken++;\r\n        var currentToken = this._diffComputationToken;\r\n        this._setState(1 /* ComputingDiff */);\r\n        if (!this._editorWorkerService.canComputeDiff(currentOriginalModel.uri, currentModifiedModel.uri)) {\r\n            if (!DiffEditorWidget._equals(currentOriginalModel.uri, this._lastOriginalWarning)\r\n                || !DiffEditorWidget._equals(currentModifiedModel.uri, this._lastModifiedWarning)) {\r\n                this._lastOriginalWarning = currentOriginalModel.uri;\r\n                this._lastModifiedWarning = currentModifiedModel.uri;\r\n                this._notificationService.warn(nls.localize(\"diff.tooLarge\", \"Cannot compare files because one file is too large.\"));\r\n            }\r\n            return;\r\n        }\r\n        this._editorWorkerService.computeDiff(currentOriginalModel.uri, currentModifiedModel.uri, this._ignoreTrimWhitespace, this._maxComputationTime).then(function (result) {\r\n            if (currentToken === _this._diffComputationToken\r\n                && currentOriginalModel === _this.originalEditor.getModel()\r\n                && currentModifiedModel === _this.modifiedEditor.getModel()) {\r\n                _this._setState(2 /* DiffComputed */);\r\n                _this._diffComputationResult = result;\r\n                _this._updateDecorationsRunner.schedule();\r\n                _this._onDidUpdateDiff.fire();\r\n            }\r\n        }, function (error) {\r\n            if (currentToken === _this._diffComputationToken\r\n                && currentOriginalModel === _this.originalEditor.getModel()\r\n                && currentModifiedModel === _this.modifiedEditor.getModel()) {\r\n                _this._setState(2 /* DiffComputed */);\r\n                _this._diffComputationResult = null;\r\n                _this._updateDecorationsRunner.schedule();\r\n            }\r\n        });\r\n    };\r\n    DiffEditorWidget.prototype._cleanViewZonesAndDecorations = function () {\r\n        this._originalEditorState.clean(this.originalEditor);\r\n        this._modifiedEditorState.clean(this.modifiedEditor);\r\n    };\r\n    DiffEditorWidget.prototype._updateDecorations = function () {\r\n        if (!this.originalEditor.getModel() || !this.modifiedEditor.getModel() || !this._originalOverviewRuler || !this._modifiedOverviewRuler) {\r\n            return;\r\n        }\r\n        var lineChanges = (this._diffComputationResult ? this._diffComputationResult.changes : []);\r\n        var foreignOriginal = this._originalEditorState.getForeignViewZones(this.originalEditor.getWhitespaces());\r\n        var foreignModified = this._modifiedEditorState.getForeignViewZones(this.modifiedEditor.getWhitespaces());\r\n        var diffDecorations = this._strategy.getEditorsDiffDecorations(lineChanges, this._ignoreTrimWhitespace, this._renderIndicators, foreignOriginal, foreignModified, this.originalEditor, this.modifiedEditor);\r\n        try {\r\n            this._currentlyChangingViewZones = true;\r\n            this._originalEditorState.apply(this.originalEditor, this._originalOverviewRuler, diffDecorations.original, false);\r\n            this._modifiedEditorState.apply(this.modifiedEditor, this._modifiedOverviewRuler, diffDecorations.modified, true);\r\n        }\r\n        finally {\r\n            this._currentlyChangingViewZones = false;\r\n        }\r\n    };\r\n    DiffEditorWidget.prototype._adjustOptionsForSubEditor = function (options) {\r\n        var clonedOptions = objects.deepClone(options || {});\r\n        clonedOptions.inDiffEditor = true;\r\n        clonedOptions.wordWrap = 'off';\r\n        clonedOptions.wordWrapMinified = false;\r\n        clonedOptions.automaticLayout = false;\r\n        clonedOptions.scrollbar = clonedOptions.scrollbar || {};\r\n        clonedOptions.scrollbar.vertical = 'visible';\r\n        clonedOptions.folding = false;\r\n        clonedOptions.codeLens = false;\r\n        clonedOptions.fixedOverflowWidgets = true;\r\n        // clonedOptions.lineDecorationsWidth = '2ch';\r\n        if (!clonedOptions.minimap) {\r\n            clonedOptions.minimap = {};\r\n        }\r\n        clonedOptions.minimap.enabled = false;\r\n        return clonedOptions;\r\n    };\r\n    DiffEditorWidget.prototype._adjustOptionsForLeftHandSide = function (options, isEditable) {\r\n        var result = this._adjustOptionsForSubEditor(options);\r\n        result.readOnly = !isEditable;\r\n        result.extraEditorClassName = 'original-in-monaco-diff-editor';\r\n        return result;\r\n    };\r\n    DiffEditorWidget.prototype._adjustOptionsForRightHandSide = function (options) {\r\n        var result = this._adjustOptionsForSubEditor(options);\r\n        result.revealHorizontalRightPadding = EditorOptions.revealHorizontalRightPadding.defaultValue + DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH;\r\n        result.scrollbar.verticalHasArrows = false;\r\n        result.extraEditorClassName = 'modified-in-monaco-diff-editor';\r\n        return result;\r\n    };\r\n    DiffEditorWidget.prototype.doLayout = function () {\r\n        this._elementSizeObserver.observe();\r\n        this._doLayout();\r\n    };\r\n    DiffEditorWidget.prototype._doLayout = function () {\r\n        var width = this._elementSizeObserver.getWidth();\r\n        var height = this._elementSizeObserver.getHeight();\r\n        var reviewHeight = this._getReviewHeight();\r\n        var splitPoint = this._strategy.layout();\r\n        this._originalDomNode.style.width = splitPoint + 'px';\r\n        this._originalDomNode.style.left = '0px';\r\n        this._modifiedDomNode.style.width = (width - splitPoint) + 'px';\r\n        this._modifiedDomNode.style.left = splitPoint + 'px';\r\n        this._overviewDomElement.style.top = '0px';\r\n        this._overviewDomElement.style.height = (height - reviewHeight) + 'px';\r\n        this._overviewDomElement.style.width = DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH + 'px';\r\n        this._overviewDomElement.style.left = (width - DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH) + 'px';\r\n        this._overviewViewportDomElement.setWidth(DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH);\r\n        this._overviewViewportDomElement.setHeight(30);\r\n        this.originalEditor.layout({ width: splitPoint, height: (height - reviewHeight) });\r\n        this.modifiedEditor.layout({ width: width - splitPoint - DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH, height: (height - reviewHeight) });\r\n        if (this._originalOverviewRuler || this._modifiedOverviewRuler) {\r\n            this._layoutOverviewRulers();\r\n        }\r\n        this._reviewPane.layout(height - reviewHeight, width, reviewHeight);\r\n        this._layoutOverviewViewport();\r\n    };\r\n    DiffEditorWidget.prototype._layoutOverviewViewport = function () {\r\n        var layout = this._computeOverviewViewport();\r\n        if (!layout) {\r\n            this._overviewViewportDomElement.setTop(0);\r\n            this._overviewViewportDomElement.setHeight(0);\r\n        }\r\n        else {\r\n            this._overviewViewportDomElement.setTop(layout.top);\r\n            this._overviewViewportDomElement.setHeight(layout.height);\r\n        }\r\n    };\r\n    DiffEditorWidget.prototype._computeOverviewViewport = function () {\r\n        var layoutInfo = this.modifiedEditor.getLayoutInfo();\r\n        if (!layoutInfo) {\r\n            return null;\r\n        }\r\n        var scrollTop = this.modifiedEditor.getScrollTop();\r\n        var scrollHeight = this.modifiedEditor.getScrollHeight();\r\n        var computedAvailableSize = Math.max(0, layoutInfo.height);\r\n        var computedRepresentableSize = Math.max(0, computedAvailableSize - 2 * 0);\r\n        var computedRatio = scrollHeight > 0 ? (computedRepresentableSize / scrollHeight) : 0;\r\n        var computedSliderSize = Math.max(0, Math.floor(layoutInfo.height * computedRatio));\r\n        var computedSliderPosition = Math.floor(scrollTop * computedRatio);\r\n        return {\r\n            height: computedSliderSize,\r\n            top: computedSliderPosition\r\n        };\r\n    };\r\n    DiffEditorWidget.prototype._createDataSource = function () {\r\n        var _this = this;\r\n        return {\r\n            getWidth: function () {\r\n                return _this._elementSizeObserver.getWidth();\r\n            },\r\n            getHeight: function () {\r\n                return (_this._elementSizeObserver.getHeight() - _this._getReviewHeight());\r\n            },\r\n            getContainerDomNode: function () {\r\n                return _this._containerDomElement;\r\n            },\r\n            relayoutEditors: function () {\r\n                _this._doLayout();\r\n            },\r\n            getOriginalEditor: function () {\r\n                return _this.originalEditor;\r\n            },\r\n            getModifiedEditor: function () {\r\n                return _this.modifiedEditor;\r\n            }\r\n        };\r\n    };\r\n    DiffEditorWidget.prototype._setStrategy = function (newStrategy) {\r\n        if (this._strategy) {\r\n            this._strategy.dispose();\r\n        }\r\n        this._strategy = newStrategy;\r\n        newStrategy.applyColors(this._themeService.getTheme());\r\n        if (this._diffComputationResult) {\r\n            this._updateDecorations();\r\n        }\r\n        // Just do a layout, the strategy might need it\r\n        this._doLayout();\r\n    };\r\n    DiffEditorWidget.prototype._getLineChangeAtOrBeforeLineNumber = function (lineNumber, startLineNumberExtractor) {\r\n        var lineChanges = (this._diffComputationResult ? this._diffComputationResult.changes : []);\r\n        if (lineChanges.length === 0 || lineNumber < startLineNumberExtractor(lineChanges[0])) {\r\n            // There are no changes or `lineNumber` is before the first change\r\n            return null;\r\n        }\r\n        var min = 0, max = lineChanges.length - 1;\r\n        while (min < max) {\r\n            var mid = Math.floor((min + max) / 2);\r\n            var midStart = startLineNumberExtractor(lineChanges[mid]);\r\n            var midEnd = (mid + 1 <= max ? startLineNumberExtractor(lineChanges[mid + 1]) : 1073741824 /* MAX_SAFE_SMALL_INTEGER */);\r\n            if (lineNumber < midStart) {\r\n                max = mid - 1;\r\n            }\r\n            else if (lineNumber >= midEnd) {\r\n                min = mid + 1;\r\n            }\r\n            else {\r\n                // HIT!\r\n                min = mid;\r\n                max = mid;\r\n            }\r\n        }\r\n        return lineChanges[min];\r\n    };\r\n    DiffEditorWidget.prototype._getEquivalentLineForOriginalLineNumber = function (lineNumber) {\r\n        var lineChange = this._getLineChangeAtOrBeforeLineNumber(lineNumber, function (lineChange) { return lineChange.originalStartLineNumber; });\r\n        if (!lineChange) {\r\n            return lineNumber;\r\n        }\r\n        var originalEquivalentLineNumber = lineChange.originalStartLineNumber + (lineChange.originalEndLineNumber > 0 ? -1 : 0);\r\n        var modifiedEquivalentLineNumber = lineChange.modifiedStartLineNumber + (lineChange.modifiedEndLineNumber > 0 ? -1 : 0);\r\n        var lineChangeOriginalLength = (lineChange.originalEndLineNumber > 0 ? (lineChange.originalEndLineNumber - lineChange.originalStartLineNumber + 1) : 0);\r\n        var lineChangeModifiedLength = (lineChange.modifiedEndLineNumber > 0 ? (lineChange.modifiedEndLineNumber - lineChange.modifiedStartLineNumber + 1) : 0);\r\n        var delta = lineNumber - originalEquivalentLineNumber;\r\n        if (delta <= lineChangeOriginalLength) {\r\n            return modifiedEquivalentLineNumber + Math.min(delta, lineChangeModifiedLength);\r\n        }\r\n        return modifiedEquivalentLineNumber + lineChangeModifiedLength - lineChangeOriginalLength + delta;\r\n    };\r\n    DiffEditorWidget.prototype._getEquivalentLineForModifiedLineNumber = function (lineNumber) {\r\n        var lineChange = this._getLineChangeAtOrBeforeLineNumber(lineNumber, function (lineChange) { return lineChange.modifiedStartLineNumber; });\r\n        if (!lineChange) {\r\n            return lineNumber;\r\n        }\r\n        var originalEquivalentLineNumber = lineChange.originalStartLineNumber + (lineChange.originalEndLineNumber > 0 ? -1 : 0);\r\n        var modifiedEquivalentLineNumber = lineChange.modifiedStartLineNumber + (lineChange.modifiedEndLineNumber > 0 ? -1 : 0);\r\n        var lineChangeOriginalLength = (lineChange.originalEndLineNumber > 0 ? (lineChange.originalEndLineNumber - lineChange.originalStartLineNumber + 1) : 0);\r\n        var lineChangeModifiedLength = (lineChange.modifiedEndLineNumber > 0 ? (lineChange.modifiedEndLineNumber - lineChange.modifiedStartLineNumber + 1) : 0);\r\n        var delta = lineNumber - modifiedEquivalentLineNumber;\r\n        if (delta <= lineChangeModifiedLength) {\r\n            return originalEquivalentLineNumber + Math.min(delta, lineChangeOriginalLength);\r\n        }\r\n        return originalEquivalentLineNumber + lineChangeOriginalLength - lineChangeModifiedLength + delta;\r\n    };\r\n    DiffEditorWidget.prototype.getDiffLineInformationForOriginal = function (lineNumber) {\r\n        if (!this._diffComputationResult) {\r\n            // Cannot answer that which I don't know\r\n            return null;\r\n        }\r\n        return {\r\n            equivalentLineNumber: this._getEquivalentLineForOriginalLineNumber(lineNumber)\r\n        };\r\n    };\r\n    DiffEditorWidget.prototype.getDiffLineInformationForModified = function (lineNumber) {\r\n        if (!this._diffComputationResult) {\r\n            // Cannot answer that which I don't know\r\n            return null;\r\n        }\r\n        return {\r\n            equivalentLineNumber: this._getEquivalentLineForModifiedLineNumber(lineNumber)\r\n        };\r\n    };\r\n    DiffEditorWidget.ONE_OVERVIEW_WIDTH = 15;\r\n    DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH = 30;\r\n    DiffEditorWidget.UPDATE_DIFF_DECORATIONS_DELAY = 200; // ms\r\n    DiffEditorWidget = __decorate([\r\n        __param(3, IEditorWorkerService),\r\n        __param(4, IContextKeyService),\r\n        __param(5, IInstantiationService),\r\n        __param(6, ICodeEditorService),\r\n        __param(7, IThemeService),\r\n        __param(8, INotificationService),\r\n        __param(9, IContextMenuService),\r\n        __param(10, IEditorProgressService)\r\n    ], DiffEditorWidget);\r\n    return DiffEditorWidget;\r\n}(Disposable));\r\nexport { DiffEditorWidget };\r\nvar DiffEditorWidgetStyle = /** @class */ (function (_super) {\r\n    __extends(DiffEditorWidgetStyle, _super);\r\n    function DiffEditorWidgetStyle(dataSource) {\r\n        var _this = _super.call(this) || this;\r\n        _this._dataSource = dataSource;\r\n        _this._insertColor = null;\r\n        _this._removeColor = null;\r\n        return _this;\r\n    }\r\n    DiffEditorWidgetStyle.prototype.applyColors = function (theme) {\r\n        var newInsertColor = (theme.getColor(diffInserted) || defaultInsertColor).transparent(2);\r\n        var newRemoveColor = (theme.getColor(diffRemoved) || defaultRemoveColor).transparent(2);\r\n        var hasChanges = !newInsertColor.equals(this._insertColor) || !newRemoveColor.equals(this._removeColor);\r\n        this._insertColor = newInsertColor;\r\n        this._removeColor = newRemoveColor;\r\n        return hasChanges;\r\n    };\r\n    DiffEditorWidgetStyle.prototype.getEditorsDiffDecorations = function (lineChanges, ignoreTrimWhitespace, renderIndicators, originalWhitespaces, modifiedWhitespaces, originalEditor, modifiedEditor) {\r\n        // Get view zones\r\n        modifiedWhitespaces = modifiedWhitespaces.sort(function (a, b) {\r\n            return a.afterLineNumber - b.afterLineNumber;\r\n        });\r\n        originalWhitespaces = originalWhitespaces.sort(function (a, b) {\r\n            return a.afterLineNumber - b.afterLineNumber;\r\n        });\r\n        var zones = this._getViewZones(lineChanges, originalWhitespaces, modifiedWhitespaces, originalEditor, modifiedEditor, renderIndicators);\r\n        // Get decorations & overview ruler zones\r\n        var originalDecorations = this._getOriginalEditorDecorations(lineChanges, ignoreTrimWhitespace, renderIndicators, originalEditor, modifiedEditor);\r\n        var modifiedDecorations = this._getModifiedEditorDecorations(lineChanges, ignoreTrimWhitespace, renderIndicators, originalEditor, modifiedEditor);\r\n        return {\r\n            original: {\r\n                decorations: originalDecorations.decorations,\r\n                overviewZones: originalDecorations.overviewZones,\r\n                zones: zones.original\r\n            },\r\n            modified: {\r\n                decorations: modifiedDecorations.decorations,\r\n                overviewZones: modifiedDecorations.overviewZones,\r\n                zones: zones.modified\r\n            }\r\n        };\r\n    };\r\n    return DiffEditorWidgetStyle;\r\n}(Disposable));\r\nvar ForeignViewZonesIterator = /** @class */ (function () {\r\n    function ForeignViewZonesIterator(source) {\r\n        this._source = source;\r\n        this._index = -1;\r\n        this.current = null;\r\n        this.advance();\r\n    }\r\n    ForeignViewZonesIterator.prototype.advance = function () {\r\n        this._index++;\r\n        if (this._index < this._source.length) {\r\n            this.current = this._source[this._index];\r\n        }\r\n        else {\r\n            this.current = null;\r\n        }\r\n    };\r\n    return ForeignViewZonesIterator;\r\n}());\r\nvar ViewZonesComputer = /** @class */ (function () {\r\n    function ViewZonesComputer(lineChanges, originalForeignVZ, originalLineHeight, modifiedForeignVZ, modifiedLineHeight) {\r\n        this.lineChanges = lineChanges;\r\n        this.originalForeignVZ = originalForeignVZ;\r\n        this.originalLineHeight = originalLineHeight;\r\n        this.modifiedForeignVZ = modifiedForeignVZ;\r\n        this.modifiedLineHeight = modifiedLineHeight;\r\n    }\r\n    ViewZonesComputer.prototype.getViewZones = function () {\r\n        var result = {\r\n            original: [],\r\n            modified: []\r\n        };\r\n        var lineChangeModifiedLength = 0;\r\n        var lineChangeOriginalLength = 0;\r\n        var originalEquivalentLineNumber = 0;\r\n        var modifiedEquivalentLineNumber = 0;\r\n        var originalEndEquivalentLineNumber = 0;\r\n        var modifiedEndEquivalentLineNumber = 0;\r\n        var sortMyViewZones = function (a, b) {\r\n            return a.afterLineNumber - b.afterLineNumber;\r\n        };\r\n        var addAndCombineIfPossible = function (destination, item) {\r\n            if (item.domNode === null && destination.length > 0) {\r\n                var lastItem = destination[destination.length - 1];\r\n                if (lastItem.afterLineNumber === item.afterLineNumber && lastItem.domNode === null) {\r\n                    lastItem.heightInLines += item.heightInLines;\r\n                    return;\r\n                }\r\n            }\r\n            destination.push(item);\r\n        };\r\n        var modifiedForeignVZ = new ForeignViewZonesIterator(this.modifiedForeignVZ);\r\n        var originalForeignVZ = new ForeignViewZonesIterator(this.originalForeignVZ);\r\n        // In order to include foreign view zones after the last line change, the for loop will iterate once more after the end of the `lineChanges` array\r\n        for (var i = 0, length_5 = this.lineChanges.length; i <= length_5; i++) {\r\n            var lineChange = (i < length_5 ? this.lineChanges[i] : null);\r\n            if (lineChange !== null) {\r\n                originalEquivalentLineNumber = lineChange.originalStartLineNumber + (lineChange.originalEndLineNumber > 0 ? -1 : 0);\r\n                modifiedEquivalentLineNumber = lineChange.modifiedStartLineNumber + (lineChange.modifiedEndLineNumber > 0 ? -1 : 0);\r\n                lineChangeOriginalLength = (lineChange.originalEndLineNumber > 0 ? (lineChange.originalEndLineNumber - lineChange.originalStartLineNumber + 1) : 0);\r\n                lineChangeModifiedLength = (lineChange.modifiedEndLineNumber > 0 ? (lineChange.modifiedEndLineNumber - lineChange.modifiedStartLineNumber + 1) : 0);\r\n                originalEndEquivalentLineNumber = Math.max(lineChange.originalStartLineNumber, lineChange.originalEndLineNumber);\r\n                modifiedEndEquivalentLineNumber = Math.max(lineChange.modifiedStartLineNumber, lineChange.modifiedEndLineNumber);\r\n            }\r\n            else {\r\n                // Increase to very large value to get the producing tests of foreign view zones running\r\n                originalEquivalentLineNumber += 10000000 + lineChangeOriginalLength;\r\n                modifiedEquivalentLineNumber += 10000000 + lineChangeModifiedLength;\r\n                originalEndEquivalentLineNumber = originalEquivalentLineNumber;\r\n                modifiedEndEquivalentLineNumber = modifiedEquivalentLineNumber;\r\n            }\r\n            // Each step produces view zones, and after producing them, we try to cancel them out, to avoid empty-empty view zone cases\r\n            var stepOriginal = [];\r\n            var stepModified = [];\r\n            // ---------------------------- PRODUCE VIEW ZONES\r\n            // [PRODUCE] View zone(s) in original-side due to foreign view zone(s) in modified-side\r\n            while (modifiedForeignVZ.current && modifiedForeignVZ.current.afterLineNumber <= modifiedEndEquivalentLineNumber) {\r\n                var viewZoneLineNumber = void 0;\r\n                if (modifiedForeignVZ.current.afterLineNumber <= modifiedEquivalentLineNumber) {\r\n                    viewZoneLineNumber = originalEquivalentLineNumber - modifiedEquivalentLineNumber + modifiedForeignVZ.current.afterLineNumber;\r\n                }\r\n                else {\r\n                    viewZoneLineNumber = originalEndEquivalentLineNumber;\r\n                }\r\n                var marginDomNode = null;\r\n                if (lineChange && lineChange.modifiedStartLineNumber <= modifiedForeignVZ.current.afterLineNumber && modifiedForeignVZ.current.afterLineNumber <= lineChange.modifiedEndLineNumber) {\r\n                    marginDomNode = this._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion();\r\n                }\r\n                stepOriginal.push({\r\n                    afterLineNumber: viewZoneLineNumber,\r\n                    heightInLines: modifiedForeignVZ.current.height / this.modifiedLineHeight,\r\n                    domNode: null,\r\n                    marginDomNode: marginDomNode\r\n                });\r\n                modifiedForeignVZ.advance();\r\n            }\r\n            // [PRODUCE] View zone(s) in modified-side due to foreign view zone(s) in original-side\r\n            while (originalForeignVZ.current && originalForeignVZ.current.afterLineNumber <= originalEndEquivalentLineNumber) {\r\n                var viewZoneLineNumber = void 0;\r\n                if (originalForeignVZ.current.afterLineNumber <= originalEquivalentLineNumber) {\r\n                    viewZoneLineNumber = modifiedEquivalentLineNumber - originalEquivalentLineNumber + originalForeignVZ.current.afterLineNumber;\r\n                }\r\n                else {\r\n                    viewZoneLineNumber = modifiedEndEquivalentLineNumber;\r\n                }\r\n                stepModified.push({\r\n                    afterLineNumber: viewZoneLineNumber,\r\n                    heightInLines: originalForeignVZ.current.height / this.originalLineHeight,\r\n                    domNode: null\r\n                });\r\n                originalForeignVZ.advance();\r\n            }\r\n            if (lineChange !== null && isChangeOrInsert(lineChange)) {\r\n                var r = this._produceOriginalFromDiff(lineChange, lineChangeOriginalLength, lineChangeModifiedLength);\r\n                if (r) {\r\n                    stepOriginal.push(r);\r\n                }\r\n            }\r\n            if (lineChange !== null && isChangeOrDelete(lineChange)) {\r\n                var r = this._produceModifiedFromDiff(lineChange, lineChangeOriginalLength, lineChangeModifiedLength);\r\n                if (r) {\r\n                    stepModified.push(r);\r\n                }\r\n            }\r\n            // ---------------------------- END PRODUCE VIEW ZONES\r\n            // ---------------------------- EMIT MINIMAL VIEW ZONES\r\n            // [CANCEL & EMIT] Try to cancel view zones out\r\n            var stepOriginalIndex = 0;\r\n            var stepModifiedIndex = 0;\r\n            stepOriginal = stepOriginal.sort(sortMyViewZones);\r\n            stepModified = stepModified.sort(sortMyViewZones);\r\n            while (stepOriginalIndex < stepOriginal.length && stepModifiedIndex < stepModified.length) {\r\n                var original = stepOriginal[stepOriginalIndex];\r\n                var modified = stepModified[stepModifiedIndex];\r\n                var originalDelta = original.afterLineNumber - originalEquivalentLineNumber;\r\n                var modifiedDelta = modified.afterLineNumber - modifiedEquivalentLineNumber;\r\n                if (originalDelta < modifiedDelta) {\r\n                    addAndCombineIfPossible(result.original, original);\r\n                    stepOriginalIndex++;\r\n                }\r\n                else if (modifiedDelta < originalDelta) {\r\n                    addAndCombineIfPossible(result.modified, modified);\r\n                    stepModifiedIndex++;\r\n                }\r\n                else if (original.shouldNotShrink) {\r\n                    addAndCombineIfPossible(result.original, original);\r\n                    stepOriginalIndex++;\r\n                }\r\n                else if (modified.shouldNotShrink) {\r\n                    addAndCombineIfPossible(result.modified, modified);\r\n                    stepModifiedIndex++;\r\n                }\r\n                else {\r\n                    if (original.heightInLines >= modified.heightInLines) {\r\n                        // modified view zone gets removed\r\n                        original.heightInLines -= modified.heightInLines;\r\n                        stepModifiedIndex++;\r\n                    }\r\n                    else {\r\n                        // original view zone gets removed\r\n                        modified.heightInLines -= original.heightInLines;\r\n                        stepOriginalIndex++;\r\n                    }\r\n                }\r\n            }\r\n            // [EMIT] Remaining original view zones\r\n            while (stepOriginalIndex < stepOriginal.length) {\r\n                addAndCombineIfPossible(result.original, stepOriginal[stepOriginalIndex]);\r\n                stepOriginalIndex++;\r\n            }\r\n            // [EMIT] Remaining modified view zones\r\n            while (stepModifiedIndex < stepModified.length) {\r\n                addAndCombineIfPossible(result.modified, stepModified[stepModifiedIndex]);\r\n                stepModifiedIndex++;\r\n            }\r\n            // ---------------------------- END EMIT MINIMAL VIEW ZONES\r\n        }\r\n        return {\r\n            original: ViewZonesComputer._ensureDomNodes(result.original),\r\n            modified: ViewZonesComputer._ensureDomNodes(result.modified),\r\n        };\r\n    };\r\n    ViewZonesComputer._ensureDomNodes = function (zones) {\r\n        return zones.map(function (z) {\r\n            if (!z.domNode) {\r\n                z.domNode = createFakeLinesDiv();\r\n            }\r\n            return z;\r\n        });\r\n    };\r\n    return ViewZonesComputer;\r\n}());\r\nfunction createDecoration(startLineNumber, startColumn, endLineNumber, endColumn, options) {\r\n    return {\r\n        range: new Range(startLineNumber, startColumn, endLineNumber, endColumn),\r\n        options: options\r\n    };\r\n}\r\nvar DECORATIONS = {\r\n    charDelete: ModelDecorationOptions.register({\r\n        className: 'char-delete'\r\n    }),\r\n    charDeleteWholeLine: ModelDecorationOptions.register({\r\n        className: 'char-delete',\r\n        isWholeLine: true\r\n    }),\r\n    charInsert: ModelDecorationOptions.register({\r\n        className: 'char-insert'\r\n    }),\r\n    charInsertWholeLine: ModelDecorationOptions.register({\r\n        className: 'char-insert',\r\n        isWholeLine: true\r\n    }),\r\n    lineInsert: ModelDecorationOptions.register({\r\n        className: 'line-insert',\r\n        marginClassName: 'line-insert',\r\n        isWholeLine: true\r\n    }),\r\n    lineInsertWithSign: ModelDecorationOptions.register({\r\n        className: 'line-insert',\r\n        linesDecorationsClassName: 'insert-sign codicon codicon-add',\r\n        marginClassName: 'line-insert',\r\n        isWholeLine: true\r\n    }),\r\n    lineDelete: ModelDecorationOptions.register({\r\n        className: 'line-delete',\r\n        marginClassName: 'line-delete',\r\n        isWholeLine: true\r\n    }),\r\n    lineDeleteWithSign: ModelDecorationOptions.register({\r\n        className: 'line-delete',\r\n        linesDecorationsClassName: 'delete-sign codicon codicon-remove',\r\n        marginClassName: 'line-delete',\r\n        isWholeLine: true\r\n    }),\r\n    lineDeleteMargin: ModelDecorationOptions.register({\r\n        marginClassName: 'line-delete',\r\n    })\r\n};\r\nvar DiffEditorWidgetSideBySide = /** @class */ (function (_super) {\r\n    __extends(DiffEditorWidgetSideBySide, _super);\r\n    function DiffEditorWidgetSideBySide(dataSource, enableSplitViewResizing) {\r\n        var _this = _super.call(this, dataSource) || this;\r\n        _this._disableSash = (enableSplitViewResizing === false);\r\n        _this._sashRatio = null;\r\n        _this._sashPosition = null;\r\n        _this._startSashPosition = null;\r\n        _this._sash = _this._register(new Sash(_this._dataSource.getContainerDomNode(), _this));\r\n        if (_this._disableSash) {\r\n            _this._sash.state = 0 /* Disabled */;\r\n        }\r\n        _this._sash.onDidStart(function () { return _this.onSashDragStart(); });\r\n        _this._sash.onDidChange(function (e) { return _this.onSashDrag(e); });\r\n        _this._sash.onDidEnd(function () { return _this.onSashDragEnd(); });\r\n        _this._sash.onDidReset(function () { return _this.onSashReset(); });\r\n        return _this;\r\n    }\r\n    DiffEditorWidgetSideBySide.prototype.setEnableSplitViewResizing = function (enableSplitViewResizing) {\r\n        var newDisableSash = (enableSplitViewResizing === false);\r\n        if (this._disableSash !== newDisableSash) {\r\n            this._disableSash = newDisableSash;\r\n            this._sash.state = this._disableSash ? 0 /* Disabled */ : 3 /* Enabled */;\r\n        }\r\n    };\r\n    DiffEditorWidgetSideBySide.prototype.layout = function (sashRatio) {\r\n        if (sashRatio === void 0) { sashRatio = this._sashRatio; }\r\n        var w = this._dataSource.getWidth();\r\n        var contentWidth = w - DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH;\r\n        var sashPosition = Math.floor((sashRatio || 0.5) * contentWidth);\r\n        var midPoint = Math.floor(0.5 * contentWidth);\r\n        sashPosition = this._disableSash ? midPoint : sashPosition || midPoint;\r\n        if (contentWidth > DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH * 2) {\r\n            if (sashPosition < DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH) {\r\n                sashPosition = DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH;\r\n            }\r\n            if (sashPosition > contentWidth - DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH) {\r\n                sashPosition = contentWidth - DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH;\r\n            }\r\n        }\r\n        else {\r\n            sashPosition = midPoint;\r\n        }\r\n        if (this._sashPosition !== sashPosition) {\r\n            this._sashPosition = sashPosition;\r\n            this._sash.layout();\r\n        }\r\n        return this._sashPosition;\r\n    };\r\n    DiffEditorWidgetSideBySide.prototype.onSashDragStart = function () {\r\n        this._startSashPosition = this._sashPosition;\r\n    };\r\n    DiffEditorWidgetSideBySide.prototype.onSashDrag = function (e) {\r\n        var w = this._dataSource.getWidth();\r\n        var contentWidth = w - DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH;\r\n        var sashPosition = this.layout((this._startSashPosition + (e.currentX - e.startX)) / contentWidth);\r\n        this._sashRatio = sashPosition / contentWidth;\r\n        this._dataSource.relayoutEditors();\r\n    };\r\n    DiffEditorWidgetSideBySide.prototype.onSashDragEnd = function () {\r\n        this._sash.layout();\r\n    };\r\n    DiffEditorWidgetSideBySide.prototype.onSashReset = function () {\r\n        this._sashRatio = 0.5;\r\n        this._dataSource.relayoutEditors();\r\n        this._sash.layout();\r\n    };\r\n    DiffEditorWidgetSideBySide.prototype.getVerticalSashTop = function (sash) {\r\n        return 0;\r\n    };\r\n    DiffEditorWidgetSideBySide.prototype.getVerticalSashLeft = function (sash) {\r\n        return this._sashPosition;\r\n    };\r\n    DiffEditorWidgetSideBySide.prototype.getVerticalSashHeight = function (sash) {\r\n        return this._dataSource.getHeight();\r\n    };\r\n    DiffEditorWidgetSideBySide.prototype._getViewZones = function (lineChanges, originalForeignVZ, modifiedForeignVZ, originalEditor, modifiedEditor) {\r\n        var c = new SideBySideViewZonesComputer(lineChanges, originalForeignVZ, originalEditor.getOption(49 /* lineHeight */), modifiedForeignVZ, modifiedEditor.getOption(49 /* lineHeight */));\r\n        return c.getViewZones();\r\n    };\r\n    DiffEditorWidgetSideBySide.prototype._getOriginalEditorDecorations = function (lineChanges, ignoreTrimWhitespace, renderIndicators, originalEditor, modifiedEditor) {\r\n        var overviewZoneColor = String(this._removeColor);\r\n        var result = {\r\n            decorations: [],\r\n            overviewZones: []\r\n        };\r\n        var originalModel = originalEditor.getModel();\r\n        for (var i = 0, length_6 = lineChanges.length; i < length_6; i++) {\r\n            var lineChange = lineChanges[i];\r\n            if (isChangeOrDelete(lineChange)) {\r\n                result.decorations.push({\r\n                    range: new Range(lineChange.originalStartLineNumber, 1, lineChange.originalEndLineNumber, 1073741824 /* MAX_SAFE_SMALL_INTEGER */),\r\n                    options: (renderIndicators ? DECORATIONS.lineDeleteWithSign : DECORATIONS.lineDelete)\r\n                });\r\n                if (!isChangeOrInsert(lineChange) || !lineChange.charChanges) {\r\n                    result.decorations.push(createDecoration(lineChange.originalStartLineNumber, 1, lineChange.originalEndLineNumber, 1073741824 /* MAX_SAFE_SMALL_INTEGER */, DECORATIONS.charDeleteWholeLine));\r\n                }\r\n                result.overviewZones.push(new OverviewRulerZone(lineChange.originalStartLineNumber, lineChange.originalEndLineNumber, overviewZoneColor));\r\n                if (lineChange.charChanges) {\r\n                    for (var j = 0, lengthJ = lineChange.charChanges.length; j < lengthJ; j++) {\r\n                        var charChange = lineChange.charChanges[j];\r\n                        if (isChangeOrDelete(charChange)) {\r\n                            if (ignoreTrimWhitespace) {\r\n                                for (var lineNumber = charChange.originalStartLineNumber; lineNumber <= charChange.originalEndLineNumber; lineNumber++) {\r\n                                    var startColumn = void 0;\r\n                                    var endColumn = void 0;\r\n                                    if (lineNumber === charChange.originalStartLineNumber) {\r\n                                        startColumn = charChange.originalStartColumn;\r\n                                    }\r\n                                    else {\r\n                                        startColumn = originalModel.getLineFirstNonWhitespaceColumn(lineNumber);\r\n                                    }\r\n                                    if (lineNumber === charChange.originalEndLineNumber) {\r\n                                        endColumn = charChange.originalEndColumn;\r\n                                    }\r\n                                    else {\r\n                                        endColumn = originalModel.getLineLastNonWhitespaceColumn(lineNumber);\r\n                                    }\r\n                                    result.decorations.push(createDecoration(lineNumber, startColumn, lineNumber, endColumn, DECORATIONS.charDelete));\r\n                                }\r\n                            }\r\n                            else {\r\n                                result.decorations.push(createDecoration(charChange.originalStartLineNumber, charChange.originalStartColumn, charChange.originalEndLineNumber, charChange.originalEndColumn, DECORATIONS.charDelete));\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    DiffEditorWidgetSideBySide.prototype._getModifiedEditorDecorations = function (lineChanges, ignoreTrimWhitespace, renderIndicators, originalEditor, modifiedEditor) {\r\n        var overviewZoneColor = String(this._insertColor);\r\n        var result = {\r\n            decorations: [],\r\n            overviewZones: []\r\n        };\r\n        var modifiedModel = modifiedEditor.getModel();\r\n        for (var i = 0, length_7 = lineChanges.length; i < length_7; i++) {\r\n            var lineChange = lineChanges[i];\r\n            if (isChangeOrInsert(lineChange)) {\r\n                result.decorations.push({\r\n                    range: new Range(lineChange.modifiedStartLineNumber, 1, lineChange.modifiedEndLineNumber, 1073741824 /* MAX_SAFE_SMALL_INTEGER */),\r\n                    options: (renderIndicators ? DECORATIONS.lineInsertWithSign : DECORATIONS.lineInsert)\r\n                });\r\n                if (!isChangeOrDelete(lineChange) || !lineChange.charChanges) {\r\n                    result.decorations.push(createDecoration(lineChange.modifiedStartLineNumber, 1, lineChange.modifiedEndLineNumber, 1073741824 /* MAX_SAFE_SMALL_INTEGER */, DECORATIONS.charInsertWholeLine));\r\n                }\r\n                result.overviewZones.push(new OverviewRulerZone(lineChange.modifiedStartLineNumber, lineChange.modifiedEndLineNumber, overviewZoneColor));\r\n                if (lineChange.charChanges) {\r\n                    for (var j = 0, lengthJ = lineChange.charChanges.length; j < lengthJ; j++) {\r\n                        var charChange = lineChange.charChanges[j];\r\n                        if (isChangeOrInsert(charChange)) {\r\n                            if (ignoreTrimWhitespace) {\r\n                                for (var lineNumber = charChange.modifiedStartLineNumber; lineNumber <= charChange.modifiedEndLineNumber; lineNumber++) {\r\n                                    var startColumn = void 0;\r\n                                    var endColumn = void 0;\r\n                                    if (lineNumber === charChange.modifiedStartLineNumber) {\r\n                                        startColumn = charChange.modifiedStartColumn;\r\n                                    }\r\n                                    else {\r\n                                        startColumn = modifiedModel.getLineFirstNonWhitespaceColumn(lineNumber);\r\n                                    }\r\n                                    if (lineNumber === charChange.modifiedEndLineNumber) {\r\n                                        endColumn = charChange.modifiedEndColumn;\r\n                                    }\r\n                                    else {\r\n                                        endColumn = modifiedModel.getLineLastNonWhitespaceColumn(lineNumber);\r\n                                    }\r\n                                    result.decorations.push(createDecoration(lineNumber, startColumn, lineNumber, endColumn, DECORATIONS.charInsert));\r\n                                }\r\n                            }\r\n                            else {\r\n                                result.decorations.push(createDecoration(charChange.modifiedStartLineNumber, charChange.modifiedStartColumn, charChange.modifiedEndLineNumber, charChange.modifiedEndColumn, DECORATIONS.charInsert));\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH = 100;\r\n    return DiffEditorWidgetSideBySide;\r\n}(DiffEditorWidgetStyle));\r\nvar SideBySideViewZonesComputer = /** @class */ (function (_super) {\r\n    __extends(SideBySideViewZonesComputer, _super);\r\n    function SideBySideViewZonesComputer(lineChanges, originalForeignVZ, originalLineHeight, modifiedForeignVZ, modifiedLineHeight) {\r\n        return _super.call(this, lineChanges, originalForeignVZ, originalLineHeight, modifiedForeignVZ, modifiedLineHeight) || this;\r\n    }\r\n    SideBySideViewZonesComputer.prototype._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion = function () {\r\n        return null;\r\n    };\r\n    SideBySideViewZonesComputer.prototype._produceOriginalFromDiff = function (lineChange, lineChangeOriginalLength, lineChangeModifiedLength) {\r\n        if (lineChangeModifiedLength > lineChangeOriginalLength) {\r\n            return {\r\n                afterLineNumber: Math.max(lineChange.originalStartLineNumber, lineChange.originalEndLineNumber),\r\n                heightInLines: (lineChangeModifiedLength - lineChangeOriginalLength),\r\n                domNode: null\r\n            };\r\n        }\r\n        return null;\r\n    };\r\n    SideBySideViewZonesComputer.prototype._produceModifiedFromDiff = function (lineChange, lineChangeOriginalLength, lineChangeModifiedLength) {\r\n        if (lineChangeOriginalLength > lineChangeModifiedLength) {\r\n            return {\r\n                afterLineNumber: Math.max(lineChange.modifiedStartLineNumber, lineChange.modifiedEndLineNumber),\r\n                heightInLines: (lineChangeOriginalLength - lineChangeModifiedLength),\r\n                domNode: null\r\n            };\r\n        }\r\n        return null;\r\n    };\r\n    return SideBySideViewZonesComputer;\r\n}(ViewZonesComputer));\r\nvar DiffEditorWidgetInline = /** @class */ (function (_super) {\r\n    __extends(DiffEditorWidgetInline, _super);\r\n    function DiffEditorWidgetInline(dataSource, enableSplitViewResizing) {\r\n        var _this = _super.call(this, dataSource) || this;\r\n        _this.decorationsLeft = dataSource.getOriginalEditor().getLayoutInfo().decorationsLeft;\r\n        _this._register(dataSource.getOriginalEditor().onDidLayoutChange(function (layoutInfo) {\r\n            if (_this.decorationsLeft !== layoutInfo.decorationsLeft) {\r\n                _this.decorationsLeft = layoutInfo.decorationsLeft;\r\n                dataSource.relayoutEditors();\r\n            }\r\n        }));\r\n        return _this;\r\n    }\r\n    DiffEditorWidgetInline.prototype.setEnableSplitViewResizing = function (enableSplitViewResizing) {\r\n        // Nothing to do..\r\n    };\r\n    DiffEditorWidgetInline.prototype._getViewZones = function (lineChanges, originalForeignVZ, modifiedForeignVZ, originalEditor, modifiedEditor, renderIndicators) {\r\n        var computer = new InlineViewZonesComputer(lineChanges, originalForeignVZ, modifiedForeignVZ, originalEditor, modifiedEditor, renderIndicators);\r\n        return computer.getViewZones();\r\n    };\r\n    DiffEditorWidgetInline.prototype._getOriginalEditorDecorations = function (lineChanges, ignoreTrimWhitespace, renderIndicators, originalEditor, modifiedEditor) {\r\n        var overviewZoneColor = String(this._removeColor);\r\n        var result = {\r\n            decorations: [],\r\n            overviewZones: []\r\n        };\r\n        for (var i = 0, length_8 = lineChanges.length; i < length_8; i++) {\r\n            var lineChange = lineChanges[i];\r\n            // Add overview zones in the overview ruler\r\n            if (isChangeOrDelete(lineChange)) {\r\n                result.decorations.push({\r\n                    range: new Range(lineChange.originalStartLineNumber, 1, lineChange.originalEndLineNumber, 1073741824 /* MAX_SAFE_SMALL_INTEGER */),\r\n                    options: DECORATIONS.lineDeleteMargin\r\n                });\r\n                result.overviewZones.push(new OverviewRulerZone(lineChange.originalStartLineNumber, lineChange.originalEndLineNumber, overviewZoneColor));\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    DiffEditorWidgetInline.prototype._getModifiedEditorDecorations = function (lineChanges, ignoreTrimWhitespace, renderIndicators, originalEditor, modifiedEditor) {\r\n        var overviewZoneColor = String(this._insertColor);\r\n        var result = {\r\n            decorations: [],\r\n            overviewZones: []\r\n        };\r\n        var modifiedModel = modifiedEditor.getModel();\r\n        for (var i = 0, length_9 = lineChanges.length; i < length_9; i++) {\r\n            var lineChange = lineChanges[i];\r\n            // Add decorations & overview zones\r\n            if (isChangeOrInsert(lineChange)) {\r\n                result.decorations.push({\r\n                    range: new Range(lineChange.modifiedStartLineNumber, 1, lineChange.modifiedEndLineNumber, 1073741824 /* MAX_SAFE_SMALL_INTEGER */),\r\n                    options: (renderIndicators ? DECORATIONS.lineInsertWithSign : DECORATIONS.lineInsert)\r\n                });\r\n                result.overviewZones.push(new OverviewRulerZone(lineChange.modifiedStartLineNumber, lineChange.modifiedEndLineNumber, overviewZoneColor));\r\n                if (lineChange.charChanges) {\r\n                    for (var j = 0, lengthJ = lineChange.charChanges.length; j < lengthJ; j++) {\r\n                        var charChange = lineChange.charChanges[j];\r\n                        if (isChangeOrInsert(charChange)) {\r\n                            if (ignoreTrimWhitespace) {\r\n                                for (var lineNumber = charChange.modifiedStartLineNumber; lineNumber <= charChange.modifiedEndLineNumber; lineNumber++) {\r\n                                    var startColumn = void 0;\r\n                                    var endColumn = void 0;\r\n                                    if (lineNumber === charChange.modifiedStartLineNumber) {\r\n                                        startColumn = charChange.modifiedStartColumn;\r\n                                    }\r\n                                    else {\r\n                                        startColumn = modifiedModel.getLineFirstNonWhitespaceColumn(lineNumber);\r\n                                    }\r\n                                    if (lineNumber === charChange.modifiedEndLineNumber) {\r\n                                        endColumn = charChange.modifiedEndColumn;\r\n                                    }\r\n                                    else {\r\n                                        endColumn = modifiedModel.getLineLastNonWhitespaceColumn(lineNumber);\r\n                                    }\r\n                                    result.decorations.push(createDecoration(lineNumber, startColumn, lineNumber, endColumn, DECORATIONS.charInsert));\r\n                                }\r\n                            }\r\n                            else {\r\n                                result.decorations.push(createDecoration(charChange.modifiedStartLineNumber, charChange.modifiedStartColumn, charChange.modifiedEndLineNumber, charChange.modifiedEndColumn, DECORATIONS.charInsert));\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    result.decorations.push(createDecoration(lineChange.modifiedStartLineNumber, 1, lineChange.modifiedEndLineNumber, 1073741824 /* MAX_SAFE_SMALL_INTEGER */, DECORATIONS.charInsertWholeLine));\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    DiffEditorWidgetInline.prototype.layout = function () {\r\n        // An editor should not be smaller than 5px\r\n        return Math.max(5, this.decorationsLeft);\r\n    };\r\n    return DiffEditorWidgetInline;\r\n}(DiffEditorWidgetStyle));\r\nvar InlineViewZonesComputer = /** @class */ (function (_super) {\r\n    __extends(InlineViewZonesComputer, _super);\r\n    function InlineViewZonesComputer(lineChanges, originalForeignVZ, modifiedForeignVZ, originalEditor, modifiedEditor, renderIndicators) {\r\n        var _this = _super.call(this, lineChanges, originalForeignVZ, originalEditor.getOption(49 /* lineHeight */), modifiedForeignVZ, modifiedEditor.getOption(49 /* lineHeight */)) || this;\r\n        _this.originalModel = originalEditor.getModel();\r\n        _this.modifiedEditorOptions = modifiedEditor.getOptions();\r\n        _this.modifiedEditorTabSize = modifiedEditor.getModel().getOptions().tabSize;\r\n        _this.renderIndicators = renderIndicators;\r\n        return _this;\r\n    }\r\n    InlineViewZonesComputer.prototype._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion = function () {\r\n        var result = document.createElement('div');\r\n        result.className = 'inline-added-margin-view-zone';\r\n        return result;\r\n    };\r\n    InlineViewZonesComputer.prototype._produceOriginalFromDiff = function (lineChange, lineChangeOriginalLength, lineChangeModifiedLength) {\r\n        var marginDomNode = document.createElement('div');\r\n        marginDomNode.className = 'inline-added-margin-view-zone';\r\n        return {\r\n            afterLineNumber: Math.max(lineChange.originalStartLineNumber, lineChange.originalEndLineNumber),\r\n            heightInLines: lineChangeModifiedLength,\r\n            domNode: document.createElement('div'),\r\n            marginDomNode: marginDomNode\r\n        };\r\n    };\r\n    InlineViewZonesComputer.prototype._produceModifiedFromDiff = function (lineChange, lineChangeOriginalLength, lineChangeModifiedLength) {\r\n        var decorations = [];\r\n        if (lineChange.charChanges) {\r\n            for (var j = 0, lengthJ = lineChange.charChanges.length; j < lengthJ; j++) {\r\n                var charChange = lineChange.charChanges[j];\r\n                if (isChangeOrDelete(charChange)) {\r\n                    decorations.push(new InlineDecoration(new Range(charChange.originalStartLineNumber, charChange.originalStartColumn, charChange.originalEndLineNumber, charChange.originalEndColumn), 'char-delete', 0 /* Regular */));\r\n                }\r\n            }\r\n        }\r\n        var sb = createStringBuilder(10000);\r\n        var marginHTML = [];\r\n        var layoutInfo = this.modifiedEditorOptions.get(107 /* layoutInfo */);\r\n        var fontInfo = this.modifiedEditorOptions.get(34 /* fontInfo */);\r\n        var lineDecorationsWidth = layoutInfo.decorationsWidth;\r\n        var lineHeight = this.modifiedEditorOptions.get(49 /* lineHeight */);\r\n        var typicalHalfwidthCharacterWidth = fontInfo.typicalHalfwidthCharacterWidth;\r\n        var maxCharsPerLine = 0;\r\n        var originalContent = [];\r\n        for (var lineNumber = lineChange.originalStartLineNumber; lineNumber <= lineChange.originalEndLineNumber; lineNumber++) {\r\n            maxCharsPerLine = Math.max(maxCharsPerLine, this._renderOriginalLine(lineNumber - lineChange.originalStartLineNumber, this.originalModel, this.modifiedEditorOptions, this.modifiedEditorTabSize, lineNumber, decorations, sb));\r\n            originalContent.push(this.originalModel.getLineContent(lineNumber));\r\n            if (this.renderIndicators) {\r\n                var index = lineNumber - lineChange.originalStartLineNumber;\r\n                marginHTML = marginHTML.concat([\r\n                    \"<div class=\\\"delete-sign codicon codicon-remove\\\" style=\\\"position:absolute;top:\" + index * lineHeight + \"px;width:\" + lineDecorationsWidth + \"px;height:\" + lineHeight + \"px;right:0;\\\"></div>\"\r\n                ]);\r\n            }\r\n        }\r\n        maxCharsPerLine += this.modifiedEditorOptions.get(79 /* scrollBeyondLastColumn */);\r\n        var domNode = document.createElement('div');\r\n        domNode.className = 'view-lines line-delete';\r\n        domNode.innerHTML = sb.build();\r\n        Configuration.applyFontInfoSlow(domNode, fontInfo);\r\n        var marginDomNode = document.createElement('div');\r\n        marginDomNode.className = 'inline-deleted-margin-view-zone';\r\n        marginDomNode.innerHTML = marginHTML.join('');\r\n        Configuration.applyFontInfoSlow(marginDomNode, fontInfo);\r\n        return {\r\n            shouldNotShrink: true,\r\n            afterLineNumber: (lineChange.modifiedEndLineNumber === 0 ? lineChange.modifiedStartLineNumber : lineChange.modifiedStartLineNumber - 1),\r\n            heightInLines: lineChangeOriginalLength,\r\n            minWidthInPx: (maxCharsPerLine * typicalHalfwidthCharacterWidth),\r\n            domNode: domNode,\r\n            marginDomNode: marginDomNode,\r\n            diff: {\r\n                originalStartLineNumber: lineChange.originalStartLineNumber,\r\n                originalEndLineNumber: lineChange.originalEndLineNumber,\r\n                modifiedStartLineNumber: lineChange.modifiedStartLineNumber,\r\n                modifiedEndLineNumber: lineChange.modifiedEndLineNumber,\r\n                originalContent: originalContent\r\n            }\r\n        };\r\n    };\r\n    InlineViewZonesComputer.prototype._renderOriginalLine = function (count, originalModel, options, tabSize, lineNumber, decorations, sb) {\r\n        var lineTokens = originalModel.getLineTokens(lineNumber);\r\n        var lineContent = lineTokens.getLineContent();\r\n        var fontInfo = options.get(34 /* fontInfo */);\r\n        var actualDecorations = LineDecoration.filter(decorations, lineNumber, 1, lineContent.length + 1);\r\n        sb.appendASCIIString('<div class=\"view-line');\r\n        if (decorations.length === 0) {\r\n            // No char changes\r\n            sb.appendASCIIString(' char-delete');\r\n        }\r\n        sb.appendASCIIString('\" style=\"top:');\r\n        sb.appendASCIIString(String(count * options.get(49 /* lineHeight */)));\r\n        sb.appendASCIIString('px;width:1000000px;\">');\r\n        var isBasicASCII = ViewLineRenderingData.isBasicASCII(lineContent, originalModel.mightContainNonBasicASCII());\r\n        var containsRTL = ViewLineRenderingData.containsRTL(lineContent, isBasicASCII, originalModel.mightContainRTL());\r\n        var output = renderViewLine(new RenderLineInput((fontInfo.isMonospace && !options.get(23 /* disableMonospaceOptimizations */)), fontInfo.canUseHalfwidthRightwardsArrow, lineContent, false, isBasicASCII, containsRTL, 0, lineTokens, actualDecorations, tabSize, 0, fontInfo.spaceWidth, fontInfo.middotWidth, options.get(88 /* stopRenderingLineAfter */), options.get(74 /* renderWhitespace */), options.get(69 /* renderControlCharacters */), options.get(35 /* fontLigatures */) !== EditorFontLigatures.OFF, null // Send no selections, original line cannot be selected\r\n        ), sb);\r\n        sb.appendASCIIString('</div>');\r\n        var absoluteOffsets = output.characterMapping.getAbsoluteOffsets();\r\n        return absoluteOffsets.length > 0 ? absoluteOffsets[absoluteOffsets.length - 1] : 0;\r\n    };\r\n    return InlineViewZonesComputer;\r\n}(ViewZonesComputer));\r\nfunction isChangeOrInsert(lineChange) {\r\n    return lineChange.modifiedEndLineNumber > 0;\r\n}\r\nfunction isChangeOrDelete(lineChange) {\r\n    return lineChange.originalEndLineNumber > 0;\r\n}\r\nfunction createFakeLinesDiv() {\r\n    var r = document.createElement('div');\r\n    r.className = 'diagonal-fill';\r\n    return r;\r\n}\r\nregisterThemingParticipant(function (theme, collector) {\r\n    var added = theme.getColor(diffInserted);\r\n    if (added) {\r\n        collector.addRule(\".monaco-editor .line-insert, .monaco-editor .char-insert { background-color: \" + added + \"; }\");\r\n        collector.addRule(\".monaco-diff-editor .line-insert, .monaco-diff-editor .char-insert { background-color: \" + added + \"; }\");\r\n        collector.addRule(\".monaco-editor .inline-added-margin-view-zone { background-color: \" + added + \"; }\");\r\n    }\r\n    var removed = theme.getColor(diffRemoved);\r\n    if (removed) {\r\n        collector.addRule(\".monaco-editor .line-delete, .monaco-editor .char-delete { background-color: \" + removed + \"; }\");\r\n        collector.addRule(\".monaco-diff-editor .line-delete, .monaco-diff-editor .char-delete { background-color: \" + removed + \"; }\");\r\n        collector.addRule(\".monaco-editor .inline-deleted-margin-view-zone { background-color: \" + removed + \"; }\");\r\n    }\r\n    var addedOutline = theme.getColor(diffInsertedOutline);\r\n    if (addedOutline) {\r\n        collector.addRule(\".monaco-editor .line-insert, .monaco-editor .char-insert { border: 1px \" + (theme.type === 'hc' ? 'dashed' : 'solid') + \" \" + addedOutline + \"; }\");\r\n    }\r\n    var removedOutline = theme.getColor(diffRemovedOutline);\r\n    if (removedOutline) {\r\n        collector.addRule(\".monaco-editor .line-delete, .monaco-editor .char-delete { border: 1px \" + (theme.type === 'hc' ? 'dashed' : 'solid') + \" \" + removedOutline + \"; }\");\r\n    }\r\n    var shadow = theme.getColor(scrollbarShadow);\r\n    if (shadow) {\r\n        collector.addRule(\".monaco-diff-editor.side-by-side .editor.modified { box-shadow: -6px 0 5px -5px \" + shadow + \"; }\");\r\n    }\r\n    var border = theme.getColor(diffBorder);\r\n    if (border) {\r\n        collector.addRule(\".monaco-diff-editor.side-by-side .editor.modified { border-left: 1px solid \" + border + \"; }\");\r\n    }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport './media/editor.css';\r\nimport * as nls from '../../../nls.js';\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { onUnexpectedError } from '../../../base/common/errors.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { Disposable, dispose } from '../../../base/common/lifecycle.js';\r\nimport { Schemas } from '../../../base/common/network.js';\r\nimport { Configuration } from '../config/configuration.js';\r\nimport { EditorExtensionsRegistry } from '../editorExtensions.js';\r\nimport { ICodeEditorService } from '../services/codeEditorService.js';\r\nimport { View } from '../view/viewImpl.js';\r\nimport { ViewOutgoingEvents } from '../view/viewOutgoingEvents.js';\r\nimport { filterValidationDecorations } from '../../common/config/editorOptions.js';\r\nimport { Cursor } from '../../common/controller/cursor.js';\r\nimport { CursorColumns } from '../../common/controller/cursorCommon.js';\r\nimport { Position } from '../../common/core/position.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { Selection } from '../../common/core/selection.js';\r\nimport { InternalEditorAction } from '../../common/editorAction.js';\r\nimport * as editorCommon from '../../common/editorCommon.js';\r\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\r\nimport * as modes from '../../common/modes.js';\r\nimport { editorUnnecessaryCodeBorder, editorUnnecessaryCodeOpacity } from '../../common/view/editorColorRegistry.js';\r\nimport { editorErrorBorder, editorErrorForeground, editorHintBorder, editorHintForeground, editorInfoBorder, editorInfoForeground, editorWarningBorder, editorWarningForeground, editorForeground } from '../../../platform/theme/common/colorRegistry.js';\r\nimport { ViewModel } from '../../common/viewModel/viewModelImpl.js';\r\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\r\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\r\nimport { ServiceCollection } from '../../../platform/instantiation/common/serviceCollection.js';\r\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\r\nimport { IThemeService, registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\r\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\r\nimport { withNullAsUndefined } from '../../../base/common/types.js';\r\nimport { MonospaceLineBreaksComputerFactory } from '../../common/viewModel/monospaceLineBreaksComputer.js';\r\nimport { DOMLineBreaksComputerFactory } from '../view/domLineBreaksComputer.js';\r\nvar EDITOR_ID = 0;\r\nvar ModelData = /** @class */ (function () {\r\n    function ModelData(model, viewModel, cursor, view, hasRealView, listenersToRemove) {\r\n        this.model = model;\r\n        this.viewModel = viewModel;\r\n        this.cursor = cursor;\r\n        this.view = view;\r\n        this.hasRealView = hasRealView;\r\n        this.listenersToRemove = listenersToRemove;\r\n    }\r\n    ModelData.prototype.dispose = function () {\r\n        dispose(this.listenersToRemove);\r\n        this.model.onBeforeDetached();\r\n        if (this.hasRealView) {\r\n            this.view.dispose();\r\n        }\r\n        this.cursor.dispose();\r\n        this.viewModel.dispose();\r\n    };\r\n    return ModelData;\r\n}());\r\nvar CodeEditorWidget = /** @class */ (function (_super) {\r\n    __extends(CodeEditorWidget, _super);\r\n    function CodeEditorWidget(domElement, options, codeEditorWidgetOptions, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService) {\r\n        var _this = _super.call(this) || this;\r\n        //#region Eventing\r\n        _this._onDidDispose = _this._register(new Emitter());\r\n        _this.onDidDispose = _this._onDidDispose.event;\r\n        _this._onDidChangeModelContent = _this._register(new Emitter());\r\n        _this.onDidChangeModelContent = _this._onDidChangeModelContent.event;\r\n        _this._onDidChangeModelLanguage = _this._register(new Emitter());\r\n        _this.onDidChangeModelLanguage = _this._onDidChangeModelLanguage.event;\r\n        _this._onDidChangeModelLanguageConfiguration = _this._register(new Emitter());\r\n        _this.onDidChangeModelLanguageConfiguration = _this._onDidChangeModelLanguageConfiguration.event;\r\n        _this._onDidChangeModelOptions = _this._register(new Emitter());\r\n        _this.onDidChangeModelOptions = _this._onDidChangeModelOptions.event;\r\n        _this._onDidChangeModelDecorations = _this._register(new Emitter());\r\n        _this.onDidChangeModelDecorations = _this._onDidChangeModelDecorations.event;\r\n        _this._onDidChangeConfiguration = _this._register(new Emitter());\r\n        _this.onDidChangeConfiguration = _this._onDidChangeConfiguration.event;\r\n        _this._onDidChangeModel = _this._register(new Emitter());\r\n        _this.onDidChangeModel = _this._onDidChangeModel.event;\r\n        _this._onDidChangeCursorPosition = _this._register(new Emitter());\r\n        _this.onDidChangeCursorPosition = _this._onDidChangeCursorPosition.event;\r\n        _this._onDidChangeCursorSelection = _this._register(new Emitter());\r\n        _this.onDidChangeCursorSelection = _this._onDidChangeCursorSelection.event;\r\n        _this._onDidAttemptReadOnlyEdit = _this._register(new Emitter());\r\n        _this.onDidAttemptReadOnlyEdit = _this._onDidAttemptReadOnlyEdit.event;\r\n        _this._onDidLayoutChange = _this._register(new Emitter());\r\n        _this.onDidLayoutChange = _this._onDidLayoutChange.event;\r\n        _this._editorTextFocus = _this._register(new BooleanEventEmitter());\r\n        _this.onDidFocusEditorText = _this._editorTextFocus.onDidChangeToTrue;\r\n        _this.onDidBlurEditorText = _this._editorTextFocus.onDidChangeToFalse;\r\n        _this._editorWidgetFocus = _this._register(new BooleanEventEmitter());\r\n        _this.onDidFocusEditorWidget = _this._editorWidgetFocus.onDidChangeToTrue;\r\n        _this.onDidBlurEditorWidget = _this._editorWidgetFocus.onDidChangeToFalse;\r\n        _this._onWillType = _this._register(new Emitter());\r\n        _this.onWillType = _this._onWillType.event;\r\n        _this._onDidType = _this._register(new Emitter());\r\n        _this.onDidType = _this._onDidType.event;\r\n        _this._onDidCompositionStart = _this._register(new Emitter());\r\n        _this.onDidCompositionStart = _this._onDidCompositionStart.event;\r\n        _this._onDidCompositionEnd = _this._register(new Emitter());\r\n        _this.onDidCompositionEnd = _this._onDidCompositionEnd.event;\r\n        _this._onDidPaste = _this._register(new Emitter());\r\n        _this.onDidPaste = _this._onDidPaste.event;\r\n        _this._onMouseUp = _this._register(new Emitter());\r\n        _this.onMouseUp = _this._onMouseUp.event;\r\n        _this._onMouseDown = _this._register(new Emitter());\r\n        _this.onMouseDown = _this._onMouseDown.event;\r\n        _this._onMouseDrag = _this._register(new Emitter());\r\n        _this.onMouseDrag = _this._onMouseDrag.event;\r\n        _this._onMouseDrop = _this._register(new Emitter());\r\n        _this.onMouseDrop = _this._onMouseDrop.event;\r\n        _this._onContextMenu = _this._register(new Emitter());\r\n        _this.onContextMenu = _this._onContextMenu.event;\r\n        _this._onMouseMove = _this._register(new Emitter());\r\n        _this.onMouseMove = _this._onMouseMove.event;\r\n        _this._onMouseLeave = _this._register(new Emitter());\r\n        _this.onMouseLeave = _this._onMouseLeave.event;\r\n        _this._onMouseWheel = _this._register(new Emitter());\r\n        _this.onMouseWheel = _this._onMouseWheel.event;\r\n        _this._onKeyUp = _this._register(new Emitter());\r\n        _this.onKeyUp = _this._onKeyUp.event;\r\n        _this._onKeyDown = _this._register(new Emitter());\r\n        _this.onKeyDown = _this._onKeyDown.event;\r\n        _this._onDidContentSizeChange = _this._register(new Emitter());\r\n        _this.onDidContentSizeChange = _this._onDidContentSizeChange.event;\r\n        _this._onDidScrollChange = _this._register(new Emitter());\r\n        _this.onDidScrollChange = _this._onDidScrollChange.event;\r\n        _this._onDidChangeViewZones = _this._register(new Emitter());\r\n        _this.onDidChangeViewZones = _this._onDidChangeViewZones.event;\r\n        _this._domElement = domElement;\r\n        _this._id = (++EDITOR_ID);\r\n        _this._decorationTypeKeysToIds = {};\r\n        _this._decorationTypeSubtypes = {};\r\n        _this.isSimpleWidget = codeEditorWidgetOptions.isSimpleWidget || false;\r\n        _this._telemetryData = codeEditorWidgetOptions.telemetryData;\r\n        options = options || {};\r\n        _this._configuration = _this._register(_this._createConfiguration(options, accessibilityService));\r\n        _this._register(_this._configuration.onDidChange(function (e) {\r\n            _this._onDidChangeConfiguration.fire(e);\r\n            var options = _this._configuration.options;\r\n            if (e.hasChanged(107 /* layoutInfo */)) {\r\n                var layoutInfo = options.get(107 /* layoutInfo */);\r\n                _this._onDidLayoutChange.fire(layoutInfo);\r\n            }\r\n        }));\r\n        _this._contextKeyService = _this._register(contextKeyService.createScoped(_this._domElement));\r\n        _this._notificationService = notificationService;\r\n        _this._codeEditorService = codeEditorService;\r\n        _this._commandService = commandService;\r\n        _this._themeService = themeService;\r\n        _this._register(new EditorContextKeysManager(_this, _this._contextKeyService));\r\n        _this._register(new EditorModeContext(_this, _this._contextKeyService));\r\n        _this._instantiationService = instantiationService.createChild(new ServiceCollection([IContextKeyService, _this._contextKeyService]));\r\n        _this._modelData = null;\r\n        _this._contributions = {};\r\n        _this._actions = {};\r\n        _this._focusTracker = new CodeEditorWidgetFocusTracker(domElement);\r\n        _this._focusTracker.onChange(function () {\r\n            _this._editorWidgetFocus.setValue(_this._focusTracker.hasFocus());\r\n        });\r\n        _this._contentWidgets = {};\r\n        _this._overlayWidgets = {};\r\n        var contributions;\r\n        if (Array.isArray(codeEditorWidgetOptions.contributions)) {\r\n            contributions = codeEditorWidgetOptions.contributions;\r\n        }\r\n        else {\r\n            contributions = EditorExtensionsRegistry.getEditorContributions();\r\n        }\r\n        for (var _i = 0, contributions_1 = contributions; _i < contributions_1.length; _i++) {\r\n            var desc = contributions_1[_i];\r\n            try {\r\n                var contribution = _this._instantiationService.createInstance(desc.ctor, _this);\r\n                _this._contributions[desc.id] = contribution;\r\n            }\r\n            catch (err) {\r\n                onUnexpectedError(err);\r\n            }\r\n        }\r\n        EditorExtensionsRegistry.getEditorActions().forEach(function (action) {\r\n            var internalAction = new InternalEditorAction(action.id, action.label, action.alias, withNullAsUndefined(action.precondition), function () {\r\n                return _this._instantiationService.invokeFunction(function (accessor) {\r\n                    return Promise.resolve(action.runEditorCommand(accessor, _this, null));\r\n                });\r\n            }, _this._contextKeyService);\r\n            _this._actions[internalAction.id] = internalAction;\r\n        });\r\n        _this._codeEditorService.addCodeEditor(_this);\r\n        return _this;\r\n    }\r\n    CodeEditorWidget.prototype._createConfiguration = function (options, accessibilityService) {\r\n        return new Configuration(this.isSimpleWidget, options, this._domElement, accessibilityService);\r\n    };\r\n    CodeEditorWidget.prototype.getId = function () {\r\n        return this.getEditorType() + ':' + this._id;\r\n    };\r\n    CodeEditorWidget.prototype.getEditorType = function () {\r\n        return editorCommon.EditorType.ICodeEditor;\r\n    };\r\n    CodeEditorWidget.prototype.dispose = function () {\r\n        this._codeEditorService.removeCodeEditor(this);\r\n        this._focusTracker.dispose();\r\n        var keys = Object.keys(this._contributions);\r\n        for (var i = 0, len = keys.length; i < len; i++) {\r\n            var contributionId = keys[i];\r\n            this._contributions[contributionId].dispose();\r\n        }\r\n        this._removeDecorationTypes();\r\n        this._postDetachModelCleanup(this._detachModel());\r\n        this._onDidDispose.fire();\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    CodeEditorWidget.prototype.invokeWithinContext = function (fn) {\r\n        return this._instantiationService.invokeFunction(fn);\r\n    };\r\n    CodeEditorWidget.prototype.updateOptions = function (newOptions) {\r\n        this._configuration.updateOptions(newOptions);\r\n    };\r\n    CodeEditorWidget.prototype.getOptions = function () {\r\n        return this._configuration.options;\r\n    };\r\n    CodeEditorWidget.prototype.getOption = function (id) {\r\n        return this._configuration.options.get(id);\r\n    };\r\n    CodeEditorWidget.prototype.getRawOptions = function () {\r\n        return this._configuration.getRawOptions();\r\n    };\r\n    CodeEditorWidget.prototype.getValue = function (options) {\r\n        if (options === void 0) { options = null; }\r\n        if (!this._modelData) {\r\n            return '';\r\n        }\r\n        var preserveBOM = (options && options.preserveBOM) ? true : false;\r\n        var eolPreference = 0 /* TextDefined */;\r\n        if (options && options.lineEnding && options.lineEnding === '\\n') {\r\n            eolPreference = 1 /* LF */;\r\n        }\r\n        else if (options && options.lineEnding && options.lineEnding === '\\r\\n') {\r\n            eolPreference = 2 /* CRLF */;\r\n        }\r\n        return this._modelData.model.getValue(eolPreference, preserveBOM);\r\n    };\r\n    CodeEditorWidget.prototype.setValue = function (newValue) {\r\n        if (!this._modelData) {\r\n            return;\r\n        }\r\n        this._modelData.model.setValue(newValue);\r\n    };\r\n    CodeEditorWidget.prototype.getModel = function () {\r\n        if (!this._modelData) {\r\n            return null;\r\n        }\r\n        return this._modelData.model;\r\n    };\r\n    CodeEditorWidget.prototype.setModel = function (_model) {\r\n        if (_model === void 0) { _model = null; }\r\n        var model = _model;\r\n        if (this._modelData === null && model === null) {\r\n            // Current model is the new model\r\n            return;\r\n        }\r\n        if (this._modelData && this._modelData.model === model) {\r\n            // Current model is the new model\r\n            return;\r\n        }\r\n        var hasTextFocus = this.hasTextFocus();\r\n        var detachedModel = this._detachModel();\r\n        this._attachModel(model);\r\n        if (hasTextFocus && this.hasModel()) {\r\n            this.focus();\r\n        }\r\n        var e = {\r\n            oldModelUrl: detachedModel ? detachedModel.uri : null,\r\n            newModelUrl: model ? model.uri : null\r\n        };\r\n        this._removeDecorationTypes();\r\n        this._onDidChangeModel.fire(e);\r\n        this._postDetachModelCleanup(detachedModel);\r\n    };\r\n    CodeEditorWidget.prototype._removeDecorationTypes = function () {\r\n        this._decorationTypeKeysToIds = {};\r\n        if (this._decorationTypeSubtypes) {\r\n            for (var decorationType in this._decorationTypeSubtypes) {\r\n                var subTypes = this._decorationTypeSubtypes[decorationType];\r\n                for (var subType in subTypes) {\r\n                    this._removeDecorationType(decorationType + '-' + subType);\r\n                }\r\n            }\r\n            this._decorationTypeSubtypes = {};\r\n        }\r\n    };\r\n    CodeEditorWidget.prototype.getVisibleRanges = function () {\r\n        if (!this._modelData) {\r\n            return [];\r\n        }\r\n        return this._modelData.viewModel.getVisibleRanges();\r\n    };\r\n    CodeEditorWidget.prototype.getWhitespaces = function () {\r\n        if (!this._modelData) {\r\n            return [];\r\n        }\r\n        return this._modelData.viewModel.viewLayout.getWhitespaces();\r\n    };\r\n    CodeEditorWidget._getVerticalOffsetForPosition = function (modelData, modelLineNumber, modelColumn) {\r\n        var modelPosition = modelData.model.validatePosition({\r\n            lineNumber: modelLineNumber,\r\n            column: modelColumn\r\n        });\r\n        var viewPosition = modelData.viewModel.coordinatesConverter.convertModelPositionToViewPosition(modelPosition);\r\n        return modelData.viewModel.viewLayout.getVerticalOffsetForLineNumber(viewPosition.lineNumber);\r\n    };\r\n    CodeEditorWidget.prototype.getTopForLineNumber = function (lineNumber) {\r\n        if (!this._modelData) {\r\n            return -1;\r\n        }\r\n        return CodeEditorWidget._getVerticalOffsetForPosition(this._modelData, lineNumber, 1);\r\n    };\r\n    CodeEditorWidget.prototype.getTopForPosition = function (lineNumber, column) {\r\n        if (!this._modelData) {\r\n            return -1;\r\n        }\r\n        return CodeEditorWidget._getVerticalOffsetForPosition(this._modelData, lineNumber, column);\r\n    };\r\n    CodeEditorWidget.prototype.setHiddenAreas = function (ranges) {\r\n        if (this._modelData) {\r\n            this._modelData.viewModel.setHiddenAreas(ranges.map(function (r) { return Range.lift(r); }));\r\n        }\r\n    };\r\n    CodeEditorWidget.prototype.getVisibleColumnFromPosition = function (rawPosition) {\r\n        if (!this._modelData) {\r\n            return rawPosition.column;\r\n        }\r\n        var position = this._modelData.model.validatePosition(rawPosition);\r\n        var tabSize = this._modelData.model.getOptions().tabSize;\r\n        return CursorColumns.visibleColumnFromColumn(this._modelData.model.getLineContent(position.lineNumber), position.column, tabSize) + 1;\r\n    };\r\n    CodeEditorWidget.prototype.getPosition = function () {\r\n        if (!this._modelData) {\r\n            return null;\r\n        }\r\n        return this._modelData.cursor.getPosition();\r\n    };\r\n    CodeEditorWidget.prototype.setPosition = function (position) {\r\n        if (!this._modelData) {\r\n            return;\r\n        }\r\n        if (!Position.isIPosition(position)) {\r\n            throw new Error('Invalid arguments');\r\n        }\r\n        this._modelData.cursor.setSelections('api', [{\r\n                selectionStartLineNumber: position.lineNumber,\r\n                selectionStartColumn: position.column,\r\n                positionLineNumber: position.lineNumber,\r\n                positionColumn: position.column\r\n            }]);\r\n    };\r\n    CodeEditorWidget.prototype._sendRevealRange = function (modelRange, verticalType, revealHorizontal, scrollType) {\r\n        if (!this._modelData) {\r\n            return;\r\n        }\r\n        if (!Range.isIRange(modelRange)) {\r\n            throw new Error('Invalid arguments');\r\n        }\r\n        var validatedModelRange = this._modelData.model.validateRange(modelRange);\r\n        var viewRange = this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(validatedModelRange);\r\n        this._modelData.cursor.emitCursorRevealRange('api', viewRange, verticalType, revealHorizontal, scrollType);\r\n    };\r\n    CodeEditorWidget.prototype.revealLine = function (lineNumber, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this._revealLine(lineNumber, 0 /* Simple */, scrollType);\r\n    };\r\n    CodeEditorWidget.prototype.revealLineInCenter = function (lineNumber, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this._revealLine(lineNumber, 1 /* Center */, scrollType);\r\n    };\r\n    CodeEditorWidget.prototype.revealLineInCenterIfOutsideViewport = function (lineNumber, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this._revealLine(lineNumber, 2 /* CenterIfOutsideViewport */, scrollType);\r\n    };\r\n    CodeEditorWidget.prototype._revealLine = function (lineNumber, revealType, scrollType) {\r\n        if (typeof lineNumber !== 'number') {\r\n            throw new Error('Invalid arguments');\r\n        }\r\n        this._sendRevealRange(new Range(lineNumber, 1, lineNumber, 1), revealType, false, scrollType);\r\n    };\r\n    CodeEditorWidget.prototype.revealPosition = function (position, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this._revealPosition(position, 0 /* Simple */, true, scrollType);\r\n    };\r\n    CodeEditorWidget.prototype.revealPositionInCenter = function (position, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this._revealPosition(position, 1 /* Center */, true, scrollType);\r\n    };\r\n    CodeEditorWidget.prototype.revealPositionInCenterIfOutsideViewport = function (position, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this._revealPosition(position, 2 /* CenterIfOutsideViewport */, true, scrollType);\r\n    };\r\n    CodeEditorWidget.prototype._revealPosition = function (position, verticalType, revealHorizontal, scrollType) {\r\n        if (!Position.isIPosition(position)) {\r\n            throw new Error('Invalid arguments');\r\n        }\r\n        this._sendRevealRange(new Range(position.lineNumber, position.column, position.lineNumber, position.column), verticalType, revealHorizontal, scrollType);\r\n    };\r\n    CodeEditorWidget.prototype.getSelection = function () {\r\n        if (!this._modelData) {\r\n            return null;\r\n        }\r\n        return this._modelData.cursor.getSelection();\r\n    };\r\n    CodeEditorWidget.prototype.getSelections = function () {\r\n        if (!this._modelData) {\r\n            return null;\r\n        }\r\n        return this._modelData.cursor.getSelections();\r\n    };\r\n    CodeEditorWidget.prototype.setSelection = function (something) {\r\n        var isSelection = Selection.isISelection(something);\r\n        var isRange = Range.isIRange(something);\r\n        if (!isSelection && !isRange) {\r\n            throw new Error('Invalid arguments');\r\n        }\r\n        if (isSelection) {\r\n            this._setSelectionImpl(something);\r\n        }\r\n        else if (isRange) {\r\n            // act as if it was an IRange\r\n            var selection = {\r\n                selectionStartLineNumber: something.startLineNumber,\r\n                selectionStartColumn: something.startColumn,\r\n                positionLineNumber: something.endLineNumber,\r\n                positionColumn: something.endColumn\r\n            };\r\n            this._setSelectionImpl(selection);\r\n        }\r\n    };\r\n    CodeEditorWidget.prototype._setSelectionImpl = function (sel) {\r\n        if (!this._modelData) {\r\n            return;\r\n        }\r\n        var selection = new Selection(sel.selectionStartLineNumber, sel.selectionStartColumn, sel.positionLineNumber, sel.positionColumn);\r\n        this._modelData.cursor.setSelections('api', [selection]);\r\n    };\r\n    CodeEditorWidget.prototype.revealLines = function (startLineNumber, endLineNumber, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this._revealLines(startLineNumber, endLineNumber, 0 /* Simple */, scrollType);\r\n    };\r\n    CodeEditorWidget.prototype.revealLinesInCenter = function (startLineNumber, endLineNumber, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this._revealLines(startLineNumber, endLineNumber, 1 /* Center */, scrollType);\r\n    };\r\n    CodeEditorWidget.prototype.revealLinesInCenterIfOutsideViewport = function (startLineNumber, endLineNumber, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this._revealLines(startLineNumber, endLineNumber, 2 /* CenterIfOutsideViewport */, scrollType);\r\n    };\r\n    CodeEditorWidget.prototype._revealLines = function (startLineNumber, endLineNumber, verticalType, scrollType) {\r\n        if (typeof startLineNumber !== 'number' || typeof endLineNumber !== 'number') {\r\n            throw new Error('Invalid arguments');\r\n        }\r\n        this._sendRevealRange(new Range(startLineNumber, 1, endLineNumber, 1), verticalType, false, scrollType);\r\n    };\r\n    CodeEditorWidget.prototype.revealRange = function (range, scrollType, revealVerticalInCenter, revealHorizontal) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        if (revealVerticalInCenter === void 0) { revealVerticalInCenter = false; }\r\n        if (revealHorizontal === void 0) { revealHorizontal = true; }\r\n        this._revealRange(range, revealVerticalInCenter ? 1 /* Center */ : 0 /* Simple */, revealHorizontal, scrollType);\r\n    };\r\n    CodeEditorWidget.prototype.revealRangeInCenter = function (range, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this._revealRange(range, 1 /* Center */, true, scrollType);\r\n    };\r\n    CodeEditorWidget.prototype.revealRangeInCenterIfOutsideViewport = function (range, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this._revealRange(range, 2 /* CenterIfOutsideViewport */, true, scrollType);\r\n    };\r\n    CodeEditorWidget.prototype.revealRangeAtTop = function (range, scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this._revealRange(range, 3 /* Top */, true, scrollType);\r\n    };\r\n    CodeEditorWidget.prototype._revealRange = function (range, verticalType, revealHorizontal, scrollType) {\r\n        if (!Range.isIRange(range)) {\r\n            throw new Error('Invalid arguments');\r\n        }\r\n        this._sendRevealRange(Range.lift(range), verticalType, revealHorizontal, scrollType);\r\n    };\r\n    CodeEditorWidget.prototype.setSelections = function (ranges, source) {\r\n        if (source === void 0) { source = 'api'; }\r\n        if (!this._modelData) {\r\n            return;\r\n        }\r\n        if (!ranges || ranges.length === 0) {\r\n            throw new Error('Invalid arguments');\r\n        }\r\n        for (var i = 0, len = ranges.length; i < len; i++) {\r\n            if (!Selection.isISelection(ranges[i])) {\r\n                throw new Error('Invalid arguments');\r\n            }\r\n        }\r\n        this._modelData.cursor.setSelections(source, ranges);\r\n    };\r\n    CodeEditorWidget.prototype.getContentWidth = function () {\r\n        if (!this._modelData) {\r\n            return -1;\r\n        }\r\n        return this._modelData.viewModel.viewLayout.getContentWidth();\r\n    };\r\n    CodeEditorWidget.prototype.getScrollWidth = function () {\r\n        if (!this._modelData) {\r\n            return -1;\r\n        }\r\n        return this._modelData.viewModel.viewLayout.getScrollWidth();\r\n    };\r\n    CodeEditorWidget.prototype.getScrollLeft = function () {\r\n        if (!this._modelData) {\r\n            return -1;\r\n        }\r\n        return this._modelData.viewModel.viewLayout.getCurrentScrollLeft();\r\n    };\r\n    CodeEditorWidget.prototype.getContentHeight = function () {\r\n        if (!this._modelData) {\r\n            return -1;\r\n        }\r\n        return this._modelData.viewModel.viewLayout.getContentHeight();\r\n    };\r\n    CodeEditorWidget.prototype.getScrollHeight = function () {\r\n        if (!this._modelData) {\r\n            return -1;\r\n        }\r\n        return this._modelData.viewModel.viewLayout.getScrollHeight();\r\n    };\r\n    CodeEditorWidget.prototype.getScrollTop = function () {\r\n        if (!this._modelData) {\r\n            return -1;\r\n        }\r\n        return this._modelData.viewModel.viewLayout.getCurrentScrollTop();\r\n    };\r\n    CodeEditorWidget.prototype.setScrollLeft = function (newScrollLeft) {\r\n        if (!this._modelData) {\r\n            return;\r\n        }\r\n        if (typeof newScrollLeft !== 'number') {\r\n            throw new Error('Invalid arguments');\r\n        }\r\n        this._modelData.viewModel.viewLayout.setScrollPositionNow({\r\n            scrollLeft: newScrollLeft\r\n        });\r\n    };\r\n    CodeEditorWidget.prototype.setScrollTop = function (newScrollTop) {\r\n        if (!this._modelData) {\r\n            return;\r\n        }\r\n        if (typeof newScrollTop !== 'number') {\r\n            throw new Error('Invalid arguments');\r\n        }\r\n        this._modelData.viewModel.viewLayout.setScrollPositionNow({\r\n            scrollTop: newScrollTop\r\n        });\r\n    };\r\n    CodeEditorWidget.prototype.setScrollPosition = function (position) {\r\n        if (!this._modelData) {\r\n            return;\r\n        }\r\n        this._modelData.viewModel.viewLayout.setScrollPositionNow(position);\r\n    };\r\n    CodeEditorWidget.prototype.saveViewState = function () {\r\n        if (!this._modelData) {\r\n            return null;\r\n        }\r\n        var contributionsState = {};\r\n        var keys = Object.keys(this._contributions);\r\n        for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\r\n            var id = keys_1[_i];\r\n            var contribution = this._contributions[id];\r\n            if (typeof contribution.saveViewState === 'function') {\r\n                contributionsState[id] = contribution.saveViewState();\r\n            }\r\n        }\r\n        var cursorState = this._modelData.cursor.saveState();\r\n        var viewState = this._modelData.viewModel.saveState();\r\n        return {\r\n            cursorState: cursorState,\r\n            viewState: viewState,\r\n            contributionsState: contributionsState\r\n        };\r\n    };\r\n    CodeEditorWidget.prototype.restoreViewState = function (s) {\r\n        if (!this._modelData || !this._modelData.hasRealView) {\r\n            return;\r\n        }\r\n        var codeEditorState = s;\r\n        if (codeEditorState && codeEditorState.cursorState && codeEditorState.viewState) {\r\n            var cursorState = codeEditorState.cursorState;\r\n            if (Array.isArray(cursorState)) {\r\n                this._modelData.cursor.restoreState(cursorState);\r\n            }\r\n            else {\r\n                // Backwards compatibility\r\n                this._modelData.cursor.restoreState([cursorState]);\r\n            }\r\n            var contributionsState = codeEditorState.contributionsState || {};\r\n            var keys = Object.keys(this._contributions);\r\n            for (var i = 0, len = keys.length; i < len; i++) {\r\n                var id = keys[i];\r\n                var contribution = this._contributions[id];\r\n                if (typeof contribution.restoreViewState === 'function') {\r\n                    contribution.restoreViewState(contributionsState[id]);\r\n                }\r\n            }\r\n            var reducedState = this._modelData.viewModel.reduceRestoreState(codeEditorState.viewState);\r\n            this._modelData.view.restoreState(reducedState);\r\n        }\r\n    };\r\n    CodeEditorWidget.prototype.getContribution = function (id) {\r\n        return (this._contributions[id] || null);\r\n    };\r\n    CodeEditorWidget.prototype.getActions = function () {\r\n        var result = [];\r\n        var keys = Object.keys(this._actions);\r\n        for (var i = 0, len = keys.length; i < len; i++) {\r\n            var id = keys[i];\r\n            result.push(this._actions[id]);\r\n        }\r\n        return result;\r\n    };\r\n    CodeEditorWidget.prototype.getSupportedActions = function () {\r\n        var result = this.getActions();\r\n        result = result.filter(function (action) { return action.isSupported(); });\r\n        return result;\r\n    };\r\n    CodeEditorWidget.prototype.getAction = function (id) {\r\n        return this._actions[id] || null;\r\n    };\r\n    CodeEditorWidget.prototype.trigger = function (source, handlerId, payload) {\r\n        payload = payload || {};\r\n        // Special case for typing\r\n        if (handlerId === editorCommon.Handler.Type) {\r\n            if (!this._modelData || typeof payload.text !== 'string' || payload.text.length === 0) {\r\n                // nothing to do\r\n                return;\r\n            }\r\n            if (source === 'keyboard') {\r\n                this._onWillType.fire(payload.text);\r\n            }\r\n            this._modelData.cursor.trigger(source, handlerId, payload);\r\n            if (source === 'keyboard') {\r\n                this._onDidType.fire(payload.text);\r\n            }\r\n            return;\r\n        }\r\n        // Special case for pasting\r\n        if (handlerId === editorCommon.Handler.Paste) {\r\n            if (!this._modelData || typeof payload.text !== 'string' || payload.text.length === 0) {\r\n                // nothing to do\r\n                return;\r\n            }\r\n            var startPosition = this._modelData.cursor.getSelection().getStartPosition();\r\n            this._modelData.cursor.trigger(source, handlerId, payload);\r\n            var endPosition = this._modelData.cursor.getSelection().getStartPosition();\r\n            if (source === 'keyboard') {\r\n                this._onDidPaste.fire({\r\n                    range: new Range(startPosition.lineNumber, startPosition.column, endPosition.lineNumber, endPosition.column),\r\n                    mode: payload.mode\r\n                });\r\n            }\r\n            return;\r\n        }\r\n        var action = this.getAction(handlerId);\r\n        if (action) {\r\n            Promise.resolve(action.run()).then(undefined, onUnexpectedError);\r\n            return;\r\n        }\r\n        if (!this._modelData) {\r\n            return;\r\n        }\r\n        if (this._triggerEditorCommand(source, handlerId, payload)) {\r\n            return;\r\n        }\r\n        this._modelData.cursor.trigger(source, handlerId, payload);\r\n        if (handlerId === editorCommon.Handler.CompositionStart) {\r\n            this._onDidCompositionStart.fire();\r\n        }\r\n        if (handlerId === editorCommon.Handler.CompositionEnd) {\r\n            this._onDidCompositionEnd.fire();\r\n        }\r\n    };\r\n    CodeEditorWidget.prototype._triggerEditorCommand = function (source, handlerId, payload) {\r\n        var _this = this;\r\n        var command = EditorExtensionsRegistry.getEditorCommand(handlerId);\r\n        if (command) {\r\n            payload = payload || {};\r\n            payload.source = source;\r\n            this._instantiationService.invokeFunction(function (accessor) {\r\n                Promise.resolve(command.runEditorCommand(accessor, _this, payload)).then(undefined, onUnexpectedError);\r\n            });\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    CodeEditorWidget.prototype._getCursors = function () {\r\n        if (!this._modelData) {\r\n            return null;\r\n        }\r\n        return this._modelData.cursor;\r\n    };\r\n    CodeEditorWidget.prototype.pushUndoStop = function () {\r\n        if (!this._modelData) {\r\n            return false;\r\n        }\r\n        if (this._configuration.options.get(68 /* readOnly */)) {\r\n            // read only editor => sorry!\r\n            return false;\r\n        }\r\n        this._modelData.model.pushStackElement();\r\n        return true;\r\n    };\r\n    CodeEditorWidget.prototype.executeEdits = function (source, edits, endCursorState) {\r\n        if (!this._modelData) {\r\n            return false;\r\n        }\r\n        if (this._configuration.options.get(68 /* readOnly */)) {\r\n            // read only editor => sorry!\r\n            return false;\r\n        }\r\n        var cursorStateComputer;\r\n        if (!endCursorState) {\r\n            cursorStateComputer = function () { return null; };\r\n        }\r\n        else if (Array.isArray(endCursorState)) {\r\n            cursorStateComputer = function () { return endCursorState; };\r\n        }\r\n        else {\r\n            cursorStateComputer = endCursorState;\r\n        }\r\n        this._modelData.cursor.executeEdits(source, edits, cursorStateComputer);\r\n        return true;\r\n    };\r\n    CodeEditorWidget.prototype.executeCommand = function (source, command) {\r\n        if (!this._modelData) {\r\n            return;\r\n        }\r\n        this._modelData.cursor.trigger(source, editorCommon.Handler.ExecuteCommand, command);\r\n    };\r\n    CodeEditorWidget.prototype.executeCommands = function (source, commands) {\r\n        if (!this._modelData) {\r\n            return;\r\n        }\r\n        this._modelData.cursor.trigger(source, editorCommon.Handler.ExecuteCommands, commands);\r\n    };\r\n    CodeEditorWidget.prototype.changeDecorations = function (callback) {\r\n        if (!this._modelData) {\r\n            // callback will not be called\r\n            return null;\r\n        }\r\n        return this._modelData.model.changeDecorations(callback, this._id);\r\n    };\r\n    CodeEditorWidget.prototype.getLineDecorations = function (lineNumber) {\r\n        if (!this._modelData) {\r\n            return null;\r\n        }\r\n        return this._modelData.model.getLineDecorations(lineNumber, this._id, filterValidationDecorations(this._configuration.options));\r\n    };\r\n    CodeEditorWidget.prototype.deltaDecorations = function (oldDecorations, newDecorations) {\r\n        if (!this._modelData) {\r\n            return [];\r\n        }\r\n        if (oldDecorations.length === 0 && newDecorations.length === 0) {\r\n            return oldDecorations;\r\n        }\r\n        return this._modelData.model.deltaDecorations(oldDecorations, newDecorations, this._id);\r\n    };\r\n    CodeEditorWidget.prototype.removeDecorations = function (decorationTypeKey) {\r\n        // remove decorations for type and sub type\r\n        var oldDecorationsIds = this._decorationTypeKeysToIds[decorationTypeKey];\r\n        if (oldDecorationsIds) {\r\n            this.deltaDecorations(oldDecorationsIds, []);\r\n        }\r\n        if (this._decorationTypeKeysToIds.hasOwnProperty(decorationTypeKey)) {\r\n            delete this._decorationTypeKeysToIds[decorationTypeKey];\r\n        }\r\n        if (this._decorationTypeSubtypes.hasOwnProperty(decorationTypeKey)) {\r\n            delete this._decorationTypeSubtypes[decorationTypeKey];\r\n        }\r\n    };\r\n    CodeEditorWidget.prototype.getLayoutInfo = function () {\r\n        var options = this._configuration.options;\r\n        var layoutInfo = options.get(107 /* layoutInfo */);\r\n        return layoutInfo;\r\n    };\r\n    CodeEditorWidget.prototype.createOverviewRuler = function (cssClassName) {\r\n        if (!this._modelData || !this._modelData.hasRealView) {\r\n            return null;\r\n        }\r\n        return this._modelData.view.createOverviewRuler(cssClassName);\r\n    };\r\n    CodeEditorWidget.prototype.getContainerDomNode = function () {\r\n        return this._domElement;\r\n    };\r\n    CodeEditorWidget.prototype.getDomNode = function () {\r\n        if (!this._modelData || !this._modelData.hasRealView) {\r\n            return null;\r\n        }\r\n        return this._modelData.view.domNode.domNode;\r\n    };\r\n    CodeEditorWidget.prototype.delegateVerticalScrollbarMouseDown = function (browserEvent) {\r\n        if (!this._modelData || !this._modelData.hasRealView) {\r\n            return;\r\n        }\r\n        this._modelData.view.delegateVerticalScrollbarMouseDown(browserEvent);\r\n    };\r\n    CodeEditorWidget.prototype.layout = function (dimension) {\r\n        this._configuration.observeReferenceElement(dimension);\r\n        this.render();\r\n    };\r\n    CodeEditorWidget.prototype.focus = function () {\r\n        if (!this._modelData || !this._modelData.hasRealView) {\r\n            return;\r\n        }\r\n        this._modelData.view.focus();\r\n    };\r\n    CodeEditorWidget.prototype.hasTextFocus = function () {\r\n        if (!this._modelData || !this._modelData.hasRealView) {\r\n            return false;\r\n        }\r\n        return this._modelData.view.isFocused();\r\n    };\r\n    CodeEditorWidget.prototype.hasWidgetFocus = function () {\r\n        return this._focusTracker && this._focusTracker.hasFocus();\r\n    };\r\n    CodeEditorWidget.prototype.addContentWidget = function (widget) {\r\n        var widgetData = {\r\n            widget: widget,\r\n            position: widget.getPosition()\r\n        };\r\n        if (this._contentWidgets.hasOwnProperty(widget.getId())) {\r\n            console.warn('Overwriting a content widget with the same id.');\r\n        }\r\n        this._contentWidgets[widget.getId()] = widgetData;\r\n        if (this._modelData && this._modelData.hasRealView) {\r\n            this._modelData.view.addContentWidget(widgetData);\r\n        }\r\n    };\r\n    CodeEditorWidget.prototype.layoutContentWidget = function (widget) {\r\n        var widgetId = widget.getId();\r\n        if (this._contentWidgets.hasOwnProperty(widgetId)) {\r\n            var widgetData = this._contentWidgets[widgetId];\r\n            widgetData.position = widget.getPosition();\r\n            if (this._modelData && this._modelData.hasRealView) {\r\n                this._modelData.view.layoutContentWidget(widgetData);\r\n            }\r\n        }\r\n    };\r\n    CodeEditorWidget.prototype.removeContentWidget = function (widget) {\r\n        var widgetId = widget.getId();\r\n        if (this._contentWidgets.hasOwnProperty(widgetId)) {\r\n            var widgetData = this._contentWidgets[widgetId];\r\n            delete this._contentWidgets[widgetId];\r\n            if (this._modelData && this._modelData.hasRealView) {\r\n                this._modelData.view.removeContentWidget(widgetData);\r\n            }\r\n        }\r\n    };\r\n    CodeEditorWidget.prototype.addOverlayWidget = function (widget) {\r\n        var widgetData = {\r\n            widget: widget,\r\n            position: widget.getPosition()\r\n        };\r\n        if (this._overlayWidgets.hasOwnProperty(widget.getId())) {\r\n            console.warn('Overwriting an overlay widget with the same id.');\r\n        }\r\n        this._overlayWidgets[widget.getId()] = widgetData;\r\n        if (this._modelData && this._modelData.hasRealView) {\r\n            this._modelData.view.addOverlayWidget(widgetData);\r\n        }\r\n    };\r\n    CodeEditorWidget.prototype.layoutOverlayWidget = function (widget) {\r\n        var widgetId = widget.getId();\r\n        if (this._overlayWidgets.hasOwnProperty(widgetId)) {\r\n            var widgetData = this._overlayWidgets[widgetId];\r\n            widgetData.position = widget.getPosition();\r\n            if (this._modelData && this._modelData.hasRealView) {\r\n                this._modelData.view.layoutOverlayWidget(widgetData);\r\n            }\r\n        }\r\n    };\r\n    CodeEditorWidget.prototype.removeOverlayWidget = function (widget) {\r\n        var widgetId = widget.getId();\r\n        if (this._overlayWidgets.hasOwnProperty(widgetId)) {\r\n            var widgetData = this._overlayWidgets[widgetId];\r\n            delete this._overlayWidgets[widgetId];\r\n            if (this._modelData && this._modelData.hasRealView) {\r\n                this._modelData.view.removeOverlayWidget(widgetData);\r\n            }\r\n        }\r\n    };\r\n    CodeEditorWidget.prototype.changeViewZones = function (callback) {\r\n        if (!this._modelData || !this._modelData.hasRealView) {\r\n            return;\r\n        }\r\n        var hasChanges = this._modelData.view.change(callback);\r\n        if (hasChanges) {\r\n            this._onDidChangeViewZones.fire();\r\n        }\r\n    };\r\n    CodeEditorWidget.prototype.getTargetAtClientPoint = function (clientX, clientY) {\r\n        if (!this._modelData || !this._modelData.hasRealView) {\r\n            return null;\r\n        }\r\n        return this._modelData.view.getTargetAtClientPoint(clientX, clientY);\r\n    };\r\n    CodeEditorWidget.prototype.getScrolledVisiblePosition = function (rawPosition) {\r\n        if (!this._modelData || !this._modelData.hasRealView) {\r\n            return null;\r\n        }\r\n        var position = this._modelData.model.validatePosition(rawPosition);\r\n        var options = this._configuration.options;\r\n        var layoutInfo = options.get(107 /* layoutInfo */);\r\n        var top = CodeEditorWidget._getVerticalOffsetForPosition(this._modelData, position.lineNumber, position.column) - this.getScrollTop();\r\n        var left = this._modelData.view.getOffsetForColumn(position.lineNumber, position.column) + layoutInfo.glyphMarginWidth + layoutInfo.lineNumbersWidth + layoutInfo.decorationsWidth - this.getScrollLeft();\r\n        return {\r\n            top: top,\r\n            left: left,\r\n            height: options.get(49 /* lineHeight */)\r\n        };\r\n    };\r\n    CodeEditorWidget.prototype.getOffsetForColumn = function (lineNumber, column) {\r\n        if (!this._modelData || !this._modelData.hasRealView) {\r\n            return -1;\r\n        }\r\n        return this._modelData.view.getOffsetForColumn(lineNumber, column);\r\n    };\r\n    CodeEditorWidget.prototype.render = function (forceRedraw) {\r\n        if (forceRedraw === void 0) { forceRedraw = false; }\r\n        if (!this._modelData || !this._modelData.hasRealView) {\r\n            return;\r\n        }\r\n        this._modelData.view.render(true, forceRedraw);\r\n    };\r\n    CodeEditorWidget.prototype.setAriaOptions = function (options) {\r\n        if (!this._modelData || !this._modelData.hasRealView) {\r\n            return;\r\n        }\r\n        this._modelData.view.setAriaOptions(options);\r\n    };\r\n    CodeEditorWidget.prototype.applyFontInfo = function (target) {\r\n        Configuration.applyFontInfoSlow(target, this._configuration.options.get(34 /* fontInfo */));\r\n    };\r\n    CodeEditorWidget.prototype._attachModel = function (model) {\r\n        var _this = this;\r\n        if (!model) {\r\n            this._modelData = null;\r\n            return;\r\n        }\r\n        var listenersToRemove = [];\r\n        this._domElement.setAttribute('data-mode-id', model.getLanguageIdentifier().language);\r\n        this._configuration.setIsDominatedByLongLines(model.isDominatedByLongLines());\r\n        this._configuration.setMaxLineNumber(model.getLineCount());\r\n        model.onBeforeAttached();\r\n        var viewModel = new ViewModel(this._id, this._configuration, model, DOMLineBreaksComputerFactory.create(), MonospaceLineBreaksComputerFactory.create(this._configuration.options), function (callback) { return dom.scheduleAtNextAnimationFrame(callback); });\r\n        listenersToRemove.push(model.onDidChangeDecorations(function (e) { return _this._onDidChangeModelDecorations.fire(e); }));\r\n        listenersToRemove.push(model.onDidChangeLanguage(function (e) {\r\n            _this._domElement.setAttribute('data-mode-id', model.getLanguageIdentifier().language);\r\n            _this._onDidChangeModelLanguage.fire(e);\r\n        }));\r\n        listenersToRemove.push(model.onDidChangeLanguageConfiguration(function (e) { return _this._onDidChangeModelLanguageConfiguration.fire(e); }));\r\n        listenersToRemove.push(model.onDidChangeContent(function (e) { return _this._onDidChangeModelContent.fire(e); }));\r\n        listenersToRemove.push(model.onDidChangeOptions(function (e) { return _this._onDidChangeModelOptions.fire(e); }));\r\n        // Someone might destroy the model from under the editor, so prevent any exceptions by setting a null model\r\n        listenersToRemove.push(model.onWillDispose(function () { return _this.setModel(null); }));\r\n        var cursor = new Cursor(this._configuration, model, viewModel);\r\n        listenersToRemove.push(cursor.onDidReachMaxCursorCount(function () {\r\n            _this._notificationService.warn(nls.localize('cursors.maximum', \"The number of cursors has been limited to {0}.\", Cursor.MAX_CURSOR_COUNT));\r\n        }));\r\n        listenersToRemove.push(cursor.onDidAttemptReadOnlyEdit(function () {\r\n            _this._onDidAttemptReadOnlyEdit.fire(undefined);\r\n        }));\r\n        listenersToRemove.push(cursor.onDidChange(function (e) {\r\n            var positions = [];\r\n            for (var i = 0, len = e.selections.length; i < len; i++) {\r\n                positions[i] = e.selections[i].getPosition();\r\n            }\r\n            var e1 = {\r\n                position: positions[0],\r\n                secondaryPositions: positions.slice(1),\r\n                reason: e.reason,\r\n                source: e.source\r\n            };\r\n            _this._onDidChangeCursorPosition.fire(e1);\r\n            var e2 = {\r\n                selection: e.selections[0],\r\n                secondarySelections: e.selections.slice(1),\r\n                modelVersionId: e.modelVersionId,\r\n                oldSelections: e.oldSelections,\r\n                oldModelVersionId: e.oldModelVersionId,\r\n                source: e.source,\r\n                reason: e.reason\r\n            };\r\n            _this._onDidChangeCursorSelection.fire(e2);\r\n        }));\r\n        var _a = this._createView(viewModel, cursor), view = _a[0], hasRealView = _a[1];\r\n        if (hasRealView) {\r\n            this._domElement.appendChild(view.domNode.domNode);\r\n            var keys = Object.keys(this._contentWidgets);\r\n            for (var i = 0, len = keys.length; i < len; i++) {\r\n                var widgetId = keys[i];\r\n                view.addContentWidget(this._contentWidgets[widgetId]);\r\n            }\r\n            keys = Object.keys(this._overlayWidgets);\r\n            for (var i = 0, len = keys.length; i < len; i++) {\r\n                var widgetId = keys[i];\r\n                view.addOverlayWidget(this._overlayWidgets[widgetId]);\r\n            }\r\n            view.render(false, true);\r\n            view.domNode.domNode.setAttribute('data-uri', model.uri.toString());\r\n        }\r\n        this._modelData = new ModelData(model, viewModel, cursor, view, hasRealView, listenersToRemove);\r\n    };\r\n    CodeEditorWidget.prototype._createView = function (viewModel, cursor) {\r\n        var _this = this;\r\n        var commandDelegate;\r\n        if (this.isSimpleWidget) {\r\n            commandDelegate = {\r\n                executeEditorCommand: function (editorCommand, args) {\r\n                    editorCommand.runCoreEditorCommand(cursor, args);\r\n                },\r\n                paste: function (source, text, pasteOnNewLine, multicursorText, mode) {\r\n                    _this.trigger(source, editorCommon.Handler.Paste, { text: text, pasteOnNewLine: pasteOnNewLine, multicursorText: multicursorText, mode: mode });\r\n                },\r\n                type: function (source, text) {\r\n                    _this.trigger(source, editorCommon.Handler.Type, { text: text });\r\n                },\r\n                replacePreviousChar: function (source, text, replaceCharCnt) {\r\n                    _this.trigger(source, editorCommon.Handler.ReplacePreviousChar, { text: text, replaceCharCnt: replaceCharCnt });\r\n                },\r\n                compositionStart: function (source) {\r\n                    _this.trigger(source, editorCommon.Handler.CompositionStart, undefined);\r\n                },\r\n                compositionEnd: function (source) {\r\n                    _this.trigger(source, editorCommon.Handler.CompositionEnd, undefined);\r\n                },\r\n                cut: function (source) {\r\n                    _this.trigger(source, editorCommon.Handler.Cut, undefined);\r\n                }\r\n            };\r\n        }\r\n        else {\r\n            commandDelegate = {\r\n                executeEditorCommand: function (editorCommand, args) {\r\n                    editorCommand.runCoreEditorCommand(cursor, args);\r\n                },\r\n                paste: function (source, text, pasteOnNewLine, multicursorText, mode) {\r\n                    _this._commandService.executeCommand(editorCommon.Handler.Paste, {\r\n                        text: text,\r\n                        pasteOnNewLine: pasteOnNewLine,\r\n                        multicursorText: multicursorText,\r\n                        mode: mode\r\n                    });\r\n                },\r\n                type: function (source, text) {\r\n                    _this._commandService.executeCommand(editorCommon.Handler.Type, {\r\n                        text: text\r\n                    });\r\n                },\r\n                replacePreviousChar: function (source, text, replaceCharCnt) {\r\n                    _this._commandService.executeCommand(editorCommon.Handler.ReplacePreviousChar, {\r\n                        text: text,\r\n                        replaceCharCnt: replaceCharCnt\r\n                    });\r\n                },\r\n                compositionStart: function (source) {\r\n                    _this._commandService.executeCommand(editorCommon.Handler.CompositionStart, {});\r\n                },\r\n                compositionEnd: function (source) {\r\n                    _this._commandService.executeCommand(editorCommon.Handler.CompositionEnd, {});\r\n                },\r\n                cut: function (source) {\r\n                    _this._commandService.executeCommand(editorCommon.Handler.Cut, {});\r\n                }\r\n            };\r\n        }\r\n        var viewOutgoingEvents = new ViewOutgoingEvents(viewModel);\r\n        viewOutgoingEvents.onDidContentSizeChange = function (e) { return _this._onDidContentSizeChange.fire(e); };\r\n        viewOutgoingEvents.onDidScroll = function (e) { return _this._onDidScrollChange.fire(e); };\r\n        viewOutgoingEvents.onDidGainFocus = function () { return _this._editorTextFocus.setValue(true); };\r\n        viewOutgoingEvents.onDidLoseFocus = function () { return _this._editorTextFocus.setValue(false); };\r\n        viewOutgoingEvents.onContextMenu = function (e) { return _this._onContextMenu.fire(e); };\r\n        viewOutgoingEvents.onMouseDown = function (e) { return _this._onMouseDown.fire(e); };\r\n        viewOutgoingEvents.onMouseUp = function (e) { return _this._onMouseUp.fire(e); };\r\n        viewOutgoingEvents.onMouseDrag = function (e) { return _this._onMouseDrag.fire(e); };\r\n        viewOutgoingEvents.onMouseDrop = function (e) { return _this._onMouseDrop.fire(e); };\r\n        viewOutgoingEvents.onKeyUp = function (e) { return _this._onKeyUp.fire(e); };\r\n        viewOutgoingEvents.onMouseMove = function (e) { return _this._onMouseMove.fire(e); };\r\n        viewOutgoingEvents.onMouseLeave = function (e) { return _this._onMouseLeave.fire(e); };\r\n        viewOutgoingEvents.onMouseWheel = function (e) { return _this._onMouseWheel.fire(e); };\r\n        viewOutgoingEvents.onKeyDown = function (e) { return _this._onKeyDown.fire(e); };\r\n        var view = new View(commandDelegate, this._configuration, this._themeService, viewModel, cursor, viewOutgoingEvents);\r\n        return [view, true];\r\n    };\r\n    CodeEditorWidget.prototype._postDetachModelCleanup = function (detachedModel) {\r\n        if (detachedModel) {\r\n            detachedModel.removeAllDecorationsWithOwnerId(this._id);\r\n        }\r\n    };\r\n    CodeEditorWidget.prototype._detachModel = function () {\r\n        if (!this._modelData) {\r\n            return null;\r\n        }\r\n        var model = this._modelData.model;\r\n        var removeDomNode = this._modelData.hasRealView ? this._modelData.view.domNode.domNode : null;\r\n        this._modelData.dispose();\r\n        this._modelData = null;\r\n        this._domElement.removeAttribute('data-mode-id');\r\n        if (removeDomNode) {\r\n            this._domElement.removeChild(removeDomNode);\r\n        }\r\n        return model;\r\n    };\r\n    CodeEditorWidget.prototype._removeDecorationType = function (key) {\r\n        this._codeEditorService.removeDecorationType(key);\r\n    };\r\n    CodeEditorWidget.prototype.hasModel = function () {\r\n        return (this._modelData !== null);\r\n    };\r\n    CodeEditorWidget = __decorate([\r\n        __param(3, IInstantiationService),\r\n        __param(4, ICodeEditorService),\r\n        __param(5, ICommandService),\r\n        __param(6, IContextKeyService),\r\n        __param(7, IThemeService),\r\n        __param(8, INotificationService),\r\n        __param(9, IAccessibilityService)\r\n    ], CodeEditorWidget);\r\n    return CodeEditorWidget;\r\n}(Disposable));\r\nexport { CodeEditorWidget };\r\nvar BooleanEventEmitter = /** @class */ (function (_super) {\r\n    __extends(BooleanEventEmitter, _super);\r\n    function BooleanEventEmitter() {\r\n        var _this = _super.call(this) || this;\r\n        _this._onDidChangeToTrue = _this._register(new Emitter());\r\n        _this.onDidChangeToTrue = _this._onDidChangeToTrue.event;\r\n        _this._onDidChangeToFalse = _this._register(new Emitter());\r\n        _this.onDidChangeToFalse = _this._onDidChangeToFalse.event;\r\n        _this._value = 0 /* NotSet */;\r\n        return _this;\r\n    }\r\n    BooleanEventEmitter.prototype.setValue = function (_value) {\r\n        var value = (_value ? 2 /* True */ : 1 /* False */);\r\n        if (this._value === value) {\r\n            return;\r\n        }\r\n        this._value = value;\r\n        if (this._value === 2 /* True */) {\r\n            this._onDidChangeToTrue.fire();\r\n        }\r\n        else if (this._value === 1 /* False */) {\r\n            this._onDidChangeToFalse.fire();\r\n        }\r\n    };\r\n    return BooleanEventEmitter;\r\n}(Disposable));\r\nexport { BooleanEventEmitter };\r\nvar EditorContextKeysManager = /** @class */ (function (_super) {\r\n    __extends(EditorContextKeysManager, _super);\r\n    function EditorContextKeysManager(editor, contextKeyService) {\r\n        var _this = _super.call(this) || this;\r\n        _this._editor = editor;\r\n        contextKeyService.createKey('editorId', editor.getId());\r\n        _this._editorSimpleInput = EditorContextKeys.editorSimpleInput.bindTo(contextKeyService);\r\n        _this._editorFocus = EditorContextKeys.focus.bindTo(contextKeyService);\r\n        _this._textInputFocus = EditorContextKeys.textInputFocus.bindTo(contextKeyService);\r\n        _this._editorTextFocus = EditorContextKeys.editorTextFocus.bindTo(contextKeyService);\r\n        _this._editorTabMovesFocus = EditorContextKeys.tabMovesFocus.bindTo(contextKeyService);\r\n        _this._editorReadonly = EditorContextKeys.readOnly.bindTo(contextKeyService);\r\n        _this._hasMultipleSelections = EditorContextKeys.hasMultipleSelections.bindTo(contextKeyService);\r\n        _this._hasNonEmptySelection = EditorContextKeys.hasNonEmptySelection.bindTo(contextKeyService);\r\n        _this._canUndo = EditorContextKeys.canUndo.bindTo(contextKeyService);\r\n        _this._canRedo = EditorContextKeys.canRedo.bindTo(contextKeyService);\r\n        _this._register(_this._editor.onDidChangeConfiguration(function () { return _this._updateFromConfig(); }));\r\n        _this._register(_this._editor.onDidChangeCursorSelection(function () { return _this._updateFromSelection(); }));\r\n        _this._register(_this._editor.onDidFocusEditorWidget(function () { return _this._updateFromFocus(); }));\r\n        _this._register(_this._editor.onDidBlurEditorWidget(function () { return _this._updateFromFocus(); }));\r\n        _this._register(_this._editor.onDidFocusEditorText(function () { return _this._updateFromFocus(); }));\r\n        _this._register(_this._editor.onDidBlurEditorText(function () { return _this._updateFromFocus(); }));\r\n        _this._register(_this._editor.onDidChangeModel(function () { return _this._updateFromModel(); }));\r\n        _this._register(_this._editor.onDidChangeConfiguration(function () { return _this._updateFromModel(); }));\r\n        _this._updateFromConfig();\r\n        _this._updateFromSelection();\r\n        _this._updateFromFocus();\r\n        _this._updateFromModel();\r\n        _this._editorSimpleInput.set(_this._editor.isSimpleWidget);\r\n        return _this;\r\n    }\r\n    EditorContextKeysManager.prototype._updateFromConfig = function () {\r\n        var options = this._editor.getOptions();\r\n        this._editorTabMovesFocus.set(options.get(106 /* tabFocusMode */));\r\n        this._editorReadonly.set(options.get(68 /* readOnly */));\r\n    };\r\n    EditorContextKeysManager.prototype._updateFromSelection = function () {\r\n        var selections = this._editor.getSelections();\r\n        if (!selections) {\r\n            this._hasMultipleSelections.reset();\r\n            this._hasNonEmptySelection.reset();\r\n        }\r\n        else {\r\n            this._hasMultipleSelections.set(selections.length > 1);\r\n            this._hasNonEmptySelection.set(selections.some(function (s) { return !s.isEmpty(); }));\r\n        }\r\n    };\r\n    EditorContextKeysManager.prototype._updateFromFocus = function () {\r\n        this._editorFocus.set(this._editor.hasWidgetFocus() && !this._editor.isSimpleWidget);\r\n        this._editorTextFocus.set(this._editor.hasTextFocus() && !this._editor.isSimpleWidget);\r\n        this._textInputFocus.set(this._editor.hasTextFocus());\r\n    };\r\n    EditorContextKeysManager.prototype._updateFromModel = function () {\r\n        var model = this._editor.getModel();\r\n        this._canUndo.set(Boolean(model && model.canUndo()));\r\n        this._canRedo.set(Boolean(model && model.canRedo()));\r\n    };\r\n    return EditorContextKeysManager;\r\n}(Disposable));\r\nvar EditorModeContext = /** @class */ (function (_super) {\r\n    __extends(EditorModeContext, _super);\r\n    function EditorModeContext(_editor, _contextKeyService) {\r\n        var _this = _super.call(this) || this;\r\n        _this._editor = _editor;\r\n        _this._contextKeyService = _contextKeyService;\r\n        _this._langId = EditorContextKeys.languageId.bindTo(_contextKeyService);\r\n        _this._hasCompletionItemProvider = EditorContextKeys.hasCompletionItemProvider.bindTo(_contextKeyService);\r\n        _this._hasCodeActionsProvider = EditorContextKeys.hasCodeActionsProvider.bindTo(_contextKeyService);\r\n        _this._hasCodeLensProvider = EditorContextKeys.hasCodeLensProvider.bindTo(_contextKeyService);\r\n        _this._hasDefinitionProvider = EditorContextKeys.hasDefinitionProvider.bindTo(_contextKeyService);\r\n        _this._hasDeclarationProvider = EditorContextKeys.hasDeclarationProvider.bindTo(_contextKeyService);\r\n        _this._hasImplementationProvider = EditorContextKeys.hasImplementationProvider.bindTo(_contextKeyService);\r\n        _this._hasTypeDefinitionProvider = EditorContextKeys.hasTypeDefinitionProvider.bindTo(_contextKeyService);\r\n        _this._hasHoverProvider = EditorContextKeys.hasHoverProvider.bindTo(_contextKeyService);\r\n        _this._hasDocumentHighlightProvider = EditorContextKeys.hasDocumentHighlightProvider.bindTo(_contextKeyService);\r\n        _this._hasDocumentSymbolProvider = EditorContextKeys.hasDocumentSymbolProvider.bindTo(_contextKeyService);\r\n        _this._hasReferenceProvider = EditorContextKeys.hasReferenceProvider.bindTo(_contextKeyService);\r\n        _this._hasRenameProvider = EditorContextKeys.hasRenameProvider.bindTo(_contextKeyService);\r\n        _this._hasSignatureHelpProvider = EditorContextKeys.hasSignatureHelpProvider.bindTo(_contextKeyService);\r\n        _this._hasDocumentFormattingProvider = EditorContextKeys.hasDocumentFormattingProvider.bindTo(_contextKeyService);\r\n        _this._hasDocumentSelectionFormattingProvider = EditorContextKeys.hasDocumentSelectionFormattingProvider.bindTo(_contextKeyService);\r\n        _this._hasMultipleDocumentFormattingProvider = EditorContextKeys.hasMultipleDocumentFormattingProvider.bindTo(_contextKeyService);\r\n        _this._hasMultipleDocumentSelectionFormattingProvider = EditorContextKeys.hasMultipleDocumentSelectionFormattingProvider.bindTo(_contextKeyService);\r\n        _this._isInWalkThrough = EditorContextKeys.isInEmbeddedEditor.bindTo(_contextKeyService);\r\n        var update = function () { return _this._update(); };\r\n        // update when model/mode changes\r\n        _this._register(_editor.onDidChangeModel(update));\r\n        _this._register(_editor.onDidChangeModelLanguage(update));\r\n        // update when registries change\r\n        _this._register(modes.CompletionProviderRegistry.onDidChange(update));\r\n        _this._register(modes.CodeActionProviderRegistry.onDidChange(update));\r\n        _this._register(modes.CodeLensProviderRegistry.onDidChange(update));\r\n        _this._register(modes.DefinitionProviderRegistry.onDidChange(update));\r\n        _this._register(modes.DeclarationProviderRegistry.onDidChange(update));\r\n        _this._register(modes.ImplementationProviderRegistry.onDidChange(update));\r\n        _this._register(modes.TypeDefinitionProviderRegistry.onDidChange(update));\r\n        _this._register(modes.HoverProviderRegistry.onDidChange(update));\r\n        _this._register(modes.DocumentHighlightProviderRegistry.onDidChange(update));\r\n        _this._register(modes.DocumentSymbolProviderRegistry.onDidChange(update));\r\n        _this._register(modes.ReferenceProviderRegistry.onDidChange(update));\r\n        _this._register(modes.RenameProviderRegistry.onDidChange(update));\r\n        _this._register(modes.DocumentFormattingEditProviderRegistry.onDidChange(update));\r\n        _this._register(modes.DocumentRangeFormattingEditProviderRegistry.onDidChange(update));\r\n        _this._register(modes.SignatureHelpProviderRegistry.onDidChange(update));\r\n        update();\r\n        return _this;\r\n    }\r\n    EditorModeContext.prototype.dispose = function () {\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    EditorModeContext.prototype.reset = function () {\r\n        var _this = this;\r\n        this._contextKeyService.bufferChangeEvents(function () {\r\n            _this._langId.reset();\r\n            _this._hasCompletionItemProvider.reset();\r\n            _this._hasCodeActionsProvider.reset();\r\n            _this._hasCodeLensProvider.reset();\r\n            _this._hasDefinitionProvider.reset();\r\n            _this._hasDeclarationProvider.reset();\r\n            _this._hasImplementationProvider.reset();\r\n            _this._hasTypeDefinitionProvider.reset();\r\n            _this._hasHoverProvider.reset();\r\n            _this._hasDocumentHighlightProvider.reset();\r\n            _this._hasDocumentSymbolProvider.reset();\r\n            _this._hasReferenceProvider.reset();\r\n            _this._hasRenameProvider.reset();\r\n            _this._hasDocumentFormattingProvider.reset();\r\n            _this._hasDocumentSelectionFormattingProvider.reset();\r\n            _this._hasSignatureHelpProvider.reset();\r\n            _this._isInWalkThrough.reset();\r\n        });\r\n    };\r\n    EditorModeContext.prototype._update = function () {\r\n        var _this = this;\r\n        var model = this._editor.getModel();\r\n        if (!model) {\r\n            this.reset();\r\n            return;\r\n        }\r\n        this._contextKeyService.bufferChangeEvents(function () {\r\n            _this._langId.set(model.getLanguageIdentifier().language);\r\n            _this._hasCompletionItemProvider.set(modes.CompletionProviderRegistry.has(model));\r\n            _this._hasCodeActionsProvider.set(modes.CodeActionProviderRegistry.has(model));\r\n            _this._hasCodeLensProvider.set(modes.CodeLensProviderRegistry.has(model));\r\n            _this._hasDefinitionProvider.set(modes.DefinitionProviderRegistry.has(model));\r\n            _this._hasDeclarationProvider.set(modes.DeclarationProviderRegistry.has(model));\r\n            _this._hasImplementationProvider.set(modes.ImplementationProviderRegistry.has(model));\r\n            _this._hasTypeDefinitionProvider.set(modes.TypeDefinitionProviderRegistry.has(model));\r\n            _this._hasHoverProvider.set(modes.HoverProviderRegistry.has(model));\r\n            _this._hasDocumentHighlightProvider.set(modes.DocumentHighlightProviderRegistry.has(model));\r\n            _this._hasDocumentSymbolProvider.set(modes.DocumentSymbolProviderRegistry.has(model));\r\n            _this._hasReferenceProvider.set(modes.ReferenceProviderRegistry.has(model));\r\n            _this._hasRenameProvider.set(modes.RenameProviderRegistry.has(model));\r\n            _this._hasSignatureHelpProvider.set(modes.SignatureHelpProviderRegistry.has(model));\r\n            _this._hasDocumentFormattingProvider.set(modes.DocumentFormattingEditProviderRegistry.has(model) || modes.DocumentRangeFormattingEditProviderRegistry.has(model));\r\n            _this._hasDocumentSelectionFormattingProvider.set(modes.DocumentRangeFormattingEditProviderRegistry.has(model));\r\n            _this._hasMultipleDocumentFormattingProvider.set(modes.DocumentFormattingEditProviderRegistry.all(model).length + modes.DocumentRangeFormattingEditProviderRegistry.all(model).length > 1);\r\n            _this._hasMultipleDocumentSelectionFormattingProvider.set(modes.DocumentRangeFormattingEditProviderRegistry.all(model).length > 1);\r\n            _this._isInWalkThrough.set(model.uri.scheme === Schemas.walkThroughSnippet);\r\n        });\r\n    };\r\n    return EditorModeContext;\r\n}(Disposable));\r\nexport { EditorModeContext };\r\nvar CodeEditorWidgetFocusTracker = /** @class */ (function (_super) {\r\n    __extends(CodeEditorWidgetFocusTracker, _super);\r\n    function CodeEditorWidgetFocusTracker(domElement) {\r\n        var _this = _super.call(this) || this;\r\n        _this._onChange = _this._register(new Emitter());\r\n        _this.onChange = _this._onChange.event;\r\n        _this._hasFocus = false;\r\n        _this._domFocusTracker = _this._register(dom.trackFocus(domElement));\r\n        _this._register(_this._domFocusTracker.onDidFocus(function () {\r\n            _this._hasFocus = true;\r\n            _this._onChange.fire(undefined);\r\n        }));\r\n        _this._register(_this._domFocusTracker.onDidBlur(function () {\r\n            _this._hasFocus = false;\r\n            _this._onChange.fire(undefined);\r\n        }));\r\n        return _this;\r\n    }\r\n    CodeEditorWidgetFocusTracker.prototype.hasFocus = function () {\r\n        return this._hasFocus;\r\n    };\r\n    return CodeEditorWidgetFocusTracker;\r\n}(Disposable));\r\nvar squigglyStart = encodeURIComponent(\"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='\");\r\nvar squigglyEnd = encodeURIComponent(\"'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>\");\r\nfunction getSquigglySVGData(color) {\r\n    return squigglyStart + encodeURIComponent(color.toString()) + squigglyEnd;\r\n}\r\nvar dotdotdotStart = encodeURIComponent(\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" height=\\\"3\\\" width=\\\"12\\\"><g fill=\\\"\");\r\nvar dotdotdotEnd = encodeURIComponent(\"\\\"><circle cx=\\\"1\\\" cy=\\\"1\\\" r=\\\"1\\\"/><circle cx=\\\"5\\\" cy=\\\"1\\\" r=\\\"1\\\"/><circle cx=\\\"9\\\" cy=\\\"1\\\" r=\\\"1\\\"/></g></svg>\");\r\nfunction getDotDotDotSVGData(color) {\r\n    return dotdotdotStart + encodeURIComponent(color.toString()) + dotdotdotEnd;\r\n}\r\nregisterThemingParticipant(function (theme, collector) {\r\n    var errorBorderColor = theme.getColor(editorErrorBorder);\r\n    if (errorBorderColor) {\r\n        collector.addRule(\".monaco-editor .\" + \"squiggly-error\" /* EditorErrorDecoration */ + \" { border-bottom: 4px double \" + errorBorderColor + \"; }\");\r\n    }\r\n    var errorForeground = theme.getColor(editorErrorForeground);\r\n    if (errorForeground) {\r\n        collector.addRule(\".monaco-editor .\" + \"squiggly-error\" /* EditorErrorDecoration */ + \" { background: url(\\\"data:image/svg+xml,\" + getSquigglySVGData(errorForeground) + \"\\\") repeat-x bottom left; }\");\r\n    }\r\n    var warningBorderColor = theme.getColor(editorWarningBorder);\r\n    if (warningBorderColor) {\r\n        collector.addRule(\".monaco-editor .\" + \"squiggly-warning\" /* EditorWarningDecoration */ + \" { border-bottom: 4px double \" + warningBorderColor + \"; }\");\r\n    }\r\n    var warningForeground = theme.getColor(editorWarningForeground);\r\n    if (warningForeground) {\r\n        collector.addRule(\".monaco-editor .\" + \"squiggly-warning\" /* EditorWarningDecoration */ + \" { background: url(\\\"data:image/svg+xml,\" + getSquigglySVGData(warningForeground) + \"\\\") repeat-x bottom left; }\");\r\n    }\r\n    var infoBorderColor = theme.getColor(editorInfoBorder);\r\n    if (infoBorderColor) {\r\n        collector.addRule(\".monaco-editor .\" + \"squiggly-info\" /* EditorInfoDecoration */ + \" { border-bottom: 4px double \" + infoBorderColor + \"; }\");\r\n    }\r\n    var infoForeground = theme.getColor(editorInfoForeground);\r\n    if (infoForeground) {\r\n        collector.addRule(\".monaco-editor .\" + \"squiggly-info\" /* EditorInfoDecoration */ + \" { background: url(\\\"data:image/svg+xml,\" + getSquigglySVGData(infoForeground) + \"\\\") repeat-x bottom left; }\");\r\n    }\r\n    var hintBorderColor = theme.getColor(editorHintBorder);\r\n    if (hintBorderColor) {\r\n        collector.addRule(\".monaco-editor .\" + \"squiggly-hint\" /* EditorHintDecoration */ + \" { border-bottom: 2px dotted \" + hintBorderColor + \"; }\");\r\n    }\r\n    var hintForeground = theme.getColor(editorHintForeground);\r\n    if (hintForeground) {\r\n        collector.addRule(\".monaco-editor .\" + \"squiggly-hint\" /* EditorHintDecoration */ + \" { background: url(\\\"data:image/svg+xml,\" + getDotDotDotSVGData(hintForeground) + \"\\\") no-repeat bottom left; }\");\r\n    }\r\n    var unnecessaryForeground = theme.getColor(editorUnnecessaryCodeOpacity);\r\n    if (unnecessaryForeground) {\r\n        collector.addRule(\".monaco-editor.showUnused .\" + \"squiggly-inline-unnecessary\" /* EditorUnnecessaryInlineDecoration */ + \" { opacity: \" + unnecessaryForeground.rgba.a + \"; }\");\r\n    }\r\n    var unnecessaryBorder = theme.getColor(editorUnnecessaryCodeBorder);\r\n    if (unnecessaryBorder) {\r\n        collector.addRule(\".monaco-editor.showUnused .\" + \"squiggly-unnecessary\" /* EditorUnnecessaryDecoration */ + \" { border-bottom: 2px dashed \" + unnecessaryBorder + \"; }\");\r\n    }\r\n    var deprecatedForeground = theme.getColor(editorForeground) || 'inherit';\r\n    collector.addRule(\".monaco-editor .\" + \"squiggly-inline-deprecated\" /* EditorDeprecatedInlineDecoration */ + \" { text-decoration: line-through; text-decoration-color: \" + deprecatedForeground + \"}\");\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport * as assert from '../../../base/common/assert.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport * as objects from '../../../base/common/objects.js';\r\nimport { Range } from '../../common/core/range.js';\r\nvar defaultOptions = {\r\n    followsCaret: true,\r\n    ignoreCharChanges: true,\r\n    alwaysRevealFirst: true\r\n};\r\n/**\r\n * Create a new diff navigator for the provided diff editor.\r\n */\r\nvar DiffNavigator = /** @class */ (function (_super) {\r\n    __extends(DiffNavigator, _super);\r\n    function DiffNavigator(editor, options) {\r\n        if (options === void 0) { options = {}; }\r\n        var _this = _super.call(this) || this;\r\n        _this._onDidUpdate = _this._register(new Emitter());\r\n        _this._editor = editor;\r\n        _this._options = objects.mixin(options, defaultOptions, false);\r\n        _this.disposed = false;\r\n        _this.nextIdx = -1;\r\n        _this.ranges = [];\r\n        _this.ignoreSelectionChange = false;\r\n        _this.revealFirst = Boolean(_this._options.alwaysRevealFirst);\r\n        // hook up to diff editor for diff, disposal, and caret move\r\n        _this._register(_this._editor.onDidDispose(function () { return _this.dispose(); }));\r\n        _this._register(_this._editor.onDidUpdateDiff(function () { return _this._onDiffUpdated(); }));\r\n        if (_this._options.followsCaret) {\r\n            _this._register(_this._editor.getModifiedEditor().onDidChangeCursorPosition(function (e) {\r\n                if (_this.ignoreSelectionChange) {\r\n                    return;\r\n                }\r\n                _this.nextIdx = -1;\r\n            }));\r\n        }\r\n        if (_this._options.alwaysRevealFirst) {\r\n            _this._register(_this._editor.getModifiedEditor().onDidChangeModel(function (e) {\r\n                _this.revealFirst = true;\r\n            }));\r\n        }\r\n        // init things\r\n        _this._init();\r\n        return _this;\r\n    }\r\n    DiffNavigator.prototype._init = function () {\r\n        var changes = this._editor.getLineChanges();\r\n        if (!changes) {\r\n            return;\r\n        }\r\n    };\r\n    DiffNavigator.prototype._onDiffUpdated = function () {\r\n        this._init();\r\n        this._compute(this._editor.getLineChanges());\r\n        if (this.revealFirst) {\r\n            // Only reveal first on first non-null changes\r\n            if (this._editor.getLineChanges() !== null) {\r\n                this.revealFirst = false;\r\n                this.nextIdx = -1;\r\n                this.next(1 /* Immediate */);\r\n            }\r\n        }\r\n    };\r\n    DiffNavigator.prototype._compute = function (lineChanges) {\r\n        var _this = this;\r\n        // new ranges\r\n        this.ranges = [];\r\n        if (lineChanges) {\r\n            // create ranges from changes\r\n            lineChanges.forEach(function (lineChange) {\r\n                if (!_this._options.ignoreCharChanges && lineChange.charChanges) {\r\n                    lineChange.charChanges.forEach(function (charChange) {\r\n                        _this.ranges.push({\r\n                            rhs: true,\r\n                            range: new Range(charChange.modifiedStartLineNumber, charChange.modifiedStartColumn, charChange.modifiedEndLineNumber, charChange.modifiedEndColumn)\r\n                        });\r\n                    });\r\n                }\r\n                else {\r\n                    _this.ranges.push({\r\n                        rhs: true,\r\n                        range: new Range(lineChange.modifiedStartLineNumber, 1, lineChange.modifiedStartLineNumber, 1)\r\n                    });\r\n                }\r\n            });\r\n        }\r\n        // sort\r\n        this.ranges.sort(function (left, right) {\r\n            if (left.range.getStartPosition().isBeforeOrEqual(right.range.getStartPosition())) {\r\n                return -1;\r\n            }\r\n            else if (right.range.getStartPosition().isBeforeOrEqual(left.range.getStartPosition())) {\r\n                return 1;\r\n            }\r\n            else {\r\n                return 0;\r\n            }\r\n        });\r\n        this._onDidUpdate.fire(this);\r\n    };\r\n    DiffNavigator.prototype._initIdx = function (fwd) {\r\n        var found = false;\r\n        var position = this._editor.getPosition();\r\n        if (!position) {\r\n            this.nextIdx = 0;\r\n            return;\r\n        }\r\n        for (var i = 0, len = this.ranges.length; i < len && !found; i++) {\r\n            var range = this.ranges[i].range;\r\n            if (position.isBeforeOrEqual(range.getStartPosition())) {\r\n                this.nextIdx = i + (fwd ? 0 : -1);\r\n                found = true;\r\n            }\r\n        }\r\n        if (!found) {\r\n            // after the last change\r\n            this.nextIdx = fwd ? 0 : this.ranges.length - 1;\r\n        }\r\n        if (this.nextIdx < 0) {\r\n            this.nextIdx = this.ranges.length - 1;\r\n        }\r\n    };\r\n    DiffNavigator.prototype._move = function (fwd, scrollType) {\r\n        assert.ok(!this.disposed, 'Illegal State - diff navigator has been disposed');\r\n        if (!this.canNavigate()) {\r\n            return;\r\n        }\r\n        if (this.nextIdx === -1) {\r\n            this._initIdx(fwd);\r\n        }\r\n        else if (fwd) {\r\n            this.nextIdx += 1;\r\n            if (this.nextIdx >= this.ranges.length) {\r\n                this.nextIdx = 0;\r\n            }\r\n        }\r\n        else {\r\n            this.nextIdx -= 1;\r\n            if (this.nextIdx < 0) {\r\n                this.nextIdx = this.ranges.length - 1;\r\n            }\r\n        }\r\n        var info = this.ranges[this.nextIdx];\r\n        this.ignoreSelectionChange = true;\r\n        try {\r\n            var pos = info.range.getStartPosition();\r\n            this._editor.setPosition(pos);\r\n            this._editor.revealPositionInCenter(pos, scrollType);\r\n        }\r\n        finally {\r\n            this.ignoreSelectionChange = false;\r\n        }\r\n    };\r\n    DiffNavigator.prototype.canNavigate = function () {\r\n        return this.ranges && this.ranges.length > 0;\r\n    };\r\n    DiffNavigator.prototype.next = function (scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this._move(true, scrollType);\r\n    };\r\n    DiffNavigator.prototype.previous = function (scrollType) {\r\n        if (scrollType === void 0) { scrollType = 0 /* Smooth */; }\r\n        this._move(false, scrollType);\r\n    };\r\n    DiffNavigator.prototype.dispose = function () {\r\n        _super.prototype.dispose.call(this);\r\n        this.ranges = [];\r\n        this.disposed = true;\r\n    };\r\n    return DiffNavigator;\r\n}(Disposable));\r\nexport { DiffNavigator };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport * as objects from '../../../base/common/objects.js';\r\nimport { ICodeEditorService } from '../services/codeEditorService.js';\r\nimport { CodeEditorWidget } from './codeEditorWidget.js';\r\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\r\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\r\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\r\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\r\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\r\nvar EmbeddedCodeEditorWidget = /** @class */ (function (_super) {\r\n    __extends(EmbeddedCodeEditorWidget, _super);\r\n    function EmbeddedCodeEditorWidget(domElement, options, parentEditor, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService) {\r\n        var _this = _super.call(this, domElement, parentEditor.getRawOptions(), {}, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService) || this;\r\n        _this._parentEditor = parentEditor;\r\n        _this._overwriteOptions = options;\r\n        // Overwrite parent's options\r\n        _super.prototype.updateOptions.call(_this, _this._overwriteOptions);\r\n        _this._register(parentEditor.onDidChangeConfiguration(function (e) { return _this._onParentConfigurationChanged(e); }));\r\n        return _this;\r\n    }\r\n    EmbeddedCodeEditorWidget.prototype.getParentEditor = function () {\r\n        return this._parentEditor;\r\n    };\r\n    EmbeddedCodeEditorWidget.prototype._onParentConfigurationChanged = function (e) {\r\n        _super.prototype.updateOptions.call(this, this._parentEditor.getRawOptions());\r\n        _super.prototype.updateOptions.call(this, this._overwriteOptions);\r\n    };\r\n    EmbeddedCodeEditorWidget.prototype.updateOptions = function (newOptions) {\r\n        objects.mixin(this._overwriteOptions, newOptions, true);\r\n        _super.prototype.updateOptions.call(this, this._overwriteOptions);\r\n    };\r\n    EmbeddedCodeEditorWidget = __decorate([\r\n        __param(3, IInstantiationService),\r\n        __param(4, ICodeEditorService),\r\n        __param(5, ICommandService),\r\n        __param(6, IContextKeyService),\r\n        __param(7, IThemeService),\r\n        __param(8, INotificationService),\r\n        __param(9, IAccessibilityService)\r\n    ], EmbeddedCodeEditorWidget);\r\n    return EmbeddedCodeEditorWidget;\r\n}(CodeEditorWidget));\r\nexport { EmbeddedCodeEditorWidget };\r\n"],"sourceRoot":""}