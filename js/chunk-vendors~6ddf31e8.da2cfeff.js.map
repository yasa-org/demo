{"version":3,"sources":["webpack:///./node_modules/monaco-editor/esm/vs/editor/browser/services/openerService.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/browser/editorDom.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/browser/services/codeEditorService.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/browser/services/abstractCodeEditorService.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/browser/services/codeEditorServiceImpl.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/browser/editorBrowser.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/browser/editorExtensions.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/browser/services/bulkEditService.js"],"names":["__decorate","decorators","target","key","desc","d","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","Symbol","iterator","this","n","v","op","TypeError","call","pop","push","__spreadArrays","s","il","Array","k","a","j","jl","CommandOpener","_commandService","prototype","open","args","_a","_b","command","parse","getCommand","path","Error","decodeURIComponent","query","_c","_d","isArray","executeCommand","EditorOpener","_editorService","options","selection","match","undefined","exec","fragment","startLineNumber","parseInt","startColumn","with","scheme","file","openCodeEditor","resource","context","fromUserGesture","USER","API","getFocusedCodeEditor","openToSide","OpenerService","editorService","commandService","_this","_openers","_validators","_resolvers","_externalOpener","openExternal","href","mailto","http","https","_doOpenExternal","_i","validator","opener_1","handled","toArray","shouldOpen","resolveExternalUri","resolver","resolved","dispose","uri","toString","encodeURI","clear","__extends","extendStatics","b","setPrototypeOf","__proto__","p","hasOwnProperty","__","constructor","create","PageCoordinates","x","toClientCoordinates","ClientCoordinates","scrollX","scrollY","clientX","clientY","toPageCoordinates","EditorPagePosition","width","height","createEditorPagePosition","editorViewDomNode","editorPos","left","top","EditorMouseEvent","_super","pos","posx","posy","EditorMouseEventFactory","_editorViewDomNode","_create","onContextMenu","callback","onMouseUp","onMouseDown","onMouseLeave","onMouseMoveThrottled","merger","minimumTimeMs","myMerger","lastEvent","currentEvent","EditorPointerEventFactory","onPointerUp","onPointerDown","onPointerLeave","onPointerMoveThrottled","GlobalEditorMouseMoveMonitor","_globalMouseMoveMonitor","_register","_keydownListener","startMonitoring","initialElement","initialButtons","mouseMoveCallback","onStopCallback","document","kb","toKeybinding","isModifierKey","stopMonitoring","ICodeEditorService","AbstractCodeEditorService","_onCodeEditorAdd","onCodeEditorAdd","event","_onCodeEditorRemove","onCodeEditorRemove","_onDiffEditorAdd","_onDiffEditorRemove","_codeEditors","_diffEditors","addCodeEditor","editor","getId","fire","removeCodeEditor","listCodeEditors","keys","map","id","addDiffEditor","removeDiffEditor","listDiffEditors","editorWithWidgetFocus","editors","editors_1","hasTextFocus","hasWidgetFocus","RefCountedStyleSheet","parent","editorId","styleSheet","_parent","_editorId","_refCount","ref","unref","parentNode","removeChild","_removeEditorStyleSheets","GlobalStyleSheet","CodeEditorServiceImpl","themeService","_decorationOptionProviders","Map","_editorStyleSheets","_globalStyleSheet","_themeService","_getOrCreateGlobalStyleSheet","dom","_getOrCreateStyleSheet","domNode","getContainerDomNode","has","refCountedStyleSheet","set","get","delete","registerDecorationType","parentTypeKey","provider","providerArgs","DecorationSubTypeOptionsProvider","refCount","removeDecorationType","forEach","ed","removeDecorations","resolveDecorationOptions","decorationTypeKey","writable","getOptions","_styleSheet","_parentTypeKey","_beforeContentRules","_afterContentRules","codeEditorService","beforeContentClassName","className","afterContentClassName","DecorationTypeOptionsProvider","_disposables","createCSSRules","type","rules","add","hasContent","createInlineCSSRules","hasLetterSpacing","inlineData","inlineClassName","inlineClassNameAffectsLetterSpacing","glyphMarginClassName","isWholeLine","Boolean","stickiness","rangeBehavior","lightOverviewRulerColor","light","overviewRulerColor","darkOverviewRulerColor","dark","overviewRuler","color","darkColor","position","overviewRulerLane","Center","_CSS_MAP","opacity","backgroundColor","outline","outlineColor","outlineStyle","outlineWidth","border","borderColor","borderRadius","borderSpacing","borderStyle","borderWidth","fontStyle","fontWeight","textDecoration","cursor","letterSpacing","gutterIconPath","gutterIconSize","contentText","contentIconPath","margin","DecorationCSSRules","ruleType","_theme","getTheme","_ruleType","_providerArgs","_usesThemeColors","_hasContent","_hasLetterSpacing","CSSNameHelper","getClassName","_className","_unThemedSelector","getSelector","_buildCSS","_themeListener","onThemeChange","theme","_removeCSS","enumerable","configurable","unthemedCSS","lightCSS","darkCSS","getCSSTextForModelDecorationClassName","getCSSTextForModelDecorationInlineClassName","getCSSTextForModelDecorationGlyphMarginClassName","getCSSTextForModelDecorationContentClassName","before","after","sheet","insertRule","opts","cssTextArr","collectCSSText","collectBorderSettingsCSSText","join","strings","revive","truncated","escaped","replace","properties","lenBefore","properties_1","property","resolveValue","getColor","parentKey","selector","isCodeEditor","thing","getEditorType","ICodeEditor","EditorExtensionsRegistry","Command","precondition","_kbOpts","kbOpts","_menuOpts","menuOpts","_description","description","register","_registerMenuItem","kbWhen","kbExpr","and","registerCommandAndKeybindingRule","handler","accessor","runCommand","weight","when","primary","secondary","win","linux","mac","registerCommand","item","appendMenuItem","menuId","group","title","order","EditorCommand","bindToContribution","controllerGetter","EditorControllerCommandImpl","_callback","runEditorCommand","controller","getActiveCodeEditor","invokeWithinContext","editorAccessor","kbService","contextMatchesRules","EditorAction","convertOptions","alias","withDefaults","contextMenuOpts","reportTelemetry","run","publicLog2","name","registerLanguageCommand","registerDefaultLanguageCommand","isIPosition","model","getModel","editorPosition","lift","createModelReference","reference","object","textEditorModel","err","finally","registerModelAndPositionCommand","isUri","slice","registerModelCommand","registerEditorCommand","editorCommand","EditorContributionRegistry","INSTANCE","registerEditorAction","ctor","registerInstantiatedEditorAction","editorAction","registerEditorContribution","getEditorCommand","commandId","getEditorActions","getEditorContributions","getSomeEditorContributions","ids","filter","indexOf","getDiffEditorContributions","Extensions","EditorCommonContributions","editorContributions","diffEditorContributions","editorActions","editorCommands","action","IBulkEditService"],"mappings":"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","file":"js/chunk-vendors~6ddf31e8.da2cfeff.js","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { LinkedList } from '../../../base/common/linkedList.js';\r\nimport { parse } from '../../../base/common/marshalling.js';\r\nimport { Schemas } from '../../../base/common/network.js';\r\nimport { normalizePath } from '../../../base/common/resources.js';\r\nimport { URI } from '../../../base/common/uri.js';\r\nimport { ICodeEditorService } from './codeEditorService.js';\r\nimport { CommandsRegistry, ICommandService } from '../../../platform/commands/common/commands.js';\r\nimport { matchesScheme } from '../../../platform/opener/common/opener.js';\r\nimport { EditorOpenContext } from '../../../platform/editor/common/editor.js';\r\nvar CommandOpener = /** @class */ (function () {\r\n    function CommandOpener(_commandService) {\r\n        this._commandService = _commandService;\r\n    }\r\n    CommandOpener.prototype.open = function (target) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var args;\r\n            var _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        if (!matchesScheme(target, Schemas.command)) {\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        // run command or bail out if command isn't known\r\n                        if (typeof target === 'string') {\r\n                            target = URI.parse(target);\r\n                        }\r\n                        if (!CommandsRegistry.getCommand(target.path)) {\r\n                            throw new Error(\"command '\" + target.path + \"' NOT known\");\r\n                        }\r\n                        args = [];\r\n                        try {\r\n                            args = parse(decodeURIComponent(target.query));\r\n                        }\r\n                        catch (_c) {\r\n                            // ignore and retry\r\n                            try {\r\n                                args = parse(target.query);\r\n                            }\r\n                            catch (_d) {\r\n                                // ignore error\r\n                            }\r\n                        }\r\n                        if (!Array.isArray(args)) {\r\n                            args = [args];\r\n                        }\r\n                        return [4 /*yield*/, (_a = this._commandService).executeCommand.apply(_a, __spreadArrays([target.path], args))];\r\n                    case 1:\r\n                        _b.sent();\r\n                        return [2 /*return*/, true];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    CommandOpener = __decorate([\r\n        __param(0, ICommandService)\r\n    ], CommandOpener);\r\n    return CommandOpener;\r\n}());\r\nvar EditorOpener = /** @class */ (function () {\r\n    function EditorOpener(_editorService) {\r\n        this._editorService = _editorService;\r\n    }\r\n    EditorOpener.prototype.open = function (target, options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var selection, match;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (typeof target === 'string') {\r\n                            target = URI.parse(target);\r\n                        }\r\n                        selection = undefined;\r\n                        match = /^L?(\\d+)(?:,(\\d+))?/.exec(target.fragment);\r\n                        if (match) {\r\n                            // support file:///some/file.js#73,84\r\n                            // support file:///some/file.js#L73\r\n                            selection = {\r\n                                startLineNumber: parseInt(match[1]),\r\n                                startColumn: match[2] ? parseInt(match[2]) : 1\r\n                            };\r\n                            // remove fragment\r\n                            target = target.with({ fragment: '' });\r\n                        }\r\n                        if (target.scheme === Schemas.file) {\r\n                            target = normalizePath(target); // workaround for non-normalized paths (https://github.com/Microsoft/vscode/issues/12954)\r\n                        }\r\n                        return [4 /*yield*/, this._editorService.openCodeEditor({ resource: target, options: { selection: selection, context: (options === null || options === void 0 ? void 0 : options.fromUserGesture) ? EditorOpenContext.USER : EditorOpenContext.API } }, this._editorService.getFocusedCodeEditor(), options === null || options === void 0 ? void 0 : options.openToSide)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2 /*return*/, true];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    EditorOpener = __decorate([\r\n        __param(0, ICodeEditorService)\r\n    ], EditorOpener);\r\n    return EditorOpener;\r\n}());\r\nvar OpenerService = /** @class */ (function () {\r\n    function OpenerService(editorService, commandService) {\r\n        var _this = this;\r\n        this._openers = new LinkedList();\r\n        this._validators = new LinkedList();\r\n        this._resolvers = new LinkedList();\r\n        // Default external opener is going through window.open()\r\n        this._externalOpener = {\r\n            openExternal: function (href) {\r\n                dom.windowOpenNoOpener(href);\r\n                return Promise.resolve(true);\r\n            }\r\n        };\r\n        // Default opener: maito, http(s), command, and catch-all-editors\r\n        this._openers.push({\r\n            open: function (target, options) { return __awaiter(_this, void 0, void 0, function () {\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0:\r\n                            if (!((options === null || options === void 0 ? void 0 : options.openExternal) || matchesScheme(target, Schemas.mailto) || matchesScheme(target, Schemas.http) || matchesScheme(target, Schemas.https))) return [3 /*break*/, 2];\r\n                            // open externally\r\n                            return [4 /*yield*/, this._doOpenExternal(target, options)];\r\n                        case 1:\r\n                            // open externally\r\n                            _a.sent();\r\n                            return [2 /*return*/, true];\r\n                        case 2: return [2 /*return*/, false];\r\n                    }\r\n                });\r\n            }); }\r\n        });\r\n        this._openers.push(new CommandOpener(commandService));\r\n        this._openers.push(new EditorOpener(editorService));\r\n    }\r\n    OpenerService.prototype.open = function (target, options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _i, _a, validator, _b, _c, opener_1, handled;\r\n            return __generator(this, function (_d) {\r\n                switch (_d.label) {\r\n                    case 0:\r\n                        _i = 0, _a = this._validators.toArray();\r\n                        _d.label = 1;\r\n                    case 1:\r\n                        if (!(_i < _a.length)) return [3 /*break*/, 4];\r\n                        validator = _a[_i];\r\n                        return [4 /*yield*/, validator.shouldOpen(target)];\r\n                    case 2:\r\n                        if (!(_d.sent())) {\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        _d.label = 3;\r\n                    case 3:\r\n                        _i++;\r\n                        return [3 /*break*/, 1];\r\n                    case 4:\r\n                        _b = 0, _c = this._openers.toArray();\r\n                        _d.label = 5;\r\n                    case 5:\r\n                        if (!(_b < _c.length)) return [3 /*break*/, 8];\r\n                        opener_1 = _c[_b];\r\n                        return [4 /*yield*/, opener_1.open(target, options)];\r\n                    case 6:\r\n                        handled = _d.sent();\r\n                        if (handled) {\r\n                            return [2 /*return*/, true];\r\n                        }\r\n                        _d.label = 7;\r\n                    case 7:\r\n                        _b++;\r\n                        return [3 /*break*/, 5];\r\n                    case 8: return [2 /*return*/, false];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    OpenerService.prototype.resolveExternalUri = function (resource, options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _i, _a, resolver, result;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _i = 0, _a = this._resolvers.toArray();\r\n                        _b.label = 1;\r\n                    case 1:\r\n                        if (!(_i < _a.length)) return [3 /*break*/, 4];\r\n                        resolver = _a[_i];\r\n                        return [4 /*yield*/, resolver.resolveExternalUri(resource, options)];\r\n                    case 2:\r\n                        result = _b.sent();\r\n                        if (result) {\r\n                            return [2 /*return*/, result];\r\n                        }\r\n                        _b.label = 3;\r\n                    case 3:\r\n                        _i++;\r\n                        return [3 /*break*/, 1];\r\n                    case 4: return [2 /*return*/, { resolved: resource, dispose: function () { } }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    OpenerService.prototype._doOpenExternal = function (resource, options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var uri, resolved;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        uri = typeof resource === 'string' ? URI.parse(resource) : resource;\r\n                        return [4 /*yield*/, this.resolveExternalUri(uri, options)];\r\n                    case 1:\r\n                        resolved = (_a.sent()).resolved;\r\n                        if (typeof resource === 'string' && uri.toString() === resolved.toString()) {\r\n                            // open the url-string AS IS\r\n                            return [2 /*return*/, this._externalOpener.openExternal(resource)];\r\n                        }\r\n                        else {\r\n                            // open URI using the toString(noEncode)+encodeURI-trick\r\n                            return [2 /*return*/, this._externalOpener.openExternal(encodeURI(resolved.toString(true)))];\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    OpenerService.prototype.dispose = function () {\r\n        this._validators.clear();\r\n    };\r\n    OpenerService = __decorate([\r\n        __param(0, ICodeEditorService),\r\n        __param(1, ICommandService)\r\n    ], OpenerService);\r\n    return OpenerService;\r\n}());\r\nexport { OpenerService };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport * as dom from '../../base/browser/dom.js';\r\nimport { GlobalMouseMoveMonitor } from '../../base/browser/globalMouseMoveMonitor.js';\r\nimport { StandardMouseEvent } from '../../base/browser/mouseEvent.js';\r\nimport { Disposable } from '../../base/common/lifecycle.js';\r\n/**\r\n * Coordinates relative to the whole document (e.g. mouse event's pageX and pageY)\r\n */\r\nvar PageCoordinates = /** @class */ (function () {\r\n    function PageCoordinates(x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n    PageCoordinates.prototype.toClientCoordinates = function () {\r\n        return new ClientCoordinates(this.x - dom.StandardWindow.scrollX, this.y - dom.StandardWindow.scrollY);\r\n    };\r\n    return PageCoordinates;\r\n}());\r\nexport { PageCoordinates };\r\n/**\r\n * Coordinates within the application's client area (i.e. origin is document's scroll position).\r\n *\r\n * For example, clicking in the top-left corner of the client area will\r\n * always result in a mouse event with a client.x value of 0, regardless\r\n * of whether the page is scrolled horizontally.\r\n */\r\nvar ClientCoordinates = /** @class */ (function () {\r\n    function ClientCoordinates(clientX, clientY) {\r\n        this.clientX = clientX;\r\n        this.clientY = clientY;\r\n    }\r\n    ClientCoordinates.prototype.toPageCoordinates = function () {\r\n        return new PageCoordinates(this.clientX + dom.StandardWindow.scrollX, this.clientY + dom.StandardWindow.scrollY);\r\n    };\r\n    return ClientCoordinates;\r\n}());\r\nexport { ClientCoordinates };\r\n/**\r\n * The position of the editor in the page.\r\n */\r\nvar EditorPagePosition = /** @class */ (function () {\r\n    function EditorPagePosition(x, y, width, height) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.width = width;\r\n        this.height = height;\r\n    }\r\n    return EditorPagePosition;\r\n}());\r\nexport { EditorPagePosition };\r\nexport function createEditorPagePosition(editorViewDomNode) {\r\n    var editorPos = dom.getDomNodePagePosition(editorViewDomNode);\r\n    return new EditorPagePosition(editorPos.left, editorPos.top, editorPos.width, editorPos.height);\r\n}\r\nvar EditorMouseEvent = /** @class */ (function (_super) {\r\n    __extends(EditorMouseEvent, _super);\r\n    function EditorMouseEvent(e, editorViewDomNode) {\r\n        var _this = _super.call(this, e) || this;\r\n        _this.pos = new PageCoordinates(_this.posx, _this.posy);\r\n        _this.editorPos = createEditorPagePosition(editorViewDomNode);\r\n        return _this;\r\n    }\r\n    return EditorMouseEvent;\r\n}(StandardMouseEvent));\r\nexport { EditorMouseEvent };\r\nvar EditorMouseEventFactory = /** @class */ (function () {\r\n    function EditorMouseEventFactory(editorViewDomNode) {\r\n        this._editorViewDomNode = editorViewDomNode;\r\n    }\r\n    EditorMouseEventFactory.prototype._create = function (e) {\r\n        return new EditorMouseEvent(e, this._editorViewDomNode);\r\n    };\r\n    EditorMouseEventFactory.prototype.onContextMenu = function (target, callback) {\r\n        var _this = this;\r\n        return dom.addDisposableListener(target, 'contextmenu', function (e) {\r\n            callback(_this._create(e));\r\n        });\r\n    };\r\n    EditorMouseEventFactory.prototype.onMouseUp = function (target, callback) {\r\n        var _this = this;\r\n        return dom.addDisposableListener(target, 'mouseup', function (e) {\r\n            callback(_this._create(e));\r\n        });\r\n    };\r\n    EditorMouseEventFactory.prototype.onMouseDown = function (target, callback) {\r\n        var _this = this;\r\n        return dom.addDisposableListener(target, 'mousedown', function (e) {\r\n            callback(_this._create(e));\r\n        });\r\n    };\r\n    EditorMouseEventFactory.prototype.onMouseLeave = function (target, callback) {\r\n        var _this = this;\r\n        return dom.addDisposableNonBubblingMouseOutListener(target, function (e) {\r\n            callback(_this._create(e));\r\n        });\r\n    };\r\n    EditorMouseEventFactory.prototype.onMouseMoveThrottled = function (target, callback, merger, minimumTimeMs) {\r\n        var _this = this;\r\n        var myMerger = function (lastEvent, currentEvent) {\r\n            return merger(lastEvent, _this._create(currentEvent));\r\n        };\r\n        return dom.addDisposableThrottledListener(target, 'mousemove', callback, myMerger, minimumTimeMs);\r\n    };\r\n    return EditorMouseEventFactory;\r\n}());\r\nexport { EditorMouseEventFactory };\r\nvar EditorPointerEventFactory = /** @class */ (function () {\r\n    function EditorPointerEventFactory(editorViewDomNode) {\r\n        this._editorViewDomNode = editorViewDomNode;\r\n    }\r\n    EditorPointerEventFactory.prototype._create = function (e) {\r\n        return new EditorMouseEvent(e, this._editorViewDomNode);\r\n    };\r\n    EditorPointerEventFactory.prototype.onPointerUp = function (target, callback) {\r\n        var _this = this;\r\n        return dom.addDisposableListener(target, 'pointerup', function (e) {\r\n            callback(_this._create(e));\r\n        });\r\n    };\r\n    EditorPointerEventFactory.prototype.onPointerDown = function (target, callback) {\r\n        var _this = this;\r\n        return dom.addDisposableListener(target, 'pointerdown', function (e) {\r\n            callback(_this._create(e));\r\n        });\r\n    };\r\n    EditorPointerEventFactory.prototype.onPointerLeave = function (target, callback) {\r\n        var _this = this;\r\n        return dom.addDisposableNonBubblingPointerOutListener(target, function (e) {\r\n            callback(_this._create(e));\r\n        });\r\n    };\r\n    EditorPointerEventFactory.prototype.onPointerMoveThrottled = function (target, callback, merger, minimumTimeMs) {\r\n        var _this = this;\r\n        var myMerger = function (lastEvent, currentEvent) {\r\n            return merger(lastEvent, _this._create(currentEvent));\r\n        };\r\n        return dom.addDisposableThrottledListener(target, 'pointermove', callback, myMerger, minimumTimeMs);\r\n    };\r\n    return EditorPointerEventFactory;\r\n}());\r\nexport { EditorPointerEventFactory };\r\nvar GlobalEditorMouseMoveMonitor = /** @class */ (function (_super) {\r\n    __extends(GlobalEditorMouseMoveMonitor, _super);\r\n    function GlobalEditorMouseMoveMonitor(editorViewDomNode) {\r\n        var _this = _super.call(this) || this;\r\n        _this._editorViewDomNode = editorViewDomNode;\r\n        _this._globalMouseMoveMonitor = _this._register(new GlobalMouseMoveMonitor());\r\n        _this._keydownListener = null;\r\n        return _this;\r\n    }\r\n    GlobalEditorMouseMoveMonitor.prototype.startMonitoring = function (initialElement, initialButtons, merger, mouseMoveCallback, onStopCallback) {\r\n        var _this = this;\r\n        // Add a <<capture>> keydown event listener that will cancel the monitoring\r\n        // if something other than a modifier key is pressed\r\n        this._keydownListener = dom.addStandardDisposableListener(document, 'keydown', function (e) {\r\n            var kb = e.toKeybinding();\r\n            if (kb.isModifierKey()) {\r\n                // Allow modifier keys\r\n                return;\r\n            }\r\n            _this._globalMouseMoveMonitor.stopMonitoring(true);\r\n        }, true);\r\n        var myMerger = function (lastEvent, currentEvent) {\r\n            return merger(lastEvent, new EditorMouseEvent(currentEvent, _this._editorViewDomNode));\r\n        };\r\n        this._globalMouseMoveMonitor.startMonitoring(initialElement, initialButtons, myMerger, mouseMoveCallback, function () {\r\n            _this._keydownListener.dispose();\r\n            onStopCallback();\r\n        });\r\n    };\r\n    return GlobalEditorMouseMoveMonitor;\r\n}(Disposable));\r\nexport { GlobalEditorMouseMoveMonitor };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\r\nexport var ICodeEditorService = createDecorator('codeEditorService');\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nvar AbstractCodeEditorService = /** @class */ (function (_super) {\r\n    __extends(AbstractCodeEditorService, _super);\r\n    function AbstractCodeEditorService() {\r\n        var _this = _super.call(this) || this;\r\n        _this._onCodeEditorAdd = _this._register(new Emitter());\r\n        _this.onCodeEditorAdd = _this._onCodeEditorAdd.event;\r\n        _this._onCodeEditorRemove = _this._register(new Emitter());\r\n        _this.onCodeEditorRemove = _this._onCodeEditorRemove.event;\r\n        _this._onDiffEditorAdd = _this._register(new Emitter());\r\n        _this._onDiffEditorRemove = _this._register(new Emitter());\r\n        _this._codeEditors = Object.create(null);\r\n        _this._diffEditors = Object.create(null);\r\n        return _this;\r\n    }\r\n    AbstractCodeEditorService.prototype.addCodeEditor = function (editor) {\r\n        this._codeEditors[editor.getId()] = editor;\r\n        this._onCodeEditorAdd.fire(editor);\r\n    };\r\n    AbstractCodeEditorService.prototype.removeCodeEditor = function (editor) {\r\n        if (delete this._codeEditors[editor.getId()]) {\r\n            this._onCodeEditorRemove.fire(editor);\r\n        }\r\n    };\r\n    AbstractCodeEditorService.prototype.listCodeEditors = function () {\r\n        var _this = this;\r\n        return Object.keys(this._codeEditors).map(function (id) { return _this._codeEditors[id]; });\r\n    };\r\n    AbstractCodeEditorService.prototype.addDiffEditor = function (editor) {\r\n        this._diffEditors[editor.getId()] = editor;\r\n        this._onDiffEditorAdd.fire(editor);\r\n    };\r\n    AbstractCodeEditorService.prototype.removeDiffEditor = function (editor) {\r\n        if (delete this._diffEditors[editor.getId()]) {\r\n            this._onDiffEditorRemove.fire(editor);\r\n        }\r\n    };\r\n    AbstractCodeEditorService.prototype.listDiffEditors = function () {\r\n        var _this = this;\r\n        return Object.keys(this._diffEditors).map(function (id) { return _this._diffEditors[id]; });\r\n    };\r\n    AbstractCodeEditorService.prototype.getFocusedCodeEditor = function () {\r\n        var editorWithWidgetFocus = null;\r\n        var editors = this.listCodeEditors();\r\n        for (var _i = 0, editors_1 = editors; _i < editors_1.length; _i++) {\r\n            var editor = editors_1[_i];\r\n            if (editor.hasTextFocus()) {\r\n                // bingo!\r\n                return editor;\r\n            }\r\n            if (editor.hasWidgetFocus()) {\r\n                editorWithWidgetFocus = editor;\r\n            }\r\n        }\r\n        return editorWithWidgetFocus;\r\n    };\r\n    return AbstractCodeEditorService;\r\n}(Disposable));\r\nexport { AbstractCodeEditorService };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport * as strings from '../../../base/common/strings.js';\r\nimport { URI } from '../../../base/common/uri.js';\r\nimport { AbstractCodeEditorService } from './abstractCodeEditorService.js';\r\nimport { isThemeColor } from '../../common/editorCommon.js';\r\nimport { OverviewRulerLane } from '../../common/model.js';\r\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\r\nvar RefCountedStyleSheet = /** @class */ (function () {\r\n    function RefCountedStyleSheet(parent, editorId, styleSheet) {\r\n        this._parent = parent;\r\n        this._editorId = editorId;\r\n        this.styleSheet = styleSheet;\r\n        this._refCount = 0;\r\n    }\r\n    RefCountedStyleSheet.prototype.ref = function () {\r\n        this._refCount++;\r\n    };\r\n    RefCountedStyleSheet.prototype.unref = function () {\r\n        var _a;\r\n        this._refCount--;\r\n        if (this._refCount === 0) {\r\n            (_a = this.styleSheet.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(this.styleSheet);\r\n            this._parent._removeEditorStyleSheets(this._editorId);\r\n        }\r\n    };\r\n    return RefCountedStyleSheet;\r\n}());\r\nvar GlobalStyleSheet = /** @class */ (function () {\r\n    function GlobalStyleSheet(styleSheet) {\r\n        this.styleSheet = styleSheet;\r\n    }\r\n    GlobalStyleSheet.prototype.ref = function () {\r\n    };\r\n    GlobalStyleSheet.prototype.unref = function () {\r\n    };\r\n    return GlobalStyleSheet;\r\n}());\r\nvar CodeEditorServiceImpl = /** @class */ (function (_super) {\r\n    __extends(CodeEditorServiceImpl, _super);\r\n    function CodeEditorServiceImpl(themeService, styleSheet) {\r\n        if (styleSheet === void 0) { styleSheet = null; }\r\n        var _this = _super.call(this) || this;\r\n        _this._decorationOptionProviders = new Map();\r\n        _this._editorStyleSheets = new Map();\r\n        _this._globalStyleSheet = styleSheet ? new GlobalStyleSheet(styleSheet) : null;\r\n        _this._themeService = themeService;\r\n        return _this;\r\n    }\r\n    CodeEditorServiceImpl.prototype._getOrCreateGlobalStyleSheet = function () {\r\n        if (!this._globalStyleSheet) {\r\n            this._globalStyleSheet = new GlobalStyleSheet(dom.createStyleSheet());\r\n        }\r\n        return this._globalStyleSheet;\r\n    };\r\n    CodeEditorServiceImpl.prototype._getOrCreateStyleSheet = function (editor) {\r\n        if (!editor) {\r\n            return this._getOrCreateGlobalStyleSheet();\r\n        }\r\n        var domNode = editor.getContainerDomNode();\r\n        if (!dom.isInShadowDOM(domNode)) {\r\n            return this._getOrCreateGlobalStyleSheet();\r\n        }\r\n        var editorId = editor.getId();\r\n        if (!this._editorStyleSheets.has(editorId)) {\r\n            var refCountedStyleSheet = new RefCountedStyleSheet(this, editorId, dom.createStyleSheet(domNode));\r\n            this._editorStyleSheets.set(editorId, refCountedStyleSheet);\r\n        }\r\n        return this._editorStyleSheets.get(editorId);\r\n    };\r\n    CodeEditorServiceImpl.prototype._removeEditorStyleSheets = function (editorId) {\r\n        this._editorStyleSheets.delete(editorId);\r\n    };\r\n    CodeEditorServiceImpl.prototype.registerDecorationType = function (key, options, parentTypeKey, editor) {\r\n        var provider = this._decorationOptionProviders.get(key);\r\n        if (!provider) {\r\n            var styleSheet = this._getOrCreateStyleSheet(editor);\r\n            var providerArgs = {\r\n                styleSheet: styleSheet.styleSheet,\r\n                key: key,\r\n                parentTypeKey: parentTypeKey,\r\n                options: options || Object.create(null)\r\n            };\r\n            if (!parentTypeKey) {\r\n                provider = new DecorationTypeOptionsProvider(this._themeService, styleSheet, providerArgs);\r\n            }\r\n            else {\r\n                provider = new DecorationSubTypeOptionsProvider(this._themeService, styleSheet, providerArgs);\r\n            }\r\n            this._decorationOptionProviders.set(key, provider);\r\n        }\r\n        provider.refCount++;\r\n    };\r\n    CodeEditorServiceImpl.prototype.removeDecorationType = function (key) {\r\n        var provider = this._decorationOptionProviders.get(key);\r\n        if (provider) {\r\n            provider.refCount--;\r\n            if (provider.refCount <= 0) {\r\n                this._decorationOptionProviders.delete(key);\r\n                provider.dispose();\r\n                this.listCodeEditors().forEach(function (ed) { return ed.removeDecorations(key); });\r\n            }\r\n        }\r\n    };\r\n    CodeEditorServiceImpl.prototype.resolveDecorationOptions = function (decorationTypeKey, writable) {\r\n        var provider = this._decorationOptionProviders.get(decorationTypeKey);\r\n        if (!provider) {\r\n            throw new Error('Unknown decoration type key: ' + decorationTypeKey);\r\n        }\r\n        return provider.getOptions(this, writable);\r\n    };\r\n    CodeEditorServiceImpl = __decorate([\r\n        __param(0, IThemeService)\r\n    ], CodeEditorServiceImpl);\r\n    return CodeEditorServiceImpl;\r\n}(AbstractCodeEditorService));\r\nexport { CodeEditorServiceImpl };\r\nvar DecorationSubTypeOptionsProvider = /** @class */ (function () {\r\n    function DecorationSubTypeOptionsProvider(themeService, styleSheet, providerArgs) {\r\n        this._styleSheet = styleSheet;\r\n        this._styleSheet.ref();\r\n        this._parentTypeKey = providerArgs.parentTypeKey;\r\n        this.refCount = 0;\r\n        this._beforeContentRules = new DecorationCSSRules(3 /* BeforeContentClassName */, providerArgs, themeService);\r\n        this._afterContentRules = new DecorationCSSRules(4 /* AfterContentClassName */, providerArgs, themeService);\r\n    }\r\n    DecorationSubTypeOptionsProvider.prototype.getOptions = function (codeEditorService, writable) {\r\n        var options = codeEditorService.resolveDecorationOptions(this._parentTypeKey, true);\r\n        if (this._beforeContentRules) {\r\n            options.beforeContentClassName = this._beforeContentRules.className;\r\n        }\r\n        if (this._afterContentRules) {\r\n            options.afterContentClassName = this._afterContentRules.className;\r\n        }\r\n        return options;\r\n    };\r\n    DecorationSubTypeOptionsProvider.prototype.dispose = function () {\r\n        if (this._beforeContentRules) {\r\n            this._beforeContentRules.dispose();\r\n            this._beforeContentRules = null;\r\n        }\r\n        if (this._afterContentRules) {\r\n            this._afterContentRules.dispose();\r\n            this._afterContentRules = null;\r\n        }\r\n        this._styleSheet.unref();\r\n    };\r\n    return DecorationSubTypeOptionsProvider;\r\n}());\r\nvar DecorationTypeOptionsProvider = /** @class */ (function () {\r\n    function DecorationTypeOptionsProvider(themeService, styleSheet, providerArgs) {\r\n        var _this = this;\r\n        this._disposables = new DisposableStore();\r\n        this._styleSheet = styleSheet;\r\n        this._styleSheet.ref();\r\n        this.refCount = 0;\r\n        var createCSSRules = function (type) {\r\n            var rules = new DecorationCSSRules(type, providerArgs, themeService);\r\n            _this._disposables.add(rules);\r\n            if (rules.hasContent) {\r\n                return rules.className;\r\n            }\r\n            return undefined;\r\n        };\r\n        var createInlineCSSRules = function (type) {\r\n            var rules = new DecorationCSSRules(type, providerArgs, themeService);\r\n            _this._disposables.add(rules);\r\n            if (rules.hasContent) {\r\n                return { className: rules.className, hasLetterSpacing: rules.hasLetterSpacing };\r\n            }\r\n            return null;\r\n        };\r\n        this.className = createCSSRules(0 /* ClassName */);\r\n        var inlineData = createInlineCSSRules(1 /* InlineClassName */);\r\n        if (inlineData) {\r\n            this.inlineClassName = inlineData.className;\r\n            this.inlineClassNameAffectsLetterSpacing = inlineData.hasLetterSpacing;\r\n        }\r\n        this.beforeContentClassName = createCSSRules(3 /* BeforeContentClassName */);\r\n        this.afterContentClassName = createCSSRules(4 /* AfterContentClassName */);\r\n        this.glyphMarginClassName = createCSSRules(2 /* GlyphMarginClassName */);\r\n        var options = providerArgs.options;\r\n        this.isWholeLine = Boolean(options.isWholeLine);\r\n        this.stickiness = options.rangeBehavior;\r\n        var lightOverviewRulerColor = options.light && options.light.overviewRulerColor || options.overviewRulerColor;\r\n        var darkOverviewRulerColor = options.dark && options.dark.overviewRulerColor || options.overviewRulerColor;\r\n        if (typeof lightOverviewRulerColor !== 'undefined'\r\n            || typeof darkOverviewRulerColor !== 'undefined') {\r\n            this.overviewRuler = {\r\n                color: lightOverviewRulerColor || darkOverviewRulerColor,\r\n                darkColor: darkOverviewRulerColor || lightOverviewRulerColor,\r\n                position: options.overviewRulerLane || OverviewRulerLane.Center\r\n            };\r\n        }\r\n    }\r\n    DecorationTypeOptionsProvider.prototype.getOptions = function (codeEditorService, writable) {\r\n        if (!writable) {\r\n            return this;\r\n        }\r\n        return {\r\n            inlineClassName: this.inlineClassName,\r\n            beforeContentClassName: this.beforeContentClassName,\r\n            afterContentClassName: this.afterContentClassName,\r\n            className: this.className,\r\n            glyphMarginClassName: this.glyphMarginClassName,\r\n            isWholeLine: this.isWholeLine,\r\n            overviewRuler: this.overviewRuler,\r\n            stickiness: this.stickiness\r\n        };\r\n    };\r\n    DecorationTypeOptionsProvider.prototype.dispose = function () {\r\n        this._disposables.dispose();\r\n        this._styleSheet.unref();\r\n    };\r\n    return DecorationTypeOptionsProvider;\r\n}());\r\nvar _CSS_MAP = {\r\n    color: 'color:{0} !important;',\r\n    opacity: 'opacity:{0};',\r\n    backgroundColor: 'background-color:{0};',\r\n    outline: 'outline:{0};',\r\n    outlineColor: 'outline-color:{0};',\r\n    outlineStyle: 'outline-style:{0};',\r\n    outlineWidth: 'outline-width:{0};',\r\n    border: 'border:{0};',\r\n    borderColor: 'border-color:{0};',\r\n    borderRadius: 'border-radius:{0};',\r\n    borderSpacing: 'border-spacing:{0};',\r\n    borderStyle: 'border-style:{0};',\r\n    borderWidth: 'border-width:{0};',\r\n    fontStyle: 'font-style:{0};',\r\n    fontWeight: 'font-weight:{0};',\r\n    textDecoration: 'text-decoration:{0};',\r\n    cursor: 'cursor:{0};',\r\n    letterSpacing: 'letter-spacing:{0};',\r\n    gutterIconPath: 'background:{0} center center no-repeat;',\r\n    gutterIconSize: 'background-size:{0};',\r\n    contentText: 'content:\\'{0}\\';',\r\n    contentIconPath: 'content:{0};',\r\n    margin: 'margin:{0};',\r\n    width: 'width:{0};',\r\n    height: 'height:{0};'\r\n};\r\nvar DecorationCSSRules = /** @class */ (function () {\r\n    function DecorationCSSRules(ruleType, providerArgs, themeService) {\r\n        var _this = this;\r\n        this._theme = themeService.getTheme();\r\n        this._ruleType = ruleType;\r\n        this._providerArgs = providerArgs;\r\n        this._usesThemeColors = false;\r\n        this._hasContent = false;\r\n        this._hasLetterSpacing = false;\r\n        var className = CSSNameHelper.getClassName(this._providerArgs.key, ruleType);\r\n        if (this._providerArgs.parentTypeKey) {\r\n            className = className + ' ' + CSSNameHelper.getClassName(this._providerArgs.parentTypeKey, ruleType);\r\n        }\r\n        this._className = className;\r\n        this._unThemedSelector = CSSNameHelper.getSelector(this._providerArgs.key, this._providerArgs.parentTypeKey, ruleType);\r\n        this._buildCSS();\r\n        if (this._usesThemeColors) {\r\n            this._themeListener = themeService.onThemeChange(function (theme) {\r\n                _this._theme = themeService.getTheme();\r\n                _this._removeCSS();\r\n                _this._buildCSS();\r\n            });\r\n        }\r\n        else {\r\n            this._themeListener = null;\r\n        }\r\n    }\r\n    DecorationCSSRules.prototype.dispose = function () {\r\n        if (this._hasContent) {\r\n            this._removeCSS();\r\n            this._hasContent = false;\r\n        }\r\n        if (this._themeListener) {\r\n            this._themeListener.dispose();\r\n            this._themeListener = null;\r\n        }\r\n    };\r\n    Object.defineProperty(DecorationCSSRules.prototype, \"hasContent\", {\r\n        get: function () {\r\n            return this._hasContent;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(DecorationCSSRules.prototype, \"hasLetterSpacing\", {\r\n        get: function () {\r\n            return this._hasLetterSpacing;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(DecorationCSSRules.prototype, \"className\", {\r\n        get: function () {\r\n            return this._className;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    DecorationCSSRules.prototype._buildCSS = function () {\r\n        var options = this._providerArgs.options;\r\n        var unthemedCSS, lightCSS, darkCSS;\r\n        switch (this._ruleType) {\r\n            case 0 /* ClassName */:\r\n                unthemedCSS = this.getCSSTextForModelDecorationClassName(options);\r\n                lightCSS = this.getCSSTextForModelDecorationClassName(options.light);\r\n                darkCSS = this.getCSSTextForModelDecorationClassName(options.dark);\r\n                break;\r\n            case 1 /* InlineClassName */:\r\n                unthemedCSS = this.getCSSTextForModelDecorationInlineClassName(options);\r\n                lightCSS = this.getCSSTextForModelDecorationInlineClassName(options.light);\r\n                darkCSS = this.getCSSTextForModelDecorationInlineClassName(options.dark);\r\n                break;\r\n            case 2 /* GlyphMarginClassName */:\r\n                unthemedCSS = this.getCSSTextForModelDecorationGlyphMarginClassName(options);\r\n                lightCSS = this.getCSSTextForModelDecorationGlyphMarginClassName(options.light);\r\n                darkCSS = this.getCSSTextForModelDecorationGlyphMarginClassName(options.dark);\r\n                break;\r\n            case 3 /* BeforeContentClassName */:\r\n                unthemedCSS = this.getCSSTextForModelDecorationContentClassName(options.before);\r\n                lightCSS = this.getCSSTextForModelDecorationContentClassName(options.light && options.light.before);\r\n                darkCSS = this.getCSSTextForModelDecorationContentClassName(options.dark && options.dark.before);\r\n                break;\r\n            case 4 /* AfterContentClassName */:\r\n                unthemedCSS = this.getCSSTextForModelDecorationContentClassName(options.after);\r\n                lightCSS = this.getCSSTextForModelDecorationContentClassName(options.light && options.light.after);\r\n                darkCSS = this.getCSSTextForModelDecorationContentClassName(options.dark && options.dark.after);\r\n                break;\r\n            default:\r\n                throw new Error('Unknown rule type: ' + this._ruleType);\r\n        }\r\n        var sheet = this._providerArgs.styleSheet.sheet;\r\n        var hasContent = false;\r\n        if (unthemedCSS.length > 0) {\r\n            sheet.insertRule(this._unThemedSelector + \" {\" + unthemedCSS + \"}\", 0);\r\n            hasContent = true;\r\n        }\r\n        if (lightCSS.length > 0) {\r\n            sheet.insertRule(\".vs\" + this._unThemedSelector + \" {\" + lightCSS + \"}\", 0);\r\n            hasContent = true;\r\n        }\r\n        if (darkCSS.length > 0) {\r\n            sheet.insertRule(\".vs-dark\" + this._unThemedSelector + \", .hc-black\" + this._unThemedSelector + \" {\" + darkCSS + \"}\", 0);\r\n            hasContent = true;\r\n        }\r\n        this._hasContent = hasContent;\r\n    };\r\n    DecorationCSSRules.prototype._removeCSS = function () {\r\n        dom.removeCSSRulesContainingSelector(this._unThemedSelector, this._providerArgs.styleSheet);\r\n    };\r\n    /**\r\n     * Build the CSS for decorations styled via `className`.\r\n     */\r\n    DecorationCSSRules.prototype.getCSSTextForModelDecorationClassName = function (opts) {\r\n        if (!opts) {\r\n            return '';\r\n        }\r\n        var cssTextArr = [];\r\n        this.collectCSSText(opts, ['backgroundColor'], cssTextArr);\r\n        this.collectCSSText(opts, ['outline', 'outlineColor', 'outlineStyle', 'outlineWidth'], cssTextArr);\r\n        this.collectBorderSettingsCSSText(opts, cssTextArr);\r\n        return cssTextArr.join('');\r\n    };\r\n    /**\r\n     * Build the CSS for decorations styled via `inlineClassName`.\r\n     */\r\n    DecorationCSSRules.prototype.getCSSTextForModelDecorationInlineClassName = function (opts) {\r\n        if (!opts) {\r\n            return '';\r\n        }\r\n        var cssTextArr = [];\r\n        this.collectCSSText(opts, ['fontStyle', 'fontWeight', 'textDecoration', 'cursor', 'color', 'opacity', 'letterSpacing'], cssTextArr);\r\n        if (opts.letterSpacing) {\r\n            this._hasLetterSpacing = true;\r\n        }\r\n        return cssTextArr.join('');\r\n    };\r\n    /**\r\n     * Build the CSS for decorations styled before or after content.\r\n     */\r\n    DecorationCSSRules.prototype.getCSSTextForModelDecorationContentClassName = function (opts) {\r\n        if (!opts) {\r\n            return '';\r\n        }\r\n        var cssTextArr = [];\r\n        if (typeof opts !== 'undefined') {\r\n            this.collectBorderSettingsCSSText(opts, cssTextArr);\r\n            if (typeof opts.contentIconPath !== 'undefined') {\r\n                cssTextArr.push(strings.format(_CSS_MAP.contentIconPath, dom.asCSSUrl(URI.revive(opts.contentIconPath))));\r\n            }\r\n            if (typeof opts.contentText === 'string') {\r\n                var truncated = opts.contentText.match(/^.*$/m)[0]; // only take first line\r\n                var escaped = truncated.replace(/['\\\\]/g, '\\\\$&');\r\n                cssTextArr.push(strings.format(_CSS_MAP.contentText, escaped));\r\n            }\r\n            this.collectCSSText(opts, ['fontStyle', 'fontWeight', 'textDecoration', 'color', 'opacity', 'backgroundColor', 'margin'], cssTextArr);\r\n            if (this.collectCSSText(opts, ['width', 'height'], cssTextArr)) {\r\n                cssTextArr.push('display:inline-block;');\r\n            }\r\n        }\r\n        return cssTextArr.join('');\r\n    };\r\n    /**\r\n     * Build the CSS for decorations styled via `glpyhMarginClassName`.\r\n     */\r\n    DecorationCSSRules.prototype.getCSSTextForModelDecorationGlyphMarginClassName = function (opts) {\r\n        if (!opts) {\r\n            return '';\r\n        }\r\n        var cssTextArr = [];\r\n        if (typeof opts.gutterIconPath !== 'undefined') {\r\n            cssTextArr.push(strings.format(_CSS_MAP.gutterIconPath, dom.asCSSUrl(URI.revive(opts.gutterIconPath))));\r\n            if (typeof opts.gutterIconSize !== 'undefined') {\r\n                cssTextArr.push(strings.format(_CSS_MAP.gutterIconSize, opts.gutterIconSize));\r\n            }\r\n        }\r\n        return cssTextArr.join('');\r\n    };\r\n    DecorationCSSRules.prototype.collectBorderSettingsCSSText = function (opts, cssTextArr) {\r\n        if (this.collectCSSText(opts, ['border', 'borderColor', 'borderRadius', 'borderSpacing', 'borderStyle', 'borderWidth'], cssTextArr)) {\r\n            cssTextArr.push(strings.format('box-sizing: border-box;'));\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    DecorationCSSRules.prototype.collectCSSText = function (opts, properties, cssTextArr) {\r\n        var lenBefore = cssTextArr.length;\r\n        for (var _i = 0, properties_1 = properties; _i < properties_1.length; _i++) {\r\n            var property = properties_1[_i];\r\n            var value = this.resolveValue(opts[property]);\r\n            if (typeof value === 'string') {\r\n                cssTextArr.push(strings.format(_CSS_MAP[property], value));\r\n            }\r\n        }\r\n        return cssTextArr.length !== lenBefore;\r\n    };\r\n    DecorationCSSRules.prototype.resolveValue = function (value) {\r\n        if (isThemeColor(value)) {\r\n            this._usesThemeColors = true;\r\n            var color = this._theme.getColor(value.id);\r\n            if (color) {\r\n                return color.toString();\r\n            }\r\n            return 'transparent';\r\n        }\r\n        return value;\r\n    };\r\n    return DecorationCSSRules;\r\n}());\r\nvar CSSNameHelper = /** @class */ (function () {\r\n    function CSSNameHelper() {\r\n    }\r\n    CSSNameHelper.getClassName = function (key, type) {\r\n        return 'ced-' + key + '-' + type;\r\n    };\r\n    CSSNameHelper.getSelector = function (key, parentKey, ruleType) {\r\n        var selector = '.monaco-editor .' + this.getClassName(key, ruleType);\r\n        if (parentKey) {\r\n            selector = selector + '.' + this.getClassName(parentKey, ruleType);\r\n        }\r\n        if (ruleType === 3 /* BeforeContentClassName */) {\r\n            selector += '::before';\r\n        }\r\n        else if (ruleType === 4 /* AfterContentClassName */) {\r\n            selector += '::after';\r\n        }\r\n        return selector;\r\n    };\r\n    return CSSNameHelper;\r\n}());\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport * as editorCommon from '../common/editorCommon.js';\r\n/**\r\n *@internal\r\n */\r\nexport function isCodeEditor(thing) {\r\n    if (thing && typeof thing.getEditorType === 'function') {\r\n        return thing.getEditorType() === editorCommon.EditorType.ICodeEditor;\r\n    }\r\n    else {\r\n        return false;\r\n    }\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { illegalArgument } from '../../base/common/errors.js';\r\nimport { URI } from '../../base/common/uri.js';\r\nimport { ICodeEditorService } from './services/codeEditorService.js';\r\nimport { Position } from '../common/core/position.js';\r\nimport { IModelService } from '../common/services/modelService.js';\r\nimport { ITextModelService } from '../common/services/resolverService.js';\r\nimport { MenuRegistry } from '../../platform/actions/common/actions.js';\r\nimport { CommandsRegistry } from '../../platform/commands/common/commands.js';\r\nimport { ContextKeyExpr, IContextKeyService } from '../../platform/contextkey/common/contextkey.js';\r\nimport { KeybindingsRegistry } from '../../platform/keybinding/common/keybindingsRegistry.js';\r\nimport { Registry } from '../../platform/registry/common/platform.js';\r\nimport { ITelemetryService } from '../../platform/telemetry/common/telemetry.js';\r\nimport { withNullAsUndefined, assertType } from '../../base/common/types.js';\r\nvar Command = /** @class */ (function () {\r\n    function Command(opts) {\r\n        this.id = opts.id;\r\n        this.precondition = opts.precondition;\r\n        this._kbOpts = opts.kbOpts;\r\n        this._menuOpts = opts.menuOpts;\r\n        this._description = opts.description;\r\n    }\r\n    Command.prototype.register = function () {\r\n        var _this = this;\r\n        if (Array.isArray(this._menuOpts)) {\r\n            this._menuOpts.forEach(this._registerMenuItem, this);\r\n        }\r\n        else if (this._menuOpts) {\r\n            this._registerMenuItem(this._menuOpts);\r\n        }\r\n        if (this._kbOpts) {\r\n            var kbWhen = this._kbOpts.kbExpr;\r\n            if (this.precondition) {\r\n                if (kbWhen) {\r\n                    kbWhen = ContextKeyExpr.and(kbWhen, this.precondition);\r\n                }\r\n                else {\r\n                    kbWhen = this.precondition;\r\n                }\r\n            }\r\n            KeybindingsRegistry.registerCommandAndKeybindingRule({\r\n                id: this.id,\r\n                handler: function (accessor, args) { return _this.runCommand(accessor, args); },\r\n                weight: this._kbOpts.weight,\r\n                when: kbWhen,\r\n                primary: this._kbOpts.primary,\r\n                secondary: this._kbOpts.secondary,\r\n                win: this._kbOpts.win,\r\n                linux: this._kbOpts.linux,\r\n                mac: this._kbOpts.mac,\r\n                description: this._description\r\n            });\r\n        }\r\n        else {\r\n            CommandsRegistry.registerCommand({\r\n                id: this.id,\r\n                handler: function (accessor, args) { return _this.runCommand(accessor, args); },\r\n                description: this._description\r\n            });\r\n        }\r\n    };\r\n    Command.prototype._registerMenuItem = function (item) {\r\n        MenuRegistry.appendMenuItem(item.menuId, {\r\n            group: item.group,\r\n            command: {\r\n                id: this.id,\r\n                title: item.title,\r\n            },\r\n            when: item.when,\r\n            order: item.order\r\n        });\r\n    };\r\n    return Command;\r\n}());\r\nexport { Command };\r\nvar EditorCommand = /** @class */ (function (_super) {\r\n    __extends(EditorCommand, _super);\r\n    function EditorCommand() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /**\r\n     * Create a command class that is bound to a certain editor contribution.\r\n     */\r\n    EditorCommand.bindToContribution = function (controllerGetter) {\r\n        return /** @class */ (function (_super) {\r\n            __extends(EditorControllerCommandImpl, _super);\r\n            function EditorControllerCommandImpl(opts) {\r\n                var _this = _super.call(this, opts) || this;\r\n                _this._callback = opts.handler;\r\n                return _this;\r\n            }\r\n            EditorControllerCommandImpl.prototype.runEditorCommand = function (accessor, editor, args) {\r\n                var controller = controllerGetter(editor);\r\n                if (controller) {\r\n                    this._callback(controllerGetter(editor), args);\r\n                }\r\n            };\r\n            return EditorControllerCommandImpl;\r\n        }(EditorCommand));\r\n    };\r\n    EditorCommand.prototype.runCommand = function (accessor, args) {\r\n        var _this = this;\r\n        var codeEditorService = accessor.get(ICodeEditorService);\r\n        // Find the editor with text focus or active\r\n        var editor = codeEditorService.getFocusedCodeEditor() || codeEditorService.getActiveCodeEditor();\r\n        if (!editor) {\r\n            // well, at least we tried...\r\n            return;\r\n        }\r\n        return editor.invokeWithinContext(function (editorAccessor) {\r\n            var kbService = editorAccessor.get(IContextKeyService);\r\n            if (!kbService.contextMatchesRules(withNullAsUndefined(_this.precondition))) {\r\n                // precondition does not hold\r\n                return;\r\n            }\r\n            return _this.runEditorCommand(editorAccessor, editor, args);\r\n        });\r\n    };\r\n    return EditorCommand;\r\n}(Command));\r\nexport { EditorCommand };\r\nvar EditorAction = /** @class */ (function (_super) {\r\n    __extends(EditorAction, _super);\r\n    function EditorAction(opts) {\r\n        var _this = _super.call(this, EditorAction.convertOptions(opts)) || this;\r\n        _this.label = opts.label;\r\n        _this.alias = opts.alias;\r\n        return _this;\r\n    }\r\n    EditorAction.convertOptions = function (opts) {\r\n        var menuOpts;\r\n        if (Array.isArray(opts.menuOpts)) {\r\n            menuOpts = opts.menuOpts;\r\n        }\r\n        else if (opts.menuOpts) {\r\n            menuOpts = [opts.menuOpts];\r\n        }\r\n        else {\r\n            menuOpts = [];\r\n        }\r\n        function withDefaults(item) {\r\n            if (!item.menuId) {\r\n                item.menuId = 7 /* EditorContext */;\r\n            }\r\n            if (!item.title) {\r\n                item.title = opts.label;\r\n            }\r\n            item.when = ContextKeyExpr.and(opts.precondition, item.when);\r\n            return item;\r\n        }\r\n        if (Array.isArray(opts.contextMenuOpts)) {\r\n            menuOpts.push.apply(menuOpts, opts.contextMenuOpts.map(withDefaults));\r\n        }\r\n        else if (opts.contextMenuOpts) {\r\n            menuOpts.push(withDefaults(opts.contextMenuOpts));\r\n        }\r\n        opts.menuOpts = menuOpts;\r\n        return opts;\r\n    };\r\n    EditorAction.prototype.runEditorCommand = function (accessor, editor, args) {\r\n        this.reportTelemetry(accessor, editor);\r\n        return this.run(accessor, editor, args || {});\r\n    };\r\n    EditorAction.prototype.reportTelemetry = function (accessor, editor) {\r\n        accessor.get(ITelemetryService).publicLog2('editorActionInvoked', { name: this.label, id: this.id });\r\n    };\r\n    return EditorAction;\r\n}(EditorCommand));\r\nexport { EditorAction };\r\n//#endregion EditorAction\r\n// --- Registration of commands and actions\r\nexport function registerLanguageCommand(id, handler) {\r\n    CommandsRegistry.registerCommand(id, function (accessor, args) { return handler(accessor, args || {}); });\r\n}\r\nexport function registerDefaultLanguageCommand(id, handler) {\r\n    registerLanguageCommand(id, function (accessor, args) {\r\n        var resource = args.resource, position = args.position;\r\n        if (!(resource instanceof URI)) {\r\n            throw illegalArgument('resource');\r\n        }\r\n        if (!Position.isIPosition(position)) {\r\n            throw illegalArgument('position');\r\n        }\r\n        var model = accessor.get(IModelService).getModel(resource);\r\n        if (model) {\r\n            var editorPosition = Position.lift(position);\r\n            return handler(model, editorPosition, args);\r\n        }\r\n        return accessor.get(ITextModelService).createModelReference(resource).then(function (reference) {\r\n            return new Promise(function (resolve, reject) {\r\n                try {\r\n                    var result = handler(reference.object.textEditorModel, Position.lift(position), args);\r\n                    resolve(result);\r\n                }\r\n                catch (err) {\r\n                    reject(err);\r\n                }\r\n            }).finally(function () {\r\n                reference.dispose();\r\n            });\r\n        });\r\n    });\r\n}\r\nexport function registerModelAndPositionCommand(id, handler) {\r\n    CommandsRegistry.registerCommand(id, function (accessor) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        var resource = args[0], position = args[1];\r\n        assertType(URI.isUri(resource));\r\n        assertType(Position.isIPosition(position));\r\n        var model = accessor.get(IModelService).getModel(resource);\r\n        if (model) {\r\n            var editorPosition = Position.lift(position);\r\n            return handler(model, editorPosition, args.slice(2));\r\n        }\r\n        return accessor.get(ITextModelService).createModelReference(resource).then(function (reference) {\r\n            return new Promise(function (resolve, reject) {\r\n                try {\r\n                    var result = handler(reference.object.textEditorModel, Position.lift(position), args.slice(2));\r\n                    resolve(result);\r\n                }\r\n                catch (err) {\r\n                    reject(err);\r\n                }\r\n            }).finally(function () {\r\n                reference.dispose();\r\n            });\r\n        });\r\n    });\r\n}\r\nexport function registerModelCommand(id, handler) {\r\n    CommandsRegistry.registerCommand(id, function (accessor) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        var resource = args[0];\r\n        assertType(URI.isUri(resource));\r\n        var model = accessor.get(IModelService).getModel(resource);\r\n        if (model) {\r\n            return handler(model, args.slice(1));\r\n        }\r\n        return accessor.get(ITextModelService).createModelReference(resource).then(function (reference) {\r\n            return new Promise(function (resolve, reject) {\r\n                try {\r\n                    var result = handler(reference.object.textEditorModel, args.slice(1));\r\n                    resolve(result);\r\n                }\r\n                catch (err) {\r\n                    reject(err);\r\n                }\r\n            }).finally(function () {\r\n                reference.dispose();\r\n            });\r\n        });\r\n    });\r\n}\r\nexport function registerEditorCommand(editorCommand) {\r\n    EditorContributionRegistry.INSTANCE.registerEditorCommand(editorCommand);\r\n    return editorCommand;\r\n}\r\nexport function registerEditorAction(ctor) {\r\n    EditorContributionRegistry.INSTANCE.registerEditorAction(new ctor());\r\n}\r\nexport function registerInstantiatedEditorAction(editorAction) {\r\n    EditorContributionRegistry.INSTANCE.registerEditorAction(editorAction);\r\n}\r\nexport function registerEditorContribution(id, ctor) {\r\n    EditorContributionRegistry.INSTANCE.registerEditorContribution(id, ctor);\r\n}\r\nexport var EditorExtensionsRegistry;\r\n(function (EditorExtensionsRegistry) {\r\n    function getEditorCommand(commandId) {\r\n        return EditorContributionRegistry.INSTANCE.getEditorCommand(commandId);\r\n    }\r\n    EditorExtensionsRegistry.getEditorCommand = getEditorCommand;\r\n    function getEditorActions() {\r\n        return EditorContributionRegistry.INSTANCE.getEditorActions();\r\n    }\r\n    EditorExtensionsRegistry.getEditorActions = getEditorActions;\r\n    function getEditorContributions() {\r\n        return EditorContributionRegistry.INSTANCE.getEditorContributions();\r\n    }\r\n    EditorExtensionsRegistry.getEditorContributions = getEditorContributions;\r\n    function getSomeEditorContributions(ids) {\r\n        return EditorContributionRegistry.INSTANCE.getEditorContributions().filter(function (c) { return ids.indexOf(c.id) >= 0; });\r\n    }\r\n    EditorExtensionsRegistry.getSomeEditorContributions = getSomeEditorContributions;\r\n    function getDiffEditorContributions() {\r\n        return EditorContributionRegistry.INSTANCE.getDiffEditorContributions();\r\n    }\r\n    EditorExtensionsRegistry.getDiffEditorContributions = getDiffEditorContributions;\r\n})(EditorExtensionsRegistry || (EditorExtensionsRegistry = {}));\r\n// Editor extension points\r\nvar Extensions = {\r\n    EditorCommonContributions: 'editor.contributions'\r\n};\r\nvar EditorContributionRegistry = /** @class */ (function () {\r\n    function EditorContributionRegistry() {\r\n        this.editorContributions = [];\r\n        this.diffEditorContributions = [];\r\n        this.editorActions = [];\r\n        this.editorCommands = Object.create(null);\r\n    }\r\n    EditorContributionRegistry.prototype.registerEditorContribution = function (id, ctor) {\r\n        this.editorContributions.push({ id: id, ctor: ctor });\r\n    };\r\n    EditorContributionRegistry.prototype.getEditorContributions = function () {\r\n        return this.editorContributions.slice(0);\r\n    };\r\n    EditorContributionRegistry.prototype.getDiffEditorContributions = function () {\r\n        return this.diffEditorContributions.slice(0);\r\n    };\r\n    EditorContributionRegistry.prototype.registerEditorAction = function (action) {\r\n        action.register();\r\n        this.editorActions.push(action);\r\n    };\r\n    EditorContributionRegistry.prototype.getEditorActions = function () {\r\n        return this.editorActions.slice(0);\r\n    };\r\n    EditorContributionRegistry.prototype.registerEditorCommand = function (editorCommand) {\r\n        editorCommand.register();\r\n        this.editorCommands[editorCommand.id] = editorCommand;\r\n    };\r\n    EditorContributionRegistry.prototype.getEditorCommand = function (commandId) {\r\n        return (this.editorCommands[commandId] || null);\r\n    };\r\n    EditorContributionRegistry.INSTANCE = new EditorContributionRegistry();\r\n    return EditorContributionRegistry;\r\n}());\r\nRegistry.add(Extensions.EditorCommonContributions, EditorContributionRegistry.INSTANCE);\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\r\nexport var IBulkEditService = createDecorator('IWorkspaceEditService');\r\n"],"sourceRoot":""}