{"version":3,"sources":["webpack:///./node_modules/monaco-editor/esm/vs/language/css/_deps/vscode-css-languageservice/services/cssCompletion.js","webpack:///./node_modules/monaco-editor/esm/vs/language/css/_deps/vscode-css-languageservice/utils/objects.js","webpack:///./node_modules/monaco-editor/esm/vs/language/css/_deps/vscode-css-languageservice/services/cssCodeActions.js","webpack:///./node_modules/monaco-editor/esm/vs/language/css/_deps/vscode-css-languageservice/utils/strings.js","webpack:///./node_modules/monaco-editor/esm/vs/language/css/_deps/vscode-css-languageservice/services/cssNavigation.js","webpack:///./node_modules/monaco-editor/esm/vs/language/css/_deps/vscode-css-languageservice/services/cssFolding.js","webpack:///./node_modules/monaco-editor/esm/vs/language/css/_deps/vscode-css-languageservice/services/lintRules.js","webpack:///./node_modules/monaco-editor/esm/vs/language/css/_deps/vscode-css-languageservice/services/lintUtil.js","webpack:///./node_modules/monaco-editor/esm/vs/language/css/_deps/vscode-css-languageservice/services/lint.js","webpack:///./node_modules/monaco-editor/esm/vs/language/css/_deps/vscode-css-languageservice/services/cssValidation.js","webpack:///./node_modules/monaco-editor/esm/vs/language/css/_deps/vscode-css-languageservice/utils/arrays.js","webpack:///./node_modules/monaco-editor/esm/vs/language/css/_deps/vscode-css-languageservice/services/cssSelectionRange.js","webpack:///./node_modules/monaco-editor/esm/vs/language/css/_deps/vscode-css-languageservice/services/scssCompletion.js","webpack:///./node_modules/monaco-editor/esm/vs/language/css/_deps/vscode-css-languageservice/services/scssNavigation.js","webpack:///./node_modules/monaco-editor/esm/vs/language/css/_deps/vscode-css-languageservice/services/selectorPrinting.js","webpack:///./node_modules/monaco-editor/esm/vs/language/css/_deps/vscode-css-languageservice/services/cssHover.js","webpack:///./node_modules/monaco-editor/esm/vs/language/css/_deps/vscode-css-languageservice/services/lessCompletion.js"],"names":["SortTexts","localize","SnippetFormat","Snippet","CSSCompletion","variablePrefix","clientCapabilities","this","completionParticipants","valueTypes","Identifier","Value","StringLiteral","URILiteral","NumericValue","HexColorValue","VariableName","Prio","prototype","configure","settings","getSymbolContext","symbolContext","styleSheet","setCompletionParticipants","registeredCompletionParticipants","doComplete","document","position","offset","offsetAt","currentWord","getCurrentWord","defaultReplaceRange","create","line","character","length","textDocument","result","isIncomplete","items","nodePath","i","node","getCompletionsForDeclarationProperty","getParent","parent","getVariableProposals","getCompletionsForExpression","parentRef","findAParent","ExtendsReference","Ruleset","type","getCompletionsForExtendsReference","parentRuleSet","getCompletionsForSelector","isNested","getCompletionsForFunctionArgument","getCompletionsForDeclarations","getCompletionsForVariableDeclaration","getCompletionsForRuleSet","getCompletionsForInterpolation","getCompletionsForFunctionDeclaration","getCompletionsForMixinReference","getCompletionsForSupports","getCompletionsForSupportsCondition","getCompletionForUriLiteralValue","getCompletionForTopLevel","isImportPathParent","getCompletionForImportPath","finalize","getCompletionsForStylesheet","indexOf","Import","needsSortText","some","sortText","label","forEach","item","index","VendorPrefixed","computeRankNumber","Normal","findInNodePath","types","_i","arguments","declaration","getPropertyProposals","_this","triggerPropertyValueCompletion","isTriggerPropertyValueCompletionEnabled","completePropertyWithSemicolon","isCompletePropertyWithSemicolonEnabled","properties","getProperties","entry","range","insertText","retrigger","getCompletionRange","getProperty","name","colonPosition","semicolonPosition","end","documentation","doesSupportMarkdown","tags","isDeprecated","Deprecated","textEdit","replace","insertTextFormat","kind","Property","restrictions","command","title","push","participant","onCssProperty","propertyName","Object","defineProperty","get","completion","undefined","enumerable","configurable","getCompletionsForDeclarationValue","getFullPropertyName","existingNode","getValue","hasChildren","findChildAtOffset","onCssPropertyValue","propertyValue","_a","restriction","getColorProposals","getPositionProposals","getRepeatStyleProposals","getLineStyleProposals","getLineWidthProposals","getGeometryBoxProposals","getBoxProposals","getImageProposals","getTimingFunctionProposals","getBasicShapeProposals","getValueEnumProposals","getCSSWideKeywordProposals","getUnitProposals","existingValues","collectValues","_b","_c","getEntries","existingValue","getTermProposals","values","value","insertString","from","lastIndexOf","substr","Enums","keywords","symbols","findSymbolsAtOffset","Variable","symbols_1","symbol","completionItem","isColorString","Color","FunctionParameter","mixinNode","MixinDeclaration","detail","getName","getVariableProposalsForCSSVarFunction","filter","symbols_2","numMatch","match","Term","units","units_1","unit","Unit","positionAt","start","color","colorValues","Set","acceptVisitor","ColorValueCollector","_loop_1","p","tabStop","replaceFunction","_match","p1","func","desc","this_1","Function","repeat","lineStyle","lineWidth","box","image","moveCursorInsideParenthesis","timing","shape","findFirstChildBeforeOffset","getAtDirectives","Keyword","ruleSet","declarations","getDeclarations","isAfter","endsWith","isInSelectors","PseudoSelector","IdentifierSelector","ClassSelector","ElementNameSelector","getText","pseudoClasses","getPseudoClasses","pseudoElements","getPseudoElements","visited","docText","accept","n","SimpleSelector","selector","charAt","getSelectors","getChildren","expression","findParent","Declaration","arg","identifier","getIdentifier","matches","getArguments","getChild","decl","ref","allMixins","Mixin","allMixins_1","mixinSymbol","makeTermProposal","getParameters","allFunctions","allFunctions_1","functionSymbol","parameters","params","map","c","join","supportsCondition","child","lParent","rParent","supports","inInCondition","extendsRef","uriLiteralNode","uriValue","uriValueNode","emptyURIValuePosition","onCssURILiteralValue","importPathNode","onCssImportPath","pathValue","supportsMarkdown","Array","isArray","documentationFormat","Markdown","status","nstr","toString","entries","add","keys","text","fullPropertyName","visitValue","matchesProperty","vistNode","currentOffset","visitNode","substring","s","toLowerCase","test","obj","key","isDefined","CSSCodeActions","doCodeActions","context","stylesheet","doCodeActions2","ca","textDocumentEdit","edit","documentChanges","uri","version","edits","diagnostics","diagnostic","appendFixesForMarker","getFixesForUnknownProperty","property","marker","candidates","score","sort","a","b","maxActions","candidates_1","candidate","propertyName_1","documentIdentifier","workspaceEdit","codeAction","QuickFix","code","UnknownProperty","id","nodepath","startsWith","haystack","needle","diff","difference","first","second","maxLenDelta","lengthDifference","Math","abs","j","LCS","zeroArray","max","sqrt","getLimitedString","str","ellipsis","slice","__awaiter","thisArg","_arguments","P","generator","adopt","resolve","Promise","reject","fulfilled","step","next","e","rejected","done","then","apply","__generator","body","f","y","t","g","_","sent","trys","ops","verb","Symbol","iterator","v","op","TypeError","call","pop","CSSNavigation","findDefinition","findSymbolFromNode","getRange","findReferences","highlights","findDocumentHighlights","h","Stylesheet","Declarations","matchesSymbol","getHighlightKind","isRawStringDocumentLinkNode","findDocumentLinks","documentContext","link","uriLiteralNodeToDocumentLink","rawText","uriStringNodeToDocumentLink","findDocumentLinks2","findDocumentSymbols","Class","location","locationNode","Method","mediaList","Module","findDocumentColors","colorInfo","getColorInformation","getColorPresentations","red256","round","red","green256","green","blue256","blue","alpha","toTwoDigitHex","hsl","l","doRename","newName","changes","uriStringNode","target","rawUri","resolveReference","Selector","Write","isCustomProperty","FunctionDeclaration","Keyframe","VariableDeclaration","Read","r","getFoldingRanges","ranges","computeFoldingRanges","limitFoldingRanges","getStartLine","getEndLine","len","getScanner","languageId","tokenToRange","startLine","endLine","delimiterStack","scanner","ignoreComment","setSource","token","scan","prevToken","CurlyL","isStart","CurlyR","prevDelimiter","popPrevStartDelimiterOfType","Comment","commentRegionMarkerToDelimiter_1","getCurrDelimiter","matches_1","currDelimiter","EOF","stack","splice","maxRanges","rangeLimit","Number","MAX_VALUE","sortedRanges","r1","r2","validRanges","prevEndLine","Warning","Error","Ignore","Rule","message","defaultValue","Setting","Rules","AllVendorPrefixes","IncludeStandardPropertyWhenUsingVendorPrefix","DuplicateDeclarations","EmptyRuleSet","ImportStatemement","BewareOfBoxModelSize","UniversalSelector","ZeroWithUnit","RequiredPropertiesForFontFace","HexColorLength","ArgsInColorFunction","UnknownAtRules","IEStarHack","UnknownVendorSpecificProperty","PropertyIgnoredDueToDisplay","AvoidImportant","AvoidFloat","AvoidIdSelector","Settings","ValidProperties","LintConfigurationSettings","conf","getRule","rule","hasOwnProperty","level","toLevel","getSetting","setting","Element","setSide","model","side","state","setAllSides","updateModelWithValue","updateModelWithList","checkLineWidth","allowsKeywords","parseFloat","checkLineWidthList","nodes","checkLineStyle","valueNode","checkLineStyleList","checkBorderShorthand","children","children_1","calculateBoxModel","propertyTable","top","right","bottom","left","propertyTable_1","width","height","segments","split","NodesByRootMap","data","root","names","LintVisitor","warnings","documentText","keyframes","validProperties","trim","entryFilter","visitor","completeValidations","isValidPropertyDeclaration","element","fetch","input","elements","input_1","curr","fetchWithValue","input_2","inputElement","findValueInExpression","found","getLevel","addEntry","details","getMissingNames","expected","actual","expectedClone","k","UnknownAtRule","visitUnknownAtRule","visitKeyframe","FontFace","visitFontFace","visitRuleSet","visitSimpleSelector","visitFunction","visitNumericValue","visitImport","visitHexColorValue","visitPrio","validateKeyframes","atRuleName","atDirective","getAtDirective","keyword","getKeyword","needsStandard","missingVendorSpecific","firstChar","boxModel","properties_1","properties_2","displayElems","_d","_e","prop","elem","node_1","node_2","elements_1","value_1","isExportBlock","propertiesBySuffix","containsUnknowns","_f","isCSSDeclaration","isKnownProperty","nonPrefixedName","getNonPrefixedPropertyName","fullName","suffix","isStandardProperty","prefixes","prefix","_g","_h","node_3","funcDecl","declValue","definesSrc","definesFontFamily","node_4","containsInterpolation","fnName","expectedAttrCount","actualAttrCount","CSSValidation","doValidation","validate","lint","ruleIds","toDiagnostic","getOffset","getLength","source","getMessage","severity","findFirst","array","low","high","mid","floor","includes","union","arrays","arrays_1","array_1","getSelectionRanges","positions","getSelectionRange","applicableRanges","getApplicableRanges","current","currNode","__extends","extendStatics","d","setPrototypeOf","__proto__","__","constructor","SCSSCompletion","_super","addReferencesToDocumentation","scssModuleLoaders","scssModuleBuiltIns","Forward","Use","parentType","createReplaceFunction","tabStopCounter","variableDefaults","createFunctionProposals","proposals","sortToEnd","proposals_1","selectorFuncs","functions","builtInFuncs","colorProposals","getCompletionForAtDirectives","_extendsRef","suggest","scssAtDirectives","getCompletionForModuleLoaders","references","url","markdownDoc","__assign","assign","SCSSNavigation","fileSystemProvider","toPathVariations","path","with","pathFragments","basename","pathWithoutBasename","normalizedBasename","documentUriWithBasename","newBasename","normalizedPath","underScorePath","indexPath","indexUnderscoreUri","cssPath","fileExists","documentUri","stat","fsProvider","Unknown","size","links","validLinks","parsedUri","pathVariations","parse","URIError","quotes","attributes","findAttribute","attribute","addChild","append","last","prepend","findRoot","RootElement","removeChild","addAttr","clone","cloneChildren","cloneWithParent","parentClone","LabelElement","MarkedStringPrinter","quote","print","doPrint","language","indent","doPrintElement","writeLine","content","attr","ensure","which","remove","Specificity","tag","toElement","parentElement","SelectorCombinator","SelectorPlaceholder","AttributeSelector","operator","getOperator","scanUnquotedString","isPseudoElementIdentifier","getPseudoElement","selectorToSpecificityMarkedString","calculateScore","specificity","selectorToMarkedString","selectorToElement","markedStrings","simpleSelectorToMarkedString","SelectorElementBuilder","prev","processSelector","selectorChild","labelElement","thisElement","SelectorCombinatorParent","SelectorCombinatorShadowPiercingDescendant","SelectorCombinatorSibling","SelectorCombinatorAllSiblings","isNewSelectorContext","parentRuleSets","builder","CSSHover","doHover","hover","contents","selectorName","getPseudoClass","convertContents","contentFormat","LESSCompletion","example","description","builtInProposals"],"mappings":"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","file":"js/chunk-19c2721a.cc30282c.js","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport * as nodes from '../parser/cssNodes.js';\nimport { Symbols } from '../parser/cssSymbolScope.js';\nimport * as languageFacts from '../languageFacts/facts.js';\nimport * as strings from '../utils/strings.js';\nimport { Position, CompletionItemKind, Range, TextEdit, InsertTextFormat, MarkupKind, CompletionItemTag } from '../cssLanguageTypes.js';\nimport * as nls from './../../../fillers/vscode-nls.js';\nimport { isDefined } from '../utils/objects.js';\nvar localize = nls.loadMessageBundle();\nvar SnippetFormat = InsertTextFormat.Snippet;\nvar SortTexts;\n(function (SortTexts) {\n    // char code 32, comes before everything\n    SortTexts[\"Enums\"] = \" \";\n    SortTexts[\"Normal\"] = \"d\";\n    SortTexts[\"VendorPrefixed\"] = \"x\";\n    SortTexts[\"Term\"] = \"y\";\n    SortTexts[\"Variable\"] = \"z\";\n})(SortTexts || (SortTexts = {}));\nvar CSSCompletion = /** @class */ (function () {\n    function CSSCompletion(variablePrefix, clientCapabilities) {\n        if (variablePrefix === void 0) { variablePrefix = null; }\n        this.variablePrefix = variablePrefix;\n        this.clientCapabilities = clientCapabilities;\n        this.completionParticipants = [];\n        this.valueTypes = [\n            nodes.NodeType.Identifier, nodes.NodeType.Value, nodes.NodeType.StringLiteral, nodes.NodeType.URILiteral, nodes.NodeType.NumericValue,\n            nodes.NodeType.HexColorValue, nodes.NodeType.VariableName, nodes.NodeType.Prio\n        ];\n    }\n    CSSCompletion.prototype.configure = function (settings) {\n        this.settings = settings;\n    };\n    CSSCompletion.prototype.getSymbolContext = function () {\n        if (!this.symbolContext) {\n            this.symbolContext = new Symbols(this.styleSheet);\n        }\n        return this.symbolContext;\n    };\n    CSSCompletion.prototype.setCompletionParticipants = function (registeredCompletionParticipants) {\n        this.completionParticipants = registeredCompletionParticipants || [];\n    };\n    CSSCompletion.prototype.doComplete = function (document, position, styleSheet) {\n        this.offset = document.offsetAt(position);\n        this.position = position;\n        this.currentWord = getCurrentWord(document, this.offset);\n        this.defaultReplaceRange = Range.create(Position.create(this.position.line, this.position.character - this.currentWord.length), this.position);\n        this.textDocument = document;\n        this.styleSheet = styleSheet;\n        try {\n            var result = { isIncomplete: false, items: [] };\n            this.nodePath = nodes.getNodePath(this.styleSheet, this.offset);\n            for (var i = this.nodePath.length - 1; i >= 0; i--) {\n                var node = this.nodePath[i];\n                if (node instanceof nodes.Property) {\n                    this.getCompletionsForDeclarationProperty(node.getParent(), result);\n                }\n                else if (node instanceof nodes.Expression) {\n                    if (node.parent instanceof nodes.Interpolation) {\n                        this.getVariableProposals(null, result);\n                    }\n                    else {\n                        this.getCompletionsForExpression(node, result);\n                    }\n                }\n                else if (node instanceof nodes.SimpleSelector) {\n                    var parentRef = node.findAParent(nodes.NodeType.ExtendsReference, nodes.NodeType.Ruleset);\n                    if (parentRef) {\n                        if (parentRef.type === nodes.NodeType.ExtendsReference) {\n                            this.getCompletionsForExtendsReference(parentRef, node, result);\n                        }\n                        else {\n                            var parentRuleSet = parentRef;\n                            this.getCompletionsForSelector(parentRuleSet, parentRuleSet && parentRuleSet.isNested(), result);\n                        }\n                    }\n                }\n                else if (node instanceof nodes.FunctionArgument) {\n                    this.getCompletionsForFunctionArgument(node, node.getParent(), result);\n                }\n                else if (node instanceof nodes.Declarations) {\n                    this.getCompletionsForDeclarations(node, result);\n                }\n                else if (node instanceof nodes.VariableDeclaration) {\n                    this.getCompletionsForVariableDeclaration(node, result);\n                }\n                else if (node instanceof nodes.RuleSet) {\n                    this.getCompletionsForRuleSet(node, result);\n                }\n                else if (node instanceof nodes.Interpolation) {\n                    this.getCompletionsForInterpolation(node, result);\n                }\n                else if (node instanceof nodes.FunctionDeclaration) {\n                    this.getCompletionsForFunctionDeclaration(node, result);\n                }\n                else if (node instanceof nodes.MixinReference) {\n                    this.getCompletionsForMixinReference(node, result);\n                }\n                else if (node instanceof nodes.Function) {\n                    this.getCompletionsForFunctionArgument(null, node, result);\n                }\n                else if (node instanceof nodes.Supports) {\n                    this.getCompletionsForSupports(node, result);\n                }\n                else if (node instanceof nodes.SupportsCondition) {\n                    this.getCompletionsForSupportsCondition(node, result);\n                }\n                else if (node instanceof nodes.ExtendsReference) {\n                    this.getCompletionsForExtendsReference(node, null, result);\n                }\n                else if (node.type === nodes.NodeType.URILiteral) {\n                    this.getCompletionForUriLiteralValue(node, result);\n                }\n                else if (node.parent === null) {\n                    this.getCompletionForTopLevel(result);\n                }\n                else if (node.type === nodes.NodeType.StringLiteral && this.isImportPathParent(node.parent.type)) {\n                    this.getCompletionForImportPath(node, result);\n                    // } else if (node instanceof nodes.Variable) {\n                    // this.getCompletionsForVariableDeclaration()\n                }\n                else {\n                    continue;\n                }\n                if (result.items.length > 0 || this.offset > node.offset) {\n                    return this.finalize(result);\n                }\n            }\n            this.getCompletionsForStylesheet(result);\n            if (result.items.length === 0) {\n                if (this.variablePrefix && this.currentWord.indexOf(this.variablePrefix) === 0) {\n                    this.getVariableProposals(null, result);\n                }\n            }\n            return this.finalize(result);\n        }\n        finally {\n            // don't hold on any state, clear symbolContext\n            this.position = null;\n            this.currentWord = null;\n            this.textDocument = null;\n            this.styleSheet = null;\n            this.symbolContext = null;\n            this.defaultReplaceRange = null;\n            this.nodePath = null;\n        }\n    };\n    CSSCompletion.prototype.isImportPathParent = function (type) {\n        return type === nodes.NodeType.Import;\n    };\n    CSSCompletion.prototype.finalize = function (result) {\n        var needsSortText = result.items.some(function (i) { return !!i.sortText || i.label[0] === '-'; });\n        if (needsSortText) {\n            result.items.forEach(function (item, index) {\n                if (!item.sortText) {\n                    if (item.label[0] === '-') {\n                        item.sortText = SortTexts.VendorPrefixed + '_' + computeRankNumber(index);\n                    }\n                    else {\n                        item.sortText = SortTexts.Normal + '_' + computeRankNumber(index);\n                    }\n                }\n                else {\n                    if (item.label[0] === '-') {\n                        item.sortText += SortTexts.VendorPrefixed + '_' + computeRankNumber(index);\n                    }\n                    else {\n                        item.sortText += SortTexts.Normal + '_' + computeRankNumber(index);\n                    }\n                }\n            });\n        }\n        return result;\n    };\n    CSSCompletion.prototype.findInNodePath = function () {\n        var types = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            types[_i] = arguments[_i];\n        }\n        for (var i = this.nodePath.length - 1; i >= 0; i--) {\n            var node = this.nodePath[i];\n            if (types.indexOf(node.type) !== -1) {\n                return node;\n            }\n        }\n        return null;\n    };\n    CSSCompletion.prototype.getCompletionsForDeclarationProperty = function (declaration, result) {\n        return this.getPropertyProposals(declaration, result);\n    };\n    CSSCompletion.prototype.getPropertyProposals = function (declaration, result) {\n        var _this = this;\n        var triggerPropertyValueCompletion = this.isTriggerPropertyValueCompletionEnabled;\n        var completePropertyWithSemicolon = this.isCompletePropertyWithSemicolonEnabled;\n        var properties = languageFacts.cssDataManager.getProperties();\n        properties.forEach(function (entry) {\n            var range;\n            var insertText;\n            var retrigger = false;\n            if (declaration) {\n                range = _this.getCompletionRange(declaration.getProperty());\n                insertText = entry.name;\n                if (!isDefined(declaration.colonPosition)) {\n                    insertText += ': ';\n                    retrigger = true;\n                }\n            }\n            else {\n                range = _this.getCompletionRange(null);\n                insertText = entry.name + ': ';\n                retrigger = true;\n            }\n            // Empty .selector { | } case\n            if (!declaration && completePropertyWithSemicolon) {\n                insertText += '$0;';\n            }\n            // Cases such as .selector { p; } or .selector { p:; }\n            if (declaration && !declaration.semicolonPosition) {\n                if (completePropertyWithSemicolon && _this.offset >= _this.textDocument.offsetAt(range.end)) {\n                    insertText += '$0;';\n                }\n            }\n            var item = {\n                label: entry.name,\n                documentation: languageFacts.getEntryDescription(entry, _this.doesSupportMarkdown()),\n                tags: isDeprecated(entry) ? [CompletionItemTag.Deprecated] : [],\n                textEdit: TextEdit.replace(range, insertText),\n                insertTextFormat: InsertTextFormat.Snippet,\n                kind: CompletionItemKind.Property\n            };\n            if (!entry.restrictions) {\n                retrigger = false;\n            }\n            if (triggerPropertyValueCompletion && retrigger) {\n                item.command = {\n                    title: 'Suggest',\n                    command: 'editor.action.triggerSuggest'\n                };\n            }\n            if (strings.startsWith(entry.name, '-')) {\n                item.sortText = SortTexts.VendorPrefixed;\n            }\n            result.items.push(item);\n        });\n        this.completionParticipants.forEach(function (participant) {\n            if (participant.onCssProperty) {\n                participant.onCssProperty({\n                    propertyName: _this.currentWord,\n                    range: _this.defaultReplaceRange\n                });\n            }\n        });\n        return result;\n    };\n    Object.defineProperty(CSSCompletion.prototype, \"isTriggerPropertyValueCompletionEnabled\", {\n        get: function () {\n            if (!this.settings ||\n                !this.settings.completion ||\n                this.settings.completion.triggerPropertyValueCompletion === undefined) {\n                return true;\n            }\n            return this.settings.completion.triggerPropertyValueCompletion;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CSSCompletion.prototype, \"isCompletePropertyWithSemicolonEnabled\", {\n        get: function () {\n            if (!this.settings ||\n                !this.settings.completion ||\n                this.settings.completion.completePropertyWithSemicolon === undefined) {\n                return true;\n            }\n            return this.settings.completion.completePropertyWithSemicolon;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CSSCompletion.prototype.getCompletionsForDeclarationValue = function (node, result) {\n        var _this = this;\n        var propertyName = node.getFullPropertyName();\n        var entry = languageFacts.cssDataManager.getProperty(propertyName);\n        var existingNode = node.getValue() || null;\n        while (existingNode && existingNode.hasChildren()) {\n            existingNode = existingNode.findChildAtOffset(this.offset, false);\n        }\n        this.completionParticipants.forEach(function (participant) {\n            if (participant.onCssPropertyValue) {\n                participant.onCssPropertyValue({\n                    propertyName: propertyName,\n                    propertyValue: _this.currentWord,\n                    range: _this.getCompletionRange(existingNode)\n                });\n            }\n        });\n        if (entry) {\n            if (entry.restrictions) {\n                for (var _i = 0, _a = entry.restrictions; _i < _a.length; _i++) {\n                    var restriction = _a[_i];\n                    switch (restriction) {\n                        case 'color':\n                            this.getColorProposals(entry, existingNode, result);\n                            break;\n                        case 'position':\n                            this.getPositionProposals(entry, existingNode, result);\n                            break;\n                        case 'repeat':\n                            this.getRepeatStyleProposals(entry, existingNode, result);\n                            break;\n                        case 'line-style':\n                            this.getLineStyleProposals(entry, existingNode, result);\n                            break;\n                        case 'line-width':\n                            this.getLineWidthProposals(entry, existingNode, result);\n                            break;\n                        case 'geometry-box':\n                            this.getGeometryBoxProposals(entry, existingNode, result);\n                            break;\n                        case 'box':\n                            this.getBoxProposals(entry, existingNode, result);\n                            break;\n                        case 'image':\n                            this.getImageProposals(entry, existingNode, result);\n                            break;\n                        case 'timing-function':\n                            this.getTimingFunctionProposals(entry, existingNode, result);\n                            break;\n                        case 'shape':\n                            this.getBasicShapeProposals(entry, existingNode, result);\n                            break;\n                    }\n                }\n            }\n            this.getValueEnumProposals(entry, existingNode, result);\n            this.getCSSWideKeywordProposals(entry, existingNode, result);\n            this.getUnitProposals(entry, existingNode, result);\n        }\n        else {\n            var existingValues = collectValues(this.styleSheet, node);\n            for (var _b = 0, _c = existingValues.getEntries(); _b < _c.length; _b++) {\n                var existingValue = _c[_b];\n                result.items.push({\n                    label: existingValue,\n                    textEdit: TextEdit.replace(this.getCompletionRange(existingNode), existingValue),\n                    kind: CompletionItemKind.Value\n                });\n            }\n        }\n        this.getVariableProposals(existingNode, result);\n        this.getTermProposals(entry, existingNode, result);\n        return result;\n    };\n    CSSCompletion.prototype.getValueEnumProposals = function (entry, existingNode, result) {\n        if (entry.values) {\n            for (var _i = 0, _a = entry.values; _i < _a.length; _i++) {\n                var value = _a[_i];\n                var insertString = value.name;\n                var insertTextFormat = void 0;\n                if (strings.endsWith(insertString, ')')) {\n                    var from = insertString.lastIndexOf('(');\n                    if (from !== -1) {\n                        insertString = insertString.substr(0, from) + '($1)';\n                        insertTextFormat = SnippetFormat;\n                    }\n                }\n                var item = {\n                    label: value.name,\n                    documentation: languageFacts.getEntryDescription(value, this.doesSupportMarkdown()),\n                    tags: isDeprecated(entry) ? [CompletionItemTag.Deprecated] : [],\n                    textEdit: TextEdit.replace(this.getCompletionRange(existingNode), insertString),\n                    sortText: SortTexts.Enums,\n                    kind: CompletionItemKind.Value,\n                    insertTextFormat: insertTextFormat\n                };\n                result.items.push(item);\n            }\n        }\n        return result;\n    };\n    CSSCompletion.prototype.getCSSWideKeywordProposals = function (entry, existingNode, result) {\n        for (var keywords in languageFacts.cssWideKeywords) {\n            result.items.push({\n                label: keywords,\n                documentation: languageFacts.cssWideKeywords[keywords],\n                textEdit: TextEdit.replace(this.getCompletionRange(existingNode), keywords),\n                kind: CompletionItemKind.Value\n            });\n        }\n        return result;\n    };\n    CSSCompletion.prototype.getCompletionsForInterpolation = function (node, result) {\n        if (this.offset >= node.offset + 2) {\n            this.getVariableProposals(null, result);\n        }\n        return result;\n    };\n    CSSCompletion.prototype.getVariableProposals = function (existingNode, result) {\n        var symbols = this.getSymbolContext().findSymbolsAtOffset(this.offset, nodes.ReferenceType.Variable);\n        for (var _i = 0, symbols_1 = symbols; _i < symbols_1.length; _i++) {\n            var symbol = symbols_1[_i];\n            var insertText = strings.startsWith(symbol.name, '--') ? \"var(\" + symbol.name + \")\" : symbol.name;\n            var completionItem = {\n                label: symbol.name,\n                documentation: symbol.value ? strings.getLimitedString(symbol.value) : symbol.value,\n                textEdit: TextEdit.replace(this.getCompletionRange(existingNode), insertText),\n                kind: CompletionItemKind.Variable,\n                sortText: SortTexts.Variable\n            };\n            if (typeof completionItem.documentation === 'string' && isColorString(completionItem.documentation)) {\n                completionItem.kind = CompletionItemKind.Color;\n            }\n            if (symbol.node.type === nodes.NodeType.FunctionParameter) {\n                var mixinNode = (symbol.node.getParent());\n                if (mixinNode.type === nodes.NodeType.MixinDeclaration) {\n                    completionItem.detail = localize('completion.argument', 'argument from \\'{0}\\'', mixinNode.getName());\n                }\n            }\n            result.items.push(completionItem);\n        }\n        return result;\n    };\n    CSSCompletion.prototype.getVariableProposalsForCSSVarFunction = function (result) {\n        var symbols = this.getSymbolContext().findSymbolsAtOffset(this.offset, nodes.ReferenceType.Variable);\n        symbols = symbols.filter(function (symbol) {\n            return strings.startsWith(symbol.name, '--');\n        });\n        for (var _i = 0, symbols_2 = symbols; _i < symbols_2.length; _i++) {\n            var symbol = symbols_2[_i];\n            var completionItem = {\n                label: symbol.name,\n                documentation: symbol.value ? strings.getLimitedString(symbol.value) : symbol.value,\n                textEdit: TextEdit.replace(this.getCompletionRange(null), symbol.name),\n                kind: CompletionItemKind.Variable\n            };\n            if (typeof completionItem.documentation === 'string' && isColorString(completionItem.documentation)) {\n                completionItem.kind = CompletionItemKind.Color;\n            }\n            result.items.push(completionItem);\n        }\n        return result;\n    };\n    CSSCompletion.prototype.getUnitProposals = function (entry, existingNode, result) {\n        var currentWord = '0';\n        if (this.currentWord.length > 0) {\n            var numMatch = this.currentWord.match(/^-?\\d[\\.\\d+]*/);\n            if (numMatch) {\n                currentWord = numMatch[0];\n                result.isIncomplete = currentWord.length === this.currentWord.length;\n            }\n        }\n        else if (this.currentWord.length === 0) {\n            result.isIncomplete = true;\n        }\n        if (existingNode && existingNode.parent && existingNode.parent.type === nodes.NodeType.Term) {\n            existingNode = existingNode.getParent(); // include the unary operator\n        }\n        if (entry.restrictions) {\n            for (var _i = 0, _a = entry.restrictions; _i < _a.length; _i++) {\n                var restriction = _a[_i];\n                var units = languageFacts.units[restriction];\n                if (units) {\n                    for (var _b = 0, units_1 = units; _b < units_1.length; _b++) {\n                        var unit = units_1[_b];\n                        var insertText = currentWord + unit;\n                        result.items.push({\n                            label: insertText,\n                            textEdit: TextEdit.replace(this.getCompletionRange(existingNode), insertText),\n                            kind: CompletionItemKind.Unit\n                        });\n                    }\n                }\n            }\n        }\n        return result;\n    };\n    CSSCompletion.prototype.getCompletionRange = function (existingNode) {\n        if (existingNode && existingNode.offset <= this.offset && this.offset <= existingNode.end) {\n            var end = existingNode.end !== -1 ? this.textDocument.positionAt(existingNode.end) : this.position;\n            var start = this.textDocument.positionAt(existingNode.offset);\n            if (start.line === end.line) {\n                return Range.create(start, end); // multi line edits are not allowed\n            }\n        }\n        return this.defaultReplaceRange;\n    };\n    CSSCompletion.prototype.getColorProposals = function (entry, existingNode, result) {\n        for (var color in languageFacts.colors) {\n            result.items.push({\n                label: color,\n                documentation: languageFacts.colors[color],\n                textEdit: TextEdit.replace(this.getCompletionRange(existingNode), color),\n                kind: CompletionItemKind.Color\n            });\n        }\n        for (var color in languageFacts.colorKeywords) {\n            result.items.push({\n                label: color,\n                documentation: languageFacts.colorKeywords[color],\n                textEdit: TextEdit.replace(this.getCompletionRange(existingNode), color),\n                kind: CompletionItemKind.Value\n            });\n        }\n        var colorValues = new Set();\n        this.styleSheet.acceptVisitor(new ColorValueCollector(colorValues, this.offset));\n        for (var _i = 0, _a = colorValues.getEntries(); _i < _a.length; _i++) {\n            var color = _a[_i];\n            result.items.push({\n                label: color,\n                textEdit: TextEdit.replace(this.getCompletionRange(existingNode), color),\n                kind: CompletionItemKind.Color\n            });\n        }\n        var _loop_1 = function (p) {\n            var tabStop = 1;\n            var replaceFunction = function (_match, p1) { return '${' + tabStop++ + ':' + p1 + '}'; };\n            var insertText = p.func.replace(/\\[?\\$(\\w+)\\]?/g, replaceFunction);\n            result.items.push({\n                label: p.func.substr(0, p.func.indexOf('(')),\n                detail: p.func,\n                documentation: p.desc,\n                textEdit: TextEdit.replace(this_1.getCompletionRange(existingNode), insertText),\n                insertTextFormat: SnippetFormat,\n                kind: CompletionItemKind.Function\n            });\n        };\n        var this_1 = this;\n        for (var _b = 0, _c = languageFacts.colorFunctions; _b < _c.length; _b++) {\n            var p = _c[_b];\n            _loop_1(p);\n        }\n        return result;\n    };\n    CSSCompletion.prototype.getPositionProposals = function (entry, existingNode, result) {\n        for (var position in languageFacts.positionKeywords) {\n            result.items.push({\n                label: position,\n                documentation: languageFacts.positionKeywords[position],\n                textEdit: TextEdit.replace(this.getCompletionRange(existingNode), position),\n                kind: CompletionItemKind.Value\n            });\n        }\n        return result;\n    };\n    CSSCompletion.prototype.getRepeatStyleProposals = function (entry, existingNode, result) {\n        for (var repeat in languageFacts.repeatStyleKeywords) {\n            result.items.push({\n                label: repeat,\n                documentation: languageFacts.repeatStyleKeywords[repeat],\n                textEdit: TextEdit.replace(this.getCompletionRange(existingNode), repeat),\n                kind: CompletionItemKind.Value\n            });\n        }\n        return result;\n    };\n    CSSCompletion.prototype.getLineStyleProposals = function (entry, existingNode, result) {\n        for (var lineStyle in languageFacts.lineStyleKeywords) {\n            result.items.push({\n                label: lineStyle,\n                documentation: languageFacts.lineStyleKeywords[lineStyle],\n                textEdit: TextEdit.replace(this.getCompletionRange(existingNode), lineStyle),\n                kind: CompletionItemKind.Value\n            });\n        }\n        return result;\n    };\n    CSSCompletion.prototype.getLineWidthProposals = function (entry, existingNode, result) {\n        for (var _i = 0, _a = languageFacts.lineWidthKeywords; _i < _a.length; _i++) {\n            var lineWidth = _a[_i];\n            result.items.push({\n                label: lineWidth,\n                textEdit: TextEdit.replace(this.getCompletionRange(existingNode), lineWidth),\n                kind: CompletionItemKind.Value\n            });\n        }\n        return result;\n    };\n    CSSCompletion.prototype.getGeometryBoxProposals = function (entry, existingNode, result) {\n        for (var box in languageFacts.geometryBoxKeywords) {\n            result.items.push({\n                label: box,\n                documentation: languageFacts.geometryBoxKeywords[box],\n                textEdit: TextEdit.replace(this.getCompletionRange(existingNode), box),\n                kind: CompletionItemKind.Value\n            });\n        }\n        return result;\n    };\n    CSSCompletion.prototype.getBoxProposals = function (entry, existingNode, result) {\n        for (var box in languageFacts.boxKeywords) {\n            result.items.push({\n                label: box,\n                documentation: languageFacts.boxKeywords[box],\n                textEdit: TextEdit.replace(this.getCompletionRange(existingNode), box),\n                kind: CompletionItemKind.Value\n            });\n        }\n        return result;\n    };\n    CSSCompletion.prototype.getImageProposals = function (entry, existingNode, result) {\n        for (var image in languageFacts.imageFunctions) {\n            var insertText = moveCursorInsideParenthesis(image);\n            result.items.push({\n                label: image,\n                documentation: languageFacts.imageFunctions[image],\n                textEdit: TextEdit.replace(this.getCompletionRange(existingNode), insertText),\n                kind: CompletionItemKind.Function,\n                insertTextFormat: image !== insertText ? SnippetFormat : void 0\n            });\n        }\n        return result;\n    };\n    CSSCompletion.prototype.getTimingFunctionProposals = function (entry, existingNode, result) {\n        for (var timing in languageFacts.transitionTimingFunctions) {\n            var insertText = moveCursorInsideParenthesis(timing);\n            result.items.push({\n                label: timing,\n                documentation: languageFacts.transitionTimingFunctions[timing],\n                textEdit: TextEdit.replace(this.getCompletionRange(existingNode), insertText),\n                kind: CompletionItemKind.Function,\n                insertTextFormat: timing !== insertText ? SnippetFormat : void 0\n            });\n        }\n        return result;\n    };\n    CSSCompletion.prototype.getBasicShapeProposals = function (entry, existingNode, result) {\n        for (var shape in languageFacts.basicShapeFunctions) {\n            var insertText = moveCursorInsideParenthesis(shape);\n            result.items.push({\n                label: shape,\n                documentation: languageFacts.basicShapeFunctions[shape],\n                textEdit: TextEdit.replace(this.getCompletionRange(existingNode), insertText),\n                kind: CompletionItemKind.Function,\n                insertTextFormat: shape !== insertText ? SnippetFormat : void 0\n            });\n        }\n        return result;\n    };\n    CSSCompletion.prototype.getCompletionsForStylesheet = function (result) {\n        var node = this.styleSheet.findFirstChildBeforeOffset(this.offset);\n        if (!node) {\n            return this.getCompletionForTopLevel(result);\n        }\n        if (node instanceof nodes.RuleSet) {\n            return this.getCompletionsForRuleSet(node, result);\n        }\n        if (node instanceof nodes.Supports) {\n            return this.getCompletionsForSupports(node, result);\n        }\n        return result;\n    };\n    CSSCompletion.prototype.getCompletionForTopLevel = function (result) {\n        var _this = this;\n        languageFacts.cssDataManager.getAtDirectives().forEach(function (entry) {\n            result.items.push({\n                label: entry.name,\n                textEdit: TextEdit.replace(_this.getCompletionRange(null), entry.name),\n                documentation: languageFacts.getEntryDescription(entry, _this.doesSupportMarkdown()),\n                tags: isDeprecated(entry) ? [CompletionItemTag.Deprecated] : [],\n                kind: CompletionItemKind.Keyword\n            });\n        });\n        this.getCompletionsForSelector(null, false, result);\n        return result;\n    };\n    CSSCompletion.prototype.getCompletionsForRuleSet = function (ruleSet, result) {\n        var declarations = ruleSet.getDeclarations();\n        var isAfter = declarations && declarations.endsWith('}') && this.offset >= declarations.end;\n        if (isAfter) {\n            return this.getCompletionForTopLevel(result);\n        }\n        var isInSelectors = !declarations || this.offset <= declarations.offset;\n        if (isInSelectors) {\n            return this.getCompletionsForSelector(ruleSet, ruleSet.isNested(), result);\n        }\n        return this.getCompletionsForDeclarations(ruleSet.getDeclarations(), result);\n    };\n    CSSCompletion.prototype.getCompletionsForSelector = function (ruleSet, isNested, result) {\n        var _this = this;\n        var existingNode = this.findInNodePath(nodes.NodeType.PseudoSelector, nodes.NodeType.IdentifierSelector, nodes.NodeType.ClassSelector, nodes.NodeType.ElementNameSelector);\n        if (!existingNode && this.offset - this.currentWord.length > 0 && this.textDocument.getText()[this.offset - this.currentWord.length - 1] === ':') {\n            // after the ':' of a pseudo selector, no node generated for just ':'\n            this.currentWord = ':' + this.currentWord;\n            this.defaultReplaceRange = Range.create(Position.create(this.position.line, this.position.character - this.currentWord.length), this.position);\n        }\n        var pseudoClasses = languageFacts.cssDataManager.getPseudoClasses();\n        pseudoClasses.forEach(function (entry) {\n            var insertText = moveCursorInsideParenthesis(entry.name);\n            var item = {\n                label: entry.name,\n                textEdit: TextEdit.replace(_this.getCompletionRange(existingNode), insertText),\n                documentation: languageFacts.getEntryDescription(entry, _this.doesSupportMarkdown()),\n                tags: isDeprecated(entry) ? [CompletionItemTag.Deprecated] : [],\n                kind: CompletionItemKind.Function,\n                insertTextFormat: entry.name !== insertText ? SnippetFormat : void 0\n            };\n            if (strings.startsWith(entry.name, ':-')) {\n                item.sortText = SortTexts.VendorPrefixed;\n            }\n            result.items.push(item);\n        });\n        var pseudoElements = languageFacts.cssDataManager.getPseudoElements();\n        pseudoElements.forEach(function (entry) {\n            var insertText = moveCursorInsideParenthesis(entry.name);\n            var item = {\n                label: entry.name,\n                textEdit: TextEdit.replace(_this.getCompletionRange(existingNode), insertText),\n                documentation: languageFacts.getEntryDescription(entry, _this.doesSupportMarkdown()),\n                tags: isDeprecated(entry) ? [CompletionItemTag.Deprecated] : [],\n                kind: CompletionItemKind.Function,\n                insertTextFormat: entry.name !== insertText ? SnippetFormat : void 0\n            };\n            if (strings.startsWith(entry.name, '::-')) {\n                item.sortText = SortTexts.VendorPrefixed;\n            }\n            result.items.push(item);\n        });\n        if (!isNested) { // show html tags only for top level\n            for (var _i = 0, _a = languageFacts.html5Tags; _i < _a.length; _i++) {\n                var entry = _a[_i];\n                result.items.push({\n                    label: entry,\n                    textEdit: TextEdit.replace(this.getCompletionRange(existingNode), entry),\n                    kind: CompletionItemKind.Keyword\n                });\n            }\n            for (var _b = 0, _c = languageFacts.svgElements; _b < _c.length; _b++) {\n                var entry = _c[_b];\n                result.items.push({\n                    label: entry,\n                    textEdit: TextEdit.replace(this.getCompletionRange(existingNode), entry),\n                    kind: CompletionItemKind.Keyword\n                });\n            }\n        }\n        var visited = {};\n        visited[this.currentWord] = true;\n        var docText = this.textDocument.getText();\n        this.styleSheet.accept(function (n) {\n            if (n.type === nodes.NodeType.SimpleSelector && n.length > 0) {\n                var selector = docText.substr(n.offset, n.length);\n                if (selector.charAt(0) === '.' && !visited[selector]) {\n                    visited[selector] = true;\n                    result.items.push({\n                        label: selector,\n                        textEdit: TextEdit.replace(_this.getCompletionRange(existingNode), selector),\n                        kind: CompletionItemKind.Keyword\n                    });\n                }\n                return false;\n            }\n            return true;\n        });\n        if (ruleSet && ruleSet.isNested()) {\n            var selector = ruleSet.getSelectors().findFirstChildBeforeOffset(this.offset);\n            if (selector && ruleSet.getSelectors().getChildren().indexOf(selector) === 0) {\n                this.getPropertyProposals(null, result);\n            }\n        }\n        return result;\n    };\n    CSSCompletion.prototype.getCompletionsForDeclarations = function (declarations, result) {\n        if (!declarations || this.offset === declarations.offset) { // incomplete nodes\n            return result;\n        }\n        var node = declarations.findFirstChildBeforeOffset(this.offset);\n        if (!node) {\n            return this.getCompletionsForDeclarationProperty(null, result);\n        }\n        if (node instanceof nodes.AbstractDeclaration) {\n            var declaration = node;\n            if (!isDefined(declaration.colonPosition) || this.offset <= declaration.colonPosition) {\n                // complete property\n                return this.getCompletionsForDeclarationProperty(declaration, result);\n            }\n            else if ((isDefined(declaration.semicolonPosition) && declaration.semicolonPosition < this.offset)) {\n                if (this.offset === declaration.semicolonPosition + 1) {\n                    return result; // don't show new properties right after semicolon (see Bug 15421:[intellisense] [css] Be less aggressive when manually typing CSS)\n                }\n                // complete next property\n                return this.getCompletionsForDeclarationProperty(null, result);\n            }\n            if (declaration instanceof nodes.Declaration) {\n                // complete value\n                return this.getCompletionsForDeclarationValue(declaration, result);\n            }\n        }\n        else if (node instanceof nodes.ExtendsReference) {\n            this.getCompletionsForExtendsReference(node, null, result);\n        }\n        else if (this.currentWord && this.currentWord[0] === '@') {\n            this.getCompletionsForDeclarationProperty(null, result);\n        }\n        return result;\n    };\n    CSSCompletion.prototype.getCompletionsForVariableDeclaration = function (declaration, result) {\n        if (this.offset && isDefined(declaration.colonPosition) && this.offset > declaration.colonPosition) {\n            this.getVariableProposals(declaration.getValue(), result);\n        }\n        return result;\n    };\n    CSSCompletion.prototype.getCompletionsForExpression = function (expression, result) {\n        var parent = expression.getParent();\n        if (parent instanceof nodes.FunctionArgument) {\n            this.getCompletionsForFunctionArgument(parent, parent.getParent(), result);\n            return result;\n        }\n        var declaration = expression.findParent(nodes.NodeType.Declaration);\n        if (!declaration) {\n            this.getTermProposals(null, null, result);\n            return result;\n        }\n        var node = expression.findChildAtOffset(this.offset, true);\n        if (!node) {\n            return this.getCompletionsForDeclarationValue(declaration, result);\n        }\n        if (node instanceof nodes.NumericValue || node instanceof nodes.Identifier) {\n            return this.getCompletionsForDeclarationValue(declaration, result);\n        }\n        return result;\n    };\n    CSSCompletion.prototype.getCompletionsForFunctionArgument = function (arg, func, result) {\n        var identifier = func.getIdentifier();\n        if (identifier && identifier.matches('var')) {\n            if (!func.getArguments().hasChildren() || func.getArguments().getChild(0) === arg) {\n                this.getVariableProposalsForCSSVarFunction(result);\n            }\n        }\n        return result;\n    };\n    CSSCompletion.prototype.getCompletionsForFunctionDeclaration = function (decl, result) {\n        var declarations = decl.getDeclarations();\n        if (declarations && this.offset > declarations.offset && this.offset < declarations.end) {\n            this.getTermProposals(null, null, result);\n        }\n        return result;\n    };\n    CSSCompletion.prototype.getCompletionsForMixinReference = function (ref, result) {\n        var allMixins = this.getSymbolContext().findSymbolsAtOffset(this.offset, nodes.ReferenceType.Mixin);\n        for (var _i = 0, allMixins_1 = allMixins; _i < allMixins_1.length; _i++) {\n            var mixinSymbol = allMixins_1[_i];\n            if (mixinSymbol.node instanceof nodes.MixinDeclaration) {\n                result.items.push(this.makeTermProposal(mixinSymbol, mixinSymbol.node.getParameters(), null));\n            }\n        }\n        return result;\n    };\n    CSSCompletion.prototype.getTermProposals = function (entry, existingNode, result) {\n        var allFunctions = this.getSymbolContext().findSymbolsAtOffset(this.offset, nodes.ReferenceType.Function);\n        for (var _i = 0, allFunctions_1 = allFunctions; _i < allFunctions_1.length; _i++) {\n            var functionSymbol = allFunctions_1[_i];\n            if (functionSymbol.node instanceof nodes.FunctionDeclaration) {\n                result.items.push(this.makeTermProposal(functionSymbol, functionSymbol.node.getParameters(), existingNode));\n            }\n        }\n        return result;\n    };\n    CSSCompletion.prototype.makeTermProposal = function (symbol, parameters, existingNode) {\n        var decl = symbol.node;\n        var params = parameters.getChildren().map(function (c) {\n            return (c instanceof nodes.FunctionParameter) ? c.getName() : c.getText();\n        });\n        var insertText = symbol.name + '(' + params.map(function (p, index) { return '${' + (index + 1) + ':' + p + '}'; }).join(', ') + ')';\n        return {\n            label: symbol.name,\n            detail: symbol.name + '(' + params.join(', ') + ')',\n            textEdit: TextEdit.replace(this.getCompletionRange(existingNode), insertText),\n            insertTextFormat: SnippetFormat,\n            kind: CompletionItemKind.Function,\n            sortText: SortTexts.Term\n        };\n    };\n    CSSCompletion.prototype.getCompletionsForSupportsCondition = function (supportsCondition, result) {\n        var child = supportsCondition.findFirstChildBeforeOffset(this.offset);\n        if (child) {\n            if (child instanceof nodes.Declaration) {\n                if (!isDefined(child.colonPosition) || this.offset <= child.colonPosition) {\n                    return this.getCompletionsForDeclarationProperty(child, result);\n                }\n                else {\n                    return this.getCompletionsForDeclarationValue(child, result);\n                }\n            }\n            else if (child instanceof nodes.SupportsCondition) {\n                return this.getCompletionsForSupportsCondition(child, result);\n            }\n        }\n        if (isDefined(supportsCondition.lParent) && this.offset > supportsCondition.lParent && (!isDefined(supportsCondition.rParent) || this.offset <= supportsCondition.rParent)) {\n            return this.getCompletionsForDeclarationProperty(null, result);\n        }\n        return result;\n    };\n    CSSCompletion.prototype.getCompletionsForSupports = function (supports, result) {\n        var declarations = supports.getDeclarations();\n        var inInCondition = !declarations || this.offset <= declarations.offset;\n        if (inInCondition) {\n            var child = supports.findFirstChildBeforeOffset(this.offset);\n            if (child instanceof nodes.SupportsCondition) {\n                return this.getCompletionsForSupportsCondition(child, result);\n            }\n            return result;\n        }\n        return this.getCompletionForTopLevel(result);\n    };\n    CSSCompletion.prototype.getCompletionsForExtendsReference = function (extendsRef, existingNode, result) {\n        return result;\n    };\n    CSSCompletion.prototype.getCompletionForUriLiteralValue = function (uriLiteralNode, result) {\n        var uriValue;\n        var position;\n        var range;\n        // No children, empty value\n        if (!uriLiteralNode.hasChildren()) {\n            uriValue = '';\n            position = this.position;\n            var emptyURIValuePosition = this.textDocument.positionAt(uriLiteralNode.offset + 'url('.length);\n            range = Range.create(emptyURIValuePosition, emptyURIValuePosition);\n        }\n        else {\n            var uriValueNode = uriLiteralNode.getChild(0);\n            uriValue = uriValueNode.getText();\n            position = this.position;\n            range = this.getCompletionRange(uriValueNode);\n        }\n        this.completionParticipants.forEach(function (participant) {\n            if (participant.onCssURILiteralValue) {\n                participant.onCssURILiteralValue({\n                    uriValue: uriValue,\n                    position: position,\n                    range: range\n                });\n            }\n        });\n        return result;\n    };\n    CSSCompletion.prototype.getCompletionForImportPath = function (importPathNode, result) {\n        var _this = this;\n        this.completionParticipants.forEach(function (participant) {\n            if (participant.onCssImportPath) {\n                participant.onCssImportPath({\n                    pathValue: importPathNode.getText(),\n                    position: _this.position,\n                    range: _this.getCompletionRange(importPathNode)\n                });\n            }\n        });\n        return result;\n    };\n    CSSCompletion.prototype.doesSupportMarkdown = function () {\n        if (!isDefined(this.supportsMarkdown)) {\n            if (!isDefined(this.clientCapabilities)) {\n                this.supportsMarkdown = true;\n                return this.supportsMarkdown;\n            }\n            var completion = this.clientCapabilities.textDocument && this.clientCapabilities.textDocument.completion;\n            this.supportsMarkdown = completion && completion.completionItem && Array.isArray(completion.completionItem.documentationFormat) && completion.completionItem.documentationFormat.indexOf(MarkupKind.Markdown) !== -1;\n        }\n        return this.supportsMarkdown;\n    };\n    return CSSCompletion;\n}());\nexport { CSSCompletion };\nfunction isDeprecated(entry) {\n    if (entry.status && (entry.status === 'nonstandard' || entry.status === 'obsolete')) {\n        return true;\n    }\n    return false;\n}\n/**\n * Rank number should all be same length strings\n */\nfunction computeRankNumber(n) {\n    var nstr = n.toString();\n    switch (nstr.length) {\n        case 4:\n            return nstr;\n        case 3:\n            return '0' + nstr;\n        case 2:\n            return '00' + nstr;\n        case 1:\n            return '000' + nstr;\n        default:\n            return '0000';\n    }\n}\nvar Set = /** @class */ (function () {\n    function Set() {\n        this.entries = {};\n    }\n    Set.prototype.add = function (entry) {\n        this.entries[entry] = true;\n    };\n    Set.prototype.getEntries = function () {\n        return Object.keys(this.entries);\n    };\n    return Set;\n}());\nfunction moveCursorInsideParenthesis(text) {\n    return text.replace(/\\(\\)$/, \"($1)\");\n}\nfunction collectValues(styleSheet, declaration) {\n    var fullPropertyName = declaration.getFullPropertyName();\n    var entries = new Set();\n    function visitValue(node) {\n        if (node instanceof nodes.Identifier || node instanceof nodes.NumericValue || node instanceof nodes.HexColorValue) {\n            entries.add(node.getText());\n        }\n        return true;\n    }\n    function matchesProperty(decl) {\n        var propertyName = decl.getFullPropertyName();\n        return fullPropertyName === propertyName;\n    }\n    function vistNode(node) {\n        if (node instanceof nodes.Declaration && node !== declaration) {\n            if (matchesProperty(node)) {\n                var value = node.getValue();\n                if (value) {\n                    value.accept(visitValue);\n                }\n            }\n        }\n        return true;\n    }\n    styleSheet.accept(vistNode);\n    return entries;\n}\nvar ColorValueCollector = /** @class */ (function () {\n    function ColorValueCollector(entries, currentOffset) {\n        this.entries = entries;\n        this.currentOffset = currentOffset;\n        // nothing to do\n    }\n    ColorValueCollector.prototype.visitNode = function (node) {\n        if (node instanceof nodes.HexColorValue || (node instanceof nodes.Function && languageFacts.isColorConstructor(node))) {\n            if (this.currentOffset < node.offset || node.end < this.currentOffset) {\n                this.entries.add(node.getText());\n            }\n        }\n        return true;\n    };\n    return ColorValueCollector;\n}());\nfunction getCurrentWord(document, offset) {\n    var i = offset - 1;\n    var text = document.getText();\n    while (i >= 0 && ' \\t\\n\\r\":{[()]},*>+'.indexOf(text.charAt(i)) === -1) {\n        i--;\n    }\n    return text.substring(i + 1, offset);\n}\nfunction isColorString(s) {\n    // From https://stackoverflow.com/questions/8027423/how-to-check-if-a-string-is-a-valid-hex-color-representation/8027444\n    return (s.toLowerCase() in languageFacts.colors) || /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(s);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nexport function values(obj) {\n    return Object.keys(obj).map(function (key) { return obj[key]; });\n}\nexport function isDefined(obj) {\n    return typeof obj !== 'undefined';\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport * as nodes from '../parser/cssNodes.js';\nimport * as languageFacts from '../languageFacts/facts.js';\nimport { difference } from '../utils/strings.js';\nimport { Rules } from '../services/lintRules.js';\nimport { Command, TextEdit, CodeAction, CodeActionKind, TextDocumentEdit, VersionedTextDocumentIdentifier } from '../cssLanguageTypes.js';\nimport * as nls from './../../../fillers/vscode-nls.js';\nvar localize = nls.loadMessageBundle();\nvar CSSCodeActions = /** @class */ (function () {\n    function CSSCodeActions() {\n    }\n    CSSCodeActions.prototype.doCodeActions = function (document, range, context, stylesheet) {\n        return this.doCodeActions2(document, range, context, stylesheet).map(function (ca) {\n            var textDocumentEdit = ca.edit && ca.edit.documentChanges && ca.edit.documentChanges[0];\n            return Command.create(ca.title, '_css.applyCodeAction', document.uri, document.version, textDocumentEdit && textDocumentEdit.edits);\n        });\n    };\n    CSSCodeActions.prototype.doCodeActions2 = function (document, range, context, stylesheet) {\n        var result = [];\n        if (context.diagnostics) {\n            for (var _i = 0, _a = context.diagnostics; _i < _a.length; _i++) {\n                var diagnostic = _a[_i];\n                this.appendFixesForMarker(document, stylesheet, diagnostic, result);\n            }\n        }\n        return result;\n    };\n    CSSCodeActions.prototype.getFixesForUnknownProperty = function (document, property, marker, result) {\n        var propertyName = property.getName();\n        var candidates = [];\n        languageFacts.cssDataManager.getProperties().forEach(function (p) {\n            var score = difference(propertyName, p.name);\n            if (score >= propertyName.length / 2 /*score_lim*/) {\n                candidates.push({ property: p.name, score: score });\n            }\n        });\n        // Sort in descending order.\n        candidates.sort(function (a, b) {\n            return b.score - a.score;\n        });\n        var maxActions = 3;\n        for (var _i = 0, candidates_1 = candidates; _i < candidates_1.length; _i++) {\n            var candidate = candidates_1[_i];\n            var propertyName_1 = candidate.property;\n            var title = localize('css.codeaction.rename', \"Rename to '{0}'\", propertyName_1);\n            var edit = TextEdit.replace(marker.range, propertyName_1);\n            var documentIdentifier = VersionedTextDocumentIdentifier.create(document.uri, document.version);\n            var workspaceEdit = { documentChanges: [TextDocumentEdit.create(documentIdentifier, [edit])] };\n            var codeAction = CodeAction.create(title, workspaceEdit, CodeActionKind.QuickFix);\n            codeAction.diagnostics = [marker];\n            result.push(codeAction);\n            if (--maxActions <= 0) {\n                return;\n            }\n        }\n    };\n    CSSCodeActions.prototype.appendFixesForMarker = function (document, stylesheet, marker, result) {\n        if (marker.code !== Rules.UnknownProperty.id) {\n            return;\n        }\n        var offset = document.offsetAt(marker.range.start);\n        var end = document.offsetAt(marker.range.end);\n        var nodepath = nodes.getNodePath(stylesheet, offset);\n        for (var i = nodepath.length - 1; i >= 0; i--) {\n            var node = nodepath[i];\n            if (node instanceof nodes.Declaration) {\n                var property = node.getProperty();\n                if (property && property.offset === offset && property.end === end) {\n                    this.getFixesForUnknownProperty(document, property, marker, result);\n                    return;\n                }\n            }\n        }\n    };\n    return CSSCodeActions;\n}());\nexport { CSSCodeActions };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nexport function startsWith(haystack, needle) {\n    if (haystack.length < needle.length) {\n        return false;\n    }\n    for (var i = 0; i < needle.length; i++) {\n        if (haystack[i] !== needle[i]) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Determines if haystack ends with needle.\n */\nexport function endsWith(haystack, needle) {\n    var diff = haystack.length - needle.length;\n    if (diff > 0) {\n        return haystack.lastIndexOf(needle) === diff;\n    }\n    else if (diff === 0) {\n        return haystack === needle;\n    }\n    else {\n        return false;\n    }\n}\n/**\n * Computes the difference score for two strings. More similar strings have a higher score.\n * We use largest common subsequence dynamic programming approach but penalize in the end for length differences.\n * Strings that have a large length difference will get a bad default score 0.\n * Complexity - both time and space O(first.length * second.length)\n * Dynamic programming LCS computation http://en.wikipedia.org/wiki/Longest_common_subsequence_problem\n *\n * @param first a string\n * @param second a string\n */\nexport function difference(first, second, maxLenDelta) {\n    if (maxLenDelta === void 0) { maxLenDelta = 4; }\n    var lengthDifference = Math.abs(first.length - second.length);\n    // We only compute score if length of the currentWord and length of entry.name are similar.\n    if (lengthDifference > maxLenDelta) {\n        return 0;\n    }\n    // Initialize LCS (largest common subsequence) matrix.\n    var LCS = [];\n    var zeroArray = [];\n    var i, j;\n    for (i = 0; i < second.length + 1; ++i) {\n        zeroArray.push(0);\n    }\n    for (i = 0; i < first.length + 1; ++i) {\n        LCS.push(zeroArray);\n    }\n    for (i = 1; i < first.length + 1; ++i) {\n        for (j = 1; j < second.length + 1; ++j) {\n            if (first[i - 1] === second[j - 1]) {\n                LCS[i][j] = LCS[i - 1][j - 1] + 1;\n            }\n            else {\n                LCS[i][j] = Math.max(LCS[i - 1][j], LCS[i][j - 1]);\n            }\n        }\n    }\n    return LCS[first.length][second.length] - Math.sqrt(lengthDifference);\n}\n/**\n * Limit of string length.\n */\nexport function getLimitedString(str, ellipsis) {\n    if (ellipsis === void 0) { ellipsis = true; }\n    if (!str) {\n        return '';\n    }\n    if (str.length < 140) {\n        return str;\n    }\n    return str.slice(0, 140) + (ellipsis ? '\\u2026' : '');\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { DocumentHighlightKind, Location, Range, SymbolKind, TextEdit } from '../cssLanguageTypes.js';\nimport * as nls from './../../../fillers/vscode-nls.js';\nimport * as nodes from '../parser/cssNodes.js';\nimport { Symbols } from '../parser/cssSymbolScope.js';\nimport { getColorValue, hslFromColor } from '../languageFacts/facts.js';\nimport { startsWith } from '../utils/strings.js';\nvar localize = nls.loadMessageBundle();\nvar CSSNavigation = /** @class */ (function () {\n    function CSSNavigation() {\n    }\n    CSSNavigation.prototype.findDefinition = function (document, position, stylesheet) {\n        var symbols = new Symbols(stylesheet);\n        var offset = document.offsetAt(position);\n        var node = nodes.getNodeAtOffset(stylesheet, offset);\n        if (!node) {\n            return null;\n        }\n        var symbol = symbols.findSymbolFromNode(node);\n        if (!symbol) {\n            return null;\n        }\n        return {\n            uri: document.uri,\n            range: getRange(symbol.node, document)\n        };\n    };\n    CSSNavigation.prototype.findReferences = function (document, position, stylesheet) {\n        var highlights = this.findDocumentHighlights(document, position, stylesheet);\n        return highlights.map(function (h) {\n            return {\n                uri: document.uri,\n                range: h.range\n            };\n        });\n    };\n    CSSNavigation.prototype.findDocumentHighlights = function (document, position, stylesheet) {\n        var result = [];\n        var offset = document.offsetAt(position);\n        var node = nodes.getNodeAtOffset(stylesheet, offset);\n        if (!node || node.type === nodes.NodeType.Stylesheet || node.type === nodes.NodeType.Declarations) {\n            return result;\n        }\n        if (node.type === nodes.NodeType.Identifier && node.parent && node.parent.type === nodes.NodeType.ClassSelector) {\n            node = node.parent;\n        }\n        var symbols = new Symbols(stylesheet);\n        var symbol = symbols.findSymbolFromNode(node);\n        var name = node.getText();\n        stylesheet.accept(function (candidate) {\n            if (symbol) {\n                if (symbols.matchesSymbol(candidate, symbol)) {\n                    result.push({\n                        kind: getHighlightKind(candidate),\n                        range: getRange(candidate, document)\n                    });\n                    return false;\n                }\n            }\n            else if (node && node.type === candidate.type && candidate.matches(name)) {\n                // Same node type and data\n                result.push({\n                    kind: getHighlightKind(candidate),\n                    range: getRange(candidate, document)\n                });\n            }\n            return true;\n        });\n        return result;\n    };\n    CSSNavigation.prototype.isRawStringDocumentLinkNode = function (node) {\n        return node.type === nodes.NodeType.Import;\n    };\n    CSSNavigation.prototype.findDocumentLinks = function (document, stylesheet, documentContext) {\n        var _this = this;\n        var result = [];\n        stylesheet.accept(function (candidate) {\n            if (candidate.type === nodes.NodeType.URILiteral) {\n                var link = uriLiteralNodeToDocumentLink(document, candidate, documentContext);\n                if (link) {\n                    result.push(link);\n                }\n                return false;\n            }\n            /**\n             * In @import, it is possible to include links that do not use `url()`\n             * For example, `@import 'foo.css';`\n             */\n            if (candidate.parent && _this.isRawStringDocumentLinkNode(candidate.parent)) {\n                var rawText = candidate.getText();\n                if (startsWith(rawText, \"'\") || startsWith(rawText, \"\\\"\")) {\n                    var link = uriStringNodeToDocumentLink(document, candidate, documentContext);\n                    if (link) {\n                        result.push(link);\n                    }\n                }\n                return false;\n            }\n            return true;\n        });\n        return result;\n    };\n    CSSNavigation.prototype.findDocumentLinks2 = function (document, stylesheet, documentContext) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.findDocumentLinks(document, stylesheet, documentContext)];\n            });\n        });\n    };\n    CSSNavigation.prototype.findDocumentSymbols = function (document, stylesheet) {\n        var result = [];\n        stylesheet.accept(function (node) {\n            var entry = {\n                name: null,\n                kind: SymbolKind.Class,\n                location: null\n            };\n            var locationNode = node;\n            if (node instanceof nodes.Selector) {\n                entry.name = node.getText();\n                locationNode = node.findAParent(nodes.NodeType.Ruleset, nodes.NodeType.ExtendsReference);\n                if (locationNode) {\n                    entry.location = Location.create(document.uri, getRange(locationNode, document));\n                    result.push(entry);\n                }\n                return false;\n            }\n            else if (node instanceof nodes.VariableDeclaration) {\n                entry.name = node.getName();\n                entry.kind = SymbolKind.Variable;\n            }\n            else if (node instanceof nodes.MixinDeclaration) {\n                entry.name = node.getName();\n                entry.kind = SymbolKind.Method;\n            }\n            else if (node instanceof nodes.FunctionDeclaration) {\n                entry.name = node.getName();\n                entry.kind = SymbolKind.Function;\n            }\n            else if (node instanceof nodes.Keyframe) {\n                entry.name = localize('literal.keyframes', \"@keyframes {0}\", node.getName());\n            }\n            else if (node instanceof nodes.FontFace) {\n                entry.name = localize('literal.fontface', \"@font-face\");\n            }\n            else if (node instanceof nodes.Media) {\n                var mediaList = node.getChild(0);\n                if (mediaList instanceof nodes.Medialist) {\n                    entry.name = '@media ' + mediaList.getText();\n                    entry.kind = SymbolKind.Module;\n                }\n            }\n            if (entry.name) {\n                entry.location = Location.create(document.uri, getRange(locationNode, document));\n                result.push(entry);\n            }\n            return true;\n        });\n        return result;\n    };\n    CSSNavigation.prototype.findDocumentColors = function (document, stylesheet) {\n        var result = [];\n        stylesheet.accept(function (node) {\n            var colorInfo = getColorInformation(node, document);\n            if (colorInfo) {\n                result.push(colorInfo);\n            }\n            return true;\n        });\n        return result;\n    };\n    CSSNavigation.prototype.getColorPresentations = function (document, stylesheet, color, range) {\n        var result = [];\n        var red256 = Math.round(color.red * 255), green256 = Math.round(color.green * 255), blue256 = Math.round(color.blue * 255);\n        var label;\n        if (color.alpha === 1) {\n            label = \"rgb(\" + red256 + \", \" + green256 + \", \" + blue256 + \")\";\n        }\n        else {\n            label = \"rgba(\" + red256 + \", \" + green256 + \", \" + blue256 + \", \" + color.alpha + \")\";\n        }\n        result.push({ label: label, textEdit: TextEdit.replace(range, label) });\n        if (color.alpha === 1) {\n            label = \"#\" + toTwoDigitHex(red256) + toTwoDigitHex(green256) + toTwoDigitHex(blue256);\n        }\n        else {\n            label = \"#\" + toTwoDigitHex(red256) + toTwoDigitHex(green256) + toTwoDigitHex(blue256) + toTwoDigitHex(Math.round(color.alpha * 255));\n        }\n        result.push({ label: label, textEdit: TextEdit.replace(range, label) });\n        var hsl = hslFromColor(color);\n        if (hsl.a === 1) {\n            label = \"hsl(\" + hsl.h + \", \" + Math.round(hsl.s * 100) + \"%, \" + Math.round(hsl.l * 100) + \"%)\";\n        }\n        else {\n            label = \"hsla(\" + hsl.h + \", \" + Math.round(hsl.s * 100) + \"%, \" + Math.round(hsl.l * 100) + \"%, \" + hsl.a + \")\";\n        }\n        result.push({ label: label, textEdit: TextEdit.replace(range, label) });\n        return result;\n    };\n    CSSNavigation.prototype.doRename = function (document, position, newName, stylesheet) {\n        var _a;\n        var highlights = this.findDocumentHighlights(document, position, stylesheet);\n        var edits = highlights.map(function (h) { return TextEdit.replace(h.range, newName); });\n        return {\n            changes: (_a = {}, _a[document.uri] = edits, _a)\n        };\n    };\n    return CSSNavigation;\n}());\nexport { CSSNavigation };\nfunction getColorInformation(node, document) {\n    var color = getColorValue(node);\n    if (color) {\n        var range = getRange(node, document);\n        return { color: color, range: range };\n    }\n    return null;\n}\nfunction uriLiteralNodeToDocumentLink(document, uriLiteralNode, documentContext) {\n    if (uriLiteralNode.getChildren().length === 0) {\n        return null;\n    }\n    var uriStringNode = uriLiteralNode.getChild(0);\n    return uriStringNodeToDocumentLink(document, uriStringNode, documentContext);\n}\nfunction uriStringNodeToDocumentLink(document, uriStringNode, documentContext) {\n    if (!uriStringNode) {\n        return null;\n    }\n    var rawUri = uriStringNode.getText();\n    var range = getRange(uriStringNode, document);\n    // Make sure the range is not empty\n    if (range.start.line === range.end.line && range.start.character === range.end.character) {\n        return null;\n    }\n    if (startsWith(rawUri, \"'\") || startsWith(rawUri, \"\\\"\")) {\n        rawUri = rawUri.slice(1, -1);\n    }\n    var target;\n    if (startsWith(rawUri, 'http://') || startsWith(rawUri, 'https://')) {\n        target = rawUri;\n    }\n    else if (/^\\w+:\\/\\//g.test(rawUri)) {\n        target = rawUri;\n    }\n    else {\n        target = documentContext.resolveReference(rawUri, document.uri);\n    }\n    return {\n        range: range,\n        target: target\n    };\n}\nfunction getRange(node, document) {\n    return Range.create(document.positionAt(node.offset), document.positionAt(node.end));\n}\nfunction getHighlightKind(node) {\n    if (node.type === nodes.NodeType.Selector) {\n        return DocumentHighlightKind.Write;\n    }\n    if (node instanceof nodes.Identifier) {\n        if (node.parent && node.parent instanceof nodes.Property) {\n            if (node.isCustomProperty) {\n                return DocumentHighlightKind.Write;\n            }\n        }\n    }\n    if (node.parent) {\n        switch (node.parent.type) {\n            case nodes.NodeType.FunctionDeclaration:\n            case nodes.NodeType.MixinDeclaration:\n            case nodes.NodeType.Keyframe:\n            case nodes.NodeType.VariableDeclaration:\n            case nodes.NodeType.FunctionParameter:\n                return DocumentHighlightKind.Write;\n        }\n    }\n    return DocumentHighlightKind.Read;\n}\nfunction toTwoDigitHex(n) {\n    var r = n.toString(16);\n    return r.length !== 2 ? '0' + r : r;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport { TokenType, Scanner } from '../parser/cssScanner.js';\nimport { SCSSScanner, InterpolationFunction } from '../parser/scssScanner.js';\nimport { LESSScanner } from '../parser/lessScanner.js';\nexport function getFoldingRanges(document, context) {\n    var ranges = computeFoldingRanges(document);\n    return limitFoldingRanges(ranges, context);\n}\nfunction computeFoldingRanges(document) {\n    function getStartLine(t) {\n        return document.positionAt(t.offset).line;\n    }\n    function getEndLine(t) {\n        return document.positionAt(t.offset + t.len).line;\n    }\n    function getScanner() {\n        switch (document.languageId) {\n            case 'scss':\n                return new SCSSScanner();\n            case 'less':\n                return new LESSScanner();\n            default:\n                return new Scanner();\n        }\n    }\n    function tokenToRange(t, kind) {\n        var startLine = getStartLine(t);\n        var endLine = getEndLine(t);\n        if (startLine !== endLine) {\n            return {\n                startLine: startLine,\n                endLine: endLine,\n                kind: kind\n            };\n        }\n        else {\n            return null;\n        }\n    }\n    var ranges = [];\n    var delimiterStack = [];\n    var scanner = getScanner();\n    scanner.ignoreComment = false;\n    scanner.setSource(document.getText());\n    var token = scanner.scan();\n    var prevToken = null;\n    var _loop_1 = function () {\n        switch (token.type) {\n            case TokenType.CurlyL:\n            case InterpolationFunction:\n                {\n                    delimiterStack.push({ line: getStartLine(token), type: 'brace', isStart: true });\n                    break;\n                }\n            case TokenType.CurlyR: {\n                if (delimiterStack.length !== 0) {\n                    var prevDelimiter = popPrevStartDelimiterOfType(delimiterStack, 'brace');\n                    if (!prevDelimiter) {\n                        break;\n                    }\n                    var endLine = getEndLine(token);\n                    if (prevDelimiter.type === 'brace') {\n                        /**\n                         * Other than the case when curly brace is not on a new line by itself, for example\n                         * .foo {\n                         *   color: red; }\n                         * Use endLine minus one to show ending curly brace\n                         */\n                        if (prevToken && getEndLine(prevToken) !== endLine) {\n                            endLine--;\n                        }\n                        if (prevDelimiter.line !== endLine) {\n                            ranges.push({\n                                startLine: prevDelimiter.line,\n                                endLine: endLine,\n                                kind: undefined\n                            });\n                        }\n                    }\n                }\n                break;\n            }\n            /**\n             * In CSS, there is no single line comment prefixed with //\n             * All comments are marked as `Comment`\n             */\n            case TokenType.Comment: {\n                var commentRegionMarkerToDelimiter_1 = function (marker) {\n                    if (marker === '#region') {\n                        return { line: getStartLine(token), type: 'comment', isStart: true };\n                    }\n                    else {\n                        return { line: getEndLine(token), type: 'comment', isStart: false };\n                    }\n                };\n                var getCurrDelimiter = function (token) {\n                    var matches = token.text.match(/^\\s*\\/\\*\\s*(#region|#endregion)\\b\\s*(.*?)\\s*\\*\\//);\n                    if (matches) {\n                        return commentRegionMarkerToDelimiter_1(matches[1]);\n                    }\n                    else if (document.languageId === 'scss' || document.languageId === 'less') {\n                        var matches_1 = token.text.match(/^\\s*\\/\\/\\s*(#region|#endregion)\\b\\s*(.*?)\\s*/);\n                        if (matches_1) {\n                            return commentRegionMarkerToDelimiter_1(matches_1[1]);\n                        }\n                    }\n                    return null;\n                };\n                var currDelimiter = getCurrDelimiter(token);\n                // /* */ comment region folding\n                // All #region and #endregion cases\n                if (currDelimiter) {\n                    if (currDelimiter.isStart) {\n                        delimiterStack.push(currDelimiter);\n                    }\n                    else {\n                        var prevDelimiter = popPrevStartDelimiterOfType(delimiterStack, 'comment');\n                        if (!prevDelimiter) {\n                            break;\n                        }\n                        if (prevDelimiter.type === 'comment') {\n                            if (prevDelimiter.line !== currDelimiter.line) {\n                                ranges.push({\n                                    startLine: prevDelimiter.line,\n                                    endLine: currDelimiter.line,\n                                    kind: 'region'\n                                });\n                            }\n                        }\n                    }\n                }\n                // Multiline comment case\n                else {\n                    var range = tokenToRange(token, 'comment');\n                    if (range) {\n                        ranges.push(range);\n                    }\n                }\n                break;\n            }\n        }\n        prevToken = token;\n        token = scanner.scan();\n    };\n    while (token.type !== TokenType.EOF) {\n        _loop_1();\n    }\n    return ranges;\n}\nfunction popPrevStartDelimiterOfType(stack, type) {\n    if (stack.length === 0) {\n        return null;\n    }\n    for (var i = stack.length - 1; i >= 0; i--) {\n        if (stack[i].type === type && stack[i].isStart) {\n            return stack.splice(i, 1)[0];\n        }\n    }\n    return null;\n}\n/**\n * - Sort regions\n * - Remove invalid regions (intersections)\n * - If limit exceeds, only return `rangeLimit` amount of ranges\n */\nfunction limitFoldingRanges(ranges, context) {\n    var maxRanges = context && context.rangeLimit || Number.MAX_VALUE;\n    var sortedRanges = ranges.sort(function (r1, r2) {\n        var diff = r1.startLine - r2.startLine;\n        if (diff === 0) {\n            diff = r1.endLine - r2.endLine;\n        }\n        return diff;\n    });\n    var validRanges = [];\n    var prevEndLine = -1;\n    sortedRanges.forEach(function (r) {\n        if (!(r.startLine < prevEndLine && prevEndLine < r.endLine)) {\n            validRanges.push(r);\n            prevEndLine = r.endLine;\n        }\n    });\n    if (validRanges.length < maxRanges) {\n        return validRanges;\n    }\n    else {\n        return validRanges.slice(0, maxRanges);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport * as nodes from '../parser/cssNodes.js';\nimport * as nls from './../../../fillers/vscode-nls.js';\nvar localize = nls.loadMessageBundle();\nvar Warning = nodes.Level.Warning;\nvar Error = nodes.Level.Error;\nvar Ignore = nodes.Level.Ignore;\nvar Rule = /** @class */ (function () {\n    function Rule(id, message, defaultValue) {\n        this.id = id;\n        this.message = message;\n        this.defaultValue = defaultValue;\n        // nothing to do\n    }\n    return Rule;\n}());\nexport { Rule };\nvar Setting = /** @class */ (function () {\n    function Setting(id, message, defaultValue) {\n        this.id = id;\n        this.message = message;\n        this.defaultValue = defaultValue;\n        // nothing to do\n    }\n    return Setting;\n}());\nexport { Setting };\nexport var Rules = {\n    AllVendorPrefixes: new Rule('compatibleVendorPrefixes', localize('rule.vendorprefixes.all', \"When using a vendor-specific prefix make sure to also include all other vendor-specific properties\"), Ignore),\n    IncludeStandardPropertyWhenUsingVendorPrefix: new Rule('vendorPrefix', localize('rule.standardvendorprefix.all', \"When using a vendor-specific prefix also include the standard property\"), Warning),\n    DuplicateDeclarations: new Rule('duplicateProperties', localize('rule.duplicateDeclarations', \"Do not use duplicate style definitions\"), Ignore),\n    EmptyRuleSet: new Rule('emptyRules', localize('rule.emptyRuleSets', \"Do not use empty rulesets\"), Warning),\n    ImportStatemement: new Rule('importStatement', localize('rule.importDirective', \"Import statements do not load in parallel\"), Ignore),\n    BewareOfBoxModelSize: new Rule('boxModel', localize('rule.bewareOfBoxModelSize', \"Do not use width or height when using padding or border\"), Ignore),\n    UniversalSelector: new Rule('universalSelector', localize('rule.universalSelector', \"The universal selector (*) is known to be slow\"), Ignore),\n    ZeroWithUnit: new Rule('zeroUnits', localize('rule.zeroWidthUnit', \"No unit for zero needed\"), Ignore),\n    RequiredPropertiesForFontFace: new Rule('fontFaceProperties', localize('rule.fontFaceProperties', \"@font-face rule must define 'src' and 'font-family' properties\"), Warning),\n    HexColorLength: new Rule('hexColorLength', localize('rule.hexColor', \"Hex colors must consist of three, four, six or eight hex numbers\"), Error),\n    ArgsInColorFunction: new Rule('argumentsInColorFunction', localize('rule.colorFunction', \"Invalid number of parameters\"), Error),\n    UnknownProperty: new Rule('unknownProperties', localize('rule.unknownProperty', \"Unknown property.\"), Warning),\n    UnknownAtRules: new Rule('unknownAtRules', localize('rule.unknownAtRules', \"Unknown at-rule.\"), Warning),\n    IEStarHack: new Rule('ieHack', localize('rule.ieHack', \"IE hacks are only necessary when supporting IE7 and older\"), Ignore),\n    UnknownVendorSpecificProperty: new Rule('unknownVendorSpecificProperties', localize('rule.unknownVendorSpecificProperty', \"Unknown vendor specific property.\"), Ignore),\n    PropertyIgnoredDueToDisplay: new Rule('propertyIgnoredDueToDisplay', localize('rule.propertyIgnoredDueToDisplay', \"Property is ignored due to the display.\"), Warning),\n    AvoidImportant: new Rule('important', localize('rule.avoidImportant', \"Avoid using !important. It is an indication that the specificity of the entire CSS has gotten out of control and needs to be refactored.\"), Ignore),\n    AvoidFloat: new Rule('float', localize('rule.avoidFloat', \"Avoid using 'float'. Floats lead to fragile CSS that is easy to break if one aspect of the layout changes.\"), Ignore),\n    AvoidIdSelector: new Rule('idSelector', localize('rule.avoidIdSelector', \"Selectors should not contain IDs because these rules are too tightly coupled with the HTML.\"), Ignore),\n};\nexport var Settings = {\n    ValidProperties: new Setting('validProperties', localize('rule.validProperties', \"A list of properties that are not validated against the `unknownProperties` rule.\"), [])\n};\nvar LintConfigurationSettings = /** @class */ (function () {\n    function LintConfigurationSettings(conf) {\n        if (conf === void 0) { conf = {}; }\n        this.conf = conf;\n    }\n    LintConfigurationSettings.prototype.getRule = function (rule) {\n        if (this.conf.hasOwnProperty(rule.id)) {\n            var level = toLevel(this.conf[rule.id]);\n            if (level) {\n                return level;\n            }\n        }\n        return rule.defaultValue;\n    };\n    LintConfigurationSettings.prototype.getSetting = function (setting) {\n        return this.conf[setting.id];\n    };\n    return LintConfigurationSettings;\n}());\nexport { LintConfigurationSettings };\nfunction toLevel(level) {\n    switch (level) {\n        case 'ignore': return nodes.Level.Ignore;\n        case 'warning': return nodes.Level.Warning;\n        case 'error': return nodes.Level.Error;\n    }\n    return null;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport { includes } from '../utils/arrays.js';\nvar Element = /** @class */ (function () {\n    function Element(decl) {\n        this.fullPropertyName = decl.getFullPropertyName().toLowerCase();\n        this.node = decl;\n    }\n    return Element;\n}());\nexport { Element };\nfunction setSide(model, side, value, property) {\n    var state = model[side];\n    state.value = value;\n    if (value) {\n        if (!includes(state.properties, property)) {\n            state.properties.push(property);\n        }\n    }\n}\nfunction setAllSides(model, value, property) {\n    setSide(model, 'top', value, property);\n    setSide(model, 'right', value, property);\n    setSide(model, 'bottom', value, property);\n    setSide(model, 'left', value, property);\n}\nfunction updateModelWithValue(model, side, value, property) {\n    if (side === 'top' || side === 'right' ||\n        side === 'bottom' || side === 'left') {\n        setSide(model, side, value, property);\n    }\n    else {\n        setAllSides(model, value, property);\n    }\n}\nfunction updateModelWithList(model, values, property) {\n    switch (values.length) {\n        case 1:\n            updateModelWithValue(model, undefined, values[0], property);\n            break;\n        case 2:\n            updateModelWithValue(model, 'top', values[0], property);\n            updateModelWithValue(model, 'bottom', values[0], property);\n            updateModelWithValue(model, 'right', values[1], property);\n            updateModelWithValue(model, 'left', values[1], property);\n            break;\n        case 3:\n            updateModelWithValue(model, 'top', values[0], property);\n            updateModelWithValue(model, 'right', values[1], property);\n            updateModelWithValue(model, 'left', values[1], property);\n            updateModelWithValue(model, 'bottom', values[2], property);\n            break;\n        case 4:\n            updateModelWithValue(model, 'top', values[0], property);\n            updateModelWithValue(model, 'right', values[1], property);\n            updateModelWithValue(model, 'bottom', values[2], property);\n            updateModelWithValue(model, 'left', values[3], property);\n            break;\n    }\n}\nfunction matches(value, candidates) {\n    for (var _i = 0, candidates_1 = candidates; _i < candidates_1.length; _i++) {\n        var candidate = candidates_1[_i];\n        if (value.matches(candidate)) {\n            return true;\n        }\n    }\n    return false;\n}\n/**\n * @param allowsKeywords whether the initial value of property is zero, so keywords `initial` and `unset` count as zero\n * @return `true` if this node represents a non-zero border; otherwise, `false`\n */\nfunction checkLineWidth(value, allowsKeywords) {\n    if (allowsKeywords === void 0) { allowsKeywords = true; }\n    if (allowsKeywords && matches(value, ['initial', 'unset'])) {\n        return false;\n    }\n    // a <length> is a value and a unit\n    // so use `parseFloat` to strip the unit\n    return parseFloat(value.getText()) !== 0;\n}\nfunction checkLineWidthList(nodes, allowsKeywords) {\n    if (allowsKeywords === void 0) { allowsKeywords = true; }\n    return nodes.map(function (node) { return checkLineWidth(node, allowsKeywords); });\n}\n/**\n * @param allowsKeywords whether keywords `initial` and `unset` count as zero\n * @return `true` if this node represents a non-zero border; otherwise, `false`\n */\nfunction checkLineStyle(valueNode, allowsKeywords) {\n    if (allowsKeywords === void 0) { allowsKeywords = true; }\n    if (matches(valueNode, ['none', 'hidden'])) {\n        return false;\n    }\n    if (allowsKeywords && matches(valueNode, ['initial', 'unset'])) {\n        return false;\n    }\n    return true;\n}\nfunction checkLineStyleList(nodes, allowsKeywords) {\n    if (allowsKeywords === void 0) { allowsKeywords = true; }\n    return nodes.map(function (node) { return checkLineStyle(node, allowsKeywords); });\n}\nfunction checkBorderShorthand(node) {\n    var children = node.getChildren();\n    // the only child can be a keyword, a <line-width>, or a <line-style>\n    // if either check returns false, the result is no border\n    if (children.length === 1) {\n        var value = children[0];\n        return checkLineWidth(value) && checkLineStyle(value);\n    }\n    // multiple children can't contain keywords\n    // if any child means no border, the result is no border\n    for (var _i = 0, children_1 = children; _i < children_1.length; _i++) {\n        var child = children_1[_i];\n        var value = child;\n        if (!checkLineWidth(value, /* allowsKeywords: */ false) ||\n            !checkLineStyle(value, /* allowsKeywords: */ false)) {\n            return false;\n        }\n    }\n    return true;\n}\nexport default function calculateBoxModel(propertyTable) {\n    var model = {\n        top: { value: false, properties: [] },\n        right: { value: false, properties: [] },\n        bottom: { value: false, properties: [] },\n        left: { value: false, properties: [] },\n    };\n    for (var _i = 0, propertyTable_1 = propertyTable; _i < propertyTable_1.length; _i++) {\n        var property = propertyTable_1[_i];\n        var value = property.node.value;\n        if (typeof value === 'undefined') {\n            continue;\n        }\n        switch (property.fullPropertyName) {\n            case 'box-sizing':\n                // has `box-sizing`, bail out\n                return {\n                    top: { value: false, properties: [] },\n                    right: { value: false, properties: [] },\n                    bottom: { value: false, properties: [] },\n                    left: { value: false, properties: [] },\n                };\n            case 'width':\n                model.width = property;\n                break;\n            case 'height':\n                model.height = property;\n                break;\n            default:\n                var segments = property.fullPropertyName.split('-');\n                switch (segments[0]) {\n                    case 'border':\n                        switch (segments[1]) {\n                            case undefined:\n                            case 'top':\n                            case 'right':\n                            case 'bottom':\n                            case 'left':\n                                switch (segments[2]) {\n                                    case undefined:\n                                        updateModelWithValue(model, segments[1], checkBorderShorthand(value), property);\n                                        break;\n                                    case 'width':\n                                        // the initial value of `border-width` is `medium`, not zero\n                                        updateModelWithValue(model, segments[1], checkLineWidth(value, false), property);\n                                        break;\n                                    case 'style':\n                                        // the initial value of `border-style` is `none`\n                                        updateModelWithValue(model, segments[1], checkLineStyle(value, true), property);\n                                        break;\n                                }\n                                break;\n                            case 'width':\n                                // the initial value of `border-width` is `medium`, not zero\n                                updateModelWithList(model, checkLineWidthList(value.getChildren(), false), property);\n                                break;\n                            case 'style':\n                                // the initial value of `border-style` is `none`\n                                updateModelWithList(model, checkLineStyleList(value.getChildren(), true), property);\n                                break;\n                        }\n                        break;\n                    case 'padding':\n                        if (segments.length === 1) {\n                            // the initial value of `padding` is zero\n                            updateModelWithList(model, checkLineWidthList(value.getChildren(), true), property);\n                        }\n                        else {\n                            // the initial value of `padding` is zero\n                            updateModelWithValue(model, segments[1], checkLineWidth(value, true), property);\n                        }\n                        break;\n                }\n                break;\n        }\n    }\n    return model;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport * as languageFacts from '../languageFacts/facts.js';\nimport { Rules, Settings } from './lintRules.js';\nimport * as nodes from '../parser/cssNodes.js';\nimport calculateBoxModel, { Element } from './lintUtil.js';\nimport { union } from '../utils/arrays.js';\nimport * as nls from './../../../fillers/vscode-nls.js';\nvar localize = nls.loadMessageBundle();\nvar NodesByRootMap = /** @class */ (function () {\n    function NodesByRootMap() {\n        this.data = {};\n    }\n    NodesByRootMap.prototype.add = function (root, name, node) {\n        var entry = this.data[root];\n        if (!entry) {\n            entry = { nodes: [], names: [] };\n            this.data[root] = entry;\n        }\n        entry.names.push(name);\n        if (node) {\n            entry.nodes.push(node);\n        }\n    };\n    return NodesByRootMap;\n}());\nvar LintVisitor = /** @class */ (function () {\n    function LintVisitor(document, settings) {\n        var _this = this;\n        this.warnings = [];\n        this.settings = settings;\n        this.documentText = document.getText();\n        this.keyframes = new NodesByRootMap();\n        this.validProperties = {};\n        var properties = settings.getSetting(Settings.ValidProperties);\n        if (Array.isArray(properties)) {\n            properties.forEach(function (p) {\n                if (typeof p === 'string') {\n                    var name = p.trim().toLowerCase();\n                    if (name.length) {\n                        _this.validProperties[name] = true;\n                    }\n                }\n            });\n        }\n    }\n    LintVisitor.entries = function (node, document, settings, entryFilter) {\n        var visitor = new LintVisitor(document, settings);\n        node.acceptVisitor(visitor);\n        visitor.completeValidations();\n        return visitor.getEntries(entryFilter);\n    };\n    LintVisitor.prototype.isValidPropertyDeclaration = function (element) {\n        var propertyName = element.fullPropertyName;\n        return this.validProperties[propertyName];\n    };\n    LintVisitor.prototype.fetch = function (input, s) {\n        var elements = [];\n        for (var _i = 0, input_1 = input; _i < input_1.length; _i++) {\n            var curr = input_1[_i];\n            if (curr.fullPropertyName === s) {\n                elements.push(curr);\n            }\n        }\n        return elements;\n    };\n    LintVisitor.prototype.fetchWithValue = function (input, s, v) {\n        var elements = [];\n        for (var _i = 0, input_2 = input; _i < input_2.length; _i++) {\n            var inputElement = input_2[_i];\n            if (inputElement.fullPropertyName === s) {\n                var expression = inputElement.node.getValue();\n                if (expression && this.findValueInExpression(expression, v)) {\n                    elements.push(inputElement);\n                }\n            }\n        }\n        return elements;\n    };\n    LintVisitor.prototype.findValueInExpression = function (expression, v) {\n        var found = false;\n        expression.accept(function (node) {\n            if (node.type === nodes.NodeType.Identifier && node.matches(v)) {\n                found = true;\n            }\n            return !found;\n        });\n        return found;\n    };\n    LintVisitor.prototype.getEntries = function (filter) {\n        if (filter === void 0) { filter = (nodes.Level.Warning | nodes.Level.Error); }\n        return this.warnings.filter(function (entry) {\n            return (entry.getLevel() & filter) !== 0;\n        });\n    };\n    LintVisitor.prototype.addEntry = function (node, rule, details) {\n        var entry = new nodes.Marker(node, rule, this.settings.getRule(rule), details);\n        this.warnings.push(entry);\n    };\n    LintVisitor.prototype.getMissingNames = function (expected, actual) {\n        var expectedClone = expected.slice(0); // clone\n        for (var i = 0; i < actual.length; i++) {\n            var k = expectedClone.indexOf(actual[i]);\n            if (k !== -1) {\n                expectedClone[k] = null;\n            }\n        }\n        var result = null;\n        for (var i = 0; i < expectedClone.length; i++) {\n            var curr = expectedClone[i];\n            if (curr) {\n                if (result === null) {\n                    result = localize('namelist.single', \"'{0}'\", curr);\n                }\n                else {\n                    result = localize('namelist.concatenated', \"{0}, '{1}'\", result, curr);\n                }\n            }\n        }\n        return result;\n    };\n    LintVisitor.prototype.visitNode = function (node) {\n        switch (node.type) {\n            case nodes.NodeType.UnknownAtRule:\n                return this.visitUnknownAtRule(node);\n            case nodes.NodeType.Keyframe:\n                return this.visitKeyframe(node);\n            case nodes.NodeType.FontFace:\n                return this.visitFontFace(node);\n            case nodes.NodeType.Ruleset:\n                return this.visitRuleSet(node);\n            case nodes.NodeType.SimpleSelector:\n                return this.visitSimpleSelector(node);\n            case nodes.NodeType.Function:\n                return this.visitFunction(node);\n            case nodes.NodeType.NumericValue:\n                return this.visitNumericValue(node);\n            case nodes.NodeType.Import:\n                return this.visitImport(node);\n            case nodes.NodeType.HexColorValue:\n                return this.visitHexColorValue(node);\n            case nodes.NodeType.Prio:\n                return this.visitPrio(node);\n        }\n        return true;\n    };\n    LintVisitor.prototype.completeValidations = function () {\n        this.validateKeyframes();\n    };\n    LintVisitor.prototype.visitUnknownAtRule = function (node) {\n        var atRuleName = node.getChild(0);\n        if (!atRuleName) {\n            return false;\n        }\n        var atDirective = languageFacts.cssDataManager.getAtDirective(atRuleName.getText());\n        if (atDirective) {\n            return false;\n        }\n        this.addEntry(atRuleName, Rules.UnknownAtRules, \"Unknown at rule \" + atRuleName.getText());\n        return true;\n    };\n    LintVisitor.prototype.visitKeyframe = function (node) {\n        var keyword = node.getKeyword();\n        if (!keyword) {\n            return false;\n        }\n        var text = keyword.getText();\n        this.keyframes.add(node.getName(), text, (text !== '@keyframes') ? keyword : null);\n        return true;\n    };\n    LintVisitor.prototype.validateKeyframes = function () {\n        // @keyframe and it's vendor specific alternatives\n        // @keyframe should be included\n        var expected = ['@-webkit-keyframes', '@-moz-keyframes', '@-o-keyframes'];\n        for (var name in this.keyframes.data) {\n            var actual = this.keyframes.data[name].names;\n            var needsStandard = (actual.indexOf('@keyframes') === -1);\n            if (!needsStandard && actual.length === 1) {\n                continue; // only the non-vendor specific keyword is used, that's fine, no warning\n            }\n            var missingVendorSpecific = this.getMissingNames(expected, actual);\n            if (missingVendorSpecific || needsStandard) {\n                for (var _i = 0, _a = this.keyframes.data[name].nodes; _i < _a.length; _i++) {\n                    var node = _a[_i];\n                    if (needsStandard) {\n                        var message = localize('keyframes.standardrule.missing', \"Always define standard rule '@keyframes' when defining keyframes.\");\n                        this.addEntry(node, Rules.IncludeStandardPropertyWhenUsingVendorPrefix, message);\n                    }\n                    if (missingVendorSpecific) {\n                        var message = localize('keyframes.vendorspecific.missing', \"Always include all vendor specific rules: Missing: {0}\", missingVendorSpecific);\n                        this.addEntry(node, Rules.AllVendorPrefixes, message);\n                    }\n                }\n            }\n        }\n        return true;\n    };\n    LintVisitor.prototype.visitSimpleSelector = function (node) {\n        var firstChar = this.documentText.charAt(node.offset);\n        /////////////////////////////////////////////////////////////\n        //\tLint - The universal selector (*) is known to be slow.\n        /////////////////////////////////////////////////////////////\n        if (node.length === 1 && firstChar === '*') {\n            this.addEntry(node, Rules.UniversalSelector);\n        }\n        /////////////////////////////////////////////////////////////\n        //\tLint - Avoid id selectors\n        /////////////////////////////////////////////////////////////\n        if (firstChar === '#') {\n            this.addEntry(node, Rules.AvoidIdSelector);\n        }\n        return true;\n    };\n    LintVisitor.prototype.visitImport = function (node) {\n        /////////////////////////////////////////////////////////////\n        //\tLint - Import statements shouldn't be used, because they aren't offering parallel downloads.\n        /////////////////////////////////////////////////////////////\n        this.addEntry(node, Rules.ImportStatemement);\n        return true;\n    };\n    LintVisitor.prototype.visitRuleSet = function (node) {\n        /////////////////////////////////////////////////////////////\n        //\tLint - Don't use empty rulesets.\n        /////////////////////////////////////////////////////////////\n        var declarations = node.getDeclarations();\n        if (!declarations) {\n            // syntax error\n            return false;\n        }\n        if (!declarations.hasChildren()) {\n            this.addEntry(node.getSelectors(), Rules.EmptyRuleSet);\n        }\n        var propertyTable = [];\n        for (var _i = 0, _a = declarations.getChildren(); _i < _a.length; _i++) {\n            var element = _a[_i];\n            if (element instanceof nodes.Declaration) {\n                propertyTable.push(new Element(element));\n            }\n        }\n        /////////////////////////////////////////////////////////////\n        // the rule warns when it finds:\n        // width being used with border, border-left, border-right, padding, padding-left, or padding-right\n        // height being used with border, border-top, border-bottom, padding, padding-top, or padding-bottom\n        // No error when box-sizing property is specified, as it assumes the user knows what he's doing.\n        // see https://github.com/CSSLint/csslint/wiki/Beware-of-box-model-size\n        /////////////////////////////////////////////////////////////\n        var boxModel = calculateBoxModel(propertyTable);\n        if (boxModel.width) {\n            var properties = [];\n            if (boxModel.right.value) {\n                properties = union(properties, boxModel.right.properties);\n            }\n            if (boxModel.left.value) {\n                properties = union(properties, boxModel.left.properties);\n            }\n            if (properties.length !== 0) {\n                for (var _b = 0, properties_1 = properties; _b < properties_1.length; _b++) {\n                    var item = properties_1[_b];\n                    this.addEntry(item.node, Rules.BewareOfBoxModelSize);\n                }\n                this.addEntry(boxModel.width.node, Rules.BewareOfBoxModelSize);\n            }\n        }\n        if (boxModel.height) {\n            var properties = [];\n            if (boxModel.top.value) {\n                properties = union(properties, boxModel.top.properties);\n            }\n            if (boxModel.bottom.value) {\n                properties = union(properties, boxModel.bottom.properties);\n            }\n            if (properties.length !== 0) {\n                for (var _c = 0, properties_2 = properties; _c < properties_2.length; _c++) {\n                    var item = properties_2[_c];\n                    this.addEntry(item.node, Rules.BewareOfBoxModelSize);\n                }\n                this.addEntry(boxModel.height.node, Rules.BewareOfBoxModelSize);\n            }\n        }\n        /////////////////////////////////////////////////////////////\n        //\tProperties ignored due to display\n        /////////////////////////////////////////////////////////////\n        // With 'display: inline', the width, height, margin-top, margin-bottom, and float properties have no effect\n        var displayElems = this.fetchWithValue(propertyTable, 'display', 'inline');\n        if (displayElems.length > 0) {\n            for (var _d = 0, _e = ['width', 'height', 'margin-top', 'margin-bottom', 'float']; _d < _e.length; _d++) {\n                var prop = _e[_d];\n                var elem = this.fetch(propertyTable, prop);\n                for (var index = 0; index < elem.length; index++) {\n                    var node_1 = elem[index].node;\n                    var value = node_1.getValue();\n                    if (prop === 'float' && (!value || value.matches('none'))) {\n                        continue;\n                    }\n                    this.addEntry(node_1, Rules.PropertyIgnoredDueToDisplay, localize('rule.propertyIgnoredDueToDisplayInline', \"Property is ignored due to the display. With 'display: inline', the width, height, margin-top, margin-bottom, and float properties have no effect.\"));\n                }\n            }\n        }\n        // With 'display: inline-block', 'float' has no effect\n        displayElems = this.fetchWithValue(propertyTable, 'display', 'inline-block');\n        if (displayElems.length > 0) {\n            var elem = this.fetch(propertyTable, 'float');\n            for (var index = 0; index < elem.length; index++) {\n                var node_2 = elem[index].node;\n                var value = node_2.getValue();\n                if (value && !value.matches('none')) {\n                    this.addEntry(node_2, Rules.PropertyIgnoredDueToDisplay, localize('rule.propertyIgnoredDueToDisplayInlineBlock', \"inline-block is ignored due to the float. If 'float' has a value other than 'none', the box is floated and 'display' is treated as 'block'\"));\n                }\n            }\n        }\n        // With 'display: block', 'vertical-align' has no effect\n        displayElems = this.fetchWithValue(propertyTable, 'display', 'block');\n        if (displayElems.length > 0) {\n            var elem = this.fetch(propertyTable, 'vertical-align');\n            for (var index = 0; index < elem.length; index++) {\n                this.addEntry(elem[index].node, Rules.PropertyIgnoredDueToDisplay, localize('rule.propertyIgnoredDueToDisplayBlock', \"Property is ignored due to the display. With 'display: block', vertical-align should not be used.\"));\n            }\n        }\n        /////////////////////////////////////////////////////////////\n        //\tAvoid 'float'\n        /////////////////////////////////////////////////////////////\n        var elements = this.fetch(propertyTable, 'float');\n        for (var index = 0; index < elements.length; index++) {\n            var element = elements[index];\n            if (!this.isValidPropertyDeclaration(element)) {\n                this.addEntry(element.node, Rules.AvoidFloat);\n            }\n        }\n        /////////////////////////////////////////////////////////////\n        //\tDon't use duplicate declarations.\n        /////////////////////////////////////////////////////////////\n        for (var i = 0; i < propertyTable.length; i++) {\n            var element = propertyTable[i];\n            if (element.fullPropertyName !== 'background' && !this.validProperties[element.fullPropertyName]) {\n                var value = element.node.getValue();\n                if (value && this.documentText.charAt(value.offset) !== '-') {\n                    var elements_1 = this.fetch(propertyTable, element.fullPropertyName);\n                    if (elements_1.length > 1) {\n                        for (var k = 0; k < elements_1.length; k++) {\n                            var value_1 = elements_1[k].node.getValue();\n                            if (value_1 && this.documentText.charAt(value_1.offset) !== '-' && elements_1[k] !== element) {\n                                this.addEntry(element.node, Rules.DuplicateDeclarations);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        /////////////////////////////////////////////////////////////\n        //\tUnknown propery & When using a vendor-prefixed gradient, make sure to use them all.\n        /////////////////////////////////////////////////////////////\n        var isExportBlock = node.getSelectors().matches(\":export\");\n        if (!isExportBlock) {\n            var propertiesBySuffix = new NodesByRootMap();\n            var containsUnknowns = false;\n            for (var _f = 0, propertyTable_1 = propertyTable; _f < propertyTable_1.length; _f++) {\n                var element = propertyTable_1[_f];\n                var decl = element.node;\n                if (this.isCSSDeclaration(decl)) {\n                    var name = element.fullPropertyName;\n                    var firstChar = name.charAt(0);\n                    if (firstChar === '-') {\n                        if (name.charAt(1) !== '-') { // avoid css variables\n                            if (!languageFacts.cssDataManager.isKnownProperty(name) && !this.validProperties[name]) {\n                                this.addEntry(decl.getProperty(), Rules.UnknownVendorSpecificProperty);\n                            }\n                            var nonPrefixedName = decl.getNonPrefixedPropertyName();\n                            propertiesBySuffix.add(nonPrefixedName, name, decl.getProperty());\n                        }\n                    }\n                    else {\n                        var fullName = name;\n                        if (firstChar === '*' || firstChar === '_') {\n                            this.addEntry(decl.getProperty(), Rules.IEStarHack);\n                            name = name.substr(1);\n                        }\n                        // _property and *property might be contributed via custom data\n                        if (!languageFacts.cssDataManager.isKnownProperty(fullName) && !languageFacts.cssDataManager.isKnownProperty(name)) {\n                            if (!this.validProperties[name]) {\n                                this.addEntry(decl.getProperty(), Rules.UnknownProperty, localize('property.unknownproperty.detailed', \"Unknown property: '{0}'\", name));\n                            }\n                        }\n                        propertiesBySuffix.add(name, name, null); // don't pass the node as we don't show errors on the standard\n                    }\n                }\n                else {\n                    containsUnknowns = true;\n                }\n            }\n            if (!containsUnknowns) { // don't perform this test if there are\n                for (var suffix in propertiesBySuffix.data) {\n                    var entry = propertiesBySuffix.data[suffix];\n                    var actual = entry.names;\n                    var needsStandard = languageFacts.cssDataManager.isStandardProperty(suffix) && (actual.indexOf(suffix) === -1);\n                    if (!needsStandard && actual.length === 1) {\n                        continue; // only the non-vendor specific rule is used, that's fine, no warning\n                    }\n                    var expected = [];\n                    for (var i = 0, len = LintVisitor.prefixes.length; i < len; i++) {\n                        var prefix = LintVisitor.prefixes[i];\n                        if (languageFacts.cssDataManager.isStandardProperty(prefix + suffix)) {\n                            expected.push(prefix + suffix);\n                        }\n                    }\n                    var missingVendorSpecific = this.getMissingNames(expected, actual);\n                    if (missingVendorSpecific || needsStandard) {\n                        for (var _g = 0, _h = entry.nodes; _g < _h.length; _g++) {\n                            var node_3 = _h[_g];\n                            if (needsStandard) {\n                                var message = localize('property.standard.missing', \"Also define the standard property '{0}' for compatibility\", suffix);\n                                this.addEntry(node_3, Rules.IncludeStandardPropertyWhenUsingVendorPrefix, message);\n                            }\n                            if (missingVendorSpecific) {\n                                var message = localize('property.vendorspecific.missing', \"Always include all vendor specific properties: Missing: {0}\", missingVendorSpecific);\n                                this.addEntry(node_3, Rules.AllVendorPrefixes, message);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        return true;\n    };\n    LintVisitor.prototype.visitPrio = function (node) {\n        /////////////////////////////////////////////////////////////\n        //\tDon't use !important\n        /////////////////////////////////////////////////////////////\n        this.addEntry(node, Rules.AvoidImportant);\n        return true;\n    };\n    LintVisitor.prototype.visitNumericValue = function (node) {\n        /////////////////////////////////////////////////////////////\n        //\t0 has no following unit\n        /////////////////////////////////////////////////////////////\n        var funcDecl = node.findParent(nodes.NodeType.Function);\n        if (funcDecl && funcDecl.getName() === 'calc') {\n            return true;\n        }\n        var decl = node.findParent(nodes.NodeType.Declaration);\n        if (decl) {\n            var declValue = decl.getValue();\n            if (declValue) {\n                var value = node.getValue();\n                if (!value.unit || languageFacts.units.length.indexOf(value.unit.toLowerCase()) === -1) {\n                    return true;\n                }\n                if (parseFloat(value.value) === 0.0 && !!value.unit && !this.validProperties[decl.getFullPropertyName()]) {\n                    this.addEntry(node, Rules.ZeroWithUnit);\n                }\n            }\n        }\n        return true;\n    };\n    LintVisitor.prototype.visitFontFace = function (node) {\n        var declarations = node.getDeclarations();\n        if (!declarations) {\n            // syntax error\n            return false;\n        }\n        var definesSrc = false, definesFontFamily = false;\n        var containsUnknowns = false;\n        for (var _i = 0, _a = declarations.getChildren(); _i < _a.length; _i++) {\n            var node_4 = _a[_i];\n            if (this.isCSSDeclaration(node_4)) {\n                var name = node_4.getProperty().getName().toLowerCase();\n                if (name === 'src') {\n                    definesSrc = true;\n                }\n                if (name === 'font-family') {\n                    definesFontFamily = true;\n                }\n            }\n            else {\n                containsUnknowns = true;\n            }\n        }\n        if (!containsUnknowns && (!definesSrc || !definesFontFamily)) {\n            this.addEntry(node, Rules.RequiredPropertiesForFontFace);\n        }\n        return true;\n    };\n    LintVisitor.prototype.isCSSDeclaration = function (node) {\n        if (node instanceof nodes.Declaration) {\n            if (!node.getValue()) {\n                return false;\n            }\n            var property = node.getProperty();\n            if (!property) {\n                return false;\n            }\n            var identifier = property.getIdentifier();\n            if (!identifier || identifier.containsInterpolation()) {\n                return false;\n            }\n            return true;\n        }\n        return false;\n    };\n    LintVisitor.prototype.visitHexColorValue = function (node) {\n        // Rule: #eeff0011 or #eeff00 or #ef01 or #ef0\n        var length = node.length;\n        if (length !== 9 && length !== 7 && length !== 5 && length !== 4) {\n            this.addEntry(node, Rules.HexColorLength);\n        }\n        return false;\n    };\n    LintVisitor.prototype.visitFunction = function (node) {\n        var fnName = node.getName().toLowerCase();\n        var expectedAttrCount = -1;\n        var actualAttrCount = 0;\n        switch (fnName) {\n            case 'rgb(':\n            case 'hsl(':\n                expectedAttrCount = 3;\n                break;\n            case 'rgba(':\n            case 'hsla(':\n                expectedAttrCount = 4;\n                break;\n        }\n        if (expectedAttrCount !== -1) {\n            node.getArguments().accept(function (n) {\n                if (n instanceof nodes.BinaryExpression) {\n                    actualAttrCount += 1;\n                    return false;\n                }\n                return true;\n            });\n            if (actualAttrCount !== expectedAttrCount) {\n                this.addEntry(node, Rules.ArgsInColorFunction);\n            }\n        }\n        return true;\n    };\n    LintVisitor.prefixes = [\n        '-ms-', '-moz-', '-o-', '-webkit-',\n    ];\n    return LintVisitor;\n}());\nexport { LintVisitor };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport * as nodes from '../parser/cssNodes.js';\nimport { LintConfigurationSettings, Rules } from './lintRules.js';\nimport { LintVisitor } from './lint.js';\nimport { Range, DiagnosticSeverity } from '../cssLanguageTypes.js';\nvar CSSValidation = /** @class */ (function () {\n    function CSSValidation() {\n    }\n    CSSValidation.prototype.configure = function (settings) {\n        this.settings = settings;\n    };\n    CSSValidation.prototype.doValidation = function (document, stylesheet, settings) {\n        if (settings === void 0) { settings = this.settings; }\n        if (settings && settings.validate === false) {\n            return [];\n        }\n        var entries = [];\n        entries.push.apply(entries, nodes.ParseErrorCollector.entries(stylesheet));\n        entries.push.apply(entries, LintVisitor.entries(stylesheet, document, new LintConfigurationSettings(settings && settings.lint)));\n        var ruleIds = [];\n        for (var r in Rules) {\n            ruleIds.push(Rules[r].id);\n        }\n        function toDiagnostic(marker) {\n            var range = Range.create(document.positionAt(marker.getOffset()), document.positionAt(marker.getOffset() + marker.getLength()));\n            var source = document.languageId;\n            return {\n                code: marker.getRule().id,\n                source: source,\n                message: marker.getMessage(),\n                severity: marker.getLevel() === nodes.Level.Warning ? DiagnosticSeverity.Warning : DiagnosticSeverity.Error,\n                range: range\n            };\n        }\n        return entries.filter(function (entry) { return entry.getLevel() !== nodes.Level.Ignore; }).map(toDiagnostic);\n    };\n    return CSSValidation;\n}());\nexport { CSSValidation };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n/**\n * Takes a sorted array and a function p. The array is sorted in such a way that all elements where p(x) is false\n * are located before all elements where p(x) is true.\n * @returns the least x for which p(x) is true or array.length if no element fullfills the given function.\n */\nexport function findFirst(array, p) {\n    var low = 0, high = array.length;\n    if (high === 0) {\n        return 0; // no children\n    }\n    while (low < high) {\n        var mid = Math.floor((low + high) / 2);\n        if (p(array[mid])) {\n            high = mid;\n        }\n        else {\n            low = mid + 1;\n        }\n    }\n    return low;\n}\nexport function includes(array, item) {\n    return array.indexOf(item) !== -1;\n}\nexport function union() {\n    var arrays = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        arrays[_i] = arguments[_i];\n    }\n    var result = [];\n    for (var _a = 0, arrays_1 = arrays; _a < arrays_1.length; _a++) {\n        var array = arrays_1[_a];\n        for (var _b = 0, array_1 = array; _b < array_1.length; _b++) {\n            var item = array_1[_b];\n            if (!includes(result, item)) {\n                result.push(item);\n            }\n        }\n    }\n    return result;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport { Range, SelectionRange } from '../cssLanguageTypes.js';\nimport { NodeType } from '../parser/cssNodes.js';\nexport function getSelectionRanges(document, positions, stylesheet) {\n    function getSelectionRange(position) {\n        var applicableRanges = getApplicableRanges(position);\n        var current = undefined;\n        for (var index = applicableRanges.length - 1; index >= 0; index--) {\n            current = SelectionRange.create(Range.create(document.positionAt(applicableRanges[index][0]), document.positionAt(applicableRanges[index][1])), current);\n        }\n        if (!current) {\n            current = SelectionRange.create(Range.create(position, position));\n        }\n        return current;\n    }\n    return positions.map(getSelectionRange);\n    function getApplicableRanges(position) {\n        var currNode = stylesheet.findChildAtOffset(document.offsetAt(position), true);\n        if (!currNode) {\n            return [];\n        }\n        var result = [];\n        while (currNode) {\n            if (currNode.parent &&\n                currNode.offset === currNode.parent.offset &&\n                currNode.end === currNode.parent.end) {\n                currNode = currNode.parent;\n                continue;\n            }\n            if (currNode.type === NodeType.Declarations) {\n                result.push([currNode.offset + 1, currNode.end - 1]);\n            }\n            else {\n                result.push([currNode.offset, currNode.end]);\n            }\n            currNode = currNode.parent;\n        }\n        return result;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { CSSCompletion } from './cssCompletion.js';\nimport * as nodes from '../parser/cssNodes.js';\nimport { CompletionItemKind, TextEdit, InsertTextFormat } from '../cssLanguageTypes.js';\nimport * as nls from './../../../fillers/vscode-nls.js';\nvar localize = nls.loadMessageBundle();\nvar SCSSCompletion = /** @class */ (function (_super) {\n    __extends(SCSSCompletion, _super);\n    function SCSSCompletion(clientCapabilities) {\n        var _this = _super.call(this, '$', clientCapabilities) || this;\n        addReferencesToDocumentation(SCSSCompletion.scssModuleLoaders);\n        addReferencesToDocumentation(SCSSCompletion.scssModuleBuiltIns);\n        return _this;\n    }\n    SCSSCompletion.prototype.isImportPathParent = function (type) {\n        return type === nodes.NodeType.Forward\n            || type === nodes.NodeType.Use\n            || _super.prototype.isImportPathParent.call(this, type);\n    };\n    SCSSCompletion.prototype.getCompletionForImportPath = function (importPathNode, result) {\n        var _a;\n        var parentType = importPathNode.getParent().type;\n        if (parentType === nodes.NodeType.Forward || parentType === nodes.NodeType.Use) {\n            (_a = result.items).push.apply(_a, SCSSCompletion.scssModuleBuiltIns);\n        }\n        return _super.prototype.getCompletionForImportPath.call(this, importPathNode, result);\n    };\n    SCSSCompletion.prototype.createReplaceFunction = function () {\n        var tabStopCounter = 1;\n        return function (_match, p1) {\n            return '\\\\' + p1 + ': ${' + tabStopCounter++ + ':' + (SCSSCompletion.variableDefaults[p1] || '') + '}';\n        };\n    };\n    SCSSCompletion.prototype.createFunctionProposals = function (proposals, existingNode, sortToEnd, result) {\n        for (var _i = 0, proposals_1 = proposals; _i < proposals_1.length; _i++) {\n            var p = proposals_1[_i];\n            var insertText = p.func.replace(/\\[?(\\$\\w+)\\]?/g, this.createReplaceFunction());\n            var label = p.func.substr(0, p.func.indexOf('('));\n            var item = {\n                label: label,\n                detail: p.func,\n                documentation: p.desc,\n                textEdit: TextEdit.replace(this.getCompletionRange(existingNode), insertText),\n                insertTextFormat: InsertTextFormat.Snippet,\n                kind: CompletionItemKind.Function\n            };\n            if (sortToEnd) {\n                item.sortText = 'z';\n            }\n            result.items.push(item);\n        }\n        return result;\n    };\n    SCSSCompletion.prototype.getCompletionsForSelector = function (ruleSet, isNested, result) {\n        this.createFunctionProposals(SCSSCompletion.selectorFuncs, null, true, result);\n        return _super.prototype.getCompletionsForSelector.call(this, ruleSet, isNested, result);\n    };\n    SCSSCompletion.prototype.getTermProposals = function (entry, existingNode, result) {\n        var functions = SCSSCompletion.builtInFuncs;\n        if (entry) {\n            functions = functions.filter(function (f) { return !f.type || !entry.restrictions || entry.restrictions.indexOf(f.type) !== -1; });\n        }\n        this.createFunctionProposals(functions, existingNode, true, result);\n        return _super.prototype.getTermProposals.call(this, entry, existingNode, result);\n    };\n    SCSSCompletion.prototype.getColorProposals = function (entry, existingNode, result) {\n        this.createFunctionProposals(SCSSCompletion.colorProposals, existingNode, false, result);\n        return _super.prototype.getColorProposals.call(this, entry, existingNode, result);\n    };\n    SCSSCompletion.prototype.getCompletionsForDeclarationProperty = function (declaration, result) {\n        this.getCompletionForAtDirectives(result);\n        this.getCompletionsForSelector(null, true, result);\n        return _super.prototype.getCompletionsForDeclarationProperty.call(this, declaration, result);\n    };\n    SCSSCompletion.prototype.getCompletionsForExtendsReference = function (_extendsRef, existingNode, result) {\n        var symbols = this.getSymbolContext().findSymbolsAtOffset(this.offset, nodes.ReferenceType.Rule);\n        for (var _i = 0, symbols_1 = symbols; _i < symbols_1.length; _i++) {\n            var symbol = symbols_1[_i];\n            var suggest = {\n                label: symbol.name,\n                textEdit: TextEdit.replace(this.getCompletionRange(existingNode), symbol.name),\n                kind: CompletionItemKind.Function,\n            };\n            result.items.push(suggest);\n        }\n        return result;\n    };\n    SCSSCompletion.prototype.getCompletionForAtDirectives = function (result) {\n        var _a;\n        (_a = result.items).push.apply(_a, SCSSCompletion.scssAtDirectives);\n        return result;\n    };\n    SCSSCompletion.prototype.getCompletionForTopLevel = function (result) {\n        this.getCompletionForAtDirectives(result);\n        this.getCompletionForModuleLoaders(result);\n        _super.prototype.getCompletionForTopLevel.call(this, result);\n        return result;\n    };\n    SCSSCompletion.prototype.getCompletionForModuleLoaders = function (result) {\n        var _a;\n        (_a = result.items).push.apply(_a, SCSSCompletion.scssModuleLoaders);\n        return result;\n    };\n    SCSSCompletion.variableDefaults = {\n        '$red': '1',\n        '$green': '2',\n        '$blue': '3',\n        '$alpha': '1.0',\n        '$color': '#000000',\n        '$weight': '0.5',\n        '$hue': '0',\n        '$saturation': '0%',\n        '$lightness': '0%',\n        '$degrees': '0',\n        '$amount': '0',\n        '$string': '\"\"',\n        '$substring': '\"s\"',\n        '$number': '0',\n        '$limit': '1'\n    };\n    SCSSCompletion.colorProposals = [\n        { func: 'red($color)', desc: localize('scss.builtin.red', 'Gets the red component of a color.') },\n        { func: 'green($color)', desc: localize('scss.builtin.green', 'Gets the green component of a color.') },\n        { func: 'blue($color)', desc: localize('scss.builtin.blue', 'Gets the blue component of a color.') },\n        { func: 'mix($color, $color, [$weight])', desc: localize('scss.builtin.mix', 'Mixes two colors together.') },\n        { func: 'hue($color)', desc: localize('scss.builtin.hue', 'Gets the hue component of a color.') },\n        { func: 'saturation($color)', desc: localize('scss.builtin.saturation', 'Gets the saturation component of a color.') },\n        { func: 'lightness($color)', desc: localize('scss.builtin.lightness', 'Gets the lightness component of a color.') },\n        { func: 'adjust-hue($color, $degrees)', desc: localize('scss.builtin.adjust-hue', 'Changes the hue of a color.') },\n        { func: 'lighten($color, $amount)', desc: localize('scss.builtin.lighten', 'Makes a color lighter.') },\n        { func: 'darken($color, $amount)', desc: localize('scss.builtin.darken', 'Makes a color darker.') },\n        { func: 'saturate($color, $amount)', desc: localize('scss.builtin.saturate', 'Makes a color more saturated.') },\n        { func: 'desaturate($color, $amount)', desc: localize('scss.builtin.desaturate', 'Makes a color less saturated.') },\n        { func: 'grayscale($color)', desc: localize('scss.builtin.grayscale', 'Converts a color to grayscale.') },\n        { func: 'complement($color)', desc: localize('scss.builtin.complement', 'Returns the complement of a color.') },\n        { func: 'invert($color)', desc: localize('scss.builtin.invert', 'Returns the inverse of a color.') },\n        { func: 'alpha($color)', desc: localize('scss.builtin.alpha', 'Gets the opacity component of a color.') },\n        { func: 'opacity($color)', desc: 'Gets the alpha component (opacity) of a color.' },\n        { func: 'rgba($color, $alpha)', desc: localize('scss.builtin.rgba', 'Changes the alpha component for a color.') },\n        { func: 'opacify($color, $amount)', desc: localize('scss.builtin.opacify', 'Makes a color more opaque.') },\n        { func: 'fade-in($color, $amount)', desc: localize('scss.builtin.fade-in', 'Makes a color more opaque.') },\n        { func: 'transparentize($color, $amount)', desc: localize('scss.builtin.transparentize', 'Makes a color more transparent.') },\n        { func: 'fade-out($color, $amount)', desc: localize('scss.builtin.fade-out', 'Makes a color more transparent.') },\n        { func: 'adjust-color($color, [$red], [$green], [$blue], [$hue], [$saturation], [$lightness], [$alpha])', desc: localize('scss.builtin.adjust-color', 'Increases or decreases one or more components of a color.') },\n        { func: 'scale-color($color, [$red], [$green], [$blue], [$saturation], [$lightness], [$alpha])', desc: localize('scss.builtin.scale-color', 'Fluidly scales one or more properties of a color.') },\n        { func: 'change-color($color, [$red], [$green], [$blue], [$hue], [$saturation], [$lightness], [$alpha])', desc: localize('scss.builtin.change-color', 'Changes one or more properties of a color.') },\n        { func: 'ie-hex-str($color)', desc: localize('scss.builtin.ie-hex-str', 'Converts a color into the format understood by IE filters.') }\n    ];\n    SCSSCompletion.selectorFuncs = [\n        { func: 'selector-nest($selectors…)', desc: localize('scss.builtin.selector-nest', 'Nests selector beneath one another like they would be nested in the stylesheet.') },\n        { func: 'selector-append($selectors…)', desc: localize('scss.builtin.selector-append', 'Appends selectors to one another without spaces in between.') },\n        { func: 'selector-extend($selector, $extendee, $extender)', desc: localize('scss.builtin.selector-extend', 'Extends $extendee with $extender within $selector.') },\n        { func: 'selector-replace($selector, $original, $replacement)', desc: localize('scss.builtin.selector-replace', 'Replaces $original with $replacement within $selector.') },\n        { func: 'selector-unify($selector1, $selector2)', desc: localize('scss.builtin.selector-unify', 'Unifies two selectors to produce a selector that matches elements matched by both.') },\n        { func: 'is-superselector($super, $sub)', desc: localize('scss.builtin.is-superselector', 'Returns whether $super matches all the elements $sub does, and possibly more.') },\n        { func: 'simple-selectors($selector)', desc: localize('scss.builtin.simple-selectors', 'Returns the simple selectors that comprise a compound selector.') },\n        { func: 'selector-parse($selector)', desc: localize('scss.builtin.selector-parse', 'Parses a selector into the format returned by &.') }\n    ];\n    SCSSCompletion.builtInFuncs = [\n        { func: 'unquote($string)', desc: localize('scss.builtin.unquote', 'Removes quotes from a string.') },\n        { func: 'quote($string)', desc: localize('scss.builtin.quote', 'Adds quotes to a string.') },\n        { func: 'str-length($string)', desc: localize('scss.builtin.str-length', 'Returns the number of characters in a string.') },\n        { func: 'str-insert($string, $insert, $index)', desc: localize('scss.builtin.str-insert', 'Inserts $insert into $string at $index.') },\n        { func: 'str-index($string, $substring)', desc: localize('scss.builtin.str-index', 'Returns the index of the first occurance of $substring in $string.') },\n        { func: 'str-slice($string, $start-at, [$end-at])', desc: localize('scss.builtin.str-slice', 'Extracts a substring from $string.') },\n        { func: 'to-upper-case($string)', desc: localize('scss.builtin.to-upper-case', 'Converts a string to upper case.') },\n        { func: 'to-lower-case($string)', desc: localize('scss.builtin.to-lower-case', 'Converts a string to lower case.') },\n        { func: 'percentage($number)', desc: localize('scss.builtin.percentage', 'Converts a unitless number to a percentage.'), type: 'percentage' },\n        { func: 'round($number)', desc: localize('scss.builtin.round', 'Rounds a number to the nearest whole number.') },\n        { func: 'ceil($number)', desc: localize('scss.builtin.ceil', 'Rounds a number up to the next whole number.') },\n        { func: 'floor($number)', desc: localize('scss.builtin.floor', 'Rounds a number down to the previous whole number.') },\n        { func: 'abs($number)', desc: localize('scss.builtin.abs', 'Returns the absolute value of a number.') },\n        { func: 'min($numbers)', desc: localize('scss.builtin.min', 'Finds the minimum of several numbers.') },\n        { func: 'max($numbers)', desc: localize('scss.builtin.max', 'Finds the maximum of several numbers.') },\n        { func: 'random([$limit])', desc: localize('scss.builtin.random', 'Returns a random number.') },\n        { func: 'length($list)', desc: localize('scss.builtin.length', 'Returns the length of a list.') },\n        { func: 'nth($list, $n)', desc: localize('scss.builtin.nth', 'Returns a specific item in a list.') },\n        { func: 'set-nth($list, $n, $value)', desc: localize('scss.builtin.set-nth', 'Replaces the nth item in a list.') },\n        { func: 'join($list1, $list2, [$separator])', desc: localize('scss.builtin.join', 'Joins together two lists into one.') },\n        { func: 'append($list1, $val, [$separator])', desc: localize('scss.builtin.append', 'Appends a single value onto the end of a list.') },\n        { func: 'zip($lists)', desc: localize('scss.builtin.zip', 'Combines several lists into a single multidimensional list.') },\n        { func: 'index($list, $value)', desc: localize('scss.builtin.index', 'Returns the position of a value within a list.') },\n        { func: 'list-separator(#list)', desc: localize('scss.builtin.list-separator', 'Returns the separator of a list.') },\n        { func: 'map-get($map, $key)', desc: localize('scss.builtin.map-get', 'Returns the value in a map associated with a given key.') },\n        { func: 'map-merge($map1, $map2)', desc: localize('scss.builtin.map-merge', 'Merges two maps together into a new map.') },\n        { func: 'map-remove($map, $keys)', desc: localize('scss.builtin.map-remove', 'Returns a new map with keys removed.') },\n        { func: 'map-keys($map)', desc: localize('scss.builtin.map-keys', 'Returns a list of all keys in a map.') },\n        { func: 'map-values($map)', desc: localize('scss.builtin.map-values', 'Returns a list of all values in a map.') },\n        { func: 'map-has-key($map, $key)', desc: localize('scss.builtin.map-has-key', 'Returns whether a map has a value associated with a given key.') },\n        { func: 'keywords($args)', desc: localize('scss.builtin.keywords', 'Returns the keywords passed to a function that takes variable arguments.') },\n        { func: 'feature-exists($feature)', desc: localize('scss.builtin.feature-exists', 'Returns whether a feature exists in the current Sass runtime.') },\n        { func: 'variable-exists($name)', desc: localize('scss.builtin.variable-exists', 'Returns whether a variable with the given name exists in the current scope.') },\n        { func: 'global-variable-exists($name)', desc: localize('scss.builtin.global-variable-exists', 'Returns whether a variable with the given name exists in the global scope.') },\n        { func: 'function-exists($name)', desc: localize('scss.builtin.function-exists', 'Returns whether a function with the given name exists.') },\n        { func: 'mixin-exists($name)', desc: localize('scss.builtin.mixin-exists', 'Returns whether a mixin with the given name exists.') },\n        { func: 'inspect($value)', desc: localize('scss.builtin.inspect', 'Returns the string representation of a value as it would be represented in Sass.') },\n        { func: 'type-of($value)', desc: localize('scss.builtin.type-of', 'Returns the type of a value.') },\n        { func: 'unit($number)', desc: localize('scss.builtin.unit', 'Returns the unit(s) associated with a number.') },\n        { func: 'unitless($number)', desc: localize('scss.builtin.unitless', 'Returns whether a number has units.') },\n        { func: 'comparable($number1, $number2)', desc: localize('scss.builtin.comparable', 'Returns whether two numbers can be added, subtracted, or compared.') },\n        { func: 'call($name, $args…)', desc: localize('scss.builtin.call', 'Dynamically calls a Sass function.') }\n    ];\n    SCSSCompletion.scssAtDirectives = [\n        {\n            label: \"@extend\",\n            documentation: localize(\"scss.builtin.@extend\", \"Inherits the styles of another selector.\"),\n            kind: CompletionItemKind.Keyword\n        },\n        {\n            label: \"@at-root\",\n            documentation: localize(\"scss.builtin.@at-root\", \"Causes one or more rules to be emitted at the root of the document.\"),\n            kind: CompletionItemKind.Keyword\n        },\n        {\n            label: \"@debug\",\n            documentation: localize(\"scss.builtin.@debug\", \"Prints the value of an expression to the standard error output stream. Useful for debugging complicated Sass files.\"),\n            kind: CompletionItemKind.Keyword\n        },\n        {\n            label: \"@warn\",\n            documentation: localize(\"scss.builtin.@warn\", \"Prints the value of an expression to the standard error output stream. Useful for libraries that need to warn users of deprecations or recovering from minor mixin usage mistakes. Warnings can be turned off with the `--quiet` command-line option or the `:quiet` Sass option.\"),\n            kind: CompletionItemKind.Keyword\n        },\n        {\n            label: \"@error\",\n            documentation: localize(\"scss.builtin.@error\", \"Throws the value of an expression as a fatal error with stack trace. Useful for validating arguments to mixins and functions.\"),\n            kind: CompletionItemKind.Keyword\n        },\n        {\n            label: \"@if\",\n            documentation: localize(\"scss.builtin.@if\", \"Includes the body if the expression does not evaluate to `false` or `null`.\"),\n            insertText: \"@if ${1:expr} {\\n\\t$0\\n}\",\n            insertTextFormat: InsertTextFormat.Snippet,\n            kind: CompletionItemKind.Keyword\n        },\n        {\n            label: \"@for\",\n            documentation: localize(\"scss.builtin.@for\", \"For loop that repeatedly outputs a set of styles for each `$var` in the `from/through` or `from/to` clause.\"),\n            insertText: \"@for \\\\$${1:var} from ${2:start} ${3|to,through|} ${4:end} {\\n\\t$0\\n}\",\n            insertTextFormat: InsertTextFormat.Snippet,\n            kind: CompletionItemKind.Keyword\n        },\n        {\n            label: \"@each\",\n            documentation: localize(\"scss.builtin.@each\", \"Each loop that sets `$var` to each item in the list or map, then outputs the styles it contains using that value of `$var`.\"),\n            insertText: \"@each \\\\$${1:var} in ${2:list} {\\n\\t$0\\n}\",\n            insertTextFormat: InsertTextFormat.Snippet,\n            kind: CompletionItemKind.Keyword\n        },\n        {\n            label: \"@while\",\n            documentation: localize(\"scss.builtin.@while\", \"While loop that takes an expression and repeatedly outputs the nested styles until the statement evaluates to `false`.\"),\n            insertText: \"@while ${1:condition} {\\n\\t$0\\n}\",\n            insertTextFormat: InsertTextFormat.Snippet,\n            kind: CompletionItemKind.Keyword\n        },\n        {\n            label: \"@mixin\",\n            documentation: localize(\"scss.builtin.@mixin\", \"Defines styles that can be re-used throughout the stylesheet with `@include`.\"),\n            insertText: \"@mixin ${1:name} {\\n\\t$0\\n}\",\n            insertTextFormat: InsertTextFormat.Snippet,\n            kind: CompletionItemKind.Keyword\n        },\n        {\n            label: \"@include\",\n            documentation: localize(\"scss.builtin.@include\", \"Includes the styles defined by another mixin into the current rule.\"),\n            kind: CompletionItemKind.Keyword\n        },\n        {\n            label: \"@function\",\n            documentation: localize(\"scss.builtin.@function\", \"Defines complex operations that can be re-used throughout stylesheets.\"),\n            kind: CompletionItemKind.Keyword\n        }\n    ];\n    SCSSCompletion.scssModuleLoaders = [\n        {\n            label: \"@use\",\n            documentation: localize(\"scss.builtin.@use\", \"Loads mixins, functions, and variables from other Sass stylesheets as 'modules', and combines CSS from multiple stylesheets together.\"),\n            references: [{ name: 'Sass documentation', url: 'https://sass-lang.com/documentation/at-rules/use' }],\n            insertText: \"@use '$0';\",\n            insertTextFormat: InsertTextFormat.Snippet,\n            kind: CompletionItemKind.Keyword\n        },\n        {\n            label: \"@forward\",\n            documentation: localize(\"scss.builtin.@forward\", \"Loads a Sass stylesheet and makes its mixins, functions, and variables available when this stylesheet is loaded with the @use rule.\"),\n            references: [{ name: 'Sass documentation', url: 'https://sass-lang.com/documentation/at-rules/forward' }],\n            insertText: \"@forward '$0';\",\n            insertTextFormat: InsertTextFormat.Snippet,\n            kind: CompletionItemKind.Keyword\n        },\n    ];\n    SCSSCompletion.scssModuleBuiltIns = [\n        {\n            label: 'sass:math',\n            documentation: localize('scss.builtin.sass:math', 'Provides functions that operate on numbers.'),\n            references: [{ name: 'Sass documentation', url: 'https://sass-lang.com/documentation/modules/math' }],\n            kind: CompletionItemKind.Module,\n        },\n        {\n            label: 'sass:string',\n            documentation: localize('scss.builtin.sass:string', 'Makes it easy to combine, search, or split apart strings.'),\n            references: [{ name: 'Sass documentation', url: 'https://sass-lang.com/documentation/modules/string' }],\n            kind: CompletionItemKind.Module,\n        },\n        {\n            label: 'sass:color',\n            documentation: localize('scss.builtin.sass:color', 'Generates new colors based on existing ones, making it easy to build color themes.'),\n            references: [{ name: 'Sass documentation', url: 'https://sass-lang.com/documentation/modules/color' }],\n            kind: CompletionItemKind.Module,\n        },\n        {\n            label: 'sass:list',\n            documentation: localize('scss.builtin.sass:list', 'Lets you access and modify values in lists.'),\n            references: [{ name: 'Sass documentation', url: 'https://sass-lang.com/documentation/modules/list' }],\n            kind: CompletionItemKind.Module,\n        },\n        {\n            label: 'sass:map',\n            documentation: localize('scss.builtin.sass:map', 'Makes it possible to look up the value associated with a key in a map, and much more.'),\n            references: [{ name: 'Sass documentation', url: 'https://sass-lang.com/documentation/modules/map' }],\n            kind: CompletionItemKind.Module,\n        },\n        {\n            label: 'sass:selector',\n            documentation: localize('scss.builtin.sass:selector', 'Provides access to Sass’s powerful selector engine.'),\n            references: [{ name: 'Sass documentation', url: 'https://sass-lang.com/documentation/modules/selector' }],\n            kind: CompletionItemKind.Module,\n        },\n        {\n            label: 'sass:meta',\n            documentation: localize('scss.builtin.sass:meta', 'Exposes the details of Sass’s inner workings.'),\n            references: [{ name: 'Sass documentation', url: 'https://sass-lang.com/documentation/modules/meta' }],\n            kind: CompletionItemKind.Module,\n        },\n    ];\n    return SCSSCompletion;\n}(CSSCompletion));\nexport { SCSSCompletion };\n/**\n * Todo @Pine: Remove this and do it through custom data\n */\nfunction addReferencesToDocumentation(items) {\n    items.forEach(function (i) {\n        if (i.documentation && i.references && i.references.length > 0) {\n            var markdownDoc = typeof i.documentation === 'string'\n                ? { kind: 'markdown', value: i.documentation }\n                : { kind: 'markdown', value: i.documentation.value };\n            markdownDoc.value += '\\n\\n';\n            markdownDoc.value += i.references\n                .map(function (r) {\n                return \"[\" + r.name + \"](\" + r.url + \")\";\n            })\n                .join(' | ');\n            i.documentation = markdownDoc;\n        }\n    });\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { CSSNavigation } from './cssNavigation.js';\nimport { FileType } from '../cssLanguageTypes.js';\nimport * as nodes from '../parser/cssNodes.js';\nimport { URI } from './../../vscode-uri/index.js';\nvar SCSSNavigation = /** @class */ (function (_super) {\n    __extends(SCSSNavigation, _super);\n    function SCSSNavigation(fileSystemProvider) {\n        var _this = _super.call(this) || this;\n        _this.fileSystemProvider = fileSystemProvider;\n        return _this;\n    }\n    SCSSNavigation.prototype.isRawStringDocumentLinkNode = function (node) {\n        return (_super.prototype.isRawStringDocumentLinkNode.call(this, node) ||\n            node.type === nodes.NodeType.Use ||\n            node.type === nodes.NodeType.Forward);\n    };\n    SCSSNavigation.prototype.findDocumentLinks2 = function (document, stylesheet, documentContext) {\n        return __awaiter(this, void 0, void 0, function () {\n            function toPathVariations(uri) {\n                // No valid path\n                if (uri.path === '') {\n                    return undefined;\n                }\n                // No variation for links that ends with suffix\n                if (uri.path.endsWith('.scss') || uri.path.endsWith('.css')) {\n                    return undefined;\n                }\n                // If a link is like a/, try resolving a/index.scss and a/_index.scss\n                if (uri.path.endsWith('/')) {\n                    return [\n                        uri.with({ path: uri.path + 'index.scss' }).toString(),\n                        uri.with({ path: uri.path + '_index.scss' }).toString()\n                    ];\n                }\n                // Use `uri.path` since it's normalized to use `/` in all platforms\n                var pathFragments = uri.path.split('/');\n                var basename = pathFragments[pathFragments.length - 1];\n                var pathWithoutBasename = uri.path.slice(0, -basename.length);\n                // No variation for links such as _a\n                if (basename.startsWith('_')) {\n                    if (uri.path.endsWith('.scss')) {\n                        return undefined;\n                    }\n                    else {\n                        return [uri.with({ path: uri.path + '.scss' }).toString()];\n                    }\n                }\n                var normalizedBasename = basename + '.scss';\n                var documentUriWithBasename = function (newBasename) {\n                    return uri.with({ path: pathWithoutBasename + newBasename }).toString();\n                };\n                var normalizedPath = documentUriWithBasename(normalizedBasename);\n                var underScorePath = documentUriWithBasename('_' + normalizedBasename);\n                var indexPath = documentUriWithBasename(normalizedBasename.slice(0, -5) + '/index.scss');\n                var indexUnderscoreUri = documentUriWithBasename(normalizedBasename.slice(0, -5) + '/_index.scss');\n                var cssPath = documentUriWithBasename(normalizedBasename.slice(0, -5) + '.css');\n                return [normalizedPath, underScorePath, indexPath, indexUnderscoreUri, cssPath];\n            }\n            function fileExists(documentUri) {\n                return __awaiter(this, void 0, void 0, function () {\n                    var stat, err_1;\n                    return __generator(this, function (_a) {\n                        switch (_a.label) {\n                            case 0:\n                                if (!fsProvider) {\n                                    return [2 /*return*/, false];\n                                }\n                                _a.label = 1;\n                            case 1:\n                                _a.trys.push([1, 3, , 4]);\n                                return [4 /*yield*/, fsProvider.stat(documentUri)];\n                            case 2:\n                                stat = _a.sent();\n                                if (stat.type === FileType.Unknown && stat.size === -1) {\n                                    return [2 /*return*/, false];\n                                }\n                                return [2 /*return*/, true];\n                            case 3:\n                                err_1 = _a.sent();\n                                return [2 /*return*/, false];\n                            case 4: return [2 /*return*/];\n                        }\n                    });\n                });\n            }\n            var links, fsProvider, validLinks, i, target, parsedUri, pathVariations, j;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        links = this.findDocumentLinks(document, stylesheet, documentContext);\n                        fsProvider = this.fileSystemProvider;\n                        validLinks = [];\n                        if (!fsProvider) return [3 /*break*/, 9];\n                        i = 0;\n                        _a.label = 1;\n                    case 1:\n                        if (!(i < links.length)) return [3 /*break*/, 8];\n                        target = links[i].target;\n                        if (!target) {\n                            return [3 /*break*/, 7];\n                        }\n                        parsedUri = null;\n                        try {\n                            parsedUri = URI.parse(target);\n                        }\n                        catch (e) {\n                            if (e instanceof URIError) {\n                                return [3 /*break*/, 7];\n                            }\n                            throw e;\n                        }\n                        pathVariations = toPathVariations(parsedUri);\n                        if (!!pathVariations) return [3 /*break*/, 3];\n                        return [4 /*yield*/, fileExists(target)];\n                    case 2:\n                        if (_a.sent()) {\n                            validLinks.push(links[i]);\n                        }\n                        return [3 /*break*/, 7];\n                    case 3:\n                        j = 0;\n                        _a.label = 4;\n                    case 4:\n                        if (!(j < pathVariations.length)) return [3 /*break*/, 7];\n                        return [4 /*yield*/, fileExists(pathVariations[j])];\n                    case 5:\n                        if (_a.sent()) {\n                            validLinks.push(__assign(__assign({}, links[i]), { target: pathVariations[j] }));\n                            return [3 /*break*/, 7];\n                        }\n                        _a.label = 6;\n                    case 6:\n                        j++;\n                        return [3 /*break*/, 4];\n                    case 7:\n                        i++;\n                        return [3 /*break*/, 1];\n                    case 8: return [3 /*break*/, 10];\n                    case 9:\n                        validLinks.push.apply(validLinks, links);\n                        _a.label = 10;\n                    case 10: return [2 /*return*/, validLinks];\n                }\n            });\n        });\n    };\n    return SCSSNavigation;\n}(CSSNavigation));\nexport { SCSSNavigation };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport * as nodes from '../parser/cssNodes.js';\nimport { Scanner } from '../parser/cssScanner.js';\nimport * as languageFacts from \"../languageFacts/facts.js\";\nimport * as nls from './../../../fillers/vscode-nls.js';\nvar localize = nls.loadMessageBundle();\nvar Element = /** @class */ (function () {\n    function Element() {\n        this.parent = null;\n        this.children = null;\n        this.attributes = null;\n    }\n    Element.prototype.findAttribute = function (name) {\n        if (this.attributes) {\n            for (var _i = 0, _a = this.attributes; _i < _a.length; _i++) {\n                var attribute = _a[_i];\n                if (attribute.name === name) {\n                    return attribute.value;\n                }\n            }\n        }\n        return null;\n    };\n    Element.prototype.addChild = function (child) {\n        if (child instanceof Element) {\n            child.parent = this;\n        }\n        if (!this.children) {\n            this.children = [];\n        }\n        this.children.push(child);\n    };\n    Element.prototype.append = function (text) {\n        if (this.attributes) {\n            var last = this.attributes[this.attributes.length - 1];\n            last.value = last.value + text;\n        }\n    };\n    Element.prototype.prepend = function (text) {\n        if (this.attributes) {\n            var first = this.attributes[0];\n            first.value = text + first.value;\n        }\n    };\n    Element.prototype.findRoot = function () {\n        var curr = this;\n        while (curr.parent && !(curr.parent instanceof RootElement)) {\n            curr = curr.parent;\n        }\n        return curr;\n    };\n    Element.prototype.removeChild = function (child) {\n        if (this.children) {\n            var index = this.children.indexOf(child);\n            if (index !== -1) {\n                this.children.splice(index, 1);\n                return true;\n            }\n        }\n        return false;\n    };\n    Element.prototype.addAttr = function (name, value) {\n        if (!this.attributes) {\n            this.attributes = [];\n        }\n        for (var _i = 0, _a = this.attributes; _i < _a.length; _i++) {\n            var attribute = _a[_i];\n            if (attribute.name === name) {\n                attribute.value += ' ' + value;\n                return;\n            }\n        }\n        this.attributes.push({ name: name, value: value });\n    };\n    Element.prototype.clone = function (cloneChildren) {\n        if (cloneChildren === void 0) { cloneChildren = true; }\n        var elem = new Element();\n        if (this.attributes) {\n            elem.attributes = [];\n            for (var _i = 0, _a = this.attributes; _i < _a.length; _i++) {\n                var attribute = _a[_i];\n                elem.addAttr(attribute.name, attribute.value);\n            }\n        }\n        if (cloneChildren && this.children) {\n            elem.children = [];\n            for (var index = 0; index < this.children.length; index++) {\n                elem.addChild(this.children[index].clone());\n            }\n        }\n        return elem;\n    };\n    Element.prototype.cloneWithParent = function () {\n        var clone = this.clone(false);\n        if (this.parent && !(this.parent instanceof RootElement)) {\n            var parentClone = this.parent.cloneWithParent();\n            parentClone.addChild(clone);\n        }\n        return clone;\n    };\n    return Element;\n}());\nexport { Element };\nvar RootElement = /** @class */ (function (_super) {\n    __extends(RootElement, _super);\n    function RootElement() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return RootElement;\n}(Element));\nexport { RootElement };\nvar LabelElement = /** @class */ (function (_super) {\n    __extends(LabelElement, _super);\n    function LabelElement(label) {\n        var _this = _super.call(this) || this;\n        _this.addAttr('name', label);\n        return _this;\n    }\n    return LabelElement;\n}(Element));\nexport { LabelElement };\nvar MarkedStringPrinter = /** @class */ (function () {\n    function MarkedStringPrinter(quote) {\n        this.quote = quote;\n        this.result = [];\n        // empty\n    }\n    MarkedStringPrinter.prototype.print = function (element) {\n        this.result = [];\n        if (element instanceof RootElement) {\n            if (element.children) {\n                this.doPrint(element.children, 0);\n            }\n        }\n        else {\n            this.doPrint([element], 0);\n        }\n        var value = this.result.join('\\n');\n        return [{ language: 'html', value: value }];\n    };\n    MarkedStringPrinter.prototype.doPrint = function (elements, indent) {\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var element = elements_1[_i];\n            this.doPrintElement(element, indent);\n            if (element.children) {\n                this.doPrint(element.children, indent + 1);\n            }\n        }\n    };\n    MarkedStringPrinter.prototype.writeLine = function (level, content) {\n        var indent = new Array(level + 1).join('  ');\n        this.result.push(indent + content);\n    };\n    MarkedStringPrinter.prototype.doPrintElement = function (element, indent) {\n        var name = element.findAttribute('name');\n        // special case: a simple label\n        if (element instanceof LabelElement || name === '\\u2026') {\n            this.writeLine(indent, name);\n            return;\n        }\n        // the real deal\n        var content = ['<'];\n        // element name\n        if (name) {\n            content.push(name);\n        }\n        else {\n            content.push('element');\n        }\n        // attributes\n        if (element.attributes) {\n            for (var _i = 0, _a = element.attributes; _i < _a.length; _i++) {\n                var attr = _a[_i];\n                if (attr.name !== 'name') {\n                    content.push(' ');\n                    content.push(attr.name);\n                    var value = attr.value;\n                    if (value) {\n                        content.push('=');\n                        content.push(quotes.ensure(value, this.quote));\n                    }\n                }\n            }\n        }\n        content.push('>');\n        this.writeLine(indent, content.join(''));\n    };\n    return MarkedStringPrinter;\n}());\nvar quotes;\n(function (quotes) {\n    function ensure(value, which) {\n        return which + remove(value) + which;\n    }\n    quotes.ensure = ensure;\n    function remove(value) {\n        var match = value.match(/^['\"](.*)[\"']$/);\n        if (match) {\n            return match[1];\n        }\n        return value;\n    }\n    quotes.remove = remove;\n})(quotes || (quotes = {}));\nvar Specificity = /** @class */ (function () {\n    function Specificity() {\n        /** Count of identifiers (e.g., `#app`) */\n        this.id = 0;\n        /** Count of attributes (`[type=\"number\"]`), classes (`.container-fluid`), and pseudo-classes (`:hover`) */\n        this.attr = 0;\n        /** Count of tag names (`div`), and pseudo-elements (`::before`) */\n        this.tag = 0;\n    }\n    return Specificity;\n}());\nexport function toElement(node, parentElement) {\n    var result = new Element();\n    for (var _i = 0, _a = node.getChildren(); _i < _a.length; _i++) {\n        var child = _a[_i];\n        switch (child.type) {\n            case nodes.NodeType.SelectorCombinator:\n                if (parentElement) {\n                    var segments = child.getText().split('&');\n                    if (segments.length === 1) {\n                        // should not happen\n                        result.addAttr('name', segments[0]);\n                        break;\n                    }\n                    result = parentElement.cloneWithParent();\n                    if (segments[0]) {\n                        var root = result.findRoot();\n                        root.prepend(segments[0]);\n                    }\n                    for (var i = 1; i < segments.length; i++) {\n                        if (i > 1) {\n                            var clone = parentElement.cloneWithParent();\n                            result.addChild(clone.findRoot());\n                            result = clone;\n                        }\n                        result.append(segments[i]);\n                    }\n                }\n                break;\n            case nodes.NodeType.SelectorPlaceholder:\n                if (child.matches('@at-root')) {\n                    return result;\n                }\n            // fall through\n            case nodes.NodeType.ElementNameSelector:\n                var text = child.getText();\n                result.addAttr('name', text === '*' ? 'element' : unescape(text));\n                break;\n            case nodes.NodeType.ClassSelector:\n                result.addAttr('class', unescape(child.getText().substring(1)));\n                break;\n            case nodes.NodeType.IdentifierSelector:\n                result.addAttr('id', unescape(child.getText().substring(1)));\n                break;\n            case nodes.NodeType.MixinDeclaration:\n                result.addAttr('class', child.getName());\n                break;\n            case nodes.NodeType.PseudoSelector:\n                result.addAttr(unescape(child.getText()), '');\n                break;\n            case nodes.NodeType.AttributeSelector:\n                var selector = child;\n                var identifier = selector.getIdentifier();\n                if (identifier) {\n                    var expression = selector.getValue();\n                    var operator = selector.getOperator();\n                    var value = void 0;\n                    if (expression && operator) {\n                        switch (unescape(operator.getText())) {\n                            case '|=':\n                                // excatly or followed by -words\n                                value = quotes.remove(unescape(expression.getText())) + \"-\\u2026\";\n                                break;\n                            case '^=':\n                                // prefix\n                                value = quotes.remove(unescape(expression.getText())) + \"\\u2026\";\n                                break;\n                            case '$=':\n                                // suffix\n                                value = \"\\u2026\" + quotes.remove(unescape(expression.getText()));\n                                break;\n                            case '~=':\n                                // one of a list of words\n                                value = \" \\u2026 \" + quotes.remove(unescape(expression.getText())) + \" \\u2026 \";\n                                break;\n                            case '*=':\n                                // substring\n                                value = \"\\u2026\" + quotes.remove(unescape(expression.getText())) + \"\\u2026\";\n                                break;\n                            default:\n                                value = quotes.remove(unescape(expression.getText()));\n                                break;\n                        }\n                    }\n                    result.addAttr(unescape(identifier.getText()), value);\n                }\n                break;\n        }\n    }\n    return result;\n}\nfunction unescape(content) {\n    var scanner = new Scanner();\n    scanner.setSource(content);\n    var token = scanner.scanUnquotedString();\n    if (token) {\n        return token.text;\n    }\n    return content;\n}\nfunction isPseudoElementIdentifier(text) {\n    var match = text.match(/^::?([\\w-]+)/);\n    if (!match) {\n        return false;\n    }\n    return !!languageFacts.cssDataManager.getPseudoElement(\"::\" + match[1]);\n}\nfunction selectorToSpecificityMarkedString(node) {\n    //https://www.w3.org/TR/selectors-3/#specificity\n    function calculateScore(node) {\n        node.getChildren().forEach(function (element) {\n            switch (element.type) {\n                case nodes.NodeType.IdentifierSelector:\n                    specificity.id++;\n                    break;\n                case nodes.NodeType.ClassSelector:\n                case nodes.NodeType.AttributeSelector:\n                    specificity.attr++;\n                    break;\n                case nodes.NodeType.ElementNameSelector:\n                    //ignore universal selector\n                    if (element.matches(\"*\")) {\n                        break;\n                    }\n                    specificity.tag++;\n                    break;\n                case nodes.NodeType.PseudoSelector:\n                    var text = element.getText();\n                    if (isPseudoElementIdentifier(text)) {\n                        specificity.tag++; // pseudo element\n                    }\n                    else {\n                        //ignore psuedo class NOT\n                        if (text.match(/^:not/i)) {\n                            break;\n                        }\n                        specificity.attr++; //pseudo class\n                    }\n                    break;\n            }\n            if (element.getChildren().length > 0) {\n                calculateScore(element);\n            }\n        });\n    }\n    var specificity = new Specificity();\n    calculateScore(node);\n    return localize('specificity', \"[Selector Specificity](https://developer.mozilla.org/en-US/docs/Web/CSS/Specificity): ({0}, {1}, {2})\", specificity.id, specificity.attr, specificity.tag);\n}\nexport function selectorToMarkedString(node) {\n    var root = selectorToElement(node);\n    if (root) {\n        var markedStrings = new MarkedStringPrinter('\"').print(root);\n        markedStrings.push(selectorToSpecificityMarkedString(node));\n        return markedStrings;\n    }\n    else {\n        return [];\n    }\n}\nexport function simpleSelectorToMarkedString(node) {\n    var element = toElement(node);\n    var markedStrings = new MarkedStringPrinter('\"').print(element);\n    markedStrings.push(selectorToSpecificityMarkedString(node));\n    return markedStrings;\n}\nvar SelectorElementBuilder = /** @class */ (function () {\n    function SelectorElementBuilder(element) {\n        this.prev = null;\n        this.element = element;\n    }\n    SelectorElementBuilder.prototype.processSelector = function (selector) {\n        var parentElement = null;\n        if (!(this.element instanceof RootElement)) {\n            if (selector.getChildren().some(function (c) { return c.hasChildren() && c.getChild(0).type === nodes.NodeType.SelectorCombinator; })) {\n                var curr = this.element.findRoot();\n                if (curr.parent instanceof RootElement) {\n                    parentElement = this.element;\n                    this.element = curr.parent;\n                    this.element.removeChild(curr);\n                    this.prev = null;\n                }\n            }\n        }\n        for (var _i = 0, _a = selector.getChildren(); _i < _a.length; _i++) {\n            var selectorChild = _a[_i];\n            if (selectorChild instanceof nodes.SimpleSelector) {\n                if (this.prev instanceof nodes.SimpleSelector) {\n                    var labelElement = new LabelElement('\\u2026');\n                    this.element.addChild(labelElement);\n                    this.element = labelElement;\n                }\n                else if (this.prev && (this.prev.matches('+') || this.prev.matches('~')) && this.element.parent) {\n                    this.element = this.element.parent;\n                }\n                if (this.prev && this.prev.matches('~')) {\n                    this.element.addChild(toElement(selectorChild));\n                    this.element.addChild(new LabelElement('\\u22EE'));\n                }\n                var thisElement = toElement(selectorChild, parentElement);\n                var root = thisElement.findRoot();\n                this.element.addChild(root);\n                this.element = thisElement;\n            }\n            if (selectorChild instanceof nodes.SimpleSelector ||\n                selectorChild.type === nodes.NodeType.SelectorCombinatorParent ||\n                selectorChild.type === nodes.NodeType.SelectorCombinatorShadowPiercingDescendant ||\n                selectorChild.type === nodes.NodeType.SelectorCombinatorSibling ||\n                selectorChild.type === nodes.NodeType.SelectorCombinatorAllSiblings) {\n                this.prev = selectorChild;\n            }\n        }\n    };\n    return SelectorElementBuilder;\n}());\nfunction isNewSelectorContext(node) {\n    switch (node.type) {\n        case nodes.NodeType.MixinDeclaration:\n        case nodes.NodeType.Stylesheet:\n            return true;\n    }\n    return false;\n}\nexport function selectorToElement(node) {\n    if (node.matches('@at-root')) {\n        return null;\n    }\n    var root = new RootElement();\n    var parentRuleSets = [];\n    var ruleSet = node.getParent();\n    if (ruleSet instanceof nodes.RuleSet) {\n        var parent = ruleSet.getParent(); // parent of the selector's ruleset\n        while (parent && !isNewSelectorContext(parent)) {\n            if (parent instanceof nodes.RuleSet) {\n                if (parent.getSelectors().matches('@at-root')) {\n                    break;\n                }\n                parentRuleSets.push(parent);\n            }\n            parent = parent.getParent();\n        }\n    }\n    var builder = new SelectorElementBuilder(root);\n    for (var i = parentRuleSets.length - 1; i >= 0; i--) {\n        var selector = parentRuleSets[i].getSelectors().getChild(0);\n        if (selector) {\n            builder.processSelector(selector);\n        }\n    }\n    builder.processSelector(node);\n    return root;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport * as nodes from '../parser/cssNodes.js';\nimport * as languageFacts from '../languageFacts/facts.js';\nimport { selectorToMarkedString, simpleSelectorToMarkedString } from './selectorPrinting.js';\nimport { startsWith } from '../utils/strings.js';\nimport { Range, MarkupKind } from '../cssLanguageTypes.js';\nimport { isDefined } from '../utils/objects.js';\nvar CSSHover = /** @class */ (function () {\n    function CSSHover(clientCapabilities) {\n        this.clientCapabilities = clientCapabilities;\n    }\n    CSSHover.prototype.doHover = function (document, position, stylesheet) {\n        function getRange(node) {\n            return Range.create(document.positionAt(node.offset), document.positionAt(node.end));\n        }\n        var offset = document.offsetAt(position);\n        var nodepath = nodes.getNodePath(stylesheet, offset);\n        /**\n         * nodepath is top-down\n         * Build up the hover by appending inner node's information\n         */\n        var hover = null;\n        for (var i = 0; i < nodepath.length; i++) {\n            var node = nodepath[i];\n            if (node instanceof nodes.Selector) {\n                hover = {\n                    contents: selectorToMarkedString(node),\n                    range: getRange(node)\n                };\n                break;\n            }\n            if (node instanceof nodes.SimpleSelector) {\n                /**\n                 * Some sass specific at rules such as `@at-root` are parsed as `SimpleSelector`\n                 */\n                if (!startsWith(node.getText(), '@')) {\n                    hover = {\n                        contents: simpleSelectorToMarkedString(node),\n                        range: getRange(node)\n                    };\n                }\n                break;\n            }\n            if (node instanceof nodes.Declaration) {\n                var propertyName = node.getFullPropertyName();\n                var entry = languageFacts.cssDataManager.getProperty(propertyName);\n                if (entry) {\n                    hover = {\n                        contents: languageFacts.getEntryDescription(entry, this.doesSupportMarkdown()),\n                        range: getRange(node)\n                    };\n                }\n                continue;\n            }\n            if (node instanceof nodes.UnknownAtRule) {\n                var atRuleName = node.getText();\n                var entry = languageFacts.cssDataManager.getAtDirective(atRuleName);\n                if (entry) {\n                    hover = {\n                        contents: languageFacts.getEntryDescription(entry, this.doesSupportMarkdown()),\n                        range: getRange(node)\n                    };\n                }\n                continue;\n            }\n            if (node instanceof nodes.Node && node.type === nodes.NodeType.PseudoSelector) {\n                var selectorName = node.getText();\n                var entry = selectorName.slice(0, 2) === '::'\n                    ? languageFacts.cssDataManager.getPseudoElement(selectorName)\n                    : languageFacts.cssDataManager.getPseudoClass(selectorName);\n                if (entry) {\n                    hover = {\n                        contents: languageFacts.getEntryDescription(entry, this.doesSupportMarkdown()),\n                        range: getRange(node)\n                    };\n                }\n                continue;\n            }\n        }\n        if (hover) {\n            hover.contents = this.convertContents(hover.contents);\n        }\n        return hover;\n    };\n    CSSHover.prototype.convertContents = function (contents) {\n        if (!this.doesSupportMarkdown()) {\n            if (typeof contents === 'string') {\n                return contents;\n            }\n            // MarkupContent\n            else if ('kind' in contents) {\n                return {\n                    kind: 'plaintext',\n                    value: contents.value\n                };\n            }\n            // MarkedString[]\n            else if (Array.isArray(contents)) {\n                return contents.map(function (c) {\n                    return typeof c === 'string' ? c : c.value;\n                });\n            }\n            // MarkedString\n            else {\n                return contents.value;\n            }\n        }\n        return contents;\n    };\n    CSSHover.prototype.doesSupportMarkdown = function () {\n        if (!isDefined(this.supportsMarkdown)) {\n            if (!isDefined(this.clientCapabilities)) {\n                this.supportsMarkdown = true;\n                return this.supportsMarkdown;\n            }\n            var hover = this.clientCapabilities.textDocument && this.clientCapabilities.textDocument.hover;\n            this.supportsMarkdown = hover && hover.contentFormat && Array.isArray(hover.contentFormat) && hover.contentFormat.indexOf(MarkupKind.Markdown) !== -1;\n        }\n        return this.supportsMarkdown;\n    };\n    return CSSHover;\n}());\nexport { CSSHover };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { CSSCompletion } from './cssCompletion.js';\nimport { CompletionItemKind, InsertTextFormat, TextEdit } from '../cssLanguageTypes.js';\nimport * as nls from './../../../fillers/vscode-nls.js';\nvar localize = nls.loadMessageBundle();\nvar LESSCompletion = /** @class */ (function (_super) {\n    __extends(LESSCompletion, _super);\n    function LESSCompletion(clientCapabilities) {\n        return _super.call(this, '@', clientCapabilities) || this;\n    }\n    LESSCompletion.prototype.createFunctionProposals = function (proposals, existingNode, sortToEnd, result) {\n        for (var _i = 0, proposals_1 = proposals; _i < proposals_1.length; _i++) {\n            var p = proposals_1[_i];\n            var item = {\n                label: p.name,\n                detail: p.example,\n                documentation: p.description,\n                textEdit: TextEdit.replace(this.getCompletionRange(existingNode), p.name + '($0)'),\n                insertTextFormat: InsertTextFormat.Snippet,\n                kind: CompletionItemKind.Function\n            };\n            if (sortToEnd) {\n                item.sortText = 'z';\n            }\n            result.items.push(item);\n        }\n        return result;\n    };\n    LESSCompletion.prototype.getTermProposals = function (entry, existingNode, result) {\n        var functions = LESSCompletion.builtInProposals;\n        if (entry) {\n            functions = functions.filter(function (f) { return !f.type || !entry.restrictions || entry.restrictions.indexOf(f.type) !== -1; });\n        }\n        this.createFunctionProposals(functions, existingNode, true, result);\n        return _super.prototype.getTermProposals.call(this, entry, existingNode, result);\n    };\n    LESSCompletion.prototype.getColorProposals = function (entry, existingNode, result) {\n        this.createFunctionProposals(LESSCompletion.colorProposals, existingNode, false, result);\n        return _super.prototype.getColorProposals.call(this, entry, existingNode, result);\n    };\n    LESSCompletion.prototype.getCompletionsForDeclarationProperty = function (declaration, result) {\n        this.getCompletionsForSelector(null, true, result);\n        return _super.prototype.getCompletionsForDeclarationProperty.call(this, declaration, result);\n    };\n    LESSCompletion.builtInProposals = [\n        // Boolean functions\n        {\n            'name': 'if',\n            'example': 'if(condition, trueValue [, falseValue]);',\n            'description': localize('less.builtin.if', 'returns one of two values depending on a condition.')\n        },\n        {\n            'name': 'boolean',\n            'example': 'boolean(condition);',\n            'description': localize('less.builtin.boolean', '\"store\" a boolean test for later evaluation in a guard or if().')\n        },\n        // List functions\n        {\n            'name': 'length',\n            'example': 'length(@list);',\n            'description': localize('less.builtin.length', 'returns the number of elements in a value list')\n        },\n        {\n            'name': 'extract',\n            'example': 'extract(@list, index);',\n            'description': localize('less.builtin.extract', 'returns a value at the specified position in the list')\n        },\n        {\n            'name': 'range',\n            'example': 'range([start, ] end [, step]);',\n            'description': localize('less.builtin.range', 'generate a list spanning a range of values')\n        },\n        {\n            'name': 'each',\n            'example': 'each(@list, ruleset);',\n            'description': localize('less.builtin.each', 'bind the evaluation of a ruleset to each member of a list.')\n        },\n        // Other built-ins\n        {\n            'name': 'escape',\n            'example': 'escape(@string);',\n            'description': localize('less.builtin.escape', 'URL encodes a string')\n        },\n        {\n            'name': 'e',\n            'example': 'e(@string);',\n            'description': localize('less.builtin.e', 'escape string content')\n        },\n        {\n            'name': 'replace',\n            'example': 'replace(@string, @pattern, @replacement[, @flags]);',\n            'description': localize('less.builtin.replace', 'string replace')\n        },\n        {\n            'name': 'unit',\n            'example': 'unit(@dimension, [@unit: \\'\\']);',\n            'description': localize('less.builtin.unit', 'remove or change the unit of a dimension')\n        },\n        {\n            'name': 'color',\n            'example': 'color(@string);',\n            'description': localize('less.builtin.color', 'parses a string to a color'),\n            'type': 'color'\n        },\n        {\n            'name': 'convert',\n            'example': 'convert(@value, unit);',\n            'description': localize('less.builtin.convert', 'converts numbers from one type into another')\n        },\n        {\n            'name': 'data-uri',\n            'example': 'data-uri([mimetype,] url);',\n            'description': localize('less.builtin.data-uri', 'inlines a resource and falls back to `url()`'),\n            'type': 'url'\n        },\n        {\n            'name': 'abs',\n            'description': localize('less.builtin.abs', 'absolute value of a number'),\n            'example': 'abs(number);'\n        },\n        {\n            'name': 'acos',\n            'description': localize('less.builtin.acos', 'arccosine - inverse of cosine function'),\n            'example': 'acos(number);'\n        },\n        {\n            'name': 'asin',\n            'description': localize('less.builtin.asin', 'arcsine - inverse of sine function'),\n            'example': 'asin(number);'\n        },\n        {\n            'name': 'ceil',\n            'example': 'ceil(@number);',\n            'description': localize('less.builtin.ceil', 'rounds up to an integer')\n        },\n        {\n            'name': 'cos',\n            'description': localize('less.builtin.cos', 'cosine function'),\n            'example': 'cos(number);'\n        },\n        {\n            'name': 'floor',\n            'description': localize('less.builtin.floor', 'rounds down to an integer'),\n            'example': 'floor(@number);'\n        },\n        {\n            'name': 'percentage',\n            'description': localize('less.builtin.percentage', 'converts to a %, e.g. 0.5 > 50%'),\n            'example': 'percentage(@number);',\n            'type': 'percentage'\n        },\n        {\n            'name': 'round',\n            'description': localize('less.builtin.round', 'rounds a number to a number of places'),\n            'example': 'round(number, [places: 0]);'\n        },\n        {\n            'name': 'sqrt',\n            'description': localize('less.builtin.sqrt', 'calculates square root of a number'),\n            'example': 'sqrt(number);'\n        },\n        {\n            'name': 'sin',\n            'description': localize('less.builtin.sin', 'sine function'),\n            'example': 'sin(number);'\n        },\n        {\n            'name': 'tan',\n            'description': localize('less.builtin.tan', 'tangent function'),\n            'example': 'tan(number);'\n        },\n        {\n            'name': 'atan',\n            'description': localize('less.builtin.atan', 'arctangent - inverse of tangent function'),\n            'example': 'atan(number);'\n        },\n        {\n            'name': 'pi',\n            'description': localize('less.builtin.pi', 'returns pi'),\n            'example': 'pi();'\n        },\n        {\n            'name': 'pow',\n            'description': localize('less.builtin.pow', 'first argument raised to the power of the second argument'),\n            'example': 'pow(@base, @exponent);'\n        },\n        {\n            'name': 'mod',\n            'description': localize('less.builtin.mod', 'first argument modulus second argument'),\n            'example': 'mod(number, number);'\n        },\n        {\n            'name': 'min',\n            'description': localize('less.builtin.min', 'returns the lowest of one or more values'),\n            'example': 'min(@x, @y);'\n        },\n        {\n            'name': 'max',\n            'description': localize('less.builtin.max', 'returns the lowest of one or more values'),\n            'example': 'max(@x, @y);'\n        }\n    ];\n    LESSCompletion.colorProposals = [\n        {\n            'name': 'argb',\n            'example': 'argb(@color);',\n            'description': localize('less.builtin.argb', 'creates a #AARRGGBB')\n        },\n        {\n            'name': 'hsl',\n            'example': 'hsl(@hue, @saturation, @lightness);',\n            'description': localize('less.builtin.hsl', 'creates a color')\n        },\n        {\n            'name': 'hsla',\n            'example': 'hsla(@hue, @saturation, @lightness, @alpha);',\n            'description': localize('less.builtin.hsla', 'creates a color')\n        },\n        {\n            'name': 'hsv',\n            'example': 'hsv(@hue, @saturation, @value);',\n            'description': localize('less.builtin.hsv', 'creates a color')\n        },\n        {\n            'name': 'hsva',\n            'example': 'hsva(@hue, @saturation, @value, @alpha);',\n            'description': localize('less.builtin.hsva', 'creates a color')\n        },\n        {\n            'name': 'hue',\n            'example': 'hue(@color);',\n            'description': localize('less.builtin.hue', 'returns the `hue` channel of `@color` in the HSL space')\n        },\n        {\n            'name': 'saturation',\n            'example': 'saturation(@color);',\n            'description': localize('less.builtin.saturation', 'returns the `saturation` channel of `@color` in the HSL space')\n        },\n        {\n            'name': 'lightness',\n            'example': 'lightness(@color);',\n            'description': localize('less.builtin.lightness', 'returns the `lightness` channel of `@color` in the HSL space')\n        },\n        {\n            'name': 'hsvhue',\n            'example': 'hsvhue(@color);',\n            'description': localize('less.builtin.hsvhue', 'returns the `hue` channel of `@color` in the HSV space')\n        },\n        {\n            'name': 'hsvsaturation',\n            'example': 'hsvsaturation(@color);',\n            'description': localize('less.builtin.hsvsaturation', 'returns the `saturation` channel of `@color` in the HSV space')\n        },\n        {\n            'name': 'hsvvalue',\n            'example': 'hsvvalue(@color);',\n            'description': localize('less.builtin.hsvvalue', 'returns the `value` channel of `@color` in the HSV space')\n        },\n        {\n            'name': 'red',\n            'example': 'red(@color);',\n            'description': localize('less.builtin.red', 'returns the `red` channel of `@color`')\n        },\n        {\n            'name': 'green',\n            'example': 'green(@color);',\n            'description': localize('less.builtin.green', 'returns the `green` channel of `@color`')\n        },\n        {\n            'name': 'blue',\n            'example': 'blue(@color);',\n            'description': localize('less.builtin.blue', 'returns the `blue` channel of `@color`')\n        },\n        {\n            'name': 'alpha',\n            'example': 'alpha(@color);',\n            'description': localize('less.builtin.alpha', 'returns the `alpha` channel of `@color`')\n        },\n        {\n            'name': 'luma',\n            'example': 'luma(@color);',\n            'description': localize('less.builtin.luma', 'returns the `luma` value (perceptual brightness) of `@color`')\n        },\n        {\n            'name': 'saturate',\n            'example': 'saturate(@color, 10%);',\n            'description': localize('less.builtin.saturate', 'return `@color` 10% points more saturated')\n        },\n        {\n            'name': 'desaturate',\n            'example': 'desaturate(@color, 10%);',\n            'description': localize('less.builtin.desaturate', 'return `@color` 10% points less saturated')\n        },\n        {\n            'name': 'lighten',\n            'example': 'lighten(@color, 10%);',\n            'description': localize('less.builtin.lighten', 'return `@color` 10% points lighter')\n        },\n        {\n            'name': 'darken',\n            'example': 'darken(@color, 10%);',\n            'description': localize('less.builtin.darken', 'return `@color` 10% points darker')\n        },\n        {\n            'name': 'fadein',\n            'example': 'fadein(@color, 10%);',\n            'description': localize('less.builtin.fadein', 'return `@color` 10% points less transparent')\n        },\n        {\n            'name': 'fadeout',\n            'example': 'fadeout(@color, 10%);',\n            'description': localize('less.builtin.fadeout', 'return `@color` 10% points more transparent')\n        },\n        {\n            'name': 'fade',\n            'example': 'fade(@color, 50%);',\n            'description': localize('less.builtin.fade', 'return `@color` with 50% transparency')\n        },\n        {\n            'name': 'spin',\n            'example': 'spin(@color, 10);',\n            'description': localize('less.builtin.spin', 'return `@color` with a 10 degree larger in hue')\n        },\n        {\n            'name': 'mix',\n            'example': 'mix(@color1, @color2, [@weight: 50%]);',\n            'description': localize('less.builtin.mix', 'return a mix of `@color1` and `@color2`')\n        },\n        {\n            'name': 'greyscale',\n            'example': 'greyscale(@color);',\n            'description': localize('less.builtin.greyscale', 'returns a grey, 100% desaturated color'),\n        },\n        {\n            'name': 'contrast',\n            'example': 'contrast(@color1, [@darkcolor: black], [@lightcolor: white], [@threshold: 43%]);',\n            'description': localize('less.builtin.contrast', 'return `@darkcolor` if `@color1 is> 43% luma` otherwise return `@lightcolor`, see notes')\n        },\n        {\n            'name': 'multiply',\n            'example': 'multiply(@color1, @color2);'\n        },\n        {\n            'name': 'screen',\n            'example': 'screen(@color1, @color2);'\n        },\n        {\n            'name': 'overlay',\n            'example': 'overlay(@color1, @color2);'\n        },\n        {\n            'name': 'softlight',\n            'example': 'softlight(@color1, @color2);'\n        },\n        {\n            'name': 'hardlight',\n            'example': 'hardlight(@color1, @color2);'\n        },\n        {\n            'name': 'difference',\n            'example': 'difference(@color1, @color2);'\n        },\n        {\n            'name': 'exclusion',\n            'example': 'exclusion(@color1, @color2);'\n        },\n        {\n            'name': 'average',\n            'example': 'average(@color1, @color2);'\n        },\n        {\n            'name': 'negation',\n            'example': 'negation(@color1, @color2);'\n        }\n    ];\n    return LESSCompletion;\n}(CSSCompletion));\nexport { LESSCompletion };\n"],"sourceRoot":""}