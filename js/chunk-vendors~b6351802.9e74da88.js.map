{"version":3,"sources":["webpack:///./node_modules/monaco-editor/esm/vs/base/browser/ui/list/list.js","webpack:///./node_modules/monaco-editor/esm/vs/base/browser/ui/list/splice.js","webpack:///./node_modules/monaco-editor/esm/vs/base/browser/ui/list/listWidget.js","webpack:///./node_modules/monaco-editor/esm/vs/base/browser/ui/list/rangeMap.js","webpack:///./node_modules/monaco-editor/esm/vs/base/browser/ui/list/rowCache.js","webpack:///./node_modules/monaco-editor/esm/vs/base/browser/ui/list/listView.js","webpack:///./node_modules/monaco-editor/esm/vs/base/browser/ui/keybindingLabel/keybindingLabel.js","webpack:///./node_modules/monaco-editor/esm/vs/base/browser/ui/menu/menu.js"],"names":["ListAriaRootRole","__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","this","constructor","prototype","create","ListError","_super","user","message","call","Error","CombinedSpliceable","spliceables","splice","start","deleteCount","elements","forEach","s","__assign","assign","t","i","n","arguments","length","apply","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__spreadArrays","il","k","a","j","jl","TraitRenderer","trait","renderedElements","get","enumerable","configurable","renderTemplate","container","renderElement","element","index","templateData","renderedElementIndex","el","rendered","unrender","push","renderIndex","insertCount","_i","_a","renderedElement","renderIndexes","indexes","_b","indexOf","disposeTemplate","Trait","_trait","sortedIndexes","_onChange","onChange","event","diff","end","filter","map","hasTrait","renderer","_set","contains","set","browserEvent","sort","numericSort","result","sortedResult","toRender","disjunction","fire","dispose","FocusTrait","setAttribute","removeAttribute","TraitSpliceable","view","identityProvider","_this","pastElementsWithTrait","getId","toString","elementsWithTrait","e","isInputElement","tagName","TypeLabelControllerState","KeyboardController","list","options","disposables","multipleSelectionSupport","openController","DefaultOpenController","onKeyDown","chain","domNode","keyCode","on","onEnter","onUpArrow","onDownArrow","onPageUpArrow","onPageDownArrow","onEscape","platform","metaKey","ctrlKey","onCtrlA","preventDefault","stopPropagation","setSelection","getFocus","shouldOpen","open","focusPrevious","reveal","focus","focusNext","focusPreviousPage","focusNextPage","DefaultKeyboardNavigationDelegate","class_1","mightProducePrintableCharacter","altKey","TypeLabelController","keyboardNavigationLabelProvider","delegate","enabled","state","Idle","automaticKeyboardNavigation","triggered","enabledDisposables","updateOptions","enableKeyboardNavigation","enable","disable","onChar","onClear","debounce","onInput","reduce","any","clear","word","delta","Typing","label","getKeyboardNavigationLabel","labelStr","setFocus","DOMFocusController","shiftKey","onTab","focusedDomElement","domElement","tabIndexElement","querySelector","HTMLElement","tabIndex","style","window","getComputedStyle","visibility","display","isSelectionSingleChangeEvent","isSelectionRangeChangeEvent","isMouseRightClick","MouseEvent","button","DefaultMultipleSelectionController","MouseController","multipleSelectionController","mouseSupport","onMouseDown","onContextMenu","onMouseDblClick","onDoubleClick","onTouchStart","add","addTarget","getHTMLElement","onMouseClick","onPointer","onMouseMiddleClick","onTap","isSelectionChangeEvent","document","activeElement","domFocus","reference","selection","getSelection","undefined","changeSelection","pin","min","Math","max","rangeSelection","contiguousRange","getContiguousRangeContaining","newSelection","relativeComplement","DefaultStyleController","styleElement","selectorSuffix","styles","suffix","content","listBackground","isOpaque","console","warn","listFocusBackground","listFocusForeground","listActiveSelectionBackground","listActiveSelectionForeground","listFocusAndSelectionBackground","listFocusAndSelectionForeground","listInactiveFocusBackground","listInactiveSelectionBackground","listInactiveSelectionForeground","listHoverBackground","listHoverForeground","listSelectionOutline","listFocusOutline","listInactiveFocusOutline","listHoverOutline","listDropBackground","listFilterWidgetBackground","listFilterWidgetOutline","listFilterWidgetNoMatchesOutline","listMatchesShadow","newStyles","join","innerHTML","defaultStyles","fromHex","treeIndentGuidesStroke","DefaultOptions","keyboardSupport","dnd","getDragURI","onDragStart","onDragOver","drop","ariaRootRole","TREE","range","value","reverse","one","other","PipelineRenderer","_templateId","renderers","height","disposeElement","AccessibiltyRenderer","accessibilityProvider","templateId","ariaLabel","getAriaLabel","ariaLevel","getAriaLevel","ListViewDragAndDrop","getDragElements","getSelectedElements","getDragLabel","originalEvent","data","targetElement","targetIndex","onDragEnd","List","virtualDelegate","_options","eventBufferer","_onDidOpen","onDidOpen","_onDidPin","didJustPressContextMenuKey","_onDidDispose","onDidDispose","baseRenderers","onDidChangeActiveDescendant","viewOptions","ariaRole","styleController","domId","spliceable","onDidFocus","onDidBlur","controller","keyboardNavigationDelegate","typeLabelController","createMouseController","onFocusChange","_onFocusChange","onSelectionChange","_onSelectionChange","wrapEvent","toListEvent","fromKeydown","fromKeyup","anchor","fromMouse","x","clientX","y","clientY","optionsUpdate","bufferEvents","rerender","contentHeight","getScrollTop","scrollTop","setScrollTop","layout","width","indexes_1","indexes_2","loop","findNextIndex","findPreviousIndex","lastPageIndex","indexAt","renderHeight","lastPageElement","currentlyFocusedElement","getFocusedElements","lastGoodPageIndex","previousScrollTop","elementHeight","setTimeout","firstPageIndex","indexAfter","firstPageElement","firstGoodPageIndex","focusLast","focusFirst","relativeTop","elementTop","m","viewItemBottom","wrapperBottom","getRelativeTop","abs","indexes_3","indexes_4","id","getActiveDescendantId","getElementDomId","groupIntersect","groups","groups_1","intersection","intersect","isEmpty","size","shift","much","consolidate","previousGroup","groups_2","group","concat","g","RangeMap","_size","items","before","after","Number","POSITIVE_INFINITY","middle","item","len","position","count","newSize","floor","positionAt","groupCount","newCount","removeFromParent","parentElement","removeChild","RowCache","cache","Map","alloc","getTemplateCache","pop","getRenderer","release","row","releaseRow","cachedRows","cachedRows_1","cachedRow","useShadows","verticalScrollMode","setRowLineHeight","supportDynamicHeights","horizontalScrolling","ElementsDragAndDropData","update","getData","ExternalElementsDragAndDropData","DesktopDragAndDropData","types","files","dataTransfer","file","type","equalsDragFeedback","f1","f2","isArray","ListView","InstanceCount","renderWidth","_scrollHeight","scrollableElementUpdateDisposable","scrollableElementWidthDelayer","splicing","dragOverAnimationStopDisposable","None","dragOverMouseY","canDrop","currentDragFeedbackDisposable","onDragLeaveTimeout","_onDidChangeContentHeight","itemId","rangeMap","renderers_1","lastRenderTop","lastRenderHeight","createElement","className","o","additionalScrollHeight","ariaProvider","getSetSize","getPosInSet","_","rowsContainer","transform","scrollableElement","alwaysConsumeMouseWheel","horizontal","vertical","appendChild","getDomNode","onScroll","Change","onTouchChange","toDragEvent","onDrop","onDragLeave","_splice","previousRenderRange","getRenderRange","deleteRange","removeRange","removeItemFromDOM","deleted","previousRestRange","previousRenderedRestRange","previousUnrenderedRestRanges","inserted","String","getTemplateId","getHeight","hasDynamicHeight","lastDynamicHeightWidth","uri","dropTarget","dragStartDisposable","renderRange","renderedRestRange","updateRange","updateItemInDOM","removeRanges","removeRanges_1","unrenderedRestRanges","elementsRange","insertRanges","beforeElement","getNextToLastElement","insertRanges_1","insertItemInDOM","eventuallyUpdateScrollDimensions","_rerender","setScrollDimensions","scrollHeight","updateScrollWidth","eventuallyUpdateScrollWidth","trigger","scrollWidth","scrollDimensions","getScrollDimensions","render","renderTop","renderLeft","rangesToInsert","rangesToRemove","rangesToInsert_1","rangesToRemove_1","left","top","role","getRole","checked","isChecked","insertBefore","draggable","measureItemWidth","paddingLeft","parseFloat","paddingRight","lineHeight","scrollPosition","getScrollPosition","setScrollPosition","toMouseEvent","toTouchEvent","Tap","toGestureEvent","getItemIndexFromEventTarget","initialTarget","scrollLeft","err","error","translationY","effectAllowed","setData","RESOURCES","JSON","stringify","setDragImage","dragImage_1","textContent","body","currentDragData","CurrentDragAndDropData","setupDragAndDropScrollTopAnimation","feedback","accept","currentDragFeedback","dropEffect","effect","feedback_1","feedback_2","clearDragOverFeedback","dragData","teardownDragAndDropScrollTopAnimation","dragOverAnimationDisposable","viewTop","animateDragAndDropScrollTop","bind","pageY","upperLimit","rawIndex","getAttribute","isNaN","anchorElementIndex","anchorElementTopDelta","heightDiff","didChange","probeDynamicHeight","unrenderRanges","unrenderRanges_1","renderRanges","renderRanges_1","afterIndex","beforeRow","offsetHeight","setDynamicHeight","ranges","lastRange","nextToLastItem","parentNode","$","KeybindingLabel","os","didEverRender","keybinding","matches","areSame","getParts","firstPart","chordPart","renderPart","title","renderUnboundKeybindings","renderUnbound","parent","part","match","modifierLabels","renderKey","Boolean","separator","keyLabel","highlight","Direction","MENU_MNEMONIC_REGEX","MENU_ESCAPED_MNEMONIC_REGEX","SubmenuAction","entries","cssClass","Menu","actions","menuElement","orientation","actionViewItemProvider","action","doGetActionViewItem","parentData","context","actionRunner","triggerKeys","keys","keyDown","actionsList","menuDisposables","_register","KEY_DOWN","equals","enableMnemonics","toLocaleLowerCase","mnemonics","has","stop","actions_1","SubmenuMenuActionViewItem","focusItemByElement","onClick","focusedItem","viewItems","MOUSE_OUT","relatedTarget","updateFocus","MOUSE_OVER","lastFocusedItem","setFocusedItem","verticalScrollbarSize","handleMouseWheel","scrollElement","MOUSE_UP","maxHeight","innerHeight","getBoundingClientRect","icon","isMenu","scanDomNode","MenuSeparatorActionViewItem","array","updatePositionInSet","getContainer","fgColor","foregroundColor","bgColor","backgroundColor","border","borderColor","shadow","shadowColor","color","boxShadow","BaseMenuActionViewItem","children","elem","fromRight","round","menuActionViewItem","mnemonic","getMnemonic","isEnabled","actionViewItems","menuItemOptions","getKeyBinding","keybindingLabel","getLabel","ctx","getAction","exec","runOnceToEnableMouseUp","defaultPrevented","_action","ID","check","schedule","updateClass","updateLabel","updateTooltip","updateEnabled","updateChecked","blur","applyStyle","pos","setSize","cleanLabel","cleanMnemonic","replace","lastIndex","escMatch","substr","trim","tooltip","comment","class","menuStyle","isSelected","selectionForegroundColor","selectionBackgroundColor","selectionBorderColor","submenuActions","submenuOptions","mysubmenu","submenuDisposables","mouseOver","expandDirection","Right","showScheduler","cleanupExistingSubmenu","createSubmenu","hideScheduler","submenu","updateAriaExpanded","submenuIndicator","KEY_UP","MOUSE_LEAVE","FOCUS_OUT","force","submenuContainer","selectFirstItem","computedStyles","paddingTop","offsetTop","scrollOffset","boundingRect","childBoundingRect","innerWidth","right","offsetWidth","Left","onDidCancel","borderBottomColor","separatorColor","regex","mnemonicInText"],"mappings":"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","file":"js/chunk-vendors~b6351802.9e74da88.js","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nexport var ListAriaRootRole;\r\n(function (ListAriaRootRole) {\r\n    /** default tree structure role */\r\n    ListAriaRootRole[\"TREE\"] = \"tree\";\r\n    /** role='tree' can interfere with screenreaders reading nested elements inside the tree row. Use FORM in that case. */\r\n    ListAriaRootRole[\"FORM\"] = \"form\";\r\n})(ListAriaRootRole || (ListAriaRootRole = {}));\r\nvar ListError = /** @class */ (function (_super) {\r\n    __extends(ListError, _super);\r\n    function ListError(user, message) {\r\n        return _super.call(this, \"ListError [\" + user + \"] \" + message) || this;\r\n    }\r\n    return ListError;\r\n}(Error));\r\nexport { ListError };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar CombinedSpliceable = /** @class */ (function () {\r\n    function CombinedSpliceable(spliceables) {\r\n        this.spliceables = spliceables;\r\n    }\r\n    CombinedSpliceable.prototype.splice = function (start, deleteCount, elements) {\r\n        this.spliceables.forEach(function (s) { return s.splice(start, deleteCount, elements); });\r\n    };\r\n    return CombinedSpliceable;\r\n}());\r\nexport { CombinedSpliceable };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nimport './list.css';\r\nimport { localize } from '../../../../nls.js';\r\nimport { dispose, DisposableStore } from '../../../common/lifecycle.js';\r\nimport { isNumber } from '../../../common/types.js';\r\nimport { range, firstIndex, binarySearch } from '../../../common/arrays.js';\r\nimport { memoize } from '../../../common/decorators.js';\r\nimport * as DOM from '../../dom.js';\r\nimport * as platform from '../../../common/platform.js';\r\nimport { Gesture } from '../../touch.js';\r\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\r\nimport { Event, Emitter, EventBufferer } from '../../../common/event.js';\r\nimport { domEvent } from '../../event.js';\r\nimport { ListAriaRootRole, ListError } from './list.js';\r\nimport { ListView } from './listView.js';\r\nimport { Color } from '../../../common/color.js';\r\nimport { mixin } from '../../../common/objects.js';\r\nimport { CombinedSpliceable } from './splice.js';\r\nimport { clamp } from '../../../common/numbers.js';\r\nimport { matchesPrefix } from '../../../common/filters.js';\r\nvar TraitRenderer = /** @class */ (function () {\r\n    function TraitRenderer(trait) {\r\n        this.trait = trait;\r\n        this.renderedElements = [];\r\n    }\r\n    Object.defineProperty(TraitRenderer.prototype, \"templateId\", {\r\n        get: function () {\r\n            return \"template:\" + this.trait.trait;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    TraitRenderer.prototype.renderTemplate = function (container) {\r\n        return container;\r\n    };\r\n    TraitRenderer.prototype.renderElement = function (element, index, templateData) {\r\n        var renderedElementIndex = firstIndex(this.renderedElements, function (el) { return el.templateData === templateData; });\r\n        if (renderedElementIndex >= 0) {\r\n            var rendered = this.renderedElements[renderedElementIndex];\r\n            this.trait.unrender(templateData);\r\n            rendered.index = index;\r\n        }\r\n        else {\r\n            var rendered = { index: index, templateData: templateData };\r\n            this.renderedElements.push(rendered);\r\n        }\r\n        this.trait.renderIndex(index, templateData);\r\n    };\r\n    TraitRenderer.prototype.splice = function (start, deleteCount, insertCount) {\r\n        var rendered = [];\r\n        for (var _i = 0, _a = this.renderedElements; _i < _a.length; _i++) {\r\n            var renderedElement = _a[_i];\r\n            if (renderedElement.index < start) {\r\n                rendered.push(renderedElement);\r\n            }\r\n            else if (renderedElement.index >= start + deleteCount) {\r\n                rendered.push({\r\n                    index: renderedElement.index + insertCount - deleteCount,\r\n                    templateData: renderedElement.templateData\r\n                });\r\n            }\r\n        }\r\n        this.renderedElements = rendered;\r\n    };\r\n    TraitRenderer.prototype.renderIndexes = function (indexes) {\r\n        for (var _i = 0, _a = this.renderedElements; _i < _a.length; _i++) {\r\n            var _b = _a[_i], index = _b.index, templateData = _b.templateData;\r\n            if (indexes.indexOf(index) > -1) {\r\n                this.trait.renderIndex(index, templateData);\r\n            }\r\n        }\r\n    };\r\n    TraitRenderer.prototype.disposeTemplate = function (templateData) {\r\n        var index = firstIndex(this.renderedElements, function (el) { return el.templateData === templateData; });\r\n        if (index < 0) {\r\n            return;\r\n        }\r\n        this.renderedElements.splice(index, 1);\r\n    };\r\n    return TraitRenderer;\r\n}());\r\nvar Trait = /** @class */ (function () {\r\n    function Trait(_trait) {\r\n        this._trait = _trait;\r\n        this.indexes = [];\r\n        this.sortedIndexes = [];\r\n        this._onChange = new Emitter();\r\n        this.onChange = this._onChange.event;\r\n    }\r\n    Object.defineProperty(Trait.prototype, \"trait\", {\r\n        get: function () { return this._trait; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Trait.prototype, \"renderer\", {\r\n        get: function () {\r\n            return new TraitRenderer(this);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Trait.prototype.splice = function (start, deleteCount, elements) {\r\n        var diff = elements.length - deleteCount;\r\n        var end = start + deleteCount;\r\n        var indexes = __spreadArrays(this.sortedIndexes.filter(function (i) { return i < start; }), elements.map(function (hasTrait, i) { return hasTrait ? i + start : -1; }).filter(function (i) { return i !== -1; }), this.sortedIndexes.filter(function (i) { return i >= end; }).map(function (i) { return i + diff; }));\r\n        this.renderer.splice(start, deleteCount, elements.length);\r\n        this._set(indexes, indexes);\r\n    };\r\n    Trait.prototype.renderIndex = function (index, container) {\r\n        DOM.toggleClass(container, this._trait, this.contains(index));\r\n    };\r\n    Trait.prototype.unrender = function (container) {\r\n        DOM.removeClass(container, this._trait);\r\n    };\r\n    /**\r\n     * Sets the indexes which should have this trait.\r\n     *\r\n     * @param indexes Indexes which should have this trait.\r\n     * @return The old indexes which had this trait.\r\n     */\r\n    Trait.prototype.set = function (indexes, browserEvent) {\r\n        return this._set(indexes, __spreadArrays(indexes).sort(numericSort), browserEvent);\r\n    };\r\n    Trait.prototype._set = function (indexes, sortedIndexes, browserEvent) {\r\n        var result = this.indexes;\r\n        var sortedResult = this.sortedIndexes;\r\n        this.indexes = indexes;\r\n        this.sortedIndexes = sortedIndexes;\r\n        var toRender = disjunction(sortedResult, indexes);\r\n        this.renderer.renderIndexes(toRender);\r\n        this._onChange.fire({ indexes: indexes, browserEvent: browserEvent });\r\n        return result;\r\n    };\r\n    Trait.prototype.get = function () {\r\n        return this.indexes;\r\n    };\r\n    Trait.prototype.contains = function (index) {\r\n        return binarySearch(this.sortedIndexes, index, numericSort) >= 0;\r\n    };\r\n    Trait.prototype.dispose = function () {\r\n        dispose(this._onChange);\r\n    };\r\n    __decorate([\r\n        memoize\r\n    ], Trait.prototype, \"renderer\", null);\r\n    return Trait;\r\n}());\r\nvar FocusTrait = /** @class */ (function (_super) {\r\n    __extends(FocusTrait, _super);\r\n    function FocusTrait() {\r\n        return _super.call(this, 'focused') || this;\r\n    }\r\n    FocusTrait.prototype.renderIndex = function (index, container) {\r\n        _super.prototype.renderIndex.call(this, index, container);\r\n        if (this.contains(index)) {\r\n            container.setAttribute('aria-selected', 'true');\r\n        }\r\n        else {\r\n            container.removeAttribute('aria-selected');\r\n        }\r\n    };\r\n    return FocusTrait;\r\n}(Trait));\r\n/**\r\n * The TraitSpliceable is used as a util class to be able\r\n * to preserve traits across splice calls, given an identity\r\n * provider.\r\n */\r\nvar TraitSpliceable = /** @class */ (function () {\r\n    function TraitSpliceable(trait, view, identityProvider) {\r\n        this.trait = trait;\r\n        this.view = view;\r\n        this.identityProvider = identityProvider;\r\n    }\r\n    TraitSpliceable.prototype.splice = function (start, deleteCount, elements) {\r\n        var _this = this;\r\n        if (!this.identityProvider) {\r\n            return this.trait.splice(start, deleteCount, elements.map(function () { return false; }));\r\n        }\r\n        var pastElementsWithTrait = this.trait.get().map(function (i) { return _this.identityProvider.getId(_this.view.element(i)).toString(); });\r\n        var elementsWithTrait = elements.map(function (e) { return pastElementsWithTrait.indexOf(_this.identityProvider.getId(e).toString()) > -1; });\r\n        this.trait.splice(start, deleteCount, elementsWithTrait);\r\n    };\r\n    return TraitSpliceable;\r\n}());\r\nfunction isInputElement(e) {\r\n    return e.tagName === 'INPUT' || e.tagName === 'TEXTAREA';\r\n}\r\nvar KeyboardController = /** @class */ (function () {\r\n    function KeyboardController(list, view, options) {\r\n        this.list = list;\r\n        this.view = view;\r\n        this.disposables = new DisposableStore();\r\n        var multipleSelectionSupport = options.multipleSelectionSupport !== false;\r\n        this.openController = options.openController || DefaultOpenController;\r\n        var onKeyDown = Event.chain(domEvent(view.domNode, 'keydown'))\r\n            .filter(function (e) { return !isInputElement(e.target); })\r\n            .map(function (e) { return new StandardKeyboardEvent(e); });\r\n        onKeyDown.filter(function (e) { return e.keyCode === 3 /* Enter */; }).on(this.onEnter, this, this.disposables);\r\n        onKeyDown.filter(function (e) { return e.keyCode === 16 /* UpArrow */; }).on(this.onUpArrow, this, this.disposables);\r\n        onKeyDown.filter(function (e) { return e.keyCode === 18 /* DownArrow */; }).on(this.onDownArrow, this, this.disposables);\r\n        onKeyDown.filter(function (e) { return e.keyCode === 11 /* PageUp */; }).on(this.onPageUpArrow, this, this.disposables);\r\n        onKeyDown.filter(function (e) { return e.keyCode === 12 /* PageDown */; }).on(this.onPageDownArrow, this, this.disposables);\r\n        onKeyDown.filter(function (e) { return e.keyCode === 9 /* Escape */; }).on(this.onEscape, this, this.disposables);\r\n        if (multipleSelectionSupport) {\r\n            onKeyDown.filter(function (e) { return (platform.isMacintosh ? e.metaKey : e.ctrlKey) && e.keyCode === 31 /* KEY_A */; }).on(this.onCtrlA, this, this.disposables);\r\n        }\r\n    }\r\n    KeyboardController.prototype.onEnter = function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        this.list.setSelection(this.list.getFocus(), e.browserEvent);\r\n        if (this.openController.shouldOpen(e.browserEvent)) {\r\n            this.list.open(this.list.getFocus(), e.browserEvent);\r\n        }\r\n    };\r\n    KeyboardController.prototype.onUpArrow = function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        this.list.focusPrevious(1, false, e.browserEvent);\r\n        this.list.reveal(this.list.getFocus()[0]);\r\n        this.view.domNode.focus();\r\n    };\r\n    KeyboardController.prototype.onDownArrow = function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        this.list.focusNext(1, false, e.browserEvent);\r\n        this.list.reveal(this.list.getFocus()[0]);\r\n        this.view.domNode.focus();\r\n    };\r\n    KeyboardController.prototype.onPageUpArrow = function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        this.list.focusPreviousPage(e.browserEvent);\r\n        this.list.reveal(this.list.getFocus()[0]);\r\n        this.view.domNode.focus();\r\n    };\r\n    KeyboardController.prototype.onPageDownArrow = function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        this.list.focusNextPage(e.browserEvent);\r\n        this.list.reveal(this.list.getFocus()[0]);\r\n        this.view.domNode.focus();\r\n    };\r\n    KeyboardController.prototype.onCtrlA = function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        this.list.setSelection(range(this.list.length), e.browserEvent);\r\n        this.view.domNode.focus();\r\n    };\r\n    KeyboardController.prototype.onEscape = function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        this.list.setSelection([], e.browserEvent);\r\n        this.view.domNode.focus();\r\n    };\r\n    KeyboardController.prototype.dispose = function () {\r\n        this.disposables.dispose();\r\n    };\r\n    return KeyboardController;\r\n}());\r\nvar TypeLabelControllerState;\r\n(function (TypeLabelControllerState) {\r\n    TypeLabelControllerState[TypeLabelControllerState[\"Idle\"] = 0] = \"Idle\";\r\n    TypeLabelControllerState[TypeLabelControllerState[\"Typing\"] = 1] = \"Typing\";\r\n})(TypeLabelControllerState || (TypeLabelControllerState = {}));\r\nexport var DefaultKeyboardNavigationDelegate = new /** @class */ (function () {\r\n    function class_1() {\r\n    }\r\n    class_1.prototype.mightProducePrintableCharacter = function (event) {\r\n        if (event.ctrlKey || event.metaKey || event.altKey) {\r\n            return false;\r\n        }\r\n        return (event.keyCode >= 31 /* KEY_A */ && event.keyCode <= 56 /* KEY_Z */)\r\n            || (event.keyCode >= 21 /* KEY_0 */ && event.keyCode <= 30 /* KEY_9 */)\r\n            || (event.keyCode >= 93 /* NUMPAD_0 */ && event.keyCode <= 102 /* NUMPAD_9 */)\r\n            || (event.keyCode >= 80 /* US_SEMICOLON */ && event.keyCode <= 90 /* US_QUOTE */);\r\n    };\r\n    return class_1;\r\n}());\r\nvar TypeLabelController = /** @class */ (function () {\r\n    function TypeLabelController(list, view, keyboardNavigationLabelProvider, delegate) {\r\n        this.list = list;\r\n        this.view = view;\r\n        this.keyboardNavigationLabelProvider = keyboardNavigationLabelProvider;\r\n        this.delegate = delegate;\r\n        this.enabled = false;\r\n        this.state = TypeLabelControllerState.Idle;\r\n        this.automaticKeyboardNavigation = true;\r\n        this.triggered = false;\r\n        this.enabledDisposables = new DisposableStore();\r\n        this.disposables = new DisposableStore();\r\n        this.updateOptions(list.options);\r\n    }\r\n    TypeLabelController.prototype.updateOptions = function (options) {\r\n        var enableKeyboardNavigation = typeof options.enableKeyboardNavigation === 'undefined' ? true : !!options.enableKeyboardNavigation;\r\n        if (enableKeyboardNavigation) {\r\n            this.enable();\r\n        }\r\n        else {\r\n            this.disable();\r\n        }\r\n        if (typeof options.automaticKeyboardNavigation !== 'undefined') {\r\n            this.automaticKeyboardNavigation = options.automaticKeyboardNavigation;\r\n        }\r\n    };\r\n    TypeLabelController.prototype.enable = function () {\r\n        var _this = this;\r\n        if (this.enabled) {\r\n            return;\r\n        }\r\n        var onChar = Event.chain(domEvent(this.view.domNode, 'keydown'))\r\n            .filter(function (e) { return !isInputElement(e.target); })\r\n            .filter(function () { return _this.automaticKeyboardNavigation || _this.triggered; })\r\n            .map(function (event) { return new StandardKeyboardEvent(event); })\r\n            .filter(function (e) { return _this.delegate.mightProducePrintableCharacter(e); })\r\n            .forEach(function (e) { e.stopPropagation(); e.preventDefault(); })\r\n            .map(function (event) { return event.browserEvent.key; })\r\n            .event;\r\n        var onClear = Event.debounce(onChar, function () { return null; }, 800);\r\n        var onInput = Event.reduce(Event.any(onChar, onClear), function (r, i) { return i === null ? null : ((r || '') + i); });\r\n        onInput(this.onInput, this, this.enabledDisposables);\r\n        this.enabled = true;\r\n        this.triggered = false;\r\n    };\r\n    TypeLabelController.prototype.disable = function () {\r\n        if (!this.enabled) {\r\n            return;\r\n        }\r\n        this.enabledDisposables.clear();\r\n        this.enabled = false;\r\n        this.triggered = false;\r\n    };\r\n    TypeLabelController.prototype.onInput = function (word) {\r\n        if (!word) {\r\n            this.state = TypeLabelControllerState.Idle;\r\n            this.triggered = false;\r\n            return;\r\n        }\r\n        var focus = this.list.getFocus();\r\n        var start = focus.length > 0 ? focus[0] : 0;\r\n        var delta = this.state === TypeLabelControllerState.Idle ? 1 : 0;\r\n        this.state = TypeLabelControllerState.Typing;\r\n        for (var i = 0; i < this.list.length; i++) {\r\n            var index = (start + i + delta) % this.list.length;\r\n            var label = this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(index));\r\n            var labelStr = label && label.toString();\r\n            if (typeof labelStr === 'undefined' || matchesPrefix(word, labelStr)) {\r\n                this.list.setFocus([index]);\r\n                this.list.reveal(index);\r\n                return;\r\n            }\r\n        }\r\n    };\r\n    TypeLabelController.prototype.dispose = function () {\r\n        this.disable();\r\n        this.enabledDisposables.dispose();\r\n        this.disposables.dispose();\r\n    };\r\n    return TypeLabelController;\r\n}());\r\nvar DOMFocusController = /** @class */ (function () {\r\n    function DOMFocusController(list, view) {\r\n        this.list = list;\r\n        this.view = view;\r\n        this.disposables = new DisposableStore();\r\n        var onKeyDown = Event.chain(domEvent(view.domNode, 'keydown'))\r\n            .filter(function (e) { return !isInputElement(e.target); })\r\n            .map(function (e) { return new StandardKeyboardEvent(e); });\r\n        onKeyDown.filter(function (e) { return e.keyCode === 2 /* Tab */ && !e.ctrlKey && !e.metaKey && !e.shiftKey && !e.altKey; })\r\n            .on(this.onTab, this, this.disposables);\r\n    }\r\n    DOMFocusController.prototype.onTab = function (e) {\r\n        if (e.target !== this.view.domNode) {\r\n            return;\r\n        }\r\n        var focus = this.list.getFocus();\r\n        if (focus.length === 0) {\r\n            return;\r\n        }\r\n        var focusedDomElement = this.view.domElement(focus[0]);\r\n        if (!focusedDomElement) {\r\n            return;\r\n        }\r\n        var tabIndexElement = focusedDomElement.querySelector('[tabIndex]');\r\n        if (!tabIndexElement || !(tabIndexElement instanceof HTMLElement) || tabIndexElement.tabIndex === -1) {\r\n            return;\r\n        }\r\n        var style = window.getComputedStyle(tabIndexElement);\r\n        if (style.visibility === 'hidden' || style.display === 'none') {\r\n            return;\r\n        }\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        tabIndexElement.focus();\r\n    };\r\n    DOMFocusController.prototype.dispose = function () {\r\n        this.disposables.dispose();\r\n    };\r\n    return DOMFocusController;\r\n}());\r\nexport function isSelectionSingleChangeEvent(event) {\r\n    return platform.isMacintosh ? event.browserEvent.metaKey : event.browserEvent.ctrlKey;\r\n}\r\nexport function isSelectionRangeChangeEvent(event) {\r\n    return event.browserEvent.shiftKey;\r\n}\r\nfunction isMouseRightClick(event) {\r\n    return event instanceof MouseEvent && event.button === 2;\r\n}\r\nvar DefaultMultipleSelectionController = {\r\n    isSelectionSingleChangeEvent: isSelectionSingleChangeEvent,\r\n    isSelectionRangeChangeEvent: isSelectionRangeChangeEvent\r\n};\r\nvar DefaultOpenController = {\r\n    shouldOpen: function (event) {\r\n        if (event instanceof MouseEvent) {\r\n            return !isMouseRightClick(event);\r\n        }\r\n        return true;\r\n    }\r\n};\r\nvar MouseController = /** @class */ (function () {\r\n    function MouseController(list) {\r\n        this.list = list;\r\n        this.disposables = new DisposableStore();\r\n        this.multipleSelectionSupport = !(list.options.multipleSelectionSupport === false);\r\n        if (this.multipleSelectionSupport) {\r\n            this.multipleSelectionController = list.options.multipleSelectionController || DefaultMultipleSelectionController;\r\n        }\r\n        this.openController = list.options.openController || DefaultOpenController;\r\n        this.mouseSupport = typeof list.options.mouseSupport === 'undefined' || !!list.options.mouseSupport;\r\n        if (this.mouseSupport) {\r\n            list.onMouseDown(this.onMouseDown, this, this.disposables);\r\n            list.onContextMenu(this.onContextMenu, this, this.disposables);\r\n            list.onMouseDblClick(this.onDoubleClick, this, this.disposables);\r\n            list.onTouchStart(this.onMouseDown, this, this.disposables);\r\n            this.disposables.add(Gesture.addTarget(list.getHTMLElement()));\r\n        }\r\n        list.onMouseClick(this.onPointer, this, this.disposables);\r\n        list.onMouseMiddleClick(this.onPointer, this, this.disposables);\r\n        list.onTap(this.onPointer, this, this.disposables);\r\n    }\r\n    MouseController.prototype.isSelectionSingleChangeEvent = function (event) {\r\n        if (this.multipleSelectionController) {\r\n            return this.multipleSelectionController.isSelectionSingleChangeEvent(event);\r\n        }\r\n        return platform.isMacintosh ? event.browserEvent.metaKey : event.browserEvent.ctrlKey;\r\n    };\r\n    MouseController.prototype.isSelectionRangeChangeEvent = function (event) {\r\n        if (this.multipleSelectionController) {\r\n            return this.multipleSelectionController.isSelectionRangeChangeEvent(event);\r\n        }\r\n        return event.browserEvent.shiftKey;\r\n    };\r\n    MouseController.prototype.isSelectionChangeEvent = function (event) {\r\n        return this.isSelectionSingleChangeEvent(event) || this.isSelectionRangeChangeEvent(event);\r\n    };\r\n    MouseController.prototype.onMouseDown = function (e) {\r\n        if (document.activeElement !== e.browserEvent.target) {\r\n            this.list.domFocus();\r\n        }\r\n    };\r\n    MouseController.prototype.onContextMenu = function (e) {\r\n        var focus = typeof e.index === 'undefined' ? [] : [e.index];\r\n        this.list.setFocus(focus, e.browserEvent);\r\n    };\r\n    MouseController.prototype.onPointer = function (e) {\r\n        if (!this.mouseSupport) {\r\n            return;\r\n        }\r\n        if (isInputElement(e.browserEvent.target)) {\r\n            return;\r\n        }\r\n        var reference = this.list.getFocus()[0];\r\n        var selection = this.list.getSelection();\r\n        reference = reference === undefined ? selection[0] : reference;\r\n        var focus = e.index;\r\n        if (typeof focus === 'undefined') {\r\n            this.list.setFocus([], e.browserEvent);\r\n            this.list.setSelection([], e.browserEvent);\r\n            return;\r\n        }\r\n        if (this.multipleSelectionSupport && this.isSelectionRangeChangeEvent(e)) {\r\n            return this.changeSelection(e, reference);\r\n        }\r\n        if (this.multipleSelectionSupport && this.isSelectionChangeEvent(e)) {\r\n            return this.changeSelection(e, reference);\r\n        }\r\n        this.list.setFocus([focus], e.browserEvent);\r\n        if (!isMouseRightClick(e.browserEvent)) {\r\n            this.list.setSelection([focus], e.browserEvent);\r\n            if (this.openController.shouldOpen(e.browserEvent)) {\r\n                this.list.open([focus], e.browserEvent);\r\n            }\r\n        }\r\n    };\r\n    MouseController.prototype.onDoubleClick = function (e) {\r\n        if (isInputElement(e.browserEvent.target)) {\r\n            return;\r\n        }\r\n        if (this.multipleSelectionSupport && this.isSelectionChangeEvent(e)) {\r\n            return;\r\n        }\r\n        var focus = this.list.getFocus();\r\n        this.list.setSelection(focus, e.browserEvent);\r\n        this.list.pin(focus);\r\n    };\r\n    MouseController.prototype.changeSelection = function (e, reference) {\r\n        var focus = e.index;\r\n        if (this.isSelectionRangeChangeEvent(e) && reference !== undefined) {\r\n            var min = Math.min(reference, focus);\r\n            var max = Math.max(reference, focus);\r\n            var rangeSelection = range(min, max + 1);\r\n            var selection = this.list.getSelection();\r\n            var contiguousRange = getContiguousRangeContaining(disjunction(selection, [reference]), reference);\r\n            if (contiguousRange.length === 0) {\r\n                return;\r\n            }\r\n            var newSelection = disjunction(rangeSelection, relativeComplement(selection, contiguousRange));\r\n            this.list.setSelection(newSelection, e.browserEvent);\r\n        }\r\n        else if (this.isSelectionSingleChangeEvent(e)) {\r\n            var selection = this.list.getSelection();\r\n            var newSelection = selection.filter(function (i) { return i !== focus; });\r\n            this.list.setFocus([focus]);\r\n            if (selection.length === newSelection.length) {\r\n                this.list.setSelection(__spreadArrays(newSelection, [focus]), e.browserEvent);\r\n            }\r\n            else {\r\n                this.list.setSelection(newSelection, e.browserEvent);\r\n            }\r\n        }\r\n    };\r\n    MouseController.prototype.dispose = function () {\r\n        this.disposables.dispose();\r\n    };\r\n    return MouseController;\r\n}());\r\nexport { MouseController };\r\nvar DefaultStyleController = /** @class */ (function () {\r\n    function DefaultStyleController(styleElement, selectorSuffix) {\r\n        this.styleElement = styleElement;\r\n        this.selectorSuffix = selectorSuffix;\r\n    }\r\n    DefaultStyleController.prototype.style = function (styles) {\r\n        var suffix = this.selectorSuffix && \".\" + this.selectorSuffix;\r\n        var content = [];\r\n        if (styles.listBackground) {\r\n            if (styles.listBackground.isOpaque()) {\r\n                content.push(\".monaco-list\" + suffix + \" .monaco-list-rows { background: \" + styles.listBackground + \"; }\");\r\n            }\r\n            else if (!platform.isMacintosh) { // subpixel AA doesn't exist in macOS\r\n                console.warn(\"List with id '\" + this.selectorSuffix + \"' was styled with a non-opaque background color. This will break sub-pixel antialiasing.\");\r\n            }\r\n        }\r\n        if (styles.listFocusBackground) {\r\n            content.push(\".monaco-list\" + suffix + \":focus .monaco-list-row.focused { background-color: \" + styles.listFocusBackground + \"; }\");\r\n            content.push(\".monaco-list\" + suffix + \":focus .monaco-list-row.focused:hover { background-color: \" + styles.listFocusBackground + \"; }\"); // overwrite :hover style in this case!\r\n        }\r\n        if (styles.listFocusForeground) {\r\n            content.push(\".monaco-list\" + suffix + \":focus .monaco-list-row.focused { color: \" + styles.listFocusForeground + \"; }\");\r\n        }\r\n        if (styles.listActiveSelectionBackground) {\r\n            content.push(\".monaco-list\" + suffix + \":focus .monaco-list-row.selected { background-color: \" + styles.listActiveSelectionBackground + \"; }\");\r\n            content.push(\".monaco-list\" + suffix + \":focus .monaco-list-row.selected:hover { background-color: \" + styles.listActiveSelectionBackground + \"; }\"); // overwrite :hover style in this case!\r\n        }\r\n        if (styles.listActiveSelectionForeground) {\r\n            content.push(\".monaco-list\" + suffix + \":focus .monaco-list-row.selected { color: \" + styles.listActiveSelectionForeground + \"; }\");\r\n        }\r\n        if (styles.listFocusAndSelectionBackground) {\r\n            content.push(\"\\n\\t\\t\\t\\t.monaco-drag-image,\\n\\t\\t\\t\\t.monaco-list\" + suffix + \":focus .monaco-list-row.selected.focused { background-color: \" + styles.listFocusAndSelectionBackground + \"; }\\n\\t\\t\\t\");\r\n        }\r\n        if (styles.listFocusAndSelectionForeground) {\r\n            content.push(\"\\n\\t\\t\\t\\t.monaco-drag-image,\\n\\t\\t\\t\\t.monaco-list\" + suffix + \":focus .monaco-list-row.selected.focused { color: \" + styles.listFocusAndSelectionForeground + \"; }\\n\\t\\t\\t\");\r\n        }\r\n        if (styles.listInactiveFocusBackground) {\r\n            content.push(\".monaco-list\" + suffix + \" .monaco-list-row.focused { background-color:  \" + styles.listInactiveFocusBackground + \"; }\");\r\n            content.push(\".monaco-list\" + suffix + \" .monaco-list-row.focused:hover { background-color:  \" + styles.listInactiveFocusBackground + \"; }\"); // overwrite :hover style in this case!\r\n        }\r\n        if (styles.listInactiveSelectionBackground) {\r\n            content.push(\".monaco-list\" + suffix + \" .monaco-list-row.selected { background-color:  \" + styles.listInactiveSelectionBackground + \"; }\");\r\n            content.push(\".monaco-list\" + suffix + \" .monaco-list-row.selected:hover { background-color:  \" + styles.listInactiveSelectionBackground + \"; }\"); // overwrite :hover style in this case!\r\n        }\r\n        if (styles.listInactiveSelectionForeground) {\r\n            content.push(\".monaco-list\" + suffix + \" .monaco-list-row.selected { color: \" + styles.listInactiveSelectionForeground + \"; }\");\r\n        }\r\n        if (styles.listHoverBackground) {\r\n            content.push(\".monaco-list\" + suffix + \":not(.drop-target) .monaco-list-row:hover:not(.selected):not(.focused) { background-color:  \" + styles.listHoverBackground + \"; }\");\r\n        }\r\n        if (styles.listHoverForeground) {\r\n            content.push(\".monaco-list\" + suffix + \" .monaco-list-row:hover:not(.selected):not(.focused) { color:  \" + styles.listHoverForeground + \"; }\");\r\n        }\r\n        if (styles.listSelectionOutline) {\r\n            content.push(\".monaco-list\" + suffix + \" .monaco-list-row.selected { outline: 1px dotted \" + styles.listSelectionOutline + \"; outline-offset: -1px; }\");\r\n        }\r\n        if (styles.listFocusOutline) {\r\n            content.push(\"\\n\\t\\t\\t\\t.monaco-drag-image,\\n\\t\\t\\t\\t.monaco-list\" + suffix + \":focus .monaco-list-row.focused { outline: 1px solid \" + styles.listFocusOutline + \"; outline-offset: -1px; }\\n\\t\\t\\t\");\r\n        }\r\n        if (styles.listInactiveFocusOutline) {\r\n            content.push(\".monaco-list\" + suffix + \" .monaco-list-row.focused { outline: 1px dotted \" + styles.listInactiveFocusOutline + \"; outline-offset: -1px; }\");\r\n        }\r\n        if (styles.listHoverOutline) {\r\n            content.push(\".monaco-list\" + suffix + \" .monaco-list-row:hover { outline: 1px dashed \" + styles.listHoverOutline + \"; outline-offset: -1px; }\");\r\n        }\r\n        if (styles.listDropBackground) {\r\n            content.push(\"\\n\\t\\t\\t\\t.monaco-list\" + suffix + \".drop-target,\\n\\t\\t\\t\\t.monaco-list\" + suffix + \" .monaco-list-rows.drop-target,\\n\\t\\t\\t\\t.monaco-list\" + suffix + \" .monaco-list-row.drop-target { background-color: \" + styles.listDropBackground + \" !important; color: inherit !important; }\\n\\t\\t\\t\");\r\n        }\r\n        if (styles.listFilterWidgetBackground) {\r\n            content.push(\".monaco-list-type-filter { background-color: \" + styles.listFilterWidgetBackground + \" }\");\r\n        }\r\n        if (styles.listFilterWidgetOutline) {\r\n            content.push(\".monaco-list-type-filter { border: 1px solid \" + styles.listFilterWidgetOutline + \"; }\");\r\n        }\r\n        if (styles.listFilterWidgetNoMatchesOutline) {\r\n            content.push(\".monaco-list-type-filter.no-matches { border: 1px solid \" + styles.listFilterWidgetNoMatchesOutline + \"; }\");\r\n        }\r\n        if (styles.listMatchesShadow) {\r\n            content.push(\".monaco-list-type-filter { box-shadow: 1px 1px 1px \" + styles.listMatchesShadow + \"; }\");\r\n        }\r\n        var newStyles = content.join('\\n');\r\n        if (newStyles !== this.styleElement.innerHTML) {\r\n            this.styleElement.innerHTML = newStyles;\r\n        }\r\n    };\r\n    return DefaultStyleController;\r\n}());\r\nexport { DefaultStyleController };\r\nvar defaultStyles = {\r\n    listFocusBackground: Color.fromHex('#7FB0D0'),\r\n    listActiveSelectionBackground: Color.fromHex('#0E639C'),\r\n    listActiveSelectionForeground: Color.fromHex('#FFFFFF'),\r\n    listFocusAndSelectionBackground: Color.fromHex('#094771'),\r\n    listFocusAndSelectionForeground: Color.fromHex('#FFFFFF'),\r\n    listInactiveSelectionBackground: Color.fromHex('#3F3F46'),\r\n    listHoverBackground: Color.fromHex('#2A2D2E'),\r\n    listDropBackground: Color.fromHex('#383B3D'),\r\n    treeIndentGuidesStroke: Color.fromHex('#a9a9a9')\r\n};\r\nvar DefaultOptions = {\r\n    keyboardSupport: true,\r\n    mouseSupport: true,\r\n    multipleSelectionSupport: true,\r\n    dnd: {\r\n        getDragURI: function () { return null; },\r\n        onDragStart: function () { },\r\n        onDragOver: function () { return false; },\r\n        drop: function () { }\r\n    },\r\n    ariaRootRole: ListAriaRootRole.TREE\r\n};\r\n// TODO@Joao: move these utils into a SortedArray class\r\nfunction getContiguousRangeContaining(range, value) {\r\n    var index = range.indexOf(value);\r\n    if (index === -1) {\r\n        return [];\r\n    }\r\n    var result = [];\r\n    var i = index - 1;\r\n    while (i >= 0 && range[i] === value - (index - i)) {\r\n        result.push(range[i--]);\r\n    }\r\n    result.reverse();\r\n    i = index;\r\n    while (i < range.length && range[i] === value + (i - index)) {\r\n        result.push(range[i++]);\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Given two sorted collections of numbers, returns the intersection\r\n * between them (OR).\r\n */\r\nfunction disjunction(one, other) {\r\n    var result = [];\r\n    var i = 0, j = 0;\r\n    while (i < one.length || j < other.length) {\r\n        if (i >= one.length) {\r\n            result.push(other[j++]);\r\n        }\r\n        else if (j >= other.length) {\r\n            result.push(one[i++]);\r\n        }\r\n        else if (one[i] === other[j]) {\r\n            result.push(one[i]);\r\n            i++;\r\n            j++;\r\n            continue;\r\n        }\r\n        else if (one[i] < other[j]) {\r\n            result.push(one[i++]);\r\n        }\r\n        else {\r\n            result.push(other[j++]);\r\n        }\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Given two sorted collections of numbers, returns the relative\r\n * complement between them (XOR).\r\n */\r\nfunction relativeComplement(one, other) {\r\n    var result = [];\r\n    var i = 0, j = 0;\r\n    while (i < one.length || j < other.length) {\r\n        if (i >= one.length) {\r\n            result.push(other[j++]);\r\n        }\r\n        else if (j >= other.length) {\r\n            result.push(one[i++]);\r\n        }\r\n        else if (one[i] === other[j]) {\r\n            i++;\r\n            j++;\r\n            continue;\r\n        }\r\n        else if (one[i] < other[j]) {\r\n            result.push(one[i++]);\r\n        }\r\n        else {\r\n            j++;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nvar numericSort = function (a, b) { return a - b; };\r\nvar PipelineRenderer = /** @class */ (function () {\r\n    function PipelineRenderer(_templateId, renderers) {\r\n        this._templateId = _templateId;\r\n        this.renderers = renderers;\r\n    }\r\n    Object.defineProperty(PipelineRenderer.prototype, \"templateId\", {\r\n        get: function () {\r\n            return this._templateId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    PipelineRenderer.prototype.renderTemplate = function (container) {\r\n        return this.renderers.map(function (r) { return r.renderTemplate(container); });\r\n    };\r\n    PipelineRenderer.prototype.renderElement = function (element, index, templateData, height) {\r\n        var i = 0;\r\n        for (var _i = 0, _a = this.renderers; _i < _a.length; _i++) {\r\n            var renderer = _a[_i];\r\n            renderer.renderElement(element, index, templateData[i++], height);\r\n        }\r\n    };\r\n    PipelineRenderer.prototype.disposeElement = function (element, index, templateData, height) {\r\n        var i = 0;\r\n        for (var _i = 0, _a = this.renderers; _i < _a.length; _i++) {\r\n            var renderer = _a[_i];\r\n            if (renderer.disposeElement) {\r\n                renderer.disposeElement(element, index, templateData[i], height);\r\n            }\r\n            i += 1;\r\n        }\r\n    };\r\n    PipelineRenderer.prototype.disposeTemplate = function (templateData) {\r\n        var i = 0;\r\n        for (var _i = 0, _a = this.renderers; _i < _a.length; _i++) {\r\n            var renderer = _a[_i];\r\n            renderer.disposeTemplate(templateData[i++]);\r\n        }\r\n    };\r\n    return PipelineRenderer;\r\n}());\r\nvar AccessibiltyRenderer = /** @class */ (function () {\r\n    function AccessibiltyRenderer(accessibilityProvider) {\r\n        this.accessibilityProvider = accessibilityProvider;\r\n        this.templateId = 'a18n';\r\n    }\r\n    AccessibiltyRenderer.prototype.renderTemplate = function (container) {\r\n        return container;\r\n    };\r\n    AccessibiltyRenderer.prototype.renderElement = function (element, index, container) {\r\n        var ariaLabel = this.accessibilityProvider.getAriaLabel(element);\r\n        if (ariaLabel) {\r\n            container.setAttribute('aria-label', ariaLabel);\r\n        }\r\n        else {\r\n            container.removeAttribute('aria-label');\r\n        }\r\n        var ariaLevel = this.accessibilityProvider.getAriaLevel && this.accessibilityProvider.getAriaLevel(element);\r\n        if (typeof ariaLevel === 'number') {\r\n            container.setAttribute('aria-level', \"\" + ariaLevel);\r\n        }\r\n        else {\r\n            container.removeAttribute('aria-level');\r\n        }\r\n    };\r\n    AccessibiltyRenderer.prototype.disposeTemplate = function (templateData) {\r\n        // noop\r\n    };\r\n    return AccessibiltyRenderer;\r\n}());\r\nvar ListViewDragAndDrop = /** @class */ (function () {\r\n    function ListViewDragAndDrop(list, dnd) {\r\n        this.list = list;\r\n        this.dnd = dnd;\r\n    }\r\n    ListViewDragAndDrop.prototype.getDragElements = function (element) {\r\n        var selection = this.list.getSelectedElements();\r\n        var elements = selection.indexOf(element) > -1 ? selection : [element];\r\n        return elements;\r\n    };\r\n    ListViewDragAndDrop.prototype.getDragURI = function (element) {\r\n        return this.dnd.getDragURI(element);\r\n    };\r\n    ListViewDragAndDrop.prototype.getDragLabel = function (elements, originalEvent) {\r\n        if (this.dnd.getDragLabel) {\r\n            return this.dnd.getDragLabel(elements, originalEvent);\r\n        }\r\n        return undefined;\r\n    };\r\n    ListViewDragAndDrop.prototype.onDragStart = function (data, originalEvent) {\r\n        if (this.dnd.onDragStart) {\r\n            this.dnd.onDragStart(data, originalEvent);\r\n        }\r\n    };\r\n    ListViewDragAndDrop.prototype.onDragOver = function (data, targetElement, targetIndex, originalEvent) {\r\n        return this.dnd.onDragOver(data, targetElement, targetIndex, originalEvent);\r\n    };\r\n    ListViewDragAndDrop.prototype.onDragEnd = function (originalEvent) {\r\n        if (this.dnd.onDragEnd) {\r\n            this.dnd.onDragEnd(originalEvent);\r\n        }\r\n    };\r\n    ListViewDragAndDrop.prototype.drop = function (data, targetElement, targetIndex, originalEvent) {\r\n        this.dnd.drop(data, targetElement, targetIndex, originalEvent);\r\n    };\r\n    return ListViewDragAndDrop;\r\n}());\r\nvar List = /** @class */ (function () {\r\n    function List(user, container, virtualDelegate, renderers, _options) {\r\n        if (_options === void 0) { _options = DefaultOptions; }\r\n        this.user = user;\r\n        this._options = _options;\r\n        this.eventBufferer = new EventBufferer();\r\n        this.disposables = new DisposableStore();\r\n        this._onDidOpen = new Emitter();\r\n        this.onDidOpen = this._onDidOpen.event;\r\n        this._onDidPin = new Emitter();\r\n        this.didJustPressContextMenuKey = false;\r\n        this._onDidDispose = new Emitter();\r\n        this.onDidDispose = this._onDidDispose.event;\r\n        this.focus = new FocusTrait();\r\n        this.selection = new Trait('selected');\r\n        mixin(_options, defaultStyles, false);\r\n        var baseRenderers = [this.focus.renderer, this.selection.renderer];\r\n        this.accessibilityProvider = _options.accessibilityProvider;\r\n        if (this.accessibilityProvider) {\r\n            baseRenderers.push(new AccessibiltyRenderer(this.accessibilityProvider));\r\n            if (this.accessibilityProvider.onDidChangeActiveDescendant) {\r\n                this.accessibilityProvider.onDidChangeActiveDescendant(this.onDidChangeActiveDescendant, this, this.disposables);\r\n            }\r\n        }\r\n        renderers = renderers.map(function (r) { return new PipelineRenderer(r.templateId, __spreadArrays(baseRenderers, [r])); });\r\n        var viewOptions = __assign(__assign({}, _options), { dnd: _options.dnd && new ListViewDragAndDrop(this, _options.dnd) });\r\n        this.view = new ListView(container, virtualDelegate, renderers, viewOptions);\r\n        if (typeof _options.ariaRole !== 'string') {\r\n            this.view.domNode.setAttribute('role', ListAriaRootRole.TREE);\r\n        }\r\n        else {\r\n            this.view.domNode.setAttribute('role', _options.ariaRole);\r\n        }\r\n        if (_options.styleController) {\r\n            this.styleController = _options.styleController(this.view.domId);\r\n        }\r\n        else {\r\n            var styleElement = DOM.createStyleSheet(this.view.domNode);\r\n            this.styleController = new DefaultStyleController(styleElement, this.view.domId);\r\n        }\r\n        this.spliceable = new CombinedSpliceable([\r\n            new TraitSpliceable(this.focus, this.view, _options.identityProvider),\r\n            new TraitSpliceable(this.selection, this.view, _options.identityProvider),\r\n            this.view\r\n        ]);\r\n        this.disposables.add(this.focus);\r\n        this.disposables.add(this.selection);\r\n        this.disposables.add(this.view);\r\n        this.disposables.add(this._onDidDispose);\r\n        this.onDidFocus = Event.map(domEvent(this.view.domNode, 'focus', true), function () { return null; });\r\n        this.onDidBlur = Event.map(domEvent(this.view.domNode, 'blur', true), function () { return null; });\r\n        this.disposables.add(new DOMFocusController(this, this.view));\r\n        if (typeof _options.keyboardSupport !== 'boolean' || _options.keyboardSupport) {\r\n            var controller = new KeyboardController(this, this.view, _options);\r\n            this.disposables.add(controller);\r\n        }\r\n        if (_options.keyboardNavigationLabelProvider) {\r\n            var delegate = _options.keyboardNavigationDelegate || DefaultKeyboardNavigationDelegate;\r\n            this.typeLabelController = new TypeLabelController(this, this.view, _options.keyboardNavigationLabelProvider, delegate);\r\n            this.disposables.add(this.typeLabelController);\r\n        }\r\n        this.disposables.add(this.createMouseController(_options));\r\n        this.onFocusChange(this._onFocusChange, this, this.disposables);\r\n        this.onSelectionChange(this._onSelectionChange, this, this.disposables);\r\n        if (_options.ariaLabel) {\r\n            this.view.domNode.setAttribute('aria-label', localize('aria list', \"{0}. Use the navigation keys to navigate.\", _options.ariaLabel));\r\n        }\r\n    }\r\n    Object.defineProperty(List.prototype, \"onFocusChange\", {\r\n        get: function () {\r\n            var _this = this;\r\n            return Event.map(this.eventBufferer.wrapEvent(this.focus.onChange), function (e) { return _this.toListEvent(e); });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(List.prototype, \"onSelectionChange\", {\r\n        get: function () {\r\n            var _this = this;\r\n            return Event.map(this.eventBufferer.wrapEvent(this.selection.onChange), function (e) { return _this.toListEvent(e); });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(List.prototype, \"domId\", {\r\n        get: function () { return this.view.domId; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(List.prototype, \"onMouseClick\", {\r\n        get: function () { return this.view.onMouseClick; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(List.prototype, \"onMouseDblClick\", {\r\n        get: function () { return this.view.onMouseDblClick; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(List.prototype, \"onMouseMiddleClick\", {\r\n        get: function () { return this.view.onMouseMiddleClick; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(List.prototype, \"onMouseDown\", {\r\n        get: function () { return this.view.onMouseDown; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(List.prototype, \"onTouchStart\", {\r\n        get: function () { return this.view.onTouchStart; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(List.prototype, \"onTap\", {\r\n        get: function () { return this.view.onTap; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(List.prototype, \"onContextMenu\", {\r\n        get: function () {\r\n            var _this = this;\r\n            var fromKeydown = Event.chain(domEvent(this.view.domNode, 'keydown'))\r\n                .map(function (e) { return new StandardKeyboardEvent(e); })\r\n                .filter(function (e) { return _this.didJustPressContextMenuKey = e.keyCode === 58 /* ContextMenu */ || (e.shiftKey && e.keyCode === 68 /* F10 */); })\r\n                .filter(function (e) { e.preventDefault(); e.stopPropagation(); return false; })\r\n                .event;\r\n            var fromKeyup = Event.chain(domEvent(this.view.domNode, 'keyup'))\r\n                .filter(function () {\r\n                var didJustPressContextMenuKey = _this.didJustPressContextMenuKey;\r\n                _this.didJustPressContextMenuKey = false;\r\n                return didJustPressContextMenuKey;\r\n            })\r\n                .filter(function () { return _this.getFocus().length > 0 && !!_this.view.domElement(_this.getFocus()[0]); })\r\n                .map(function (browserEvent) {\r\n                var index = _this.getFocus()[0];\r\n                var element = _this.view.element(index);\r\n                var anchor = _this.view.domElement(index);\r\n                return { index: index, element: element, anchor: anchor, browserEvent: browserEvent };\r\n            })\r\n                .event;\r\n            var fromMouse = Event.chain(this.view.onContextMenu)\r\n                .filter(function () { return !_this.didJustPressContextMenuKey; })\r\n                .map(function (_a) {\r\n                var element = _a.element, index = _a.index, browserEvent = _a.browserEvent;\r\n                return ({ element: element, index: index, anchor: { x: browserEvent.clientX + 1, y: browserEvent.clientY }, browserEvent: browserEvent });\r\n            })\r\n                .event;\r\n            return Event.any(fromKeydown, fromKeyup, fromMouse);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(List.prototype, \"onKeyDown\", {\r\n        get: function () { return domEvent(this.view.domNode, 'keydown'); },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    List.prototype.createMouseController = function (options) {\r\n        return new MouseController(this);\r\n    };\r\n    List.prototype.updateOptions = function (optionsUpdate) {\r\n        if (optionsUpdate === void 0) { optionsUpdate = {}; }\r\n        this._options = __assign(__assign({}, this._options), optionsUpdate);\r\n        if (this.typeLabelController) {\r\n            this.typeLabelController.updateOptions(this._options);\r\n        }\r\n    };\r\n    Object.defineProperty(List.prototype, \"options\", {\r\n        get: function () {\r\n            return this._options;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    List.prototype.splice = function (start, deleteCount, elements) {\r\n        var _this = this;\r\n        if (elements === void 0) { elements = []; }\r\n        if (start < 0 || start > this.view.length) {\r\n            throw new ListError(this.user, \"Invalid start index: \" + start);\r\n        }\r\n        if (deleteCount < 0) {\r\n            throw new ListError(this.user, \"Invalid delete count: \" + deleteCount);\r\n        }\r\n        if (deleteCount === 0 && elements.length === 0) {\r\n            return;\r\n        }\r\n        this.eventBufferer.bufferEvents(function () { return _this.spliceable.splice(start, deleteCount, elements); });\r\n    };\r\n    List.prototype.rerender = function () {\r\n        this.view.rerender();\r\n    };\r\n    List.prototype.element = function (index) {\r\n        return this.view.element(index);\r\n    };\r\n    Object.defineProperty(List.prototype, \"length\", {\r\n        get: function () {\r\n            return this.view.length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(List.prototype, \"contentHeight\", {\r\n        get: function () {\r\n            return this.view.contentHeight;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(List.prototype, \"scrollTop\", {\r\n        get: function () {\r\n            return this.view.getScrollTop();\r\n        },\r\n        set: function (scrollTop) {\r\n            this.view.setScrollTop(scrollTop);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    List.prototype.domFocus = function () {\r\n        this.view.domNode.focus();\r\n    };\r\n    List.prototype.layout = function (height, width) {\r\n        this.view.layout(height, width);\r\n    };\r\n    List.prototype.setSelection = function (indexes, browserEvent) {\r\n        for (var _i = 0, indexes_1 = indexes; _i < indexes_1.length; _i++) {\r\n            var index = indexes_1[_i];\r\n            if (index < 0 || index >= this.length) {\r\n                throw new ListError(this.user, \"Invalid index \" + index);\r\n            }\r\n        }\r\n        this.selection.set(indexes, browserEvent);\r\n    };\r\n    List.prototype.getSelection = function () {\r\n        return this.selection.get();\r\n    };\r\n    List.prototype.getSelectedElements = function () {\r\n        var _this = this;\r\n        return this.getSelection().map(function (i) { return _this.view.element(i); });\r\n    };\r\n    List.prototype.setFocus = function (indexes, browserEvent) {\r\n        for (var _i = 0, indexes_2 = indexes; _i < indexes_2.length; _i++) {\r\n            var index = indexes_2[_i];\r\n            if (index < 0 || index >= this.length) {\r\n                throw new ListError(this.user, \"Invalid index \" + index);\r\n            }\r\n        }\r\n        this.focus.set(indexes, browserEvent);\r\n    };\r\n    List.prototype.focusNext = function (n, loop, browserEvent, filter) {\r\n        if (n === void 0) { n = 1; }\r\n        if (loop === void 0) { loop = false; }\r\n        if (this.length === 0) {\r\n            return;\r\n        }\r\n        var focus = this.focus.get();\r\n        var index = this.findNextIndex(focus.length > 0 ? focus[0] + n : 0, loop, filter);\r\n        if (index > -1) {\r\n            this.setFocus([index], browserEvent);\r\n        }\r\n    };\r\n    List.prototype.focusPrevious = function (n, loop, browserEvent, filter) {\r\n        if (n === void 0) { n = 1; }\r\n        if (loop === void 0) { loop = false; }\r\n        if (this.length === 0) {\r\n            return;\r\n        }\r\n        var focus = this.focus.get();\r\n        var index = this.findPreviousIndex(focus.length > 0 ? focus[0] - n : 0, loop, filter);\r\n        if (index > -1) {\r\n            this.setFocus([index], browserEvent);\r\n        }\r\n    };\r\n    List.prototype.focusNextPage = function (browserEvent, filter) {\r\n        var _this = this;\r\n        var lastPageIndex = this.view.indexAt(this.view.getScrollTop() + this.view.renderHeight);\r\n        lastPageIndex = lastPageIndex === 0 ? 0 : lastPageIndex - 1;\r\n        var lastPageElement = this.view.element(lastPageIndex);\r\n        var currentlyFocusedElement = this.getFocusedElements()[0];\r\n        if (currentlyFocusedElement !== lastPageElement) {\r\n            var lastGoodPageIndex = this.findPreviousIndex(lastPageIndex, false, filter);\r\n            if (lastGoodPageIndex > -1 && currentlyFocusedElement !== this.view.element(lastGoodPageIndex)) {\r\n                this.setFocus([lastGoodPageIndex], browserEvent);\r\n            }\r\n            else {\r\n                this.setFocus([lastPageIndex], browserEvent);\r\n            }\r\n        }\r\n        else {\r\n            var previousScrollTop = this.view.getScrollTop();\r\n            this.view.setScrollTop(previousScrollTop + this.view.renderHeight - this.view.elementHeight(lastPageIndex));\r\n            if (this.view.getScrollTop() !== previousScrollTop) {\r\n                // Let the scroll event listener run\r\n                setTimeout(function () { return _this.focusNextPage(browserEvent, filter); }, 0);\r\n            }\r\n        }\r\n    };\r\n    List.prototype.focusPreviousPage = function (browserEvent, filter) {\r\n        var _this = this;\r\n        var firstPageIndex;\r\n        var scrollTop = this.view.getScrollTop();\r\n        if (scrollTop === 0) {\r\n            firstPageIndex = this.view.indexAt(scrollTop);\r\n        }\r\n        else {\r\n            firstPageIndex = this.view.indexAfter(scrollTop - 1);\r\n        }\r\n        var firstPageElement = this.view.element(firstPageIndex);\r\n        var currentlyFocusedElement = this.getFocusedElements()[0];\r\n        if (currentlyFocusedElement !== firstPageElement) {\r\n            var firstGoodPageIndex = this.findNextIndex(firstPageIndex, false, filter);\r\n            if (firstGoodPageIndex > -1 && currentlyFocusedElement !== this.view.element(firstGoodPageIndex)) {\r\n                this.setFocus([firstGoodPageIndex], browserEvent);\r\n            }\r\n            else {\r\n                this.setFocus([firstPageIndex], browserEvent);\r\n            }\r\n        }\r\n        else {\r\n            var previousScrollTop = scrollTop;\r\n            this.view.setScrollTop(scrollTop - this.view.renderHeight);\r\n            if (this.view.getScrollTop() !== previousScrollTop) {\r\n                // Let the scroll event listener run\r\n                setTimeout(function () { return _this.focusPreviousPage(browserEvent, filter); }, 0);\r\n            }\r\n        }\r\n    };\r\n    List.prototype.focusLast = function (browserEvent, filter) {\r\n        if (this.length === 0) {\r\n            return;\r\n        }\r\n        var index = this.findPreviousIndex(this.length - 1, false, filter);\r\n        if (index > -1) {\r\n            this.setFocus([index], browserEvent);\r\n        }\r\n    };\r\n    List.prototype.focusFirst = function (browserEvent, filter) {\r\n        if (this.length === 0) {\r\n            return;\r\n        }\r\n        var index = this.findNextIndex(0, false, filter);\r\n        if (index > -1) {\r\n            this.setFocus([index], browserEvent);\r\n        }\r\n    };\r\n    List.prototype.findNextIndex = function (index, loop, filter) {\r\n        if (loop === void 0) { loop = false; }\r\n        for (var i = 0; i < this.length; i++) {\r\n            if (index >= this.length && !loop) {\r\n                return -1;\r\n            }\r\n            index = index % this.length;\r\n            if (!filter || filter(this.element(index))) {\r\n                return index;\r\n            }\r\n            index++;\r\n        }\r\n        return -1;\r\n    };\r\n    List.prototype.findPreviousIndex = function (index, loop, filter) {\r\n        if (loop === void 0) { loop = false; }\r\n        for (var i = 0; i < this.length; i++) {\r\n            if (index < 0 && !loop) {\r\n                return -1;\r\n            }\r\n            index = (this.length + (index % this.length)) % this.length;\r\n            if (!filter || filter(this.element(index))) {\r\n                return index;\r\n            }\r\n            index--;\r\n        }\r\n        return -1;\r\n    };\r\n    List.prototype.getFocus = function () {\r\n        return this.focus.get();\r\n    };\r\n    List.prototype.getFocusedElements = function () {\r\n        var _this = this;\r\n        return this.getFocus().map(function (i) { return _this.view.element(i); });\r\n    };\r\n    List.prototype.reveal = function (index, relativeTop) {\r\n        if (index < 0 || index >= this.length) {\r\n            throw new ListError(this.user, \"Invalid index \" + index);\r\n        }\r\n        var scrollTop = this.view.getScrollTop();\r\n        var elementTop = this.view.elementTop(index);\r\n        var elementHeight = this.view.elementHeight(index);\r\n        if (isNumber(relativeTop)) {\r\n            // y = mx + b\r\n            var m = elementHeight - this.view.renderHeight;\r\n            this.view.setScrollTop(m * clamp(relativeTop, 0, 1) + elementTop);\r\n        }\r\n        else {\r\n            var viewItemBottom = elementTop + elementHeight;\r\n            var wrapperBottom = scrollTop + this.view.renderHeight;\r\n            if (elementTop < scrollTop && viewItemBottom >= wrapperBottom) {\r\n                // The element is already overflowing the viewport, no-op\r\n            }\r\n            else if (elementTop < scrollTop) {\r\n                this.view.setScrollTop(elementTop);\r\n            }\r\n            else if (viewItemBottom >= wrapperBottom) {\r\n                this.view.setScrollTop(viewItemBottom - this.view.renderHeight);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Returns the relative position of an element rendered in the list.\r\n     * Returns `null` if the element isn't *entirely* in the visible viewport.\r\n     */\r\n    List.prototype.getRelativeTop = function (index) {\r\n        if (index < 0 || index >= this.length) {\r\n            throw new ListError(this.user, \"Invalid index \" + index);\r\n        }\r\n        var scrollTop = this.view.getScrollTop();\r\n        var elementTop = this.view.elementTop(index);\r\n        var elementHeight = this.view.elementHeight(index);\r\n        if (elementTop < scrollTop || elementTop + elementHeight > scrollTop + this.view.renderHeight) {\r\n            return null;\r\n        }\r\n        // y = mx + b\r\n        var m = elementHeight - this.view.renderHeight;\r\n        return Math.abs((scrollTop - elementTop) / m);\r\n    };\r\n    List.prototype.getHTMLElement = function () {\r\n        return this.view.domNode;\r\n    };\r\n    List.prototype.open = function (indexes, browserEvent) {\r\n        var _this = this;\r\n        for (var _i = 0, indexes_3 = indexes; _i < indexes_3.length; _i++) {\r\n            var index = indexes_3[_i];\r\n            if (index < 0 || index >= this.length) {\r\n                throw new ListError(this.user, \"Invalid index \" + index);\r\n            }\r\n        }\r\n        this._onDidOpen.fire({ indexes: indexes, elements: indexes.map(function (i) { return _this.view.element(i); }), browserEvent: browserEvent });\r\n    };\r\n    List.prototype.pin = function (indexes, browserEvent) {\r\n        var _this = this;\r\n        for (var _i = 0, indexes_4 = indexes; _i < indexes_4.length; _i++) {\r\n            var index = indexes_4[_i];\r\n            if (index < 0 || index >= this.length) {\r\n                throw new ListError(this.user, \"Invalid index \" + index);\r\n            }\r\n        }\r\n        this._onDidPin.fire({ indexes: indexes, elements: indexes.map(function (i) { return _this.view.element(i); }), browserEvent: browserEvent });\r\n    };\r\n    List.prototype.style = function (styles) {\r\n        this.styleController.style(styles);\r\n    };\r\n    List.prototype.toListEvent = function (_a) {\r\n        var _this = this;\r\n        var indexes = _a.indexes, browserEvent = _a.browserEvent;\r\n        return { indexes: indexes, elements: indexes.map(function (i) { return _this.view.element(i); }), browserEvent: browserEvent };\r\n    };\r\n    List.prototype._onFocusChange = function () {\r\n        var focus = this.focus.get();\r\n        DOM.toggleClass(this.view.domNode, 'element-focused', focus.length > 0);\r\n        this.onDidChangeActiveDescendant();\r\n    };\r\n    List.prototype.onDidChangeActiveDescendant = function () {\r\n        var _a;\r\n        var focus = this.focus.get();\r\n        if (focus.length > 0) {\r\n            var id = void 0;\r\n            if ((_a = this.accessibilityProvider) === null || _a === void 0 ? void 0 : _a.getActiveDescendantId) {\r\n                id = this.accessibilityProvider.getActiveDescendantId(this.view.element(focus[0]));\r\n            }\r\n            this.view.domNode.setAttribute('aria-activedescendant', id || this.view.getElementDomId(focus[0]));\r\n        }\r\n        else {\r\n            this.view.domNode.removeAttribute('aria-activedescendant');\r\n        }\r\n    };\r\n    List.prototype._onSelectionChange = function () {\r\n        var selection = this.selection.get();\r\n        DOM.toggleClass(this.view.domNode, 'selection-none', selection.length === 0);\r\n        DOM.toggleClass(this.view.domNode, 'selection-single', selection.length === 1);\r\n        DOM.toggleClass(this.view.domNode, 'selection-multiple', selection.length > 1);\r\n    };\r\n    List.prototype.dispose = function () {\r\n        this._onDidDispose.fire();\r\n        this.disposables.dispose();\r\n        this._onDidOpen.dispose();\r\n        this._onDidPin.dispose();\r\n        this._onDidDispose.dispose();\r\n    };\r\n    __decorate([\r\n        memoize\r\n    ], List.prototype, \"onFocusChange\", null);\r\n    __decorate([\r\n        memoize\r\n    ], List.prototype, \"onSelectionChange\", null);\r\n    __decorate([\r\n        memoize\r\n    ], List.prototype, \"onContextMenu\", null);\r\n    return List;\r\n}());\r\nexport { List };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Range } from '../../../common/range.js';\r\n/**\r\n * Returns the intersection between a ranged group and a range.\r\n * Returns `[]` if the intersection is empty.\r\n */\r\nexport function groupIntersect(range, groups) {\r\n    var result = [];\r\n    for (var _i = 0, groups_1 = groups; _i < groups_1.length; _i++) {\r\n        var r = groups_1[_i];\r\n        if (range.start >= r.range.end) {\r\n            continue;\r\n        }\r\n        if (range.end < r.range.start) {\r\n            break;\r\n        }\r\n        var intersection = Range.intersect(range, r.range);\r\n        if (Range.isEmpty(intersection)) {\r\n            continue;\r\n        }\r\n        result.push({\r\n            range: intersection,\r\n            size: r.size\r\n        });\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Shifts a range by that `much`.\r\n */\r\nexport function shift(_a, much) {\r\n    var start = _a.start, end = _a.end;\r\n    return { start: start + much, end: end + much };\r\n}\r\n/**\r\n * Consolidates a collection of ranged groups.\r\n *\r\n * Consolidation is the process of merging consecutive ranged groups\r\n * that share the same `size`.\r\n */\r\nexport function consolidate(groups) {\r\n    var result = [];\r\n    var previousGroup = null;\r\n    for (var _i = 0, groups_2 = groups; _i < groups_2.length; _i++) {\r\n        var group = groups_2[_i];\r\n        var start = group.range.start;\r\n        var end = group.range.end;\r\n        var size = group.size;\r\n        if (previousGroup && size === previousGroup.size) {\r\n            previousGroup.range.end = end;\r\n            continue;\r\n        }\r\n        previousGroup = { range: { start: start, end: end }, size: size };\r\n        result.push(previousGroup);\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Concatenates several collections of ranged groups into a single\r\n * collection.\r\n */\r\nfunction concat() {\r\n    var groups = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        groups[_i] = arguments[_i];\r\n    }\r\n    return consolidate(groups.reduce(function (r, g) { return r.concat(g); }, []));\r\n}\r\nvar RangeMap = /** @class */ (function () {\r\n    function RangeMap() {\r\n        this.groups = [];\r\n        this._size = 0;\r\n    }\r\n    RangeMap.prototype.splice = function (index, deleteCount, items) {\r\n        if (items === void 0) { items = []; }\r\n        var diff = items.length - deleteCount;\r\n        var before = groupIntersect({ start: 0, end: index }, this.groups);\r\n        var after = groupIntersect({ start: index + deleteCount, end: Number.POSITIVE_INFINITY }, this.groups)\r\n            .map(function (g) { return ({ range: shift(g.range, diff), size: g.size }); });\r\n        var middle = items.map(function (item, i) { return ({\r\n            range: { start: index + i, end: index + i + 1 },\r\n            size: item.size\r\n        }); });\r\n        this.groups = concat(before, middle, after);\r\n        this._size = this.groups.reduce(function (t, g) { return t + (g.size * (g.range.end - g.range.start)); }, 0);\r\n    };\r\n    Object.defineProperty(RangeMap.prototype, \"count\", {\r\n        /**\r\n         * Returns the number of items in the range map.\r\n         */\r\n        get: function () {\r\n            var len = this.groups.length;\r\n            if (!len) {\r\n                return 0;\r\n            }\r\n            return this.groups[len - 1].range.end;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RangeMap.prototype, \"size\", {\r\n        /**\r\n         * Returns the sum of the sizes of all items in the range map.\r\n         */\r\n        get: function () {\r\n            return this._size;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Returns the index of the item at the given position.\r\n     */\r\n    RangeMap.prototype.indexAt = function (position) {\r\n        if (position < 0) {\r\n            return -1;\r\n        }\r\n        var index = 0;\r\n        var size = 0;\r\n        for (var _i = 0, _a = this.groups; _i < _a.length; _i++) {\r\n            var group = _a[_i];\r\n            var count = group.range.end - group.range.start;\r\n            var newSize = size + (count * group.size);\r\n            if (position < newSize) {\r\n                return index + Math.floor((position - size) / group.size);\r\n            }\r\n            index += count;\r\n            size = newSize;\r\n        }\r\n        return index;\r\n    };\r\n    /**\r\n     * Returns the index of the item right after the item at the\r\n     * index of the given position.\r\n     */\r\n    RangeMap.prototype.indexAfter = function (position) {\r\n        return Math.min(this.indexAt(position) + 1, this.count);\r\n    };\r\n    /**\r\n     * Returns the start position of the item at the given index.\r\n     */\r\n    RangeMap.prototype.positionAt = function (index) {\r\n        if (index < 0) {\r\n            return -1;\r\n        }\r\n        var position = 0;\r\n        var count = 0;\r\n        for (var _i = 0, _a = this.groups; _i < _a.length; _i++) {\r\n            var group = _a[_i];\r\n            var groupCount = group.range.end - group.range.start;\r\n            var newCount = count + groupCount;\r\n            if (index < newCount) {\r\n                return position + ((index - count) * group.size);\r\n            }\r\n            position += groupCount * group.size;\r\n            count = newCount;\r\n        }\r\n        return -1;\r\n    };\r\n    return RangeMap;\r\n}());\r\nexport { RangeMap };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { $, removeClass } from '../../dom.js';\r\nfunction removeFromParent(element) {\r\n    try {\r\n        if (element.parentElement) {\r\n            element.parentElement.removeChild(element);\r\n        }\r\n    }\r\n    catch (e) {\r\n        // this will throw if this happens due to a blur event, nasty business\r\n    }\r\n}\r\nvar RowCache = /** @class */ (function () {\r\n    function RowCache(renderers) {\r\n        this.renderers = renderers;\r\n        this.cache = new Map();\r\n    }\r\n    /**\r\n     * Returns a row either by creating a new one or reusing\r\n     * a previously released row which shares the same templateId.\r\n     */\r\n    RowCache.prototype.alloc = function (templateId) {\r\n        var result = this.getTemplateCache(templateId).pop();\r\n        if (!result) {\r\n            var domNode = $('.monaco-list-row');\r\n            var renderer = this.getRenderer(templateId);\r\n            var templateData = renderer.renderTemplate(domNode);\r\n            result = { domNode: domNode, templateId: templateId, templateData: templateData };\r\n        }\r\n        return result;\r\n    };\r\n    /**\r\n     * Releases the row for eventual reuse.\r\n     */\r\n    RowCache.prototype.release = function (row) {\r\n        if (!row) {\r\n            return;\r\n        }\r\n        this.releaseRow(row);\r\n    };\r\n    RowCache.prototype.releaseRow = function (row) {\r\n        var domNode = row.domNode, templateId = row.templateId;\r\n        if (domNode) {\r\n            removeClass(domNode, 'scrolling');\r\n            removeFromParent(domNode);\r\n        }\r\n        var cache = this.getTemplateCache(templateId);\r\n        cache.push(row);\r\n    };\r\n    RowCache.prototype.getTemplateCache = function (templateId) {\r\n        var result = this.cache.get(templateId);\r\n        if (!result) {\r\n            result = [];\r\n            this.cache.set(templateId, result);\r\n        }\r\n        return result;\r\n    };\r\n    RowCache.prototype.dispose = function () {\r\n        var _this = this;\r\n        this.cache.forEach(function (cachedRows, templateId) {\r\n            for (var _i = 0, cachedRows_1 = cachedRows; _i < cachedRows_1.length; _i++) {\r\n                var cachedRow = cachedRows_1[_i];\r\n                var renderer = _this.getRenderer(templateId);\r\n                renderer.disposeTemplate(cachedRow.templateData);\r\n                cachedRow.domNode = null;\r\n                cachedRow.templateData = null;\r\n            }\r\n        });\r\n        this.cache.clear();\r\n    };\r\n    RowCache.prototype.getRenderer = function (templateId) {\r\n        var renderer = this.renderers.get(templateId);\r\n        if (!renderer) {\r\n            throw new Error(\"No renderer found for \" + templateId);\r\n        }\r\n        return renderer;\r\n    };\r\n    return RowCache;\r\n}());\r\nexport { RowCache };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nimport { getOrDefault } from '../../../common/objects.js';\r\nimport { dispose, Disposable, toDisposable, DisposableStore } from '../../../common/lifecycle.js';\r\nimport { Gesture, EventType as TouchEventType } from '../../touch.js';\r\nimport * as DOM from '../../dom.js';\r\nimport { Event, Emitter } from '../../../common/event.js';\r\nimport { domEvent } from '../../event.js';\r\nimport { ScrollableElement } from '../scrollbar/scrollableElement.js';\r\nimport { RangeMap, shift } from './rangeMap.js';\r\nimport { RowCache } from './rowCache.js';\r\nimport { memoize } from '../../../common/decorators.js';\r\nimport { Range } from '../../../common/range.js';\r\nimport { equals, distinct } from '../../../common/arrays.js';\r\nimport { DataTransfers, StaticDND } from '../../dnd.js';\r\nimport { disposableTimeout, Delayer } from '../../../common/async.js';\r\nimport { isFirefox } from '../../browser.js';\r\nvar DefaultOptions = {\r\n    useShadows: true,\r\n    verticalScrollMode: 1 /* Auto */,\r\n    setRowLineHeight: true,\r\n    supportDynamicHeights: false,\r\n    dnd: {\r\n        getDragElements: function (e) { return [e]; },\r\n        getDragURI: function () { return null; },\r\n        onDragStart: function () { },\r\n        onDragOver: function () { return false; },\r\n        drop: function () { }\r\n    },\r\n    horizontalScrolling: false\r\n};\r\nvar ElementsDragAndDropData = /** @class */ (function () {\r\n    function ElementsDragAndDropData(elements) {\r\n        this.elements = elements;\r\n    }\r\n    ElementsDragAndDropData.prototype.update = function () { };\r\n    ElementsDragAndDropData.prototype.getData = function () {\r\n        return this.elements;\r\n    };\r\n    return ElementsDragAndDropData;\r\n}());\r\nexport { ElementsDragAndDropData };\r\nvar ExternalElementsDragAndDropData = /** @class */ (function () {\r\n    function ExternalElementsDragAndDropData(elements) {\r\n        this.elements = elements;\r\n    }\r\n    ExternalElementsDragAndDropData.prototype.update = function () { };\r\n    ExternalElementsDragAndDropData.prototype.getData = function () {\r\n        return this.elements;\r\n    };\r\n    return ExternalElementsDragAndDropData;\r\n}());\r\nexport { ExternalElementsDragAndDropData };\r\nvar DesktopDragAndDropData = /** @class */ (function () {\r\n    function DesktopDragAndDropData() {\r\n        this.types = [];\r\n        this.files = [];\r\n    }\r\n    DesktopDragAndDropData.prototype.update = function (dataTransfer) {\r\n        var _a;\r\n        if (dataTransfer.types) {\r\n            (_a = this.types).splice.apply(_a, __spreadArrays([0, this.types.length], dataTransfer.types));\r\n        }\r\n        if (dataTransfer.files) {\r\n            this.files.splice(0, this.files.length);\r\n            for (var i = 0; i < dataTransfer.files.length; i++) {\r\n                var file = dataTransfer.files.item(i);\r\n                if (file && (file.size || file.type)) {\r\n                    this.files.push(file);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    DesktopDragAndDropData.prototype.getData = function () {\r\n        return {\r\n            types: this.types,\r\n            files: this.files\r\n        };\r\n    };\r\n    return DesktopDragAndDropData;\r\n}());\r\nexport { DesktopDragAndDropData };\r\nfunction equalsDragFeedback(f1, f2) {\r\n    if (Array.isArray(f1) && Array.isArray(f2)) {\r\n        return equals(f1, f2);\r\n    }\r\n    return f1 === f2;\r\n}\r\nvar ListView = /** @class */ (function () {\r\n    function ListView(container, virtualDelegate, renderers, options) {\r\n        var _this = this;\r\n        if (options === void 0) { options = DefaultOptions; }\r\n        this.virtualDelegate = virtualDelegate;\r\n        this.domId = \"list_id_\" + ++ListView.InstanceCount;\r\n        this.renderers = new Map();\r\n        this.renderWidth = 0;\r\n        this._scrollHeight = 0;\r\n        this.scrollableElementUpdateDisposable = null;\r\n        this.scrollableElementWidthDelayer = new Delayer(50);\r\n        this.splicing = false;\r\n        this.dragOverAnimationStopDisposable = Disposable.None;\r\n        this.dragOverMouseY = 0;\r\n        this.canDrop = false;\r\n        this.currentDragFeedbackDisposable = Disposable.None;\r\n        this.onDragLeaveTimeout = Disposable.None;\r\n        this.disposables = new DisposableStore();\r\n        this._onDidChangeContentHeight = new Emitter();\r\n        if (options.horizontalScrolling && options.supportDynamicHeights) {\r\n            throw new Error('Horizontal scrolling and dynamic heights not supported simultaneously');\r\n        }\r\n        this.items = [];\r\n        this.itemId = 0;\r\n        this.rangeMap = new RangeMap();\r\n        for (var _i = 0, renderers_1 = renderers; _i < renderers_1.length; _i++) {\r\n            var renderer = renderers_1[_i];\r\n            this.renderers.set(renderer.templateId, renderer);\r\n        }\r\n        this.cache = this.disposables.add(new RowCache(this.renderers));\r\n        this.lastRenderTop = 0;\r\n        this.lastRenderHeight = 0;\r\n        this.domNode = document.createElement('div');\r\n        this.domNode.className = 'monaco-list';\r\n        DOM.addClass(this.domNode, this.domId);\r\n        this.domNode.tabIndex = 0;\r\n        DOM.toggleClass(this.domNode, 'mouse-support', typeof options.mouseSupport === 'boolean' ? options.mouseSupport : true);\r\n        this.horizontalScrolling = getOrDefault(options, function (o) { return o.horizontalScrolling; }, DefaultOptions.horizontalScrolling);\r\n        DOM.toggleClass(this.domNode, 'horizontal-scrolling', this.horizontalScrolling);\r\n        this.additionalScrollHeight = typeof options.additionalScrollHeight === 'undefined' ? 0 : options.additionalScrollHeight;\r\n        this.ariaProvider = options.ariaProvider || { getSetSize: function (e, i, length) { return length; }, getPosInSet: function (_, index) { return index + 1; } };\r\n        this.rowsContainer = document.createElement('div');\r\n        this.rowsContainer.className = 'monaco-list-rows';\r\n        this.rowsContainer.style.transform = 'translate3d(0px, 0px, 0px)';\r\n        this.disposables.add(Gesture.addTarget(this.rowsContainer));\r\n        this.scrollableElement = this.disposables.add(new ScrollableElement(this.rowsContainer, {\r\n            alwaysConsumeMouseWheel: true,\r\n            horizontal: this.horizontalScrolling ? 1 /* Auto */ : 2 /* Hidden */,\r\n            vertical: getOrDefault(options, function (o) { return o.verticalScrollMode; }, DefaultOptions.verticalScrollMode),\r\n            useShadows: getOrDefault(options, function (o) { return o.useShadows; }, DefaultOptions.useShadows)\r\n        }));\r\n        this.domNode.appendChild(this.scrollableElement.getDomNode());\r\n        container.appendChild(this.domNode);\r\n        this.scrollableElement.onScroll(this.onScroll, this, this.disposables);\r\n        domEvent(this.rowsContainer, TouchEventType.Change)(this.onTouchChange, this, this.disposables);\r\n        // Prevent the monaco-scrollable-element from scrolling\r\n        // https://github.com/Microsoft/vscode/issues/44181\r\n        domEvent(this.scrollableElement.getDomNode(), 'scroll')(function (e) { return e.target.scrollTop = 0; }, null, this.disposables);\r\n        Event.map(domEvent(this.domNode, 'dragover'), function (e) { return _this.toDragEvent(e); })(this.onDragOver, this, this.disposables);\r\n        Event.map(domEvent(this.domNode, 'drop'), function (e) { return _this.toDragEvent(e); })(this.onDrop, this, this.disposables);\r\n        domEvent(this.domNode, 'dragleave')(this.onDragLeave, this, this.disposables);\r\n        domEvent(window, 'dragend')(this.onDragEnd, this, this.disposables);\r\n        this.setRowLineHeight = getOrDefault(options, function (o) { return o.setRowLineHeight; }, DefaultOptions.setRowLineHeight);\r\n        this.supportDynamicHeights = getOrDefault(options, function (o) { return o.supportDynamicHeights; }, DefaultOptions.supportDynamicHeights);\r\n        this.dnd = getOrDefault(options, function (o) { return o.dnd; }, DefaultOptions.dnd);\r\n        this.layout();\r\n    }\r\n    Object.defineProperty(ListView.prototype, \"contentHeight\", {\r\n        get: function () { return this.rangeMap.size; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ListView.prototype.splice = function (start, deleteCount, elements) {\r\n        if (elements === void 0) { elements = []; }\r\n        if (this.splicing) {\r\n            throw new Error('Can\\'t run recursive splices.');\r\n        }\r\n        this.splicing = true;\r\n        try {\r\n            return this._splice(start, deleteCount, elements);\r\n        }\r\n        finally {\r\n            this.splicing = false;\r\n            this._onDidChangeContentHeight.fire(this.contentHeight);\r\n        }\r\n    };\r\n    ListView.prototype._splice = function (start, deleteCount, elements) {\r\n        var _a;\r\n        var _this = this;\r\n        if (elements === void 0) { elements = []; }\r\n        var previousRenderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\r\n        var deleteRange = { start: start, end: start + deleteCount };\r\n        var removeRange = Range.intersect(previousRenderRange, deleteRange);\r\n        for (var i = removeRange.start; i < removeRange.end; i++) {\r\n            this.removeItemFromDOM(i);\r\n        }\r\n        var previousRestRange = { start: start + deleteCount, end: this.items.length };\r\n        var previousRenderedRestRange = Range.intersect(previousRestRange, previousRenderRange);\r\n        var previousUnrenderedRestRanges = Range.relativeComplement(previousRestRange, previousRenderRange);\r\n        var inserted = elements.map(function (element) { return ({\r\n            id: String(_this.itemId++),\r\n            element: element,\r\n            templateId: _this.virtualDelegate.getTemplateId(element),\r\n            size: _this.virtualDelegate.getHeight(element),\r\n            width: undefined,\r\n            hasDynamicHeight: !!_this.virtualDelegate.hasDynamicHeight && _this.virtualDelegate.hasDynamicHeight(element),\r\n            lastDynamicHeightWidth: undefined,\r\n            row: null,\r\n            uri: undefined,\r\n            dropTarget: false,\r\n            dragStartDisposable: Disposable.None\r\n        }); });\r\n        var deleted;\r\n        // TODO@joao: improve this optimization to catch even more cases\r\n        if (start === 0 && deleteCount >= this.items.length) {\r\n            this.rangeMap = new RangeMap();\r\n            this.rangeMap.splice(0, 0, inserted);\r\n            this.items = inserted;\r\n            deleted = [];\r\n        }\r\n        else {\r\n            this.rangeMap.splice(start, deleteCount, inserted);\r\n            deleted = (_a = this.items).splice.apply(_a, __spreadArrays([start, deleteCount], inserted));\r\n        }\r\n        var delta = elements.length - deleteCount;\r\n        var renderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\r\n        var renderedRestRange = shift(previousRenderedRestRange, delta);\r\n        var updateRange = Range.intersect(renderRange, renderedRestRange);\r\n        for (var i = updateRange.start; i < updateRange.end; i++) {\r\n            this.updateItemInDOM(this.items[i], i);\r\n        }\r\n        var removeRanges = Range.relativeComplement(renderedRestRange, renderRange);\r\n        for (var _i = 0, removeRanges_1 = removeRanges; _i < removeRanges_1.length; _i++) {\r\n            var range = removeRanges_1[_i];\r\n            for (var i = range.start; i < range.end; i++) {\r\n                this.removeItemFromDOM(i);\r\n            }\r\n        }\r\n        var unrenderedRestRanges = previousUnrenderedRestRanges.map(function (r) { return shift(r, delta); });\r\n        var elementsRange = { start: start, end: start + elements.length };\r\n        var insertRanges = __spreadArrays([elementsRange], unrenderedRestRanges).map(function (r) { return Range.intersect(renderRange, r); });\r\n        var beforeElement = this.getNextToLastElement(insertRanges);\r\n        for (var _b = 0, insertRanges_1 = insertRanges; _b < insertRanges_1.length; _b++) {\r\n            var range = insertRanges_1[_b];\r\n            for (var i = range.start; i < range.end; i++) {\r\n                this.insertItemInDOM(i, beforeElement);\r\n            }\r\n        }\r\n        this.eventuallyUpdateScrollDimensions();\r\n        if (this.supportDynamicHeights) {\r\n            this._rerender(this.scrollTop, this.renderHeight);\r\n        }\r\n        return deleted.map(function (i) { return i.element; });\r\n    };\r\n    ListView.prototype.eventuallyUpdateScrollDimensions = function () {\r\n        var _this = this;\r\n        this._scrollHeight = this.contentHeight;\r\n        this.rowsContainer.style.height = this._scrollHeight + \"px\";\r\n        if (!this.scrollableElementUpdateDisposable) {\r\n            this.scrollableElementUpdateDisposable = DOM.scheduleAtNextAnimationFrame(function () {\r\n                _this.scrollableElement.setScrollDimensions({ scrollHeight: _this.scrollHeight });\r\n                _this.updateScrollWidth();\r\n                _this.scrollableElementUpdateDisposable = null;\r\n            });\r\n        }\r\n    };\r\n    ListView.prototype.eventuallyUpdateScrollWidth = function () {\r\n        var _this = this;\r\n        if (!this.horizontalScrolling) {\r\n            return;\r\n        }\r\n        this.scrollableElementWidthDelayer.trigger(function () { return _this.updateScrollWidth(); });\r\n    };\r\n    ListView.prototype.updateScrollWidth = function () {\r\n        if (!this.horizontalScrolling) {\r\n            return;\r\n        }\r\n        if (this.items.length === 0) {\r\n            this.scrollableElement.setScrollDimensions({ scrollWidth: 0 });\r\n        }\r\n        var scrollWidth = 0;\r\n        for (var _i = 0, _a = this.items; _i < _a.length; _i++) {\r\n            var item = _a[_i];\r\n            if (typeof item.width !== 'undefined') {\r\n                scrollWidth = Math.max(scrollWidth, item.width);\r\n            }\r\n        }\r\n        this.scrollWidth = scrollWidth;\r\n        this.scrollableElement.setScrollDimensions({ scrollWidth: scrollWidth + 10 });\r\n    };\r\n    ListView.prototype.rerender = function () {\r\n        if (!this.supportDynamicHeights) {\r\n            return;\r\n        }\r\n        for (var _i = 0, _a = this.items; _i < _a.length; _i++) {\r\n            var item = _a[_i];\r\n            item.lastDynamicHeightWidth = undefined;\r\n        }\r\n        this._rerender(this.lastRenderTop, this.lastRenderHeight);\r\n    };\r\n    Object.defineProperty(ListView.prototype, \"length\", {\r\n        get: function () {\r\n            return this.items.length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ListView.prototype, \"renderHeight\", {\r\n        get: function () {\r\n            var scrollDimensions = this.scrollableElement.getScrollDimensions();\r\n            return scrollDimensions.height;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ListView.prototype.element = function (index) {\r\n        return this.items[index].element;\r\n    };\r\n    ListView.prototype.domElement = function (index) {\r\n        var row = this.items[index].row;\r\n        return row && row.domNode;\r\n    };\r\n    ListView.prototype.elementHeight = function (index) {\r\n        return this.items[index].size;\r\n    };\r\n    ListView.prototype.elementTop = function (index) {\r\n        return this.rangeMap.positionAt(index);\r\n    };\r\n    ListView.prototype.indexAt = function (position) {\r\n        return this.rangeMap.indexAt(position);\r\n    };\r\n    ListView.prototype.indexAfter = function (position) {\r\n        return this.rangeMap.indexAfter(position);\r\n    };\r\n    ListView.prototype.layout = function (height, width) {\r\n        var scrollDimensions = {\r\n            height: typeof height === 'number' ? height : DOM.getContentHeight(this.domNode)\r\n        };\r\n        if (this.scrollableElementUpdateDisposable) {\r\n            this.scrollableElementUpdateDisposable.dispose();\r\n            this.scrollableElementUpdateDisposable = null;\r\n            scrollDimensions.scrollHeight = this.scrollHeight;\r\n        }\r\n        this.scrollableElement.setScrollDimensions(scrollDimensions);\r\n        if (typeof width !== 'undefined') {\r\n            this.renderWidth = width;\r\n            if (this.supportDynamicHeights) {\r\n                this._rerender(this.scrollTop, this.renderHeight);\r\n            }\r\n            if (this.horizontalScrolling) {\r\n                this.scrollableElement.setScrollDimensions({\r\n                    width: typeof width === 'number' ? width : DOM.getContentWidth(this.domNode)\r\n                });\r\n            }\r\n        }\r\n    };\r\n    // Render\r\n    ListView.prototype.render = function (renderTop, renderHeight, renderLeft, scrollWidth) {\r\n        var previousRenderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\r\n        var renderRange = this.getRenderRange(renderTop, renderHeight);\r\n        var rangesToInsert = Range.relativeComplement(renderRange, previousRenderRange);\r\n        var rangesToRemove = Range.relativeComplement(previousRenderRange, renderRange);\r\n        var beforeElement = this.getNextToLastElement(rangesToInsert);\r\n        for (var _i = 0, rangesToInsert_1 = rangesToInsert; _i < rangesToInsert_1.length; _i++) {\r\n            var range = rangesToInsert_1[_i];\r\n            for (var i = range.start; i < range.end; i++) {\r\n                this.insertItemInDOM(i, beforeElement);\r\n            }\r\n        }\r\n        for (var _a = 0, rangesToRemove_1 = rangesToRemove; _a < rangesToRemove_1.length; _a++) {\r\n            var range = rangesToRemove_1[_a];\r\n            for (var i = range.start; i < range.end; i++) {\r\n                this.removeItemFromDOM(i);\r\n            }\r\n        }\r\n        this.rowsContainer.style.left = \"-\" + renderLeft + \"px\";\r\n        this.rowsContainer.style.top = \"-\" + renderTop + \"px\";\r\n        if (this.horizontalScrolling) {\r\n            this.rowsContainer.style.width = Math.max(scrollWidth, this.renderWidth) + \"px\";\r\n        }\r\n        this.lastRenderTop = renderTop;\r\n        this.lastRenderHeight = renderHeight;\r\n    };\r\n    // DOM operations\r\n    ListView.prototype.insertItemInDOM = function (index, beforeElement) {\r\n        var _this = this;\r\n        var item = this.items[index];\r\n        if (!item.row) {\r\n            item.row = this.cache.alloc(item.templateId);\r\n            var role = this.ariaProvider.getRole ? this.ariaProvider.getRole(item.element) : 'treeitem';\r\n            item.row.domNode.setAttribute('role', role);\r\n            var checked = this.ariaProvider.isChecked ? this.ariaProvider.isChecked(item.element) : undefined;\r\n            if (typeof checked !== 'undefined') {\r\n                item.row.domNode.setAttribute('aria-checked', String(checked));\r\n            }\r\n        }\r\n        if (!item.row.domNode.parentElement) {\r\n            if (beforeElement) {\r\n                this.rowsContainer.insertBefore(item.row.domNode, beforeElement);\r\n            }\r\n            else {\r\n                this.rowsContainer.appendChild(item.row.domNode);\r\n            }\r\n        }\r\n        this.updateItemInDOM(item, index);\r\n        var renderer = this.renderers.get(item.templateId);\r\n        if (!renderer) {\r\n            throw new Error(\"No renderer found for template id \" + item.templateId);\r\n        }\r\n        if (renderer) {\r\n            renderer.renderElement(item.element, index, item.row.templateData, item.size);\r\n        }\r\n        var uri = this.dnd.getDragURI(item.element);\r\n        item.dragStartDisposable.dispose();\r\n        item.row.domNode.draggable = !!uri;\r\n        if (uri) {\r\n            var onDragStart = domEvent(item.row.domNode, 'dragstart');\r\n            item.dragStartDisposable = onDragStart(function (event) { return _this.onDragStart(item.element, uri, event); });\r\n        }\r\n        if (this.horizontalScrolling) {\r\n            this.measureItemWidth(item);\r\n            this.eventuallyUpdateScrollWidth();\r\n        }\r\n    };\r\n    ListView.prototype.measureItemWidth = function (item) {\r\n        if (!item.row || !item.row.domNode) {\r\n            return;\r\n        }\r\n        item.row.domNode.style.width = isFirefox ? '-moz-fit-content' : 'fit-content';\r\n        item.width = DOM.getContentWidth(item.row.domNode);\r\n        var style = window.getComputedStyle(item.row.domNode);\r\n        if (style.paddingLeft) {\r\n            item.width += parseFloat(style.paddingLeft);\r\n        }\r\n        if (style.paddingRight) {\r\n            item.width += parseFloat(style.paddingRight);\r\n        }\r\n        item.row.domNode.style.width = '';\r\n    };\r\n    ListView.prototype.updateItemInDOM = function (item, index) {\r\n        item.row.domNode.style.top = this.elementTop(index) + \"px\";\r\n        item.row.domNode.style.height = item.size + \"px\";\r\n        if (this.setRowLineHeight) {\r\n            item.row.domNode.style.lineHeight = item.size + \"px\";\r\n        }\r\n        item.row.domNode.setAttribute('data-index', \"\" + index);\r\n        item.row.domNode.setAttribute('data-last-element', index === this.length - 1 ? 'true' : 'false');\r\n        item.row.domNode.setAttribute('aria-setsize', String(this.ariaProvider.getSetSize(item.element, index, this.length)));\r\n        item.row.domNode.setAttribute('aria-posinset', String(this.ariaProvider.getPosInSet(item.element, index)));\r\n        item.row.domNode.setAttribute('id', this.getElementDomId(index));\r\n        DOM.toggleClass(item.row.domNode, 'drop-target', item.dropTarget);\r\n    };\r\n    ListView.prototype.removeItemFromDOM = function (index) {\r\n        var item = this.items[index];\r\n        item.dragStartDisposable.dispose();\r\n        var renderer = this.renderers.get(item.templateId);\r\n        if (renderer && renderer.disposeElement) {\r\n            renderer.disposeElement(item.element, index, item.row.templateData, item.size);\r\n        }\r\n        this.cache.release(item.row);\r\n        item.row = null;\r\n        if (this.horizontalScrolling) {\r\n            this.eventuallyUpdateScrollWidth();\r\n        }\r\n    };\r\n    ListView.prototype.getScrollTop = function () {\r\n        var scrollPosition = this.scrollableElement.getScrollPosition();\r\n        return scrollPosition.scrollTop;\r\n    };\r\n    ListView.prototype.setScrollTop = function (scrollTop) {\r\n        if (this.scrollableElementUpdateDisposable) {\r\n            this.scrollableElementUpdateDisposable.dispose();\r\n            this.scrollableElementUpdateDisposable = null;\r\n            this.scrollableElement.setScrollDimensions({ scrollHeight: this.scrollHeight });\r\n        }\r\n        this.scrollableElement.setScrollPosition({ scrollTop: scrollTop });\r\n    };\r\n    Object.defineProperty(ListView.prototype, \"scrollTop\", {\r\n        get: function () {\r\n            return this.getScrollTop();\r\n        },\r\n        set: function (scrollTop) {\r\n            this.setScrollTop(scrollTop);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ListView.prototype, \"scrollHeight\", {\r\n        get: function () {\r\n            return this._scrollHeight + (this.horizontalScrolling ? 10 : 0) + this.additionalScrollHeight;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ListView.prototype, \"onMouseClick\", {\r\n        // Events\r\n        get: function () {\r\n            var _this = this;\r\n            return Event.map(domEvent(this.domNode, 'click'), function (e) { return _this.toMouseEvent(e); });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ListView.prototype, \"onMouseDblClick\", {\r\n        get: function () {\r\n            var _this = this;\r\n            return Event.map(domEvent(this.domNode, 'dblclick'), function (e) { return _this.toMouseEvent(e); });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ListView.prototype, \"onMouseMiddleClick\", {\r\n        get: function () {\r\n            var _this = this;\r\n            return Event.filter(Event.map(domEvent(this.domNode, 'auxclick'), function (e) { return _this.toMouseEvent(e); }), function (e) { return e.browserEvent.button === 1; });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ListView.prototype, \"onMouseDown\", {\r\n        get: function () {\r\n            var _this = this;\r\n            return Event.map(domEvent(this.domNode, 'mousedown'), function (e) { return _this.toMouseEvent(e); });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ListView.prototype, \"onContextMenu\", {\r\n        get: function () {\r\n            var _this = this;\r\n            return Event.map(domEvent(this.domNode, 'contextmenu'), function (e) { return _this.toMouseEvent(e); });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ListView.prototype, \"onTouchStart\", {\r\n        get: function () {\r\n            var _this = this;\r\n            return Event.map(domEvent(this.domNode, 'touchstart'), function (e) { return _this.toTouchEvent(e); });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ListView.prototype, \"onTap\", {\r\n        get: function () {\r\n            var _this = this;\r\n            return Event.map(domEvent(this.rowsContainer, TouchEventType.Tap), function (e) { return _this.toGestureEvent(e); });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ListView.prototype.toMouseEvent = function (browserEvent) {\r\n        var index = this.getItemIndexFromEventTarget(browserEvent.target || null);\r\n        var item = typeof index === 'undefined' ? undefined : this.items[index];\r\n        var element = item && item.element;\r\n        return { browserEvent: browserEvent, index: index, element: element };\r\n    };\r\n    ListView.prototype.toTouchEvent = function (browserEvent) {\r\n        var index = this.getItemIndexFromEventTarget(browserEvent.target || null);\r\n        var item = typeof index === 'undefined' ? undefined : this.items[index];\r\n        var element = item && item.element;\r\n        return { browserEvent: browserEvent, index: index, element: element };\r\n    };\r\n    ListView.prototype.toGestureEvent = function (browserEvent) {\r\n        var index = this.getItemIndexFromEventTarget(browserEvent.initialTarget || null);\r\n        var item = typeof index === 'undefined' ? undefined : this.items[index];\r\n        var element = item && item.element;\r\n        return { browserEvent: browserEvent, index: index, element: element };\r\n    };\r\n    ListView.prototype.toDragEvent = function (browserEvent) {\r\n        var index = this.getItemIndexFromEventTarget(browserEvent.target || null);\r\n        var item = typeof index === 'undefined' ? undefined : this.items[index];\r\n        var element = item && item.element;\r\n        return { browserEvent: browserEvent, index: index, element: element };\r\n    };\r\n    ListView.prototype.onScroll = function (e) {\r\n        try {\r\n            this.render(e.scrollTop, e.height, e.scrollLeft, e.scrollWidth);\r\n            if (this.supportDynamicHeights) {\r\n                this._rerender(e.scrollTop, e.height);\r\n            }\r\n        }\r\n        catch (err) {\r\n            console.error('Got bad scroll event:', e);\r\n            throw err;\r\n        }\r\n    };\r\n    ListView.prototype.onTouchChange = function (event) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        this.scrollTop -= event.translationY;\r\n    };\r\n    // DND\r\n    ListView.prototype.onDragStart = function (element, uri, event) {\r\n        if (!event.dataTransfer) {\r\n            return;\r\n        }\r\n        var elements = this.dnd.getDragElements(element);\r\n        event.dataTransfer.effectAllowed = 'copyMove';\r\n        event.dataTransfer.setData(DataTransfers.RESOURCES, JSON.stringify([uri]));\r\n        if (event.dataTransfer.setDragImage) {\r\n            var label = void 0;\r\n            if (this.dnd.getDragLabel) {\r\n                label = this.dnd.getDragLabel(elements, event);\r\n            }\r\n            if (typeof label === 'undefined') {\r\n                label = String(elements.length);\r\n            }\r\n            var dragImage_1 = DOM.$('.monaco-drag-image');\r\n            dragImage_1.textContent = label;\r\n            document.body.appendChild(dragImage_1);\r\n            event.dataTransfer.setDragImage(dragImage_1, -10, -10);\r\n            setTimeout(function () { return document.body.removeChild(dragImage_1); }, 0);\r\n        }\r\n        this.currentDragData = new ElementsDragAndDropData(elements);\r\n        StaticDND.CurrentDragAndDropData = new ExternalElementsDragAndDropData(elements);\r\n        if (this.dnd.onDragStart) {\r\n            this.dnd.onDragStart(this.currentDragData, event);\r\n        }\r\n    };\r\n    ListView.prototype.onDragOver = function (event) {\r\n        var _this = this;\r\n        event.browserEvent.preventDefault(); // needed so that the drop event fires (https://stackoverflow.com/questions/21339924/drop-event-not-firing-in-chrome)\r\n        this.onDragLeaveTimeout.dispose();\r\n        if (StaticDND.CurrentDragAndDropData && StaticDND.CurrentDragAndDropData.getData() === 'vscode-ui') {\r\n            return false;\r\n        }\r\n        this.setupDragAndDropScrollTopAnimation(event.browserEvent);\r\n        if (!event.browserEvent.dataTransfer) {\r\n            return false;\r\n        }\r\n        // Drag over from outside\r\n        if (!this.currentDragData) {\r\n            if (StaticDND.CurrentDragAndDropData) {\r\n                // Drag over from another list\r\n                this.currentDragData = StaticDND.CurrentDragAndDropData;\r\n            }\r\n            else {\r\n                // Drag over from the desktop\r\n                if (!event.browserEvent.dataTransfer.types) {\r\n                    return false;\r\n                }\r\n                this.currentDragData = new DesktopDragAndDropData();\r\n            }\r\n        }\r\n        var result = this.dnd.onDragOver(this.currentDragData, event.element, event.index, event.browserEvent);\r\n        this.canDrop = typeof result === 'boolean' ? result : result.accept;\r\n        if (!this.canDrop) {\r\n            this.currentDragFeedback = undefined;\r\n            this.currentDragFeedbackDisposable.dispose();\r\n            return false;\r\n        }\r\n        event.browserEvent.dataTransfer.dropEffect = (typeof result !== 'boolean' && result.effect === 0 /* Copy */) ? 'copy' : 'move';\r\n        var feedback;\r\n        if (typeof result !== 'boolean' && result.feedback) {\r\n            feedback = result.feedback;\r\n        }\r\n        else {\r\n            if (typeof event.index === 'undefined') {\r\n                feedback = [-1];\r\n            }\r\n            else {\r\n                feedback = [event.index];\r\n            }\r\n        }\r\n        // sanitize feedback list\r\n        feedback = distinct(feedback).filter(function (i) { return i >= -1 && i < _this.length; }).sort(function (a, b) { return a - b; });\r\n        feedback = feedback[0] === -1 ? [-1] : feedback;\r\n        if (equalsDragFeedback(this.currentDragFeedback, feedback)) {\r\n            return true;\r\n        }\r\n        this.currentDragFeedback = feedback;\r\n        this.currentDragFeedbackDisposable.dispose();\r\n        if (feedback[0] === -1) { // entire list feedback\r\n            DOM.addClass(this.domNode, 'drop-target');\r\n            DOM.addClass(this.rowsContainer, 'drop-target');\r\n            this.currentDragFeedbackDisposable = toDisposable(function () {\r\n                DOM.removeClass(_this.domNode, 'drop-target');\r\n                DOM.removeClass(_this.rowsContainer, 'drop-target');\r\n            });\r\n        }\r\n        else {\r\n            for (var _i = 0, feedback_1 = feedback; _i < feedback_1.length; _i++) {\r\n                var index = feedback_1[_i];\r\n                var item = this.items[index];\r\n                item.dropTarget = true;\r\n                if (item.row && item.row.domNode) {\r\n                    DOM.addClass(item.row.domNode, 'drop-target');\r\n                }\r\n            }\r\n            this.currentDragFeedbackDisposable = toDisposable(function () {\r\n                for (var _i = 0, feedback_2 = feedback; _i < feedback_2.length; _i++) {\r\n                    var index = feedback_2[_i];\r\n                    var item = _this.items[index];\r\n                    item.dropTarget = false;\r\n                    if (item.row && item.row.domNode) {\r\n                        DOM.removeClass(item.row.domNode, 'drop-target');\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        return true;\r\n    };\r\n    ListView.prototype.onDragLeave = function () {\r\n        var _this = this;\r\n        this.onDragLeaveTimeout.dispose();\r\n        this.onDragLeaveTimeout = disposableTimeout(function () { return _this.clearDragOverFeedback(); }, 100);\r\n    };\r\n    ListView.prototype.onDrop = function (event) {\r\n        if (!this.canDrop) {\r\n            return;\r\n        }\r\n        var dragData = this.currentDragData;\r\n        this.teardownDragAndDropScrollTopAnimation();\r\n        this.clearDragOverFeedback();\r\n        this.currentDragData = undefined;\r\n        StaticDND.CurrentDragAndDropData = undefined;\r\n        if (!dragData || !event.browserEvent.dataTransfer) {\r\n            return;\r\n        }\r\n        event.browserEvent.preventDefault();\r\n        dragData.update(event.browserEvent.dataTransfer);\r\n        this.dnd.drop(dragData, event.element, event.index, event.browserEvent);\r\n    };\r\n    ListView.prototype.onDragEnd = function (event) {\r\n        this.canDrop = false;\r\n        this.teardownDragAndDropScrollTopAnimation();\r\n        this.clearDragOverFeedback();\r\n        this.currentDragData = undefined;\r\n        StaticDND.CurrentDragAndDropData = undefined;\r\n        if (this.dnd.onDragEnd) {\r\n            this.dnd.onDragEnd(event);\r\n        }\r\n    };\r\n    ListView.prototype.clearDragOverFeedback = function () {\r\n        this.currentDragFeedback = undefined;\r\n        this.currentDragFeedbackDisposable.dispose();\r\n        this.currentDragFeedbackDisposable = Disposable.None;\r\n    };\r\n    // DND scroll top animation\r\n    ListView.prototype.setupDragAndDropScrollTopAnimation = function (event) {\r\n        var _this = this;\r\n        if (!this.dragOverAnimationDisposable) {\r\n            var viewTop = DOM.getTopLeftOffset(this.domNode).top;\r\n            this.dragOverAnimationDisposable = DOM.animate(this.animateDragAndDropScrollTop.bind(this, viewTop));\r\n        }\r\n        this.dragOverAnimationStopDisposable.dispose();\r\n        this.dragOverAnimationStopDisposable = disposableTimeout(function () {\r\n            if (_this.dragOverAnimationDisposable) {\r\n                _this.dragOverAnimationDisposable.dispose();\r\n                _this.dragOverAnimationDisposable = undefined;\r\n            }\r\n        }, 1000);\r\n        this.dragOverMouseY = event.pageY;\r\n    };\r\n    ListView.prototype.animateDragAndDropScrollTop = function (viewTop) {\r\n        if (this.dragOverMouseY === undefined) {\r\n            return;\r\n        }\r\n        var diff = this.dragOverMouseY - viewTop;\r\n        var upperLimit = this.renderHeight - 35;\r\n        if (diff < 35) {\r\n            this.scrollTop += Math.max(-14, Math.floor(0.3 * (diff - 35)));\r\n        }\r\n        else if (diff > upperLimit) {\r\n            this.scrollTop += Math.min(14, Math.floor(0.3 * (diff - upperLimit)));\r\n        }\r\n    };\r\n    ListView.prototype.teardownDragAndDropScrollTopAnimation = function () {\r\n        this.dragOverAnimationStopDisposable.dispose();\r\n        if (this.dragOverAnimationDisposable) {\r\n            this.dragOverAnimationDisposable.dispose();\r\n            this.dragOverAnimationDisposable = undefined;\r\n        }\r\n    };\r\n    // Util\r\n    ListView.prototype.getItemIndexFromEventTarget = function (target) {\r\n        var element = target;\r\n        while (element instanceof HTMLElement && element !== this.rowsContainer) {\r\n            var rawIndex = element.getAttribute('data-index');\r\n            if (rawIndex) {\r\n                var index = Number(rawIndex);\r\n                if (!isNaN(index)) {\r\n                    return index;\r\n                }\r\n            }\r\n            element = element.parentElement;\r\n        }\r\n        return undefined;\r\n    };\r\n    ListView.prototype.getRenderRange = function (renderTop, renderHeight) {\r\n        return {\r\n            start: this.rangeMap.indexAt(renderTop),\r\n            end: this.rangeMap.indexAfter(renderTop + renderHeight - 1)\r\n        };\r\n    };\r\n    /**\r\n     * Given a stable rendered state, checks every rendered element whether it needs\r\n     * to be probed for dynamic height. Adjusts scroll height and top if necessary.\r\n     */\r\n    ListView.prototype._rerender = function (renderTop, renderHeight) {\r\n        var previousRenderRange = this.getRenderRange(renderTop, renderHeight);\r\n        // Let's remember the second element's position, this helps in scrolling up\r\n        // and preserving a linear upwards scroll movement\r\n        var anchorElementIndex;\r\n        var anchorElementTopDelta;\r\n        if (renderTop === this.elementTop(previousRenderRange.start)) {\r\n            anchorElementIndex = previousRenderRange.start;\r\n            anchorElementTopDelta = 0;\r\n        }\r\n        else if (previousRenderRange.end - previousRenderRange.start > 1) {\r\n            anchorElementIndex = previousRenderRange.start + 1;\r\n            anchorElementTopDelta = this.elementTop(anchorElementIndex) - renderTop;\r\n        }\r\n        var heightDiff = 0;\r\n        while (true) {\r\n            var renderRange = this.getRenderRange(renderTop, renderHeight);\r\n            var didChange = false;\r\n            for (var i = renderRange.start; i < renderRange.end; i++) {\r\n                var diff = this.probeDynamicHeight(i);\r\n                if (diff !== 0) {\r\n                    this.rangeMap.splice(i, 1, [this.items[i]]);\r\n                }\r\n                heightDiff += diff;\r\n                didChange = didChange || diff !== 0;\r\n            }\r\n            if (!didChange) {\r\n                if (heightDiff !== 0) {\r\n                    this.eventuallyUpdateScrollDimensions();\r\n                }\r\n                var unrenderRanges = Range.relativeComplement(previousRenderRange, renderRange);\r\n                for (var _i = 0, unrenderRanges_1 = unrenderRanges; _i < unrenderRanges_1.length; _i++) {\r\n                    var range = unrenderRanges_1[_i];\r\n                    for (var i = range.start; i < range.end; i++) {\r\n                        if (this.items[i].row) {\r\n                            this.removeItemFromDOM(i);\r\n                        }\r\n                    }\r\n                }\r\n                var renderRanges = Range.relativeComplement(renderRange, previousRenderRange);\r\n                for (var _a = 0, renderRanges_1 = renderRanges; _a < renderRanges_1.length; _a++) {\r\n                    var range = renderRanges_1[_a];\r\n                    for (var i = range.start; i < range.end; i++) {\r\n                        var afterIndex = i + 1;\r\n                        var beforeRow = afterIndex < this.items.length ? this.items[afterIndex].row : null;\r\n                        var beforeElement = beforeRow ? beforeRow.domNode : null;\r\n                        this.insertItemInDOM(i, beforeElement);\r\n                    }\r\n                }\r\n                for (var i = renderRange.start; i < renderRange.end; i++) {\r\n                    if (this.items[i].row) {\r\n                        this.updateItemInDOM(this.items[i], i);\r\n                    }\r\n                }\r\n                if (typeof anchorElementIndex === 'number') {\r\n                    this.scrollTop = this.elementTop(anchorElementIndex) - anchorElementTopDelta;\r\n                }\r\n                this._onDidChangeContentHeight.fire(this.contentHeight);\r\n                return;\r\n            }\r\n        }\r\n    };\r\n    ListView.prototype.probeDynamicHeight = function (index) {\r\n        var item = this.items[index];\r\n        if (!item.hasDynamicHeight || item.lastDynamicHeightWidth === this.renderWidth) {\r\n            return 0;\r\n        }\r\n        var size = item.size;\r\n        var row = this.cache.alloc(item.templateId);\r\n        row.domNode.style.height = '';\r\n        this.rowsContainer.appendChild(row.domNode);\r\n        var renderer = this.renderers.get(item.templateId);\r\n        if (renderer) {\r\n            renderer.renderElement(item.element, index, row.templateData, undefined);\r\n            if (renderer.disposeElement) {\r\n                renderer.disposeElement(item.element, index, row.templateData, undefined);\r\n            }\r\n        }\r\n        item.size = row.domNode.offsetHeight;\r\n        if (this.virtualDelegate.setDynamicHeight) {\r\n            this.virtualDelegate.setDynamicHeight(item.element, item.size);\r\n        }\r\n        item.lastDynamicHeightWidth = this.renderWidth;\r\n        this.rowsContainer.removeChild(row.domNode);\r\n        this.cache.release(row);\r\n        return item.size - size;\r\n    };\r\n    ListView.prototype.getNextToLastElement = function (ranges) {\r\n        var lastRange = ranges[ranges.length - 1];\r\n        if (!lastRange) {\r\n            return null;\r\n        }\r\n        var nextToLastItem = this.items[lastRange.end];\r\n        if (!nextToLastItem) {\r\n            return null;\r\n        }\r\n        if (!nextToLastItem.row) {\r\n            return null;\r\n        }\r\n        return nextToLastItem.row.domNode;\r\n    };\r\n    ListView.prototype.getElementDomId = function (index) {\r\n        return this.domId + \"_\" + index;\r\n    };\r\n    // Dispose\r\n    ListView.prototype.dispose = function () {\r\n        if (this.items) {\r\n            for (var _i = 0, _a = this.items; _i < _a.length; _i++) {\r\n                var item = _a[_i];\r\n                if (item.row) {\r\n                    var renderer = this.renderers.get(item.row.templateId);\r\n                    if (renderer) {\r\n                        renderer.disposeTemplate(item.row.templateData);\r\n                    }\r\n                }\r\n            }\r\n            this.items = [];\r\n        }\r\n        if (this.domNode && this.domNode.parentNode) {\r\n            this.domNode.parentNode.removeChild(this.domNode);\r\n        }\r\n        dispose(this.disposables);\r\n    };\r\n    ListView.InstanceCount = 0;\r\n    __decorate([\r\n        memoize\r\n    ], ListView.prototype, \"onMouseClick\", null);\r\n    __decorate([\r\n        memoize\r\n    ], ListView.prototype, \"onMouseDblClick\", null);\r\n    __decorate([\r\n        memoize\r\n    ], ListView.prototype, \"onMouseMiddleClick\", null);\r\n    __decorate([\r\n        memoize\r\n    ], ListView.prototype, \"onMouseDown\", null);\r\n    __decorate([\r\n        memoize\r\n    ], ListView.prototype, \"onContextMenu\", null);\r\n    __decorate([\r\n        memoize\r\n    ], ListView.prototype, \"onTouchStart\", null);\r\n    __decorate([\r\n        memoize\r\n    ], ListView.prototype, \"onTap\", null);\r\n    return ListView;\r\n}());\r\nexport { ListView };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport './keybindingLabel.css';\r\nimport { equals } from '../../../common/objects.js';\r\nimport { UILabelProvider } from '../../../common/keybindingLabels.js';\r\nimport * as dom from '../../dom.js';\r\nimport { localize } from '../../../../nls.js';\r\nvar $ = dom.$;\r\nvar KeybindingLabel = /** @class */ (function () {\r\n    function KeybindingLabel(container, os, options) {\r\n        this.os = os;\r\n        this.options = options;\r\n        this.domNode = dom.append(container, $('.monaco-keybinding'));\r\n        this.didEverRender = false;\r\n        container.appendChild(this.domNode);\r\n    }\r\n    KeybindingLabel.prototype.set = function (keybinding, matches) {\r\n        if (this.didEverRender && this.keybinding === keybinding && KeybindingLabel.areSame(this.matches, matches)) {\r\n            return;\r\n        }\r\n        this.keybinding = keybinding;\r\n        this.matches = matches;\r\n        this.render();\r\n    };\r\n    KeybindingLabel.prototype.render = function () {\r\n        dom.clearNode(this.domNode);\r\n        if (this.keybinding) {\r\n            var _a = this.keybinding.getParts(), firstPart = _a[0], chordPart = _a[1];\r\n            if (firstPart) {\r\n                this.renderPart(this.domNode, firstPart, this.matches ? this.matches.firstPart : null);\r\n            }\r\n            if (chordPart) {\r\n                dom.append(this.domNode, $('span.monaco-keybinding-key-chord-separator', undefined, ' '));\r\n                this.renderPart(this.domNode, chordPart, this.matches ? this.matches.chordPart : null);\r\n            }\r\n            this.domNode.title = this.keybinding.getAriaLabel() || '';\r\n        }\r\n        else if (this.options && this.options.renderUnboundKeybindings) {\r\n            this.renderUnbound(this.domNode);\r\n        }\r\n        this.didEverRender = true;\r\n    };\r\n    KeybindingLabel.prototype.renderPart = function (parent, part, match) {\r\n        var modifierLabels = UILabelProvider.modifierLabels[this.os];\r\n        if (part.ctrlKey) {\r\n            this.renderKey(parent, modifierLabels.ctrlKey, Boolean(match === null || match === void 0 ? void 0 : match.ctrlKey), modifierLabels.separator);\r\n        }\r\n        if (part.shiftKey) {\r\n            this.renderKey(parent, modifierLabels.shiftKey, Boolean(match === null || match === void 0 ? void 0 : match.shiftKey), modifierLabels.separator);\r\n        }\r\n        if (part.altKey) {\r\n            this.renderKey(parent, modifierLabels.altKey, Boolean(match === null || match === void 0 ? void 0 : match.altKey), modifierLabels.separator);\r\n        }\r\n        if (part.metaKey) {\r\n            this.renderKey(parent, modifierLabels.metaKey, Boolean(match === null || match === void 0 ? void 0 : match.metaKey), modifierLabels.separator);\r\n        }\r\n        var keyLabel = part.keyLabel;\r\n        if (keyLabel) {\r\n            this.renderKey(parent, keyLabel, Boolean(match === null || match === void 0 ? void 0 : match.keyCode), '');\r\n        }\r\n    };\r\n    KeybindingLabel.prototype.renderKey = function (parent, label, highlight, separator) {\r\n        dom.append(parent, $('span.monaco-keybinding-key' + (highlight ? '.highlight' : ''), undefined, label));\r\n        if (separator) {\r\n            dom.append(parent, $('span.monaco-keybinding-key-separator', undefined, separator));\r\n        }\r\n    };\r\n    KeybindingLabel.prototype.renderUnbound = function (parent) {\r\n        dom.append(parent, $('span.monaco-keybinding-key', undefined, localize('unbound', \"Unbound\")));\r\n    };\r\n    KeybindingLabel.areSame = function (a, b) {\r\n        if (a === b || (!a && !b)) {\r\n            return true;\r\n        }\r\n        return !!a && !!b && equals(a.firstPart, b.firstPart) && equals(a.chordPart, b.chordPart);\r\n    };\r\n    return KeybindingLabel;\r\n}());\r\nexport { KeybindingLabel };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nimport './menu.css';\r\nimport * as nls from '../../../../nls.js';\r\nimport * as strings from '../../../common/strings.js';\r\nimport { Action } from '../../../common/actions.js';\r\nimport { ActionBar, Separator, ActionViewItem, BaseActionViewItem } from '../actionbar/actionbar.js';\r\nimport { addClass, EventType, EventHelper, removeTabIndexAndUpdateFocus, isAncestor, hasClass, addDisposableListener, removeClass, append, $, addClasses, removeClasses } from '../../dom.js';\r\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\r\nimport { RunOnceScheduler } from '../../../common/async.js';\r\nimport { DisposableStore } from '../../../common/lifecycle.js';\r\nimport { DomScrollableElement } from '../scrollbar/scrollableElement.js';\r\nimport { isLinux, isMacintosh } from '../../../common/platform.js';\r\nexport var MENU_MNEMONIC_REGEX = /\\(&([^\\s&])\\)|(^|[^&])&([^\\s&])/;\r\nexport var MENU_ESCAPED_MNEMONIC_REGEX = /(&amp;)?(&amp;)([^\\s&])/g;\r\nexport var Direction;\r\n(function (Direction) {\r\n    Direction[Direction[\"Right\"] = 0] = \"Right\";\r\n    Direction[Direction[\"Left\"] = 1] = \"Left\";\r\n})(Direction || (Direction = {}));\r\nvar SubmenuAction = /** @class */ (function (_super) {\r\n    __extends(SubmenuAction, _super);\r\n    function SubmenuAction(label, entries, cssClass) {\r\n        var _this = _super.call(this, !!cssClass ? cssClass : 'submenu', label, '', true) || this;\r\n        _this.entries = entries;\r\n        return _this;\r\n    }\r\n    return SubmenuAction;\r\n}(Action));\r\nexport { SubmenuAction };\r\nvar Menu = /** @class */ (function (_super) {\r\n    __extends(Menu, _super);\r\n    function Menu(container, actions, options) {\r\n        if (options === void 0) { options = {}; }\r\n        var _this = this;\r\n        addClass(container, 'monaco-menu-container');\r\n        container.setAttribute('role', 'presentation');\r\n        var menuElement = document.createElement('div');\r\n        addClass(menuElement, 'monaco-menu');\r\n        menuElement.setAttribute('role', 'presentation');\r\n        _this = _super.call(this, menuElement, {\r\n            orientation: 2 /* VERTICAL */,\r\n            actionViewItemProvider: function (action) { return _this.doGetActionViewItem(action, options, parentData); },\r\n            context: options.context,\r\n            actionRunner: options.actionRunner,\r\n            ariaLabel: options.ariaLabel,\r\n            triggerKeys: { keys: __spreadArrays([3 /* Enter */], (isMacintosh ? [10 /* Space */] : [])), keyDown: true }\r\n        }) || this;\r\n        _this.menuElement = menuElement;\r\n        _this.actionsList.setAttribute('role', 'menu');\r\n        _this.actionsList.tabIndex = 0;\r\n        _this.menuDisposables = _this._register(new DisposableStore());\r\n        addDisposableListener(menuElement, EventType.KEY_DOWN, function (e) {\r\n            var event = new StandardKeyboardEvent(e);\r\n            // Stop tab navigation of menus\r\n            if (event.equals(2 /* Tab */)) {\r\n                e.preventDefault();\r\n            }\r\n        });\r\n        if (options.enableMnemonics) {\r\n            _this.menuDisposables.add(addDisposableListener(menuElement, EventType.KEY_DOWN, function (e) {\r\n                var key = e.key.toLocaleLowerCase();\r\n                if (_this.mnemonics.has(key)) {\r\n                    EventHelper.stop(e, true);\r\n                    var actions_1 = _this.mnemonics.get(key);\r\n                    if (actions_1.length === 1) {\r\n                        if (actions_1[0] instanceof SubmenuMenuActionViewItem && actions_1[0].container) {\r\n                            _this.focusItemByElement(actions_1[0].container);\r\n                        }\r\n                        actions_1[0].onClick(e);\r\n                    }\r\n                    if (actions_1.length > 1) {\r\n                        var action = actions_1.shift();\r\n                        if (action && action.container) {\r\n                            _this.focusItemByElement(action.container);\r\n                            actions_1.push(action);\r\n                        }\r\n                        _this.mnemonics.set(key, actions_1);\r\n                    }\r\n                }\r\n            }));\r\n        }\r\n        if (isLinux) {\r\n            _this._register(addDisposableListener(menuElement, EventType.KEY_DOWN, function (e) {\r\n                var event = new StandardKeyboardEvent(e);\r\n                if (event.equals(14 /* Home */) || event.equals(11 /* PageUp */)) {\r\n                    _this.focusedItem = _this.viewItems.length - 1;\r\n                    _this.focusNext();\r\n                    EventHelper.stop(e, true);\r\n                }\r\n                else if (event.equals(13 /* End */) || event.equals(12 /* PageDown */)) {\r\n                    _this.focusedItem = 0;\r\n                    _this.focusPrevious();\r\n                    EventHelper.stop(e, true);\r\n                }\r\n            }));\r\n        }\r\n        _this._register(addDisposableListener(_this.domNode, EventType.MOUSE_OUT, function (e) {\r\n            var relatedTarget = e.relatedTarget;\r\n            if (!isAncestor(relatedTarget, _this.domNode)) {\r\n                _this.focusedItem = undefined;\r\n                _this.updateFocus();\r\n                e.stopPropagation();\r\n            }\r\n        }));\r\n        _this._register(addDisposableListener(_this.actionsList, EventType.MOUSE_OVER, function (e) {\r\n            var target = e.target;\r\n            if (!target || !isAncestor(target, _this.actionsList) || target === _this.actionsList) {\r\n                return;\r\n            }\r\n            while (target.parentElement !== _this.actionsList && target.parentElement !== null) {\r\n                target = target.parentElement;\r\n            }\r\n            if (hasClass(target, 'action-item')) {\r\n                var lastFocusedItem = _this.focusedItem;\r\n                _this.setFocusedItem(target);\r\n                if (lastFocusedItem !== _this.focusedItem) {\r\n                    _this.updateFocus();\r\n                }\r\n            }\r\n        }));\r\n        var parentData = {\r\n            parent: _this\r\n        };\r\n        _this.mnemonics = new Map();\r\n        // Scroll Logic\r\n        _this.scrollableElement = _this._register(new DomScrollableElement(menuElement, {\r\n            alwaysConsumeMouseWheel: true,\r\n            horizontal: 2 /* Hidden */,\r\n            vertical: 3 /* Visible */,\r\n            verticalScrollbarSize: 7,\r\n            handleMouseWheel: true,\r\n            useShadows: true\r\n        }));\r\n        var scrollElement = _this.scrollableElement.getDomNode();\r\n        scrollElement.style.position = '';\r\n        _this._register(addDisposableListener(scrollElement, EventType.MOUSE_UP, function (e) {\r\n            // Absorb clicks in menu dead space https://github.com/Microsoft/vscode/issues/63575\r\n            // We do this on the scroll element so the scroll bar doesn't dismiss the menu either\r\n            e.preventDefault();\r\n        }));\r\n        menuElement.style.maxHeight = Math.max(10, window.innerHeight - container.getBoundingClientRect().top - 30) + \"px\";\r\n        _this.push(actions, { icon: true, label: true, isMenu: true });\r\n        container.appendChild(_this.scrollableElement.getDomNode());\r\n        _this.scrollableElement.scanDomNode();\r\n        _this.viewItems.filter(function (item) { return !(item instanceof MenuSeparatorActionViewItem); }).forEach(function (item, index, array) {\r\n            item.updatePositionInSet(index + 1, array.length);\r\n        });\r\n        return _this;\r\n    }\r\n    Menu.prototype.style = function (style) {\r\n        var container = this.getContainer();\r\n        var fgColor = style.foregroundColor ? \"\" + style.foregroundColor : '';\r\n        var bgColor = style.backgroundColor ? \"\" + style.backgroundColor : '';\r\n        var border = style.borderColor ? \"1px solid \" + style.borderColor : '';\r\n        var shadow = style.shadowColor ? \"0 2px 4px \" + style.shadowColor : '';\r\n        container.style.border = border;\r\n        this.domNode.style.color = fgColor;\r\n        this.domNode.style.backgroundColor = bgColor;\r\n        container.style.boxShadow = shadow;\r\n        if (this.viewItems) {\r\n            this.viewItems.forEach(function (item) {\r\n                if (item instanceof BaseMenuActionViewItem || item instanceof MenuSeparatorActionViewItem) {\r\n                    item.style(style);\r\n                }\r\n            });\r\n        }\r\n    };\r\n    Menu.prototype.getContainer = function () {\r\n        return this.scrollableElement.getDomNode();\r\n    };\r\n    Object.defineProperty(Menu.prototype, \"onScroll\", {\r\n        get: function () {\r\n            return this.scrollableElement.onScroll;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Menu.prototype, \"scrollOffset\", {\r\n        get: function () {\r\n            return this.menuElement.scrollTop;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Menu.prototype.focusItemByElement = function (element) {\r\n        var lastFocusedItem = this.focusedItem;\r\n        this.setFocusedItem(element);\r\n        if (lastFocusedItem !== this.focusedItem) {\r\n            this.updateFocus();\r\n        }\r\n    };\r\n    Menu.prototype.setFocusedItem = function (element) {\r\n        for (var i = 0; i < this.actionsList.children.length; i++) {\r\n            var elem = this.actionsList.children[i];\r\n            if (element === elem) {\r\n                this.focusedItem = i;\r\n                break;\r\n            }\r\n        }\r\n    };\r\n    Menu.prototype.updateFocus = function (fromRight) {\r\n        _super.prototype.updateFocus.call(this, fromRight, true);\r\n        if (typeof this.focusedItem !== 'undefined') {\r\n            // Workaround for #80047 caused by an issue in chromium\r\n            // https://bugs.chromium.org/p/chromium/issues/detail?id=414283\r\n            // When that's fixed, just call this.scrollableElement.scanDomNode()\r\n            this.scrollableElement.setScrollPosition({\r\n                scrollTop: Math.round(this.menuElement.scrollTop)\r\n            });\r\n        }\r\n    };\r\n    Menu.prototype.doGetActionViewItem = function (action, options, parentData) {\r\n        if (action instanceof Separator) {\r\n            return new MenuSeparatorActionViewItem(options.context, action, { icon: true });\r\n        }\r\n        else if (action instanceof SubmenuAction) {\r\n            var menuActionViewItem = new SubmenuMenuActionViewItem(action, action.entries, parentData, options);\r\n            if (options.enableMnemonics) {\r\n                var mnemonic = menuActionViewItem.getMnemonic();\r\n                if (mnemonic && menuActionViewItem.isEnabled()) {\r\n                    var actionViewItems = [];\r\n                    if (this.mnemonics.has(mnemonic)) {\r\n                        actionViewItems = this.mnemonics.get(mnemonic);\r\n                    }\r\n                    actionViewItems.push(menuActionViewItem);\r\n                    this.mnemonics.set(mnemonic, actionViewItems);\r\n                }\r\n            }\r\n            return menuActionViewItem;\r\n        }\r\n        else {\r\n            var menuItemOptions = { enableMnemonics: options.enableMnemonics };\r\n            if (options.getKeyBinding) {\r\n                var keybinding = options.getKeyBinding(action);\r\n                if (keybinding) {\r\n                    var keybindingLabel = keybinding.getLabel();\r\n                    if (keybindingLabel) {\r\n                        menuItemOptions.keybinding = keybindingLabel;\r\n                    }\r\n                }\r\n            }\r\n            var menuActionViewItem = new BaseMenuActionViewItem(options.context, action, menuItemOptions);\r\n            if (options.enableMnemonics) {\r\n                var mnemonic = menuActionViewItem.getMnemonic();\r\n                if (mnemonic && menuActionViewItem.isEnabled()) {\r\n                    var actionViewItems = [];\r\n                    if (this.mnemonics.has(mnemonic)) {\r\n                        actionViewItems = this.mnemonics.get(mnemonic);\r\n                    }\r\n                    actionViewItems.push(menuActionViewItem);\r\n                    this.mnemonics.set(mnemonic, actionViewItems);\r\n                }\r\n            }\r\n            return menuActionViewItem;\r\n        }\r\n    };\r\n    return Menu;\r\n}(ActionBar));\r\nexport { Menu };\r\nvar BaseMenuActionViewItem = /** @class */ (function (_super) {\r\n    __extends(BaseMenuActionViewItem, _super);\r\n    function BaseMenuActionViewItem(ctx, action, options) {\r\n        if (options === void 0) { options = {}; }\r\n        var _this = this;\r\n        options.isMenu = true;\r\n        _this = _super.call(this, action, action, options) || this;\r\n        _this.options = options;\r\n        _this.options.icon = options.icon !== undefined ? options.icon : false;\r\n        _this.options.label = options.label !== undefined ? options.label : true;\r\n        _this.cssClass = '';\r\n        // Set mnemonic\r\n        if (_this.options.label && options.enableMnemonics) {\r\n            var label = _this.getAction().label;\r\n            if (label) {\r\n                var matches = MENU_MNEMONIC_REGEX.exec(label);\r\n                if (matches) {\r\n                    _this.mnemonic = (!!matches[1] ? matches[1] : matches[3]).toLocaleLowerCase();\r\n                }\r\n            }\r\n        }\r\n        // Add mouse up listener later to avoid accidental clicks\r\n        _this.runOnceToEnableMouseUp = new RunOnceScheduler(function () {\r\n            if (!_this.element) {\r\n                return;\r\n            }\r\n            _this._register(addDisposableListener(_this.element, EventType.MOUSE_UP, function (e) {\r\n                if (e.defaultPrevented) {\r\n                    return;\r\n                }\r\n                EventHelper.stop(e, true);\r\n                _this.onClick(e);\r\n            }));\r\n        }, 100);\r\n        _this._register(_this.runOnceToEnableMouseUp);\r\n        return _this;\r\n    }\r\n    BaseMenuActionViewItem.prototype.render = function (container) {\r\n        _super.prototype.render.call(this, container);\r\n        if (!this.element) {\r\n            return;\r\n        }\r\n        this.container = container;\r\n        this.item = append(this.element, $('a.action-menu-item'));\r\n        if (this._action.id === Separator.ID) {\r\n            // A separator is a presentation item\r\n            this.item.setAttribute('role', 'presentation');\r\n        }\r\n        else {\r\n            this.item.setAttribute('role', 'menuitem');\r\n            if (this.mnemonic) {\r\n                this.item.setAttribute('aria-keyshortcuts', \"\" + this.mnemonic);\r\n            }\r\n        }\r\n        this.check = append(this.item, $('span.menu-item-check.codicon.codicon-check'));\r\n        this.check.setAttribute('role', 'none');\r\n        this.label = append(this.item, $('span.action-label'));\r\n        if (this.options.label && this.options.keybinding) {\r\n            append(this.item, $('span.keybinding')).textContent = this.options.keybinding;\r\n        }\r\n        // Adds mouse up listener to actually run the action\r\n        this.runOnceToEnableMouseUp.schedule();\r\n        this.updateClass();\r\n        this.updateLabel();\r\n        this.updateTooltip();\r\n        this.updateEnabled();\r\n        this.updateChecked();\r\n    };\r\n    BaseMenuActionViewItem.prototype.blur = function () {\r\n        _super.prototype.blur.call(this);\r\n        this.applyStyle();\r\n    };\r\n    BaseMenuActionViewItem.prototype.focus = function () {\r\n        _super.prototype.focus.call(this);\r\n        if (this.item) {\r\n            this.item.focus();\r\n        }\r\n        this.applyStyle();\r\n    };\r\n    BaseMenuActionViewItem.prototype.updatePositionInSet = function (pos, setSize) {\r\n        if (this.item) {\r\n            this.item.setAttribute('aria-posinset', \"\" + pos);\r\n            this.item.setAttribute('aria-setsize', \"\" + setSize);\r\n        }\r\n    };\r\n    BaseMenuActionViewItem.prototype.updateLabel = function () {\r\n        if (this.options.label) {\r\n            var label = this.getAction().label;\r\n            if (label) {\r\n                var cleanLabel = cleanMnemonic(label);\r\n                if (!this.options.enableMnemonics) {\r\n                    label = cleanLabel;\r\n                }\r\n                if (this.label) {\r\n                    this.label.setAttribute('aria-label', cleanLabel.replace(/&&/g, '&'));\r\n                }\r\n                var matches = MENU_MNEMONIC_REGEX.exec(label);\r\n                if (matches) {\r\n                    label = strings.escape(label);\r\n                    // This is global, reset it\r\n                    MENU_ESCAPED_MNEMONIC_REGEX.lastIndex = 0;\r\n                    var escMatch = MENU_ESCAPED_MNEMONIC_REGEX.exec(label);\r\n                    // We can't use negative lookbehind so if we match our negative and skip\r\n                    while (escMatch && escMatch[1]) {\r\n                        escMatch = MENU_ESCAPED_MNEMONIC_REGEX.exec(label);\r\n                    }\r\n                    if (escMatch) {\r\n                        label = label.substr(0, escMatch.index) + \"<u aria-hidden=\\\"true\\\">\" + escMatch[3] + \"</u>\" + label.substr(escMatch.index + escMatch[0].length);\r\n                    }\r\n                    label = label.replace(/&amp;&amp;/g, '&amp;');\r\n                    if (this.item) {\r\n                        this.item.setAttribute('aria-keyshortcuts', (!!matches[1] ? matches[1] : matches[3]).toLocaleLowerCase());\r\n                    }\r\n                }\r\n                else {\r\n                    label = label.replace(/&&/g, '&');\r\n                }\r\n            }\r\n            if (this.label) {\r\n                this.label.innerHTML = label.trim();\r\n            }\r\n        }\r\n    };\r\n    BaseMenuActionViewItem.prototype.updateTooltip = function () {\r\n        var title = null;\r\n        if (this.getAction().tooltip) {\r\n            title = this.getAction().tooltip;\r\n        }\r\n        else if (!this.options.label && this.getAction().label && this.options.icon) {\r\n            title = this.getAction().label;\r\n            if (this.options.keybinding) {\r\n                title = nls.localize({ key: 'titleLabel', comment: ['action title', 'action keybinding'] }, \"{0} ({1})\", title, this.options.keybinding);\r\n            }\r\n        }\r\n        if (title && this.item) {\r\n            this.item.title = title;\r\n        }\r\n    };\r\n    BaseMenuActionViewItem.prototype.updateClass = function () {\r\n        if (this.cssClass && this.item) {\r\n            removeClasses(this.item, this.cssClass);\r\n        }\r\n        if (this.options.icon && this.label) {\r\n            this.cssClass = this.getAction().class || '';\r\n            addClass(this.label, 'icon');\r\n            if (this.cssClass) {\r\n                addClasses(this.label, this.cssClass);\r\n            }\r\n            this.updateEnabled();\r\n        }\r\n        else if (this.label) {\r\n            removeClass(this.label, 'icon');\r\n        }\r\n    };\r\n    BaseMenuActionViewItem.prototype.updateEnabled = function () {\r\n        if (this.getAction().enabled) {\r\n            if (this.element) {\r\n                removeClass(this.element, 'disabled');\r\n            }\r\n            if (this.item) {\r\n                removeClass(this.item, 'disabled');\r\n                this.item.tabIndex = 0;\r\n            }\r\n        }\r\n        else {\r\n            if (this.element) {\r\n                addClass(this.element, 'disabled');\r\n            }\r\n            if (this.item) {\r\n                addClass(this.item, 'disabled');\r\n                removeTabIndexAndUpdateFocus(this.item);\r\n            }\r\n        }\r\n    };\r\n    BaseMenuActionViewItem.prototype.updateChecked = function () {\r\n        if (!this.item) {\r\n            return;\r\n        }\r\n        if (this.getAction().checked) {\r\n            addClass(this.item, 'checked');\r\n            this.item.setAttribute('role', 'menuitemcheckbox');\r\n            this.item.setAttribute('aria-checked', 'true');\r\n        }\r\n        else {\r\n            removeClass(this.item, 'checked');\r\n            this.item.setAttribute('role', 'menuitem');\r\n            this.item.setAttribute('aria-checked', 'false');\r\n        }\r\n    };\r\n    BaseMenuActionViewItem.prototype.getMnemonic = function () {\r\n        return this.mnemonic;\r\n    };\r\n    BaseMenuActionViewItem.prototype.applyStyle = function () {\r\n        if (!this.menuStyle) {\r\n            return;\r\n        }\r\n        var isSelected = this.element && hasClass(this.element, 'focused');\r\n        var fgColor = isSelected && this.menuStyle.selectionForegroundColor ? this.menuStyle.selectionForegroundColor : this.menuStyle.foregroundColor;\r\n        var bgColor = isSelected && this.menuStyle.selectionBackgroundColor ? this.menuStyle.selectionBackgroundColor : undefined;\r\n        var border = isSelected && this.menuStyle.selectionBorderColor ? \"thin solid \" + this.menuStyle.selectionBorderColor : '';\r\n        if (this.item) {\r\n            this.item.style.color = fgColor ? fgColor.toString() : '';\r\n            this.item.style.backgroundColor = bgColor ? bgColor.toString() : '';\r\n        }\r\n        if (this.check) {\r\n            this.check.style.color = fgColor ? fgColor.toString() : '';\r\n        }\r\n        if (this.container) {\r\n            this.container.style.border = border;\r\n        }\r\n    };\r\n    BaseMenuActionViewItem.prototype.style = function (style) {\r\n        this.menuStyle = style;\r\n        this.applyStyle();\r\n    };\r\n    return BaseMenuActionViewItem;\r\n}(BaseActionViewItem));\r\nvar SubmenuMenuActionViewItem = /** @class */ (function (_super) {\r\n    __extends(SubmenuMenuActionViewItem, _super);\r\n    function SubmenuMenuActionViewItem(action, submenuActions, parentData, submenuOptions) {\r\n        var _this = _super.call(this, action, action, submenuOptions) || this;\r\n        _this.submenuActions = submenuActions;\r\n        _this.parentData = parentData;\r\n        _this.submenuOptions = submenuOptions;\r\n        _this.mysubmenu = null;\r\n        _this.submenuDisposables = _this._register(new DisposableStore());\r\n        _this.mouseOver = false;\r\n        _this.expandDirection = submenuOptions && submenuOptions.expandDirection !== undefined ? submenuOptions.expandDirection : Direction.Right;\r\n        _this.showScheduler = new RunOnceScheduler(function () {\r\n            if (_this.mouseOver) {\r\n                _this.cleanupExistingSubmenu(false);\r\n                _this.createSubmenu(false);\r\n            }\r\n        }, 250);\r\n        _this.hideScheduler = new RunOnceScheduler(function () {\r\n            if (_this.element && (!isAncestor(document.activeElement, _this.element) && _this.parentData.submenu === _this.mysubmenu)) {\r\n                _this.parentData.parent.focus(false);\r\n                _this.cleanupExistingSubmenu(true);\r\n            }\r\n        }, 750);\r\n        return _this;\r\n    }\r\n    SubmenuMenuActionViewItem.prototype.render = function (container) {\r\n        var _this = this;\r\n        _super.prototype.render.call(this, container);\r\n        if (!this.element) {\r\n            return;\r\n        }\r\n        if (this.item) {\r\n            addClass(this.item, 'monaco-submenu-item');\r\n            this.item.setAttribute('aria-haspopup', 'true');\r\n            this.updateAriaExpanded('false');\r\n            this.submenuIndicator = append(this.item, $('span.submenu-indicator.codicon.codicon-chevron-right'));\r\n            this.submenuIndicator.setAttribute('aria-hidden', 'true');\r\n        }\r\n        this._register(addDisposableListener(this.element, EventType.KEY_UP, function (e) {\r\n            var event = new StandardKeyboardEvent(e);\r\n            if (event.equals(17 /* RightArrow */) || event.equals(3 /* Enter */)) {\r\n                EventHelper.stop(e, true);\r\n                _this.createSubmenu(true);\r\n            }\r\n        }));\r\n        this._register(addDisposableListener(this.element, EventType.KEY_DOWN, function (e) {\r\n            var event = new StandardKeyboardEvent(e);\r\n            if (document.activeElement === _this.item) {\r\n                if (event.equals(17 /* RightArrow */) || event.equals(3 /* Enter */)) {\r\n                    EventHelper.stop(e, true);\r\n                }\r\n            }\r\n        }));\r\n        this._register(addDisposableListener(this.element, EventType.MOUSE_OVER, function (e) {\r\n            if (!_this.mouseOver) {\r\n                _this.mouseOver = true;\r\n                _this.showScheduler.schedule();\r\n            }\r\n        }));\r\n        this._register(addDisposableListener(this.element, EventType.MOUSE_LEAVE, function (e) {\r\n            _this.mouseOver = false;\r\n        }));\r\n        this._register(addDisposableListener(this.element, EventType.FOCUS_OUT, function (e) {\r\n            if (_this.element && !isAncestor(document.activeElement, _this.element)) {\r\n                _this.hideScheduler.schedule();\r\n            }\r\n        }));\r\n        this._register(this.parentData.parent.onScroll(function () {\r\n            _this.parentData.parent.focus(false);\r\n            _this.cleanupExistingSubmenu(false);\r\n        }));\r\n    };\r\n    SubmenuMenuActionViewItem.prototype.onClick = function (e) {\r\n        // stop clicking from trying to run an action\r\n        EventHelper.stop(e, true);\r\n        this.cleanupExistingSubmenu(false);\r\n        this.createSubmenu(true);\r\n    };\r\n    SubmenuMenuActionViewItem.prototype.cleanupExistingSubmenu = function (force) {\r\n        if (this.parentData.submenu && (force || (this.parentData.submenu !== this.mysubmenu))) {\r\n            this.parentData.submenu.dispose();\r\n            this.parentData.submenu = undefined;\r\n            this.updateAriaExpanded('false');\r\n            if (this.submenuContainer) {\r\n                this.submenuDisposables.clear();\r\n                this.submenuContainer = undefined;\r\n            }\r\n        }\r\n    };\r\n    SubmenuMenuActionViewItem.prototype.createSubmenu = function (selectFirstItem) {\r\n        var _this = this;\r\n        if (selectFirstItem === void 0) { selectFirstItem = true; }\r\n        if (!this.element) {\r\n            return;\r\n        }\r\n        if (!this.parentData.submenu) {\r\n            this.updateAriaExpanded('true');\r\n            this.submenuContainer = append(this.element, $('div.monaco-submenu'));\r\n            addClasses(this.submenuContainer, 'menubar-menu-items-holder', 'context-view');\r\n            // Set the top value of the menu container before construction\r\n            // This allows the menu constructor to calculate the proper max height\r\n            var computedStyles = getComputedStyle(this.parentData.parent.domNode);\r\n            var paddingTop = parseFloat(computedStyles.paddingTop || '0') || 0;\r\n            this.submenuContainer.style.top = this.element.offsetTop - this.parentData.parent.scrollOffset - paddingTop + \"px\";\r\n            this.parentData.submenu = new Menu(this.submenuContainer, this.submenuActions, this.submenuOptions);\r\n            if (this.menuStyle) {\r\n                this.parentData.submenu.style(this.menuStyle);\r\n            }\r\n            var boundingRect = this.element.getBoundingClientRect();\r\n            var childBoundingRect = this.submenuContainer.getBoundingClientRect();\r\n            if (this.expandDirection === Direction.Right) {\r\n                if (window.innerWidth <= boundingRect.right + childBoundingRect.width) {\r\n                    this.submenuContainer.style.left = '10px';\r\n                    this.submenuContainer.style.top = this.element.offsetTop - this.parentData.parent.scrollOffset + boundingRect.height + \"px\";\r\n                }\r\n                else {\r\n                    this.submenuContainer.style.left = this.element.offsetWidth + \"px\";\r\n                    this.submenuContainer.style.top = this.element.offsetTop - this.parentData.parent.scrollOffset - paddingTop + \"px\";\r\n                }\r\n            }\r\n            else if (this.expandDirection === Direction.Left) {\r\n                this.submenuContainer.style.right = this.element.offsetWidth + \"px\";\r\n                this.submenuContainer.style.left = 'auto';\r\n                this.submenuContainer.style.top = this.element.offsetTop - this.parentData.parent.scrollOffset - paddingTop + \"px\";\r\n            }\r\n            this.submenuDisposables.add(addDisposableListener(this.submenuContainer, EventType.KEY_UP, function (e) {\r\n                var event = new StandardKeyboardEvent(e);\r\n                if (event.equals(15 /* LeftArrow */)) {\r\n                    EventHelper.stop(e, true);\r\n                    _this.parentData.parent.focus();\r\n                    _this.cleanupExistingSubmenu(true);\r\n                }\r\n            }));\r\n            this.submenuDisposables.add(addDisposableListener(this.submenuContainer, EventType.KEY_DOWN, function (e) {\r\n                var event = new StandardKeyboardEvent(e);\r\n                if (event.equals(15 /* LeftArrow */)) {\r\n                    EventHelper.stop(e, true);\r\n                }\r\n            }));\r\n            this.submenuDisposables.add(this.parentData.submenu.onDidCancel(function () {\r\n                _this.parentData.parent.focus();\r\n                _this.cleanupExistingSubmenu(true);\r\n            }));\r\n            this.parentData.submenu.focus(selectFirstItem);\r\n            this.mysubmenu = this.parentData.submenu;\r\n        }\r\n        else {\r\n            this.parentData.submenu.focus(false);\r\n        }\r\n    };\r\n    SubmenuMenuActionViewItem.prototype.updateAriaExpanded = function (value) {\r\n        var _a;\r\n        if (this.item) {\r\n            (_a = this.item) === null || _a === void 0 ? void 0 : _a.setAttribute('aria-expanded', value);\r\n        }\r\n    };\r\n    SubmenuMenuActionViewItem.prototype.applyStyle = function () {\r\n        _super.prototype.applyStyle.call(this);\r\n        if (!this.menuStyle) {\r\n            return;\r\n        }\r\n        var isSelected = this.element && hasClass(this.element, 'focused');\r\n        var fgColor = isSelected && this.menuStyle.selectionForegroundColor ? this.menuStyle.selectionForegroundColor : this.menuStyle.foregroundColor;\r\n        if (this.submenuIndicator) {\r\n            this.submenuIndicator.style.color = fgColor ? \"\" + fgColor : '';\r\n        }\r\n        if (this.parentData.submenu) {\r\n            this.parentData.submenu.style(this.menuStyle);\r\n        }\r\n    };\r\n    SubmenuMenuActionViewItem.prototype.dispose = function () {\r\n        _super.prototype.dispose.call(this);\r\n        this.hideScheduler.dispose();\r\n        if (this.mysubmenu) {\r\n            this.mysubmenu.dispose();\r\n            this.mysubmenu = null;\r\n        }\r\n        if (this.submenuContainer) {\r\n            this.submenuContainer = undefined;\r\n        }\r\n    };\r\n    return SubmenuMenuActionViewItem;\r\n}(BaseMenuActionViewItem));\r\nvar MenuSeparatorActionViewItem = /** @class */ (function (_super) {\r\n    __extends(MenuSeparatorActionViewItem, _super);\r\n    function MenuSeparatorActionViewItem() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    MenuSeparatorActionViewItem.prototype.style = function (style) {\r\n        if (this.label) {\r\n            this.label.style.borderBottomColor = style.separatorColor ? \"\" + style.separatorColor : '';\r\n        }\r\n    };\r\n    return MenuSeparatorActionViewItem;\r\n}(ActionViewItem));\r\nexport function cleanMnemonic(label) {\r\n    var regex = MENU_MNEMONIC_REGEX;\r\n    var matches = regex.exec(label);\r\n    if (!matches) {\r\n        return label;\r\n    }\r\n    var mnemonicInText = !matches[1];\r\n    return label.replace(regex, mnemonicInText ? '$2$3' : '').trim();\r\n}\r\n"],"sourceRoot":""}