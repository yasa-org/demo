{"version":3,"sources":["webpack:///./node_modules/echarts/lib/scale/Ordinal.js","webpack:///./node_modules/echarts/lib/scale/Time.js","webpack:///./node_modules/echarts/lib/preprocessor/helper/compatStyle.js","webpack:///./node_modules/echarts/lib/model/mixin/makeStyleMapper.js","webpack:///./node_modules/echarts/lib/model/mixin/dataFormat.js","webpack:///./node_modules/echarts/lib/model/mixin/lineStyle.js","webpack:///./node_modules/echarts/lib/model/Model.js","webpack:///./node_modules/echarts/lib/model/Series.js","webpack:///./node_modules/echarts/lib/model/mixin/itemStyle.js","webpack:///./node_modules/echarts/lib/model/Component.js","webpack:///./node_modules/echarts/lib/model/Global.js","webpack:///./node_modules/echarts/lib/model/globalDefault.js","webpack:///./node_modules/echarts/lib/scale/Interval.js","webpack:///./node_modules/echarts/lib/model/referHelper.js","webpack:///./node_modules/echarts/lib/scale/Log.js","webpack:///./node_modules/echarts/lib/scale/helper.js","webpack:///./node_modules/echarts/lib/loading/default.js","webpack:///./node_modules/echarts/lib/model/mixin/areaStyle.js","webpack:///./node_modules/echarts/lib/model/OptionManager.js","webpack:///./node_modules/echarts/lib/processor/dataStack.js","webpack:///./node_modules/echarts/lib/model/mixin/boxLayout.js","webpack:///./node_modules/echarts/lib/scale/Scale.js","webpack:///./node_modules/echarts/lib/model/mixin/colorPalette.js","webpack:///./node_modules/echarts/lib/preprocessor/backwardCompat.js","webpack:///./node_modules/echarts/lib/processor/dataSample.js","webpack:///./node_modules/echarts/lib/model/mixin/textStyle.js"],"names":["zrUtil","Scale","OrdinalMeta","scaleProto","prototype","OrdinalScale","extend","type","init","ordinalMeta","extent","isArray","categories","this","_ordinalMeta","_extent","length","parse","val","getOrdinal","Math","round","contain","rank","call","normalize","scale","getTicks","ticks","push","getLabel","n","isBlank","count","unionExtentFromData","data","dim","unionExtent","getApproximateExtent","getOrdinalMeta","niceTicks","noop","niceExtent","create","_default","module","exports","numberUtil","formatUtil","scaleHelper","IntervalScale","intervalScaleProto","mathCeil","ceil","mathFloor","floor","ONE_SECOND","ONE_MINUTE","ONE_HOUR","ONE_DAY","bisect","a","x","lo","hi","mid","TimeScale","stepLvl","_stepLvl","date","Date","formatTime","getSetting","opt","Infinity","d","getFullYear","getMonth","getDate","splitNumber","minInterval","maxInterval","interval","_interval","fixMin","fixMax","approxTickNum","span","approxInterval","scaleLevelsLen","scaleLevels","idx","level","min","yearSpan","yearStep","nice","timezoneOffset","getTimezoneOffset","fixExtent","_niceExtent","parseDate","each","methodName","model","useUTC","ecModel","get","modelUtil","isObject","POSSIBLE_STYLES","compatEC2ItemStyle","itemStyleOpt","itemStyle","i","len","styleName","normalItemStyleOpt","normal","emphasisItemStyleOpt","emphasis","merge","convertNormalEmphasis","optType","useExtend","normalOpt","emphasisOpt","defaults","removeEC3NormalStatus","compatTextStyle","propName","labelOptSingle","textStyle","TEXT_STYLE_OPTIONS","hasOwnProperty","compatEC3CommonStyles","processSeries","seriesOpt","markPoint","markLine","markArea","nodes","edgeData","links","edges","isTypedArray","mpData","mlData","breadcrumb","levels","leaves","toArr","o","toObj","option","isTheme","series","axes","axisName","axisOpt","axisPointer","parallel","parallelOpt","parallelAxisDefault","calendar","calendarOpt","radar","radarOpt","geo","geoOpt","regions","regionObj","timeline","timelineOpt","item","toolbox","toolboxOpt","feature","featureOpt","tooltip","properties","excludes","includes","style","indexOf","getShallow","_dataProvider","retrieveRawValue","_format","getTooltipMarker","formatTpl","_model","getTooltipRenderMode","DIMENSION_LABEL_REG","getDataParams","dataIndex","dataType","getData","rawValue","getRawValue","rawDataIndex","getRawIndex","name","getName","itemOpt","getRawDataItem","color","getItemVisual","borderColor","tooltipModel","getComponent","renderModeOption","renderMode","mainType","isSeries","userOutput","componentType","componentSubType","subType","componentIndex","seriesType","seriesIndex","seriesId","id","seriesName","value","dimensionNames","encode","marker","$vars","getFormattedLabel","status","dimIndex","labelProp","itemModel","getItemModel","params","Array","formatter","dimensionIndex","str","replace","origin","charAt","slice","formatTooltip","makeStyleMapper","getLineStyle","lineDash","getLineDash","lineWidth","lineType","dotSize","max","dashSize","env","makeInner","_clazz","enableClassExtend","enableClassCheck","lineStyleMixin","areaStyleMixin","textStyleMixin","itemStyleMixin","mixin","inner","Model","parentModel","doGet","obj","pathArr","getParent","path","getParentMethod","constructor","mergeOption","ignoreParent","parsePath","key","getModel","thisParentModel","isEmpty","restoreData","clone","Ctor","setReadOnly","split","customizeGetParent","isAnimationEnabled","node","animation","_config","__DEV__","encodeHTML","addCommas","ComponentModel","colorPaletteMixin","dataFormatMixin","_layout","getLayoutParams","mergeLayoutParam","_task","createTask","_sourceHelper","prepareSource","getSource","SeriesModel","coordinateSystem","defaultOption","legendVisualProvider","visualColorAccessPath","visualBorderColorAccessPath","layoutMode","extraOpt","dataTask","dataTaskCount","reset","dataTaskReset","context","mergeDefaultAndTheme","getInitialData","wrapData","dataBeforeProcessed","autoSeriesName","inputPositionParams","themeSubType","hasClass","getTheme","getDefaultOption","defaultEmphasis","fillDataTextStyle","newSeriesOption","dirty","props","label","appendData","getRawData","task","getCurrentTask","getLinkedData","setData","modifyOutputEnd","setOutputEnd","outputData","getBaseAxis","coordSys","multipleSeries","newLine","isRichText","markers","markerId","formatArrayValue","vertially","reduce","dimItem","getDimensionInfo","displayName","result","setEachItem","dimInfo","otherDims","dimType","markName","dimHead","dimHeadStr","content","valStr","tooltipDims","join","formatSingleValue","mapDimension","tooltipDimLen","isValueArr","colorStops","formattedValue","colorEl","isNameSpecified","colorStr","html","animationEnabled","getColorFromPalette","scope","requestColorNum","coordDimToDataDim","coordDim","getProgressive","getProgressiveThreshold","getAxisTooltipData","getTooltipPosition","pipeTask","preventIncremental","pipelineContext","seriesModel","getSeriesAutoName","dataDims","nameArr","dataDim","cloneShallow","dataTaskProgress","param","end","CHANGABLE_METHODS","wrapMethod","curry","onDataSelfChange","scheduler","pipeline","getPipeline","uid","currentTask","agentStubMap","getItemStyle","getBorderLineDash","componentUtil","enableClassManagement","parseClassType","layout","boxLayoutMixin","dependentModels","$constructor","getUID","themeModel","optionUpdated","newCptOption","isInit","fields","optList","Class","superClass","getReferringComponents","queryComponents","index","getDependencies","deps","getClassesByMainType","Clazz","concat","dependencies","map","main","unshift","registerWhenExtend","enableSubTypeDefaulter","enableTopologicalTravel","_util","filter","isString","createHashMap","assert","globalDefault","resetSourceDefaulter","OPTION_INNER_KEY","GlobalModel","theme","optionManager","_theme","_optionManager","setOption","optionPreprocessorFuncs","resetOption","optionChanged","baseOption","mountOption","initBase","timelineOption","getTimelineOption","mediaOptions","getMediaOption","_api","mediaOption","newOption","componentsMap","_componentsMap","newCptTypes","visitComponent","newCptOptionList","normalizeToArray","mapResult","mappingToExists","makeIdAndName","keyInfo","determineSubType","exist","getComponentsByTypes","set","resultItem","componentModel","ComponentModelClass","getClass","createSeriesIndices","componentOption","topologicalTravel","getAllClassMainTypes","_seriesIndicesMap","_seriesIndices","getOption","opts","isIdInner","splice","list","condition","cpts","isIdArray","cpt","isNameArray","filterBySubType","findComponents","query","queryCond","getQueryCond","doFilter","q","indexAttr","idAttr","nameAttr","res","eachComponent","cb","components","component","queryResult","getSeriesByName","oneSeries","getSeriesByIndex","getSeriesByType","getSeries","getSeriesCount","eachSeries","assertSeriesInitialized","rawSeriesIndex","eachRawSeries","eachSeriesByType","eachRawSeriesByType","isSeriesFiltered","getCurrentSeriesIndices","filterSeries","filteredSeries","payload","componentTypes","isNotTargetSeries","seiresIndex","mergeTheme","notMergeColorLayer","colorLayer","themeItem","types","ret","existComponent","seriesModels","platform","navigator","gradientColor","fontFamily","match","fontSize","fontStyle","fontWeight","blendMode","animationDuration","animationDurationUpdate","animationEasing","animationEasingUpdate","animationThreshold","progressiveThreshold","progressive","hoverLayerThreshold","helper","roundNumber","_intervalPrecision","setExtent","start","thisExtent","isNaN","parseFloat","other","getInterval","setInterval","getIntervalPrecision","expandToNicedExtent","niceTickExtent","intervalPrecision","safeLimit","tick","lastNiceTick","getMinorTicks","minorTicks","getExtent","nextTick","prevTick","minorTicksGroup","minorInterval","minorTick","precision","getPrecisionSafe","isFinite","reverse","intervalScaleNiceTicks","expandSize","retrieve","CoordSysInfo","coordSysName","coordSysDims","axisMap","categoryAxisMap","firstCategoryDimIndex","getCoordSysInfoBySeries","fetch","fetchers","cartesian2d","xAxisModel","yAxisModel","isCategory","singleAxis","singleAxisModel","polar","polarModel","radiusAxisModel","findAxisModel","angleAxisModel","parallelModel","dimensions","parallelAxisIndex","axisIndex","axisModel","axisDim","roundingErrorFix","mathPow","pow","mathLog","log","LogScale","base","apply","arguments","_originalScale","originalScale","originalExtent","powVal","__fixMin","fixRoundingError","__fixMax","quantity","err","abs","originalVal","clamp","graphic","textContain","PI","api","text","textColor","maskColor","showSpinner","spinnerRadius","zlevel","group","Group","mask","Rect","fill","z","add","font","labelRect","textPosition","textDistance","textFill","arc","Arc","shape","startAngle","endAngle","r","stroke","lineCap","animateShape","when","delay","resize","textWidth","getWidth","cx","cy","getHeight","setShape","y","width","height","getAreaStyle","QUERY_REG","OptionManager","_timelineOptions","_mediaList","_mediaDefault","_currentMediaIndices","_optionBackup","_newBaseOption","parseRawOption","rawOption","isNew","mediaDefault","timelineOptions","mediaList","options","media","singleMedia","preProcess","applyMediaQuery","ecWidth","ecHeight","realMap","aspectratio","applicatable","attr","matched","operator","realAttr","toLowerCase","compare","real","expect","indicesEquals","indices1","indices2","oldOption","newCptOpt","oldCptOpt","setAsPrimitive","oldOptionBackup","newParsedOption","isRecreate","optionBackup","timelineModel","getCurrentIndex","indices","stackInfoMap","stack","stackInfoList","stackInfo","stackResultDimension","getCalculationInfo","stackedOverDimension","stackedDimension","stackedByDimension","isStackedByIndex","setCalculationInfo","calculateStack","targetStackInfo","idxInStack","resultVal","resultNaN","NaN","dims","targetData","newData","v0","v1","byValue","stackedDataRawIndex","sum","stackedOver","j","rawIndexOf","getByRawIndex","hostModel","getBoxLayoutParams","left","top","right","bottom","clazzUtil","setting","_setting","_isBlank","setBlank","getNearestColorPalette","colors","paletteNum","clearColorPalette","colorIdx","colorNameMap","scopeFields","defaultColorPalette","layeredColorPalette","colorPalette","compatStyle","overwrite","compatLayoutProperties","LAYOUT_PROPERTIES","prop","COMPATITABLE_COMPONENTS","clipOverflow","clip","clockWise","clockwise","pointerColor","dataRange","visualMap","componentName","samplers","average","frame","nearest","indexSampler","sampling","sampler","baseAxis","valueAxis","getOtherAxis","size","rate","downSample","graphicUtil","PATH_COLOR","getTextColor","isEmphasis","getFont","getTextRect","getBoundingRect"],"mappings":"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","file":"js/chunk-vendors~ef4b7b69.144f47e8.js","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Scale = require(\"./Scale\");\n\nvar OrdinalMeta = require(\"../data/OrdinalMeta\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Linear continuous scale\n * @module echarts/coord/scale/Ordinal\n *\n * http://en.wikipedia.org/wiki/Level_of_measurement\n */\n// FIXME only one data\nvar scaleProto = Scale.prototype;\nvar OrdinalScale = Scale.extend({\n  type: 'ordinal',\n\n  /**\n   * @param {module:echarts/data/OrdianlMeta|Array.<string>} ordinalMeta\n   */\n  init: function (ordinalMeta, extent) {\n    // Caution: Should not use instanceof, consider ec-extensions using\n    // import approach to get OrdinalMeta class.\n    if (!ordinalMeta || zrUtil.isArray(ordinalMeta)) {\n      ordinalMeta = new OrdinalMeta({\n        categories: ordinalMeta\n      });\n    }\n\n    this._ordinalMeta = ordinalMeta;\n    this._extent = extent || [0, ordinalMeta.categories.length - 1];\n  },\n  parse: function (val) {\n    return typeof val === 'string' ? this._ordinalMeta.getOrdinal(val) // val might be float.\n    : Math.round(val);\n  },\n  contain: function (rank) {\n    rank = this.parse(rank);\n    return scaleProto.contain.call(this, rank) && this._ordinalMeta.categories[rank] != null;\n  },\n\n  /**\n   * Normalize given rank or name to linear [0, 1]\n   * @param {number|string} [val]\n   * @return {number}\n   */\n  normalize: function (val) {\n    return scaleProto.normalize.call(this, this.parse(val));\n  },\n  scale: function (val) {\n    return Math.round(scaleProto.scale.call(this, val));\n  },\n\n  /**\n   * @return {Array}\n   */\n  getTicks: function () {\n    var ticks = [];\n    var extent = this._extent;\n    var rank = extent[0];\n\n    while (rank <= extent[1]) {\n      ticks.push(rank);\n      rank++;\n    }\n\n    return ticks;\n  },\n\n  /**\n   * Get item on rank n\n   * @param {number} n\n   * @return {string}\n   */\n  getLabel: function (n) {\n    if (!this.isBlank()) {\n      // Note that if no data, ordinalMeta.categories is an empty array.\n      return this._ordinalMeta.categories[n];\n    }\n  },\n\n  /**\n   * @return {number}\n   */\n  count: function () {\n    return this._extent[1] - this._extent[0] + 1;\n  },\n\n  /**\n   * @override\n   */\n  unionExtentFromData: function (data, dim) {\n    this.unionExtent(data.getApproximateExtent(dim));\n  },\n  getOrdinalMeta: function () {\n    return this._ordinalMeta;\n  },\n  niceTicks: zrUtil.noop,\n  niceExtent: zrUtil.noop\n});\n/**\n * @return {module:echarts/scale/Time}\n */\n\nOrdinalScale.create = function () {\n  return new OrdinalScale();\n};\n\nvar _default = OrdinalScale;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar numberUtil = require(\"../util/number\");\n\nvar formatUtil = require(\"../util/format\");\n\nvar scaleHelper = require(\"./helper\");\n\nvar IntervalScale = require(\"./Interval\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* A third-party license is embeded for some of the code in this file:\n* The \"scaleLevels\" was originally copied from \"d3.js\" with some\n* modifications made for this project.\n* (See more details in the comment on the definition of \"scaleLevels\" below.)\n* The use of the source code of this file is also subject to the terms\n* and consitions of the license of \"d3.js\" (BSD-3Clause, see\n* </licenses/LICENSE-d3>).\n*/\n// [About UTC and local time zone]:\n// In most cases, `number.parseDate` will treat input data string as local time\n// (except time zone is specified in time string). And `format.formateTime` returns\n// local time by default. option.useUTC is false by default. This design have\n// concidered these common case:\n// (1) Time that is persistent in server is in UTC, but it is needed to be diplayed\n// in local time by default.\n// (2) By default, the input data string (e.g., '2011-01-02') should be displayed\n// as its original time, without any time difference.\nvar intervalScaleProto = IntervalScale.prototype;\nvar mathCeil = Math.ceil;\nvar mathFloor = Math.floor;\nvar ONE_SECOND = 1000;\nvar ONE_MINUTE = ONE_SECOND * 60;\nvar ONE_HOUR = ONE_MINUTE * 60;\nvar ONE_DAY = ONE_HOUR * 24; // FIXME 公用？\n\nvar bisect = function (a, x, lo, hi) {\n  while (lo < hi) {\n    var mid = lo + hi >>> 1;\n\n    if (a[mid][1] < x) {\n      lo = mid + 1;\n    } else {\n      hi = mid;\n    }\n  }\n\n  return lo;\n};\n/**\n * @alias module:echarts/coord/scale/Time\n * @constructor\n */\n\n\nvar TimeScale = IntervalScale.extend({\n  type: 'time',\n\n  /**\n   * @override\n   */\n  getLabel: function (val) {\n    var stepLvl = this._stepLvl;\n    var date = new Date(val);\n    return formatUtil.formatTime(stepLvl[0], date, this.getSetting('useUTC'));\n  },\n\n  /**\n   * @override\n   */\n  niceExtent: function (opt) {\n    var extent = this._extent; // If extent start and end are same, expand them\n\n    if (extent[0] === extent[1]) {\n      // Expand extent\n      extent[0] -= ONE_DAY;\n      extent[1] += ONE_DAY;\n    } // If there are no data and extent are [Infinity, -Infinity]\n\n\n    if (extent[1] === -Infinity && extent[0] === Infinity) {\n      var d = new Date();\n      extent[1] = +new Date(d.getFullYear(), d.getMonth(), d.getDate());\n      extent[0] = extent[1] - ONE_DAY;\n    }\n\n    this.niceTicks(opt.splitNumber, opt.minInterval, opt.maxInterval); // var extent = this._extent;\n\n    var interval = this._interval;\n\n    if (!opt.fixMin) {\n      extent[0] = numberUtil.round(mathFloor(extent[0] / interval) * interval);\n    }\n\n    if (!opt.fixMax) {\n      extent[1] = numberUtil.round(mathCeil(extent[1] / interval) * interval);\n    }\n  },\n\n  /**\n   * @override\n   */\n  niceTicks: function (approxTickNum, minInterval, maxInterval) {\n    approxTickNum = approxTickNum || 10;\n    var extent = this._extent;\n    var span = extent[1] - extent[0];\n    var approxInterval = span / approxTickNum;\n\n    if (minInterval != null && approxInterval < minInterval) {\n      approxInterval = minInterval;\n    }\n\n    if (maxInterval != null && approxInterval > maxInterval) {\n      approxInterval = maxInterval;\n    }\n\n    var scaleLevelsLen = scaleLevels.length;\n    var idx = bisect(scaleLevels, approxInterval, 0, scaleLevelsLen);\n    var level = scaleLevels[Math.min(idx, scaleLevelsLen - 1)];\n    var interval = level[1]; // Same with interval scale if span is much larger than 1 year\n\n    if (level[0] === 'year') {\n      var yearSpan = span / interval; // From \"Nice Numbers for Graph Labels\" of Graphic Gems\n      // var niceYearSpan = numberUtil.nice(yearSpan, false);\n\n      var yearStep = numberUtil.nice(yearSpan / approxTickNum, true);\n      interval *= yearStep;\n    }\n\n    var timezoneOffset = this.getSetting('useUTC') ? 0 : new Date(+extent[0] || +extent[1]).getTimezoneOffset() * 60 * 1000;\n    var niceExtent = [Math.round(mathCeil((extent[0] - timezoneOffset) / interval) * interval + timezoneOffset), Math.round(mathFloor((extent[1] - timezoneOffset) / interval) * interval + timezoneOffset)];\n    scaleHelper.fixExtent(niceExtent, extent);\n    this._stepLvl = level; // Interval will be used in getTicks\n\n    this._interval = interval;\n    this._niceExtent = niceExtent;\n  },\n  parse: function (val) {\n    // val might be float.\n    return +numberUtil.parseDate(val);\n  }\n});\nzrUtil.each(['contain', 'normalize'], function (methodName) {\n  TimeScale.prototype[methodName] = function (val) {\n    return intervalScaleProto[methodName].call(this, this.parse(val));\n  };\n});\n/**\n * This implementation was originally copied from \"d3.js\"\n * <https://github.com/d3/d3/blob/b516d77fb8566b576088e73410437494717ada26/src/time/scale.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n */\n\nvar scaleLevels = [// Format              interval\n['hh:mm:ss', ONE_SECOND], // 1s\n['hh:mm:ss', ONE_SECOND * 5], // 5s\n['hh:mm:ss', ONE_SECOND * 10], // 10s\n['hh:mm:ss', ONE_SECOND * 15], // 15s\n['hh:mm:ss', ONE_SECOND * 30], // 30s\n['hh:mm\\nMM-dd', ONE_MINUTE], // 1m\n['hh:mm\\nMM-dd', ONE_MINUTE * 5], // 5m\n['hh:mm\\nMM-dd', ONE_MINUTE * 10], // 10m\n['hh:mm\\nMM-dd', ONE_MINUTE * 15], // 15m\n['hh:mm\\nMM-dd', ONE_MINUTE * 30], // 30m\n['hh:mm\\nMM-dd', ONE_HOUR], // 1h\n['hh:mm\\nMM-dd', ONE_HOUR * 2], // 2h\n['hh:mm\\nMM-dd', ONE_HOUR * 6], // 6h\n['hh:mm\\nMM-dd', ONE_HOUR * 12], // 12h\n['MM-dd\\nyyyy', ONE_DAY], // 1d\n['MM-dd\\nyyyy', ONE_DAY * 2], // 2d\n['MM-dd\\nyyyy', ONE_DAY * 3], // 3d\n['MM-dd\\nyyyy', ONE_DAY * 4], // 4d\n['MM-dd\\nyyyy', ONE_DAY * 5], // 5d\n['MM-dd\\nyyyy', ONE_DAY * 6], // 6d\n['week', ONE_DAY * 7], // 7d\n['MM-dd\\nyyyy', ONE_DAY * 10], // 10d\n['week', ONE_DAY * 14], // 2w\n['week', ONE_DAY * 21], // 3w\n['month', ONE_DAY * 31], // 1M\n['week', ONE_DAY * 42], // 6w\n['month', ONE_DAY * 62], // 2M\n['week', ONE_DAY * 70], // 10w\n['quarter', ONE_DAY * 95], // 3M\n['month', ONE_DAY * 31 * 4], // 4M\n['month', ONE_DAY * 31 * 5], // 5M\n['half-year', ONE_DAY * 380 / 2], // 6M\n['month', ONE_DAY * 31 * 8], // 8M\n['month', ONE_DAY * 31 * 10], // 10M\n['year', ONE_DAY * 380] // 1Y\n];\n/**\n * @param {module:echarts/model/Model}\n * @return {module:echarts/scale/Time}\n */\n\nTimeScale.create = function (model) {\n  return new TimeScale({\n    useUTC: model.ecModel.get('useUTC')\n  });\n};\n\nvar _default = TimeScale;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar modelUtil = require(\"../../util/model\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\nvar isObject = zrUtil.isObject;\nvar POSSIBLE_STYLES = ['areaStyle', 'lineStyle', 'nodeStyle', 'linkStyle', 'chordStyle', 'label', 'labelLine'];\n\nfunction compatEC2ItemStyle(opt) {\n  var itemStyleOpt = opt && opt.itemStyle;\n\n  if (!itemStyleOpt) {\n    return;\n  }\n\n  for (var i = 0, len = POSSIBLE_STYLES.length; i < len; i++) {\n    var styleName = POSSIBLE_STYLES[i];\n    var normalItemStyleOpt = itemStyleOpt.normal;\n    var emphasisItemStyleOpt = itemStyleOpt.emphasis;\n\n    if (normalItemStyleOpt && normalItemStyleOpt[styleName]) {\n      opt[styleName] = opt[styleName] || {};\n\n      if (!opt[styleName].normal) {\n        opt[styleName].normal = normalItemStyleOpt[styleName];\n      } else {\n        zrUtil.merge(opt[styleName].normal, normalItemStyleOpt[styleName]);\n      }\n\n      normalItemStyleOpt[styleName] = null;\n    }\n\n    if (emphasisItemStyleOpt && emphasisItemStyleOpt[styleName]) {\n      opt[styleName] = opt[styleName] || {};\n\n      if (!opt[styleName].emphasis) {\n        opt[styleName].emphasis = emphasisItemStyleOpt[styleName];\n      } else {\n        zrUtil.merge(opt[styleName].emphasis, emphasisItemStyleOpt[styleName]);\n      }\n\n      emphasisItemStyleOpt[styleName] = null;\n    }\n  }\n}\n\nfunction convertNormalEmphasis(opt, optType, useExtend) {\n  if (opt && opt[optType] && (opt[optType].normal || opt[optType].emphasis)) {\n    var normalOpt = opt[optType].normal;\n    var emphasisOpt = opt[optType].emphasis;\n\n    if (normalOpt) {\n      // Timeline controlStyle has other properties besides normal and emphasis\n      if (useExtend) {\n        opt[optType].normal = opt[optType].emphasis = null;\n        zrUtil.defaults(opt[optType], normalOpt);\n      } else {\n        opt[optType] = normalOpt;\n      }\n    }\n\n    if (emphasisOpt) {\n      opt.emphasis = opt.emphasis || {};\n      opt.emphasis[optType] = emphasisOpt;\n    }\n  }\n}\n\nfunction removeEC3NormalStatus(opt) {\n  convertNormalEmphasis(opt, 'itemStyle');\n  convertNormalEmphasis(opt, 'lineStyle');\n  convertNormalEmphasis(opt, 'areaStyle');\n  convertNormalEmphasis(opt, 'label');\n  convertNormalEmphasis(opt, 'labelLine'); // treemap\n\n  convertNormalEmphasis(opt, 'upperLabel'); // graph\n\n  convertNormalEmphasis(opt, 'edgeLabel');\n}\n\nfunction compatTextStyle(opt, propName) {\n  // Check whether is not object (string\\null\\undefined ...)\n  var labelOptSingle = isObject(opt) && opt[propName];\n  var textStyle = isObject(labelOptSingle) && labelOptSingle.textStyle;\n\n  if (textStyle) {\n    for (var i = 0, len = modelUtil.TEXT_STYLE_OPTIONS.length; i < len; i++) {\n      var propName = modelUtil.TEXT_STYLE_OPTIONS[i];\n\n      if (textStyle.hasOwnProperty(propName)) {\n        labelOptSingle[propName] = textStyle[propName];\n      }\n    }\n  }\n}\n\nfunction compatEC3CommonStyles(opt) {\n  if (opt) {\n    removeEC3NormalStatus(opt);\n    compatTextStyle(opt, 'label');\n    opt.emphasis && compatTextStyle(opt.emphasis, 'label');\n  }\n}\n\nfunction processSeries(seriesOpt) {\n  if (!isObject(seriesOpt)) {\n    return;\n  }\n\n  compatEC2ItemStyle(seriesOpt);\n  removeEC3NormalStatus(seriesOpt);\n  compatTextStyle(seriesOpt, 'label'); // treemap\n\n  compatTextStyle(seriesOpt, 'upperLabel'); // graph\n\n  compatTextStyle(seriesOpt, 'edgeLabel');\n\n  if (seriesOpt.emphasis) {\n    compatTextStyle(seriesOpt.emphasis, 'label'); // treemap\n\n    compatTextStyle(seriesOpt.emphasis, 'upperLabel'); // graph\n\n    compatTextStyle(seriesOpt.emphasis, 'edgeLabel');\n  }\n\n  var markPoint = seriesOpt.markPoint;\n\n  if (markPoint) {\n    compatEC2ItemStyle(markPoint);\n    compatEC3CommonStyles(markPoint);\n  }\n\n  var markLine = seriesOpt.markLine;\n\n  if (markLine) {\n    compatEC2ItemStyle(markLine);\n    compatEC3CommonStyles(markLine);\n  }\n\n  var markArea = seriesOpt.markArea;\n\n  if (markArea) {\n    compatEC3CommonStyles(markArea);\n  }\n\n  var data = seriesOpt.data; // Break with ec3: if `setOption` again, there may be no `type` in option,\n  // then the backward compat based on option type will not be performed.\n\n  if (seriesOpt.type === 'graph') {\n    data = data || seriesOpt.nodes;\n    var edgeData = seriesOpt.links || seriesOpt.edges;\n\n    if (edgeData && !zrUtil.isTypedArray(edgeData)) {\n      for (var i = 0; i < edgeData.length; i++) {\n        compatEC3CommonStyles(edgeData[i]);\n      }\n    }\n\n    zrUtil.each(seriesOpt.categories, function (opt) {\n      removeEC3NormalStatus(opt);\n    });\n  }\n\n  if (data && !zrUtil.isTypedArray(data)) {\n    for (var i = 0; i < data.length; i++) {\n      compatEC3CommonStyles(data[i]);\n    }\n  } // mark point data\n\n\n  var markPoint = seriesOpt.markPoint;\n\n  if (markPoint && markPoint.data) {\n    var mpData = markPoint.data;\n\n    for (var i = 0; i < mpData.length; i++) {\n      compatEC3CommonStyles(mpData[i]);\n    }\n  } // mark line data\n\n\n  var markLine = seriesOpt.markLine;\n\n  if (markLine && markLine.data) {\n    var mlData = markLine.data;\n\n    for (var i = 0; i < mlData.length; i++) {\n      if (zrUtil.isArray(mlData[i])) {\n        compatEC3CommonStyles(mlData[i][0]);\n        compatEC3CommonStyles(mlData[i][1]);\n      } else {\n        compatEC3CommonStyles(mlData[i]);\n      }\n    }\n  } // Series\n\n\n  if (seriesOpt.type === 'gauge') {\n    compatTextStyle(seriesOpt, 'axisLabel');\n    compatTextStyle(seriesOpt, 'title');\n    compatTextStyle(seriesOpt, 'detail');\n  } else if (seriesOpt.type === 'treemap') {\n    convertNormalEmphasis(seriesOpt.breadcrumb, 'itemStyle');\n    zrUtil.each(seriesOpt.levels, function (opt) {\n      removeEC3NormalStatus(opt);\n    });\n  } else if (seriesOpt.type === 'tree') {\n    removeEC3NormalStatus(seriesOpt.leaves);\n  } // sunburst starts from ec4, so it does not need to compat levels.\n\n}\n\nfunction toArr(o) {\n  return zrUtil.isArray(o) ? o : o ? [o] : [];\n}\n\nfunction toObj(o) {\n  return (zrUtil.isArray(o) ? o[0] : o) || {};\n}\n\nfunction _default(option, isTheme) {\n  each(toArr(option.series), function (seriesOpt) {\n    isObject(seriesOpt) && processSeries(seriesOpt);\n  });\n  var axes = ['xAxis', 'yAxis', 'radiusAxis', 'angleAxis', 'singleAxis', 'parallelAxis', 'radar'];\n  isTheme && axes.push('valueAxis', 'categoryAxis', 'logAxis', 'timeAxis');\n  each(axes, function (axisName) {\n    each(toArr(option[axisName]), function (axisOpt) {\n      if (axisOpt) {\n        compatTextStyle(axisOpt, 'axisLabel');\n        compatTextStyle(axisOpt.axisPointer, 'label');\n      }\n    });\n  });\n  each(toArr(option.parallel), function (parallelOpt) {\n    var parallelAxisDefault = parallelOpt && parallelOpt.parallelAxisDefault;\n    compatTextStyle(parallelAxisDefault, 'axisLabel');\n    compatTextStyle(parallelAxisDefault && parallelAxisDefault.axisPointer, 'label');\n  });\n  each(toArr(option.calendar), function (calendarOpt) {\n    convertNormalEmphasis(calendarOpt, 'itemStyle');\n    compatTextStyle(calendarOpt, 'dayLabel');\n    compatTextStyle(calendarOpt, 'monthLabel');\n    compatTextStyle(calendarOpt, 'yearLabel');\n  }); // radar.name.textStyle\n\n  each(toArr(option.radar), function (radarOpt) {\n    compatTextStyle(radarOpt, 'name');\n  });\n  each(toArr(option.geo), function (geoOpt) {\n    if (isObject(geoOpt)) {\n      compatEC3CommonStyles(geoOpt);\n      each(toArr(geoOpt.regions), function (regionObj) {\n        compatEC3CommonStyles(regionObj);\n      });\n    }\n  });\n  each(toArr(option.timeline), function (timelineOpt) {\n    compatEC3CommonStyles(timelineOpt);\n    convertNormalEmphasis(timelineOpt, 'label');\n    convertNormalEmphasis(timelineOpt, 'itemStyle');\n    convertNormalEmphasis(timelineOpt, 'controlStyle', true);\n    var data = timelineOpt.data;\n    zrUtil.isArray(data) && zrUtil.each(data, function (item) {\n      if (zrUtil.isObject(item)) {\n        convertNormalEmphasis(item, 'label');\n        convertNormalEmphasis(item, 'itemStyle');\n      }\n    });\n  });\n  each(toArr(option.toolbox), function (toolboxOpt) {\n    convertNormalEmphasis(toolboxOpt, 'iconStyle');\n    each(toolboxOpt.feature, function (featureOpt) {\n      convertNormalEmphasis(featureOpt, 'iconStyle');\n    });\n  });\n  compatTextStyle(toObj(option.axisPointer), 'label');\n  compatTextStyle(toObj(option.tooltip).axisPointer, 'label');\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// TODO Parse shadow style\n// TODO Only shallow path support\nfunction _default(properties) {\n  // Normalize\n  for (var i = 0; i < properties.length; i++) {\n    if (!properties[i][1]) {\n      properties[i][1] = properties[i][0];\n    }\n  }\n\n  return function (model, excludes, includes) {\n    var style = {};\n\n    for (var i = 0; i < properties.length; i++) {\n      var propName = properties[i][1];\n\n      if (excludes && zrUtil.indexOf(excludes, propName) >= 0 || includes && zrUtil.indexOf(includes, propName) < 0) {\n        continue;\n      }\n\n      var val = model.getShallow(propName);\n\n      if (val != null) {\n        style[properties[i][0]] = val;\n      }\n    }\n\n    return style;\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _dataProvider = require(\"../../data/helper/dataProvider\");\n\nvar retrieveRawValue = _dataProvider.retrieveRawValue;\n\nvar _format = require(\"../../util/format\");\n\nvar getTooltipMarker = _format.getTooltipMarker;\nvar formatTpl = _format.formatTpl;\n\nvar _model = require(\"../../util/model\");\n\nvar getTooltipRenderMode = _model.getTooltipRenderMode;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar DIMENSION_LABEL_REG = /\\{@(.+?)\\}/g; // PENDING A little ugly\n\nvar _default = {\n  /**\n   * Get params for formatter\n   * @param {number} dataIndex\n   * @param {string} [dataType]\n   * @return {Object}\n   */\n  getDataParams: function (dataIndex, dataType) {\n    var data = this.getData(dataType);\n    var rawValue = this.getRawValue(dataIndex, dataType);\n    var rawDataIndex = data.getRawIndex(dataIndex);\n    var name = data.getName(dataIndex);\n    var itemOpt = data.getRawDataItem(dataIndex);\n    var color = data.getItemVisual(dataIndex, 'color');\n    var borderColor = data.getItemVisual(dataIndex, 'borderColor');\n    var tooltipModel = this.ecModel.getComponent('tooltip');\n    var renderModeOption = tooltipModel && tooltipModel.get('renderMode');\n    var renderMode = getTooltipRenderMode(renderModeOption);\n    var mainType = this.mainType;\n    var isSeries = mainType === 'series';\n    var userOutput = data.userOutput;\n    return {\n      componentType: mainType,\n      componentSubType: this.subType,\n      componentIndex: this.componentIndex,\n      seriesType: isSeries ? this.subType : null,\n      seriesIndex: this.seriesIndex,\n      seriesId: isSeries ? this.id : null,\n      seriesName: isSeries ? this.name : null,\n      name: name,\n      dataIndex: rawDataIndex,\n      data: itemOpt,\n      dataType: dataType,\n      value: rawValue,\n      color: color,\n      borderColor: borderColor,\n      dimensionNames: userOutput ? userOutput.dimensionNames : null,\n      encode: userOutput ? userOutput.encode : null,\n      marker: getTooltipMarker({\n        color: color,\n        renderMode: renderMode\n      }),\n      // Param name list for mapping `a`, `b`, `c`, `d`, `e`\n      $vars: ['seriesName', 'name', 'value']\n    };\n  },\n\n  /**\n   * Format label\n   * @param {number} dataIndex\n   * @param {string} [status='normal'] 'normal' or 'emphasis'\n   * @param {string} [dataType]\n   * @param {number} [dimIndex] Only used in some chart that\n   *        use formatter in different dimensions, like radar.\n   * @param {string} [labelProp='label']\n   * @return {string} If not formatter, return null/undefined\n   */\n  getFormattedLabel: function (dataIndex, status, dataType, dimIndex, labelProp) {\n    status = status || 'normal';\n    var data = this.getData(dataType);\n    var itemModel = data.getItemModel(dataIndex);\n    var params = this.getDataParams(dataIndex, dataType);\n\n    if (dimIndex != null && params.value instanceof Array) {\n      params.value = params.value[dimIndex];\n    }\n\n    var formatter = itemModel.get(status === 'normal' ? [labelProp || 'label', 'formatter'] : [status, labelProp || 'label', 'formatter']);\n\n    if (typeof formatter === 'function') {\n      params.status = status;\n      params.dimensionIndex = dimIndex;\n      return formatter(params);\n    } else if (typeof formatter === 'string') {\n      var str = formatTpl(formatter, params); // Support 'aaa{@[3]}bbb{@product}ccc'.\n      // Do not support '}' in dim name util have to.\n\n      return str.replace(DIMENSION_LABEL_REG, function (origin, dim) {\n        var len = dim.length;\n\n        if (dim.charAt(0) === '[' && dim.charAt(len - 1) === ']') {\n          dim = +dim.slice(1, len - 1); // Also: '[]' => 0\n        }\n\n        return retrieveRawValue(data, dataIndex, dim);\n      });\n    }\n  },\n\n  /**\n   * Get raw value in option\n   * @param {number} idx\n   * @param {string} [dataType]\n   * @return {Array|number|string}\n   */\n  getRawValue: function (idx, dataType) {\n    return retrieveRawValue(this.getData(dataType), idx);\n  },\n\n  /**\n   * Should be implemented.\n   * @param {number} dataIndex\n   * @param {boolean} [multipleSeries=false]\n   * @param {number} [dataType]\n   * @return {string} tooltip string\n   */\n  formatTooltip: function () {// Empty function\n  }\n};\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar makeStyleMapper = require(\"./makeStyleMapper\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar getLineStyle = makeStyleMapper([['lineWidth', 'width'], ['stroke', 'color'], ['opacity'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['shadowColor']]);\nvar _default = {\n  getLineStyle: function (excludes) {\n    var style = getLineStyle(this, excludes); // Always set lineDash whether dashed, otherwise we can not\n    // erase the previous style when assigning to el.style.\n\n    style.lineDash = this.getLineDash(style.lineWidth);\n    return style;\n  },\n  getLineDash: function (lineWidth) {\n    if (lineWidth == null) {\n      lineWidth = 1;\n    }\n\n    var lineType = this.get('type');\n    var dotSize = Math.max(lineWidth, 2);\n    var dashSize = lineWidth * 4;\n    return lineType === 'solid' || lineType == null ? // Use `false` but not `null` for the solid line here, because `null` might be\n    // ignored when assigning to `el.style`. e.g., when setting `lineStyle.type` as\n    // `'dashed'` and `emphasis.lineStyle.type` as `'solid'` in graph series, the\n    // `lineDash` gotten form the latter one is not able to erase that from the former\n    // one if using `null` here according to the emhpsis strategy in `util/graphic.js`.\n    false : lineType === 'dashed' ? [dashSize, dashSize] : [dotSize, dotSize];\n  }\n};\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar _model = require(\"../util/model\");\n\nvar makeInner = _model.makeInner;\n\nvar _clazz = require(\"../util/clazz\");\n\nvar enableClassExtend = _clazz.enableClassExtend;\nvar enableClassCheck = _clazz.enableClassCheck;\n\nvar lineStyleMixin = require(\"./mixin/lineStyle\");\n\nvar areaStyleMixin = require(\"./mixin/areaStyle\");\n\nvar textStyleMixin = require(\"./mixin/textStyle\");\n\nvar itemStyleMixin = require(\"./mixin/itemStyle\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @module echarts/model/Model\n */\nvar mixin = zrUtil.mixin;\nvar inner = makeInner();\n/**\n * @alias module:echarts/model/Model\n * @constructor\n * @param {Object} [option]\n * @param {module:echarts/model/Model} [parentModel]\n * @param {module:echarts/model/Global} [ecModel]\n */\n\nfunction Model(option, parentModel, ecModel) {\n  /**\n   * @type {module:echarts/model/Model}\n   * @readOnly\n   */\n  this.parentModel = parentModel;\n  /**\n   * @type {module:echarts/model/Global}\n   * @readOnly\n   */\n\n  this.ecModel = ecModel;\n  /**\n   * @type {Object}\n   * @protected\n   */\n\n  this.option = option; // Simple optimization\n  // if (this.init) {\n  //     if (arguments.length <= 4) {\n  //         this.init(option, parentModel, ecModel, extraOpt);\n  //     }\n  //     else {\n  //         this.init.apply(this, arguments);\n  //     }\n  // }\n}\n\nModel.prototype = {\n  constructor: Model,\n\n  /**\n   * Model 的初始化函数\n   * @param {Object} option\n   */\n  init: null,\n\n  /**\n   * 从新的 Option merge\n   */\n  mergeOption: function (option) {\n    zrUtil.merge(this.option, option, true);\n  },\n\n  /**\n   * @param {string|Array.<string>} path\n   * @param {boolean} [ignoreParent=false]\n   * @return {*}\n   */\n  get: function (path, ignoreParent) {\n    if (path == null) {\n      return this.option;\n    }\n\n    return doGet(this.option, this.parsePath(path), !ignoreParent && getParent(this, path));\n  },\n\n  /**\n   * @param {string} key\n   * @param {boolean} [ignoreParent=false]\n   * @return {*}\n   */\n  getShallow: function (key, ignoreParent) {\n    var option = this.option;\n    var val = option == null ? option : option[key];\n    var parentModel = !ignoreParent && getParent(this, key);\n\n    if (val == null && parentModel) {\n      val = parentModel.getShallow(key);\n    }\n\n    return val;\n  },\n\n  /**\n   * @param {string|Array.<string>} [path]\n   * @param {module:echarts/model/Model} [parentModel]\n   * @return {module:echarts/model/Model}\n   */\n  getModel: function (path, parentModel) {\n    var obj = path == null ? this.option : doGet(this.option, path = this.parsePath(path));\n    var thisParentModel;\n    parentModel = parentModel || (thisParentModel = getParent(this, path)) && thisParentModel.getModel(path);\n    return new Model(obj, parentModel, this.ecModel);\n  },\n\n  /**\n   * If model has option\n   */\n  isEmpty: function () {\n    return this.option == null;\n  },\n  restoreData: function () {},\n  // Pending\n  clone: function () {\n    var Ctor = this.constructor;\n    return new Ctor(zrUtil.clone(this.option));\n  },\n  setReadOnly: function (properties) {// clazzUtil.setReadOnly(this, properties);\n  },\n  // If path is null/undefined, return null/undefined.\n  parsePath: function (path) {\n    if (typeof path === 'string') {\n      path = path.split('.');\n    }\n\n    return path;\n  },\n\n  /**\n   * @param {Function} getParentMethod\n   *        param {Array.<string>|string} path\n   *        return {module:echarts/model/Model}\n   */\n  customizeGetParent: function (getParentMethod) {\n    inner(this).getParent = getParentMethod;\n  },\n  isAnimationEnabled: function () {\n    if (!env.node) {\n      if (this.option.animation != null) {\n        return !!this.option.animation;\n      } else if (this.parentModel) {\n        return this.parentModel.isAnimationEnabled();\n      }\n    }\n  }\n};\n\nfunction doGet(obj, pathArr, parentModel) {\n  for (var i = 0; i < pathArr.length; i++) {\n    // Ignore empty\n    if (!pathArr[i]) {\n      continue;\n    } // obj could be number/string/... (like 0)\n\n\n    obj = obj && typeof obj === 'object' ? obj[pathArr[i]] : null;\n\n    if (obj == null) {\n      break;\n    }\n  }\n\n  if (obj == null && parentModel) {\n    obj = parentModel.get(pathArr);\n  }\n\n  return obj;\n} // `path` can be null/undefined\n\n\nfunction getParent(model, path) {\n  var getParentMethod = inner(model).getParent;\n  return getParentMethod ? getParentMethod.call(model, path) : model.parentModel;\n} // Enable Model.extend.\n\n\nenableClassExtend(Model);\nenableClassCheck(Model);\nmixin(Model, lineStyleMixin);\nmixin(Model, areaStyleMixin);\nmixin(Model, textStyleMixin);\nmixin(Model, itemStyleMixin);\nvar _default = Model;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar _format = require(\"../util/format\");\n\nvar formatTime = _format.formatTime;\nvar encodeHTML = _format.encodeHTML;\nvar addCommas = _format.addCommas;\nvar getTooltipMarker = _format.getTooltipMarker;\n\nvar modelUtil = require(\"../util/model\");\n\nvar ComponentModel = require(\"./Component\");\n\nvar colorPaletteMixin = require(\"./mixin/colorPalette\");\n\nvar dataFormatMixin = require(\"../model/mixin/dataFormat\");\n\nvar _layout = require(\"../util/layout\");\n\nvar getLayoutParams = _layout.getLayoutParams;\nvar mergeLayoutParam = _layout.mergeLayoutParam;\n\nvar _task = require(\"../stream/task\");\n\nvar createTask = _task.createTask;\n\nvar _sourceHelper = require(\"../data/helper/sourceHelper\");\n\nvar prepareSource = _sourceHelper.prepareSource;\nvar getSource = _sourceHelper.getSource;\n\nvar _dataProvider = require(\"../data/helper/dataProvider\");\n\nvar retrieveRawValue = _dataProvider.retrieveRawValue;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar inner = modelUtil.makeInner();\nvar SeriesModel = ComponentModel.extend({\n  type: 'series.__base__',\n\n  /**\n   * @readOnly\n   */\n  seriesIndex: 0,\n  // coodinateSystem will be injected in the echarts/CoordinateSystem\n  coordinateSystem: null,\n\n  /**\n   * @type {Object}\n   * @protected\n   */\n  defaultOption: null,\n\n  /**\n   * legend visual provider to the legend component\n   * @type {Object}\n   */\n  // PENDING\n  legendVisualProvider: null,\n\n  /**\n   * Access path of color for visual\n   */\n  visualColorAccessPath: 'itemStyle.color',\n\n  /**\n   * Access path of borderColor for visual\n   */\n  visualBorderColorAccessPath: 'itemStyle.borderColor',\n\n  /**\n   * Support merge layout params.\n   * Only support 'box' now (left/right/top/bottom/width/height).\n   * @type {string|Object} Object can be {ignoreSize: true}\n   * @readOnly\n   */\n  layoutMode: null,\n  init: function (option, parentModel, ecModel, extraOpt) {\n    /**\n     * @type {number}\n     * @readOnly\n     */\n    this.seriesIndex = this.componentIndex;\n    this.dataTask = createTask({\n      count: dataTaskCount,\n      reset: dataTaskReset\n    });\n    this.dataTask.context = {\n      model: this\n    };\n    this.mergeDefaultAndTheme(option, ecModel);\n    prepareSource(this);\n    var data = this.getInitialData(option, ecModel);\n    wrapData(data, this);\n    this.dataTask.context.data = data;\n\n    /**\n     * @type {module:echarts/data/List|module:echarts/data/Tree|module:echarts/data/Graph}\n     * @private\n     */\n    inner(this).dataBeforeProcessed = data; // If we reverse the order (make data firstly, and then make\n    // dataBeforeProcessed by cloneShallow), cloneShallow will\n    // cause data.graph.data !== data when using\n    // module:echarts/data/Graph or module:echarts/data/Tree.\n    // See module:echarts/data/helper/linkList\n    // Theoretically, it is unreasonable to call `seriesModel.getData()` in the model\n    // init or merge stage, because the data can be restored. So we do not `restoreData`\n    // and `setData` here, which forbids calling `seriesModel.getData()` in this stage.\n    // Call `seriesModel.getRawData()` instead.\n    // this.restoreData();\n\n    autoSeriesName(this);\n  },\n\n  /**\n   * Util for merge default and theme to option\n   * @param  {Object} option\n   * @param  {module:echarts/model/Global} ecModel\n   */\n  mergeDefaultAndTheme: function (option, ecModel) {\n    var layoutMode = this.layoutMode;\n    var inputPositionParams = layoutMode ? getLayoutParams(option) : {}; // Backward compat: using subType on theme.\n    // But if name duplicate between series subType\n    // (for example: parallel) add component mainType,\n    // add suffix 'Series'.\n\n    var themeSubType = this.subType;\n\n    if (ComponentModel.hasClass(themeSubType)) {\n      themeSubType += 'Series';\n    }\n\n    zrUtil.merge(option, ecModel.getTheme().get(this.subType));\n    zrUtil.merge(option, this.getDefaultOption()); // Default label emphasis `show`\n\n    modelUtil.defaultEmphasis(option, 'label', ['show']);\n    this.fillDataTextStyle(option.data);\n\n    if (layoutMode) {\n      mergeLayoutParam(option, inputPositionParams, layoutMode);\n    }\n  },\n  mergeOption: function (newSeriesOption, ecModel) {\n    // this.settingTask.dirty();\n    newSeriesOption = zrUtil.merge(this.option, newSeriesOption, true);\n    this.fillDataTextStyle(newSeriesOption.data);\n    var layoutMode = this.layoutMode;\n\n    if (layoutMode) {\n      mergeLayoutParam(this.option, newSeriesOption, layoutMode);\n    }\n\n    prepareSource(this);\n    var data = this.getInitialData(newSeriesOption, ecModel);\n    wrapData(data, this);\n    this.dataTask.dirty();\n    this.dataTask.context.data = data;\n    inner(this).dataBeforeProcessed = data;\n    autoSeriesName(this);\n  },\n  fillDataTextStyle: function (data) {\n    // Default data label emphasis `show`\n    // FIXME Tree structure data ?\n    // FIXME Performance ?\n    if (data && !zrUtil.isTypedArray(data)) {\n      var props = ['show'];\n\n      for (var i = 0; i < data.length; i++) {\n        if (data[i] && data[i].label) {\n          modelUtil.defaultEmphasis(data[i], 'label', props);\n        }\n      }\n    }\n  },\n\n  /**\n   * Init a data structure from data related option in series\n   * Must be overwritten\n   */\n  getInitialData: function () {},\n\n  /**\n   * Append data to list\n   * @param {Object} params\n   * @param {Array|TypedArray} params.data\n   */\n  appendData: function (params) {\n    // FIXME ???\n    // (1) If data from dataset, forbidden append.\n    // (2) support append data of dataset.\n    var data = this.getRawData();\n    data.appendData(params.data);\n  },\n\n  /**\n   * Consider some method like `filter`, `map` need make new data,\n   * We should make sure that `seriesModel.getData()` get correct\n   * data in the stream procedure. So we fetch data from upstream\n   * each time `task.perform` called.\n   * @param {string} [dataType]\n   * @return {module:echarts/data/List}\n   */\n  getData: function (dataType) {\n    var task = getCurrentTask(this);\n\n    if (task) {\n      var data = task.context.data;\n      return dataType == null ? data : data.getLinkedData(dataType);\n    } else {\n      // When series is not alive (that may happen when click toolbox\n      // restore or setOption with not merge mode), series data may\n      // be still need to judge animation or something when graphic\n      // elements want to know whether fade out.\n      return inner(this).data;\n    }\n  },\n\n  /**\n   * @param {module:echarts/data/List} data\n   */\n  setData: function (data) {\n    var task = getCurrentTask(this);\n\n    if (task) {\n      var context = task.context; // Consider case: filter, data sample.\n\n      if (context.data !== data && task.modifyOutputEnd) {\n        task.setOutputEnd(data.count());\n      }\n\n      context.outputData = data; // Caution: setData should update context.data,\n      // Because getData may be called multiply in a\n      // single stage and expect to get the data just\n      // set. (For example, AxisProxy, x y both call\n      // getData and setDate sequentially).\n      // So the context.data should be fetched from\n      // upstream each time when a stage starts to be\n      // performed.\n\n      if (task !== this.dataTask) {\n        context.data = data;\n      }\n    }\n\n    inner(this).data = data;\n  },\n\n  /**\n   * @see {module:echarts/data/helper/sourceHelper#getSource}\n   * @return {module:echarts/data/Source} source\n   */\n  getSource: function () {\n    return getSource(this);\n  },\n\n  /**\n   * Get data before processed\n   * @return {module:echarts/data/List}\n   */\n  getRawData: function () {\n    return inner(this).dataBeforeProcessed;\n  },\n\n  /**\n   * Get base axis if has coordinate system and has axis.\n   * By default use coordSys.getBaseAxis();\n   * Can be overrided for some chart.\n   * @return {type} description\n   */\n  getBaseAxis: function () {\n    var coordSys = this.coordinateSystem;\n    return coordSys && coordSys.getBaseAxis && coordSys.getBaseAxis();\n  },\n  // FIXME\n\n  /**\n   * Default tooltip formatter\n   *\n   * @param {number} dataIndex\n   * @param {boolean} [multipleSeries=false]\n   * @param {number} [dataType]\n   * @param {string} [renderMode='html'] valid values: 'html' and 'richText'.\n   *                                     'html' is used for rendering tooltip in extra DOM form, and the result\n   *                                     string is used as DOM HTML content.\n   *                                     'richText' is used for rendering tooltip in rich text form, for those where\n   *                                     DOM operation is not supported.\n   * @return {Object} formatted tooltip with `html` and `markers`\n   */\n  formatTooltip: function (dataIndex, multipleSeries, dataType, renderMode) {\n    var series = this;\n    renderMode = renderMode || 'html';\n    var newLine = renderMode === 'html' ? '<br/>' : '\\n';\n    var isRichText = renderMode === 'richText';\n    var markers = {};\n    var markerId = 0;\n\n    function formatArrayValue(value) {\n      // ??? TODO refactor these logic.\n      // check: category-no-encode-has-axis-data in dataset.html\n      var vertially = zrUtil.reduce(value, function (vertially, val, idx) {\n        var dimItem = data.getDimensionInfo(idx);\n        return vertially |= dimItem && dimItem.tooltip !== false && dimItem.displayName != null;\n      }, 0);\n      var result = [];\n      tooltipDims.length ? zrUtil.each(tooltipDims, function (dim) {\n        setEachItem(retrieveRawValue(data, dataIndex, dim), dim);\n      }) // By default, all dims is used on tooltip.\n      : zrUtil.each(value, setEachItem);\n\n      function setEachItem(val, dim) {\n        var dimInfo = data.getDimensionInfo(dim); // If `dimInfo.tooltip` is not set, show tooltip.\n\n        if (!dimInfo || dimInfo.otherDims.tooltip === false) {\n          return;\n        }\n\n        var dimType = dimInfo.type;\n        var markName = 'sub' + series.seriesIndex + 'at' + markerId;\n        var dimHead = getTooltipMarker({\n          color: color,\n          type: 'subItem',\n          renderMode: renderMode,\n          markerId: markName\n        });\n        var dimHeadStr = typeof dimHead === 'string' ? dimHead : dimHead.content;\n        var valStr = (vertially ? dimHeadStr + encodeHTML(dimInfo.displayName || '-') + ': ' : '') + // FIXME should not format time for raw data?\n        encodeHTML(dimType === 'ordinal' ? val + '' : dimType === 'time' ? multipleSeries ? '' : formatTime('yyyy/MM/dd hh:mm:ss', val) : addCommas(val));\n        valStr && result.push(valStr);\n\n        if (isRichText) {\n          markers[markName] = color;\n          ++markerId;\n        }\n      }\n\n      var newLine = vertially ? isRichText ? '\\n' : '<br/>' : '';\n      var content = newLine + result.join(newLine || ', ');\n      return {\n        renderMode: renderMode,\n        content: content,\n        style: markers\n      };\n    }\n\n    function formatSingleValue(val) {\n      // return encodeHTML(addCommas(val));\n      return {\n        renderMode: renderMode,\n        content: encodeHTML(addCommas(val)),\n        style: markers\n      };\n    }\n\n    var data = this.getData();\n    var tooltipDims = data.mapDimension('defaultedTooltip', true);\n    var tooltipDimLen = tooltipDims.length;\n    var value = this.getRawValue(dataIndex);\n    var isValueArr = zrUtil.isArray(value);\n    var color = data.getItemVisual(dataIndex, 'color');\n\n    if (zrUtil.isObject(color) && color.colorStops) {\n      color = (color.colorStops[0] || {}).color;\n    }\n\n    color = color || 'transparent'; // Complicated rule for pretty tooltip.\n\n    var formattedValue = tooltipDimLen > 1 || isValueArr && !tooltipDimLen ? formatArrayValue(value) : tooltipDimLen ? formatSingleValue(retrieveRawValue(data, dataIndex, tooltipDims[0])) : formatSingleValue(isValueArr ? value[0] : value);\n    var content = formattedValue.content;\n    var markName = series.seriesIndex + 'at' + markerId;\n    var colorEl = getTooltipMarker({\n      color: color,\n      type: 'item',\n      renderMode: renderMode,\n      markerId: markName\n    });\n    markers[markName] = color;\n    ++markerId;\n    var name = data.getName(dataIndex);\n    var seriesName = this.name;\n\n    if (!modelUtil.isNameSpecified(this)) {\n      seriesName = '';\n    }\n\n    seriesName = seriesName ? encodeHTML(seriesName) + (!multipleSeries ? newLine : ': ') : '';\n    var colorStr = typeof colorEl === 'string' ? colorEl : colorEl.content;\n    var html = !multipleSeries ? seriesName + colorStr + (name ? encodeHTML(name) + ': ' + content : content) : colorStr + seriesName + content;\n    return {\n      html: html,\n      markers: markers\n    };\n  },\n\n  /**\n   * @return {boolean}\n   */\n  isAnimationEnabled: function () {\n    if (env.node) {\n      return false;\n    }\n\n    var animationEnabled = this.getShallow('animation');\n\n    if (animationEnabled) {\n      if (this.getData().count() > this.getShallow('animationThreshold')) {\n        animationEnabled = false;\n      }\n    }\n\n    return animationEnabled;\n  },\n  restoreData: function () {\n    this.dataTask.dirty();\n  },\n  getColorFromPalette: function (name, scope, requestColorNum) {\n    var ecModel = this.ecModel; // PENDING\n\n    var color = colorPaletteMixin.getColorFromPalette.call(this, name, scope, requestColorNum);\n\n    if (!color) {\n      color = ecModel.getColorFromPalette(name, scope, requestColorNum);\n    }\n\n    return color;\n  },\n\n  /**\n   * Use `data.mapDimension(coordDim, true)` instead.\n   * @deprecated\n   */\n  coordDimToDataDim: function (coordDim) {\n    return this.getRawData().mapDimension(coordDim, true);\n  },\n\n  /**\n   * Get progressive rendering count each step\n   * @return {number}\n   */\n  getProgressive: function () {\n    return this.get('progressive');\n  },\n\n  /**\n   * Get progressive rendering count each step\n   * @return {number}\n   */\n  getProgressiveThreshold: function () {\n    return this.get('progressiveThreshold');\n  },\n\n  /**\n   * Get data indices for show tooltip content. See tooltip.\n   * @abstract\n   * @param {Array.<string>|string} dim\n   * @param {Array.<number>} value\n   * @param {module:echarts/coord/single/SingleAxis} baseAxis\n   * @return {Object} {dataIndices, nestestValue}.\n   */\n  getAxisTooltipData: null,\n\n  /**\n   * See tooltip.\n   * @abstract\n   * @param {number} dataIndex\n   * @return {Array.<number>} Point of tooltip. null/undefined can be returned.\n   */\n  getTooltipPosition: null,\n\n  /**\n   * @see {module:echarts/stream/Scheduler}\n   */\n  pipeTask: null,\n\n  /**\n   * Convinient for override in extended class.\n   * @protected\n   * @type {Function}\n   */\n  preventIncremental: null,\n\n  /**\n   * @public\n   * @readOnly\n   * @type {Object}\n   */\n  pipelineContext: null\n});\nzrUtil.mixin(SeriesModel, dataFormatMixin);\nzrUtil.mixin(SeriesModel, colorPaletteMixin);\n/**\n * MUST be called after `prepareSource` called\n * Here we need to make auto series, especially for auto legend. But we\n * do not modify series.name in option to avoid side effects.\n */\n\nfunction autoSeriesName(seriesModel) {\n  // User specified name has higher priority, otherwise it may cause\n  // series can not be queried unexpectedly.\n  var name = seriesModel.name;\n\n  if (!modelUtil.isNameSpecified(seriesModel)) {\n    seriesModel.name = getSeriesAutoName(seriesModel) || name;\n  }\n}\n\nfunction getSeriesAutoName(seriesModel) {\n  var data = seriesModel.getRawData();\n  var dataDims = data.mapDimension('seriesName', true);\n  var nameArr = [];\n  zrUtil.each(dataDims, function (dataDim) {\n    var dimInfo = data.getDimensionInfo(dataDim);\n    dimInfo.displayName && nameArr.push(dimInfo.displayName);\n  });\n  return nameArr.join(' ');\n}\n\nfunction dataTaskCount(context) {\n  return context.model.getRawData().count();\n}\n\nfunction dataTaskReset(context) {\n  var seriesModel = context.model;\n  seriesModel.setData(seriesModel.getRawData().cloneShallow());\n  return dataTaskProgress;\n}\n\nfunction dataTaskProgress(param, context) {\n  // Avoid repead cloneShallow when data just created in reset.\n  if (context.outputData && param.end > context.outputData.count()) {\n    context.model.getRawData().cloneShallow(context.outputData);\n  }\n} // TODO refactor\n\n\nfunction wrapData(data, seriesModel) {\n  zrUtil.each(data.CHANGABLE_METHODS, function (methodName) {\n    data.wrapMethod(methodName, zrUtil.curry(onDataSelfChange, seriesModel));\n  });\n}\n\nfunction onDataSelfChange(seriesModel) {\n  var task = getCurrentTask(seriesModel);\n\n  if (task) {\n    // Consider case: filter, selectRange\n    task.setOutputEnd(this.count());\n  }\n}\n\nfunction getCurrentTask(seriesModel) {\n  var scheduler = (seriesModel.ecModel || {}).scheduler;\n  var pipeline = scheduler && scheduler.getPipeline(seriesModel.uid);\n\n  if (pipeline) {\n    // When pipline finished, the currrentTask keep the last\n    // task (renderTask).\n    var task = pipeline.currentTask;\n\n    if (task) {\n      var agentStubMap = task.agentStubMap;\n\n      if (agentStubMap) {\n        task = agentStubMap.get(seriesModel.uid);\n      }\n    }\n\n    return task;\n  }\n}\n\nvar _default = SeriesModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar makeStyleMapper = require(\"./makeStyleMapper\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar getItemStyle = makeStyleMapper([['fill', 'color'], ['stroke', 'borderColor'], ['lineWidth', 'borderWidth'], ['opacity'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['shadowColor'], ['textPosition'], ['textAlign']]);\nvar _default = {\n  getItemStyle: function (excludes, includes) {\n    var style = getItemStyle(this, excludes, includes);\n    var lineDash = this.getBorderLineDash();\n    lineDash && (style.lineDash = lineDash);\n    return style;\n  },\n  getBorderLineDash: function () {\n    var lineType = this.get('borderType');\n    return lineType === 'solid' || lineType == null ? null : lineType === 'dashed' ? [5, 5] : [1, 1];\n  }\n};\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Model = require(\"./Model\");\n\nvar componentUtil = require(\"../util/component\");\n\nvar _clazz = require(\"../util/clazz\");\n\nvar enableClassManagement = _clazz.enableClassManagement;\nvar parseClassType = _clazz.parseClassType;\n\nvar _model = require(\"../util/model\");\n\nvar makeInner = _model.makeInner;\n\nvar layout = require(\"../util/layout\");\n\nvar boxLayoutMixin = require(\"./mixin/boxLayout\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Component model\n *\n * @module echarts/model/Component\n */\nvar inner = makeInner();\n/**\n * @alias module:echarts/model/Component\n * @constructor\n * @param {Object} option\n * @param {module:echarts/model/Model} parentModel\n * @param {module:echarts/model/Model} ecModel\n */\n\nvar ComponentModel = Model.extend({\n  type: 'component',\n\n  /**\n   * @readOnly\n   * @type {string}\n   */\n  id: '',\n\n  /**\n   * Because simplified concept is probably better, series.name (or component.name)\n   * has been having too many resposibilities:\n   * (1) Generating id (which requires name in option should not be modified).\n   * (2) As an index to mapping series when merging option or calling API (a name\n   * can refer to more then one components, which is convinient is some case).\n   * (3) Display.\n   * @readOnly\n   */\n  name: '',\n\n  /**\n   * @readOnly\n   * @type {string}\n   */\n  mainType: '',\n\n  /**\n   * @readOnly\n   * @type {string}\n   */\n  subType: '',\n\n  /**\n   * @readOnly\n   * @type {number}\n   */\n  componentIndex: 0,\n\n  /**\n   * @type {Object}\n   * @protected\n   */\n  defaultOption: null,\n\n  /**\n   * @type {module:echarts/model/Global}\n   * @readOnly\n   */\n  ecModel: null,\n\n  /**\n   * key: componentType\n   * value:  Component model list, can not be null.\n   * @type {Object.<string, Array.<module:echarts/model/Model>>}\n   * @readOnly\n   */\n  dependentModels: [],\n\n  /**\n   * @type {string}\n   * @readOnly\n   */\n  uid: null,\n\n  /**\n   * Support merge layout params.\n   * Only support 'box' now (left/right/top/bottom/width/height).\n   * @type {string|Object} Object can be {ignoreSize: true}\n   * @readOnly\n   */\n  layoutMode: null,\n  $constructor: function (option, parentModel, ecModel, extraOpt) {\n    Model.call(this, option, parentModel, ecModel, extraOpt);\n    this.uid = componentUtil.getUID('ec_cpt_model');\n  },\n  init: function (option, parentModel, ecModel, extraOpt) {\n    this.mergeDefaultAndTheme(option, ecModel);\n  },\n  mergeDefaultAndTheme: function (option, ecModel) {\n    var layoutMode = this.layoutMode;\n    var inputPositionParams = layoutMode ? layout.getLayoutParams(option) : {};\n    var themeModel = ecModel.getTheme();\n    zrUtil.merge(option, themeModel.get(this.mainType));\n    zrUtil.merge(option, this.getDefaultOption());\n\n    if (layoutMode) {\n      layout.mergeLayoutParam(option, inputPositionParams, layoutMode);\n    }\n  },\n  mergeOption: function (option, extraOpt) {\n    zrUtil.merge(this.option, option, true);\n    var layoutMode = this.layoutMode;\n\n    if (layoutMode) {\n      layout.mergeLayoutParam(this.option, option, layoutMode);\n    }\n  },\n  // Hooker after init or mergeOption\n  optionUpdated: function (newCptOption, isInit) {},\n  getDefaultOption: function () {\n    var fields = inner(this);\n\n    if (!fields.defaultOption) {\n      var optList = [];\n      var Class = this.constructor;\n\n      while (Class) {\n        var opt = Class.prototype.defaultOption;\n        opt && optList.push(opt);\n        Class = Class.superClass;\n      }\n\n      var defaultOption = {};\n\n      for (var i = optList.length - 1; i >= 0; i--) {\n        defaultOption = zrUtil.merge(defaultOption, optList[i], true);\n      }\n\n      fields.defaultOption = defaultOption;\n    }\n\n    return fields.defaultOption;\n  },\n  getReferringComponents: function (mainType) {\n    return this.ecModel.queryComponents({\n      mainType: mainType,\n      index: this.get(mainType + 'Index', true),\n      id: this.get(mainType + 'Id', true)\n    });\n  }\n}); // Reset ComponentModel.extend, add preConstruct.\n// clazzUtil.enableClassExtend(\n//     ComponentModel,\n//     function (option, parentModel, ecModel, extraOpt) {\n//         // Set dependentModels, componentIndex, name, id, mainType, subType.\n//         zrUtil.extend(this, extraOpt);\n//         this.uid = componentUtil.getUID('componentModel');\n//         // this.setReadOnly([\n//         //     'type', 'id', 'uid', 'name', 'mainType', 'subType',\n//         //     'dependentModels', 'componentIndex'\n//         // ]);\n//     }\n// );\n// Add capability of registerClass, getClass, hasClass, registerSubTypeDefaulter and so on.\n\nenableClassManagement(ComponentModel, {\n  registerWhenExtend: true\n});\ncomponentUtil.enableSubTypeDefaulter(ComponentModel); // Add capability of ComponentModel.topologicalTravel.\n\ncomponentUtil.enableTopologicalTravel(ComponentModel, getDependencies);\n\nfunction getDependencies(componentType) {\n  var deps = [];\n  zrUtil.each(ComponentModel.getClassesByMainType(componentType), function (Clazz) {\n    deps = deps.concat(Clazz.prototype.dependencies || []);\n  }); // Ensure main type.\n\n  deps = zrUtil.map(deps, function (type) {\n    return parseClassType(type).main;\n  }); // Hack dataset for convenience.\n\n  if (componentType !== 'dataset' && zrUtil.indexOf(deps, 'dataset') <= 0) {\n    deps.unshift('dataset');\n  }\n\n  return deps;\n}\n\nzrUtil.mixin(ComponentModel, boxLayoutMixin);\nvar _default = ComponentModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar each = _util.each;\nvar filter = _util.filter;\nvar map = _util.map;\nvar isArray = _util.isArray;\nvar indexOf = _util.indexOf;\nvar isObject = _util.isObject;\nvar isString = _util.isString;\nvar createHashMap = _util.createHashMap;\nvar assert = _util.assert;\nvar clone = _util.clone;\nvar merge = _util.merge;\nvar extend = _util.extend;\nvar mixin = _util.mixin;\n\nvar modelUtil = require(\"../util/model\");\n\nvar Model = require(\"./Model\");\n\nvar ComponentModel = require(\"./Component\");\n\nvar globalDefault = require(\"./globalDefault\");\n\nvar colorPaletteMixin = require(\"./mixin/colorPalette\");\n\nvar _sourceHelper = require(\"../data/helper/sourceHelper\");\n\nvar resetSourceDefaulter = _sourceHelper.resetSourceDefaulter;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * ECharts global model\n *\n * @module {echarts/model/Global}\n */\n\n/**\n * Caution: If the mechanism should be changed some day, these cases\n * should be considered:\n *\n * (1) In `merge option` mode, if using the same option to call `setOption`\n * many times, the result should be the same (try our best to ensure that).\n * (2) In `merge option` mode, if a component has no id/name specified, it\n * will be merged by index, and the result sequence of the components is\n * consistent to the original sequence.\n * (3) `reset` feature (in toolbox). Find detailed info in comments about\n * `mergeOption` in module:echarts/model/OptionManager.\n */\nvar OPTION_INNER_KEY = '\\0_ec_inner';\n/**\n * @alias module:echarts/model/Global\n *\n * @param {Object} option\n * @param {module:echarts/model/Model} parentModel\n * @param {Object} theme\n */\n\nvar GlobalModel = Model.extend({\n  init: function (option, parentModel, theme, optionManager) {\n    theme = theme || {};\n    this.option = null; // Mark as not initialized.\n\n    /**\n     * @type {module:echarts/model/Model}\n     * @private\n     */\n\n    this._theme = new Model(theme);\n    /**\n     * @type {module:echarts/model/OptionManager}\n     */\n\n    this._optionManager = optionManager;\n  },\n  setOption: function (option, optionPreprocessorFuncs) {\n    assert(!(OPTION_INNER_KEY in option), 'please use chart.getOption()');\n\n    this._optionManager.setOption(option, optionPreprocessorFuncs);\n\n    this.resetOption(null);\n  },\n\n  /**\n   * @param {string} type null/undefined: reset all.\n   *                      'recreate': force recreate all.\n   *                      'timeline': only reset timeline option\n   *                      'media': only reset media query option\n   * @return {boolean} Whether option changed.\n   */\n  resetOption: function (type) {\n    var optionChanged = false;\n    var optionManager = this._optionManager;\n\n    if (!type || type === 'recreate') {\n      var baseOption = optionManager.mountOption(type === 'recreate');\n\n      if (!this.option || type === 'recreate') {\n        initBase.call(this, baseOption);\n      } else {\n        this.restoreData();\n        this.mergeOption(baseOption);\n      }\n\n      optionChanged = true;\n    }\n\n    if (type === 'timeline' || type === 'media') {\n      this.restoreData();\n    }\n\n    if (!type || type === 'recreate' || type === 'timeline') {\n      var timelineOption = optionManager.getTimelineOption(this);\n      timelineOption && (this.mergeOption(timelineOption), optionChanged = true);\n    }\n\n    if (!type || type === 'recreate' || type === 'media') {\n      var mediaOptions = optionManager.getMediaOption(this, this._api);\n\n      if (mediaOptions.length) {\n        each(mediaOptions, function (mediaOption) {\n          this.mergeOption(mediaOption, optionChanged = true);\n        }, this);\n      }\n    }\n\n    return optionChanged;\n  },\n\n  /**\n   * @protected\n   */\n  mergeOption: function (newOption) {\n    var option = this.option;\n    var componentsMap = this._componentsMap;\n    var newCptTypes = [];\n    resetSourceDefaulter(this); // If no component class, merge directly.\n    // For example: color, animaiton options, etc.\n\n    each(newOption, function (componentOption, mainType) {\n      if (componentOption == null) {\n        return;\n      }\n\n      if (!ComponentModel.hasClass(mainType)) {\n        // globalSettingTask.dirty();\n        option[mainType] = option[mainType] == null ? clone(componentOption) : merge(option[mainType], componentOption, true);\n      } else if (mainType) {\n        newCptTypes.push(mainType);\n      }\n    });\n    ComponentModel.topologicalTravel(newCptTypes, ComponentModel.getAllClassMainTypes(), visitComponent, this);\n\n    function visitComponent(mainType, dependencies) {\n      var newCptOptionList = modelUtil.normalizeToArray(newOption[mainType]);\n      var mapResult = modelUtil.mappingToExists(componentsMap.get(mainType), newCptOptionList);\n      modelUtil.makeIdAndName(mapResult); // Set mainType and complete subType.\n\n      each(mapResult, function (item, index) {\n        var opt = item.option;\n\n        if (isObject(opt)) {\n          item.keyInfo.mainType = mainType;\n          item.keyInfo.subType = determineSubType(mainType, opt, item.exist);\n        }\n      });\n      var dependentModels = getComponentsByTypes(componentsMap, dependencies);\n      option[mainType] = [];\n      componentsMap.set(mainType, []);\n      each(mapResult, function (resultItem, index) {\n        var componentModel = resultItem.exist;\n        var newCptOption = resultItem.option;\n        assert(isObject(newCptOption) || componentModel, 'Empty component definition'); // Consider where is no new option and should be merged using {},\n        // see removeEdgeAndAdd in topologicalTravel and\n        // ComponentModel.getAllClassMainTypes.\n\n        if (!newCptOption) {\n          componentModel.mergeOption({}, this);\n          componentModel.optionUpdated({}, false);\n        } else {\n          var ComponentModelClass = ComponentModel.getClass(mainType, resultItem.keyInfo.subType, true);\n\n          if (componentModel && componentModel.constructor === ComponentModelClass) {\n            componentModel.name = resultItem.keyInfo.name; // componentModel.settingTask && componentModel.settingTask.dirty();\n\n            componentModel.mergeOption(newCptOption, this);\n            componentModel.optionUpdated(newCptOption, false);\n          } else {\n            // PENDING Global as parent ?\n            var extraOpt = extend({\n              dependentModels: dependentModels,\n              componentIndex: index\n            }, resultItem.keyInfo);\n            componentModel = new ComponentModelClass(newCptOption, this, this, extraOpt);\n            extend(componentModel, extraOpt);\n            componentModel.init(newCptOption, this, this, extraOpt); // Call optionUpdated after init.\n            // newCptOption has been used as componentModel.option\n            // and may be merged with theme and default, so pass null\n            // to avoid confusion.\n\n            componentModel.optionUpdated(null, true);\n          }\n        }\n\n        componentsMap.get(mainType)[index] = componentModel;\n        option[mainType][index] = componentModel.option;\n      }, this); // Backup series for filtering.\n\n      if (mainType === 'series') {\n        createSeriesIndices(this, componentsMap.get('series'));\n      }\n    }\n\n    this._seriesIndicesMap = createHashMap(this._seriesIndices = this._seriesIndices || []);\n  },\n\n  /**\n   * Get option for output (cloned option and inner info removed)\n   * @public\n   * @return {Object}\n   */\n  getOption: function () {\n    var option = clone(this.option);\n    each(option, function (opts, mainType) {\n      if (ComponentModel.hasClass(mainType)) {\n        var opts = modelUtil.normalizeToArray(opts);\n\n        for (var i = opts.length - 1; i >= 0; i--) {\n          // Remove options with inner id.\n          if (modelUtil.isIdInner(opts[i])) {\n            opts.splice(i, 1);\n          }\n        }\n\n        option[mainType] = opts;\n      }\n    });\n    delete option[OPTION_INNER_KEY];\n    return option;\n  },\n\n  /**\n   * @return {module:echarts/model/Model}\n   */\n  getTheme: function () {\n    return this._theme;\n  },\n\n  /**\n   * @param {string} mainType\n   * @param {number} [idx=0]\n   * @return {module:echarts/model/Component}\n   */\n  getComponent: function (mainType, idx) {\n    var list = this._componentsMap.get(mainType);\n\n    if (list) {\n      return list[idx || 0];\n    }\n  },\n\n  /**\n   * If none of index and id and name used, return all components with mainType.\n   * @param {Object} condition\n   * @param {string} condition.mainType\n   * @param {string} [condition.subType] If ignore, only query by mainType\n   * @param {number|Array.<number>} [condition.index] Either input index or id or name.\n   * @param {string|Array.<string>} [condition.id] Either input index or id or name.\n   * @param {string|Array.<string>} [condition.name] Either input index or id or name.\n   * @return {Array.<module:echarts/model/Component>}\n   */\n  queryComponents: function (condition) {\n    var mainType = condition.mainType;\n\n    if (!mainType) {\n      return [];\n    }\n\n    var index = condition.index;\n    var id = condition.id;\n    var name = condition.name;\n\n    var cpts = this._componentsMap.get(mainType);\n\n    if (!cpts || !cpts.length) {\n      return [];\n    }\n\n    var result;\n\n    if (index != null) {\n      if (!isArray(index)) {\n        index = [index];\n      }\n\n      result = filter(map(index, function (idx) {\n        return cpts[idx];\n      }), function (val) {\n        return !!val;\n      });\n    } else if (id != null) {\n      var isIdArray = isArray(id);\n      result = filter(cpts, function (cpt) {\n        return isIdArray && indexOf(id, cpt.id) >= 0 || !isIdArray && cpt.id === id;\n      });\n    } else if (name != null) {\n      var isNameArray = isArray(name);\n      result = filter(cpts, function (cpt) {\n        return isNameArray && indexOf(name, cpt.name) >= 0 || !isNameArray && cpt.name === name;\n      });\n    } else {\n      // Return all components with mainType\n      result = cpts.slice();\n    }\n\n    return filterBySubType(result, condition);\n  },\n\n  /**\n   * The interface is different from queryComponents,\n   * which is convenient for inner usage.\n   *\n   * @usage\n   * var result = findComponents(\n   *     {mainType: 'dataZoom', query: {dataZoomId: 'abc'}}\n   * );\n   * var result = findComponents(\n   *     {mainType: 'series', subType: 'pie', query: {seriesName: 'uio'}}\n   * );\n   * var result = findComponents(\n   *     {mainType: 'series',\n   *     filter: function (model, index) {...}}\n   * );\n   * // result like [component0, componnet1, ...]\n   *\n   * @param {Object} condition\n   * @param {string} condition.mainType Mandatory.\n   * @param {string} [condition.subType] Optional.\n   * @param {Object} [condition.query] like {xxxIndex, xxxId, xxxName},\n   *        where xxx is mainType.\n   *        If query attribute is null/undefined or has no index/id/name,\n   *        do not filtering by query conditions, which is convenient for\n   *        no-payload situations or when target of action is global.\n   * @param {Function} [condition.filter] parameter: component, return boolean.\n   * @return {Array.<module:echarts/model/Component>}\n   */\n  findComponents: function (condition) {\n    var query = condition.query;\n    var mainType = condition.mainType;\n    var queryCond = getQueryCond(query);\n    var result = queryCond ? this.queryComponents(queryCond) : this._componentsMap.get(mainType);\n    return doFilter(filterBySubType(result, condition));\n\n    function getQueryCond(q) {\n      var indexAttr = mainType + 'Index';\n      var idAttr = mainType + 'Id';\n      var nameAttr = mainType + 'Name';\n      return q && (q[indexAttr] != null || q[idAttr] != null || q[nameAttr] != null) ? {\n        mainType: mainType,\n        // subType will be filtered finally.\n        index: q[indexAttr],\n        id: q[idAttr],\n        name: q[nameAttr]\n      } : null;\n    }\n\n    function doFilter(res) {\n      return condition.filter ? filter(res, condition.filter) : res;\n    }\n  },\n\n  /**\n   * @usage\n   * eachComponent('legend', function (legendModel, index) {\n   *     ...\n   * });\n   * eachComponent(function (componentType, model, index) {\n   *     // componentType does not include subType\n   *     // (componentType is 'xxx' but not 'xxx.aa')\n   * });\n   * eachComponent(\n   *     {mainType: 'dataZoom', query: {dataZoomId: 'abc'}},\n   *     function (model, index) {...}\n   * );\n   * eachComponent(\n   *     {mainType: 'series', subType: 'pie', query: {seriesName: 'uio'}},\n   *     function (model, index) {...}\n   * );\n   *\n   * @param {string|Object=} mainType When mainType is object, the definition\n   *                                  is the same as the method 'findComponents'.\n   * @param {Function} cb\n   * @param {*} context\n   */\n  eachComponent: function (mainType, cb, context) {\n    var componentsMap = this._componentsMap;\n\n    if (typeof mainType === 'function') {\n      context = cb;\n      cb = mainType;\n      componentsMap.each(function (components, componentType) {\n        each(components, function (component, index) {\n          cb.call(context, componentType, component, index);\n        });\n      });\n    } else if (isString(mainType)) {\n      each(componentsMap.get(mainType), cb, context);\n    } else if (isObject(mainType)) {\n      var queryResult = this.findComponents(mainType);\n      each(queryResult, cb, context);\n    }\n  },\n\n  /**\n   * @param {string} name\n   * @return {Array.<module:echarts/model/Series>}\n   */\n  getSeriesByName: function (name) {\n    var series = this._componentsMap.get('series');\n\n    return filter(series, function (oneSeries) {\n      return oneSeries.name === name;\n    });\n  },\n\n  /**\n   * @param {number} seriesIndex\n   * @return {module:echarts/model/Series}\n   */\n  getSeriesByIndex: function (seriesIndex) {\n    return this._componentsMap.get('series')[seriesIndex];\n  },\n\n  /**\n   * Get series list before filtered by type.\n   * FIXME: rename to getRawSeriesByType?\n   *\n   * @param {string} subType\n   * @return {Array.<module:echarts/model/Series>}\n   */\n  getSeriesByType: function (subType) {\n    var series = this._componentsMap.get('series');\n\n    return filter(series, function (oneSeries) {\n      return oneSeries.subType === subType;\n    });\n  },\n\n  /**\n   * @return {Array.<module:echarts/model/Series>}\n   */\n  getSeries: function () {\n    return this._componentsMap.get('series').slice();\n  },\n\n  /**\n   * @return {number}\n   */\n  getSeriesCount: function () {\n    return this._componentsMap.get('series').length;\n  },\n\n  /**\n   * After filtering, series may be different\n   * frome raw series.\n   *\n   * @param {Function} cb\n   * @param {*} context\n   */\n  eachSeries: function (cb, context) {\n    assertSeriesInitialized(this);\n    each(this._seriesIndices, function (rawSeriesIndex) {\n      var series = this._componentsMap.get('series')[rawSeriesIndex];\n\n      cb.call(context, series, rawSeriesIndex);\n    }, this);\n  },\n\n  /**\n   * Iterate raw series before filtered.\n   *\n   * @param {Function} cb\n   * @param {*} context\n   */\n  eachRawSeries: function (cb, context) {\n    each(this._componentsMap.get('series'), cb, context);\n  },\n\n  /**\n   * After filtering, series may be different.\n   * frome raw series.\n   *\n   * @param {string} subType.\n   * @param {Function} cb\n   * @param {*} context\n   */\n  eachSeriesByType: function (subType, cb, context) {\n    assertSeriesInitialized(this);\n    each(this._seriesIndices, function (rawSeriesIndex) {\n      var series = this._componentsMap.get('series')[rawSeriesIndex];\n\n      if (series.subType === subType) {\n        cb.call(context, series, rawSeriesIndex);\n      }\n    }, this);\n  },\n\n  /**\n   * Iterate raw series before filtered of given type.\n   *\n   * @parma {string} subType\n   * @param {Function} cb\n   * @param {*} context\n   */\n  eachRawSeriesByType: function (subType, cb, context) {\n    return each(this.getSeriesByType(subType), cb, context);\n  },\n\n  /**\n   * @param {module:echarts/model/Series} seriesModel\n   */\n  isSeriesFiltered: function (seriesModel) {\n    assertSeriesInitialized(this);\n    return this._seriesIndicesMap.get(seriesModel.componentIndex) == null;\n  },\n\n  /**\n   * @return {Array.<number>}\n   */\n  getCurrentSeriesIndices: function () {\n    return (this._seriesIndices || []).slice();\n  },\n\n  /**\n   * @param {Function} cb\n   * @param {*} context\n   */\n  filterSeries: function (cb, context) {\n    assertSeriesInitialized(this);\n    var filteredSeries = filter(this._componentsMap.get('series'), cb, context);\n    createSeriesIndices(this, filteredSeries);\n  },\n  restoreData: function (payload) {\n    var componentsMap = this._componentsMap;\n    createSeriesIndices(this, componentsMap.get('series'));\n    var componentTypes = [];\n    componentsMap.each(function (components, componentType) {\n      componentTypes.push(componentType);\n    });\n    ComponentModel.topologicalTravel(componentTypes, ComponentModel.getAllClassMainTypes(), function (componentType, dependencies) {\n      each(componentsMap.get(componentType), function (component) {\n        (componentType !== 'series' || !isNotTargetSeries(component, payload)) && component.restoreData();\n      });\n    });\n  }\n});\n\nfunction isNotTargetSeries(seriesModel, payload) {\n  if (payload) {\n    var index = payload.seiresIndex;\n    var id = payload.seriesId;\n    var name = payload.seriesName;\n    return index != null && seriesModel.componentIndex !== index || id != null && seriesModel.id !== id || name != null && seriesModel.name !== name;\n  }\n}\n/**\n * @inner\n */\n\n\nfunction mergeTheme(option, theme) {\n  // PENDING\n  // NOT use `colorLayer` in theme if option has `color`\n  var notMergeColorLayer = option.color && !option.colorLayer;\n  each(theme, function (themeItem, name) {\n    if (name === 'colorLayer' && notMergeColorLayer) {\n      return;\n    } // 如果有 component model 则把具体的 merge 逻辑交给该 model 处理\n\n\n    if (!ComponentModel.hasClass(name)) {\n      if (typeof themeItem === 'object') {\n        option[name] = !option[name] ? clone(themeItem) : merge(option[name], themeItem, false);\n      } else {\n        if (option[name] == null) {\n          option[name] = themeItem;\n        }\n      }\n    }\n  });\n}\n\nfunction initBase(baseOption) {\n  baseOption = baseOption; // Using OPTION_INNER_KEY to mark that this option can not be used outside,\n  // i.e. `chart.setOption(chart.getModel().option);` is forbiden.\n\n  this.option = {};\n  this.option[OPTION_INNER_KEY] = 1;\n  /**\n   * Init with series: [], in case of calling findSeries method\n   * before series initialized.\n   * @type {Object.<string, Array.<module:echarts/model/Model>>}\n   * @private\n   */\n\n  this._componentsMap = createHashMap({\n    series: []\n  });\n  /**\n   * Mapping between filtered series list and raw series list.\n   * key: filtered series indices, value: raw series indices.\n   * @type {Array.<nubmer>}\n   * @private\n   */\n\n  this._seriesIndices;\n  this._seriesIndicesMap;\n  mergeTheme(baseOption, this._theme.option); // TODO Needs clone when merging to the unexisted property\n\n  merge(baseOption, globalDefault, false);\n  this.mergeOption(baseOption);\n}\n/**\n * @inner\n * @param {Array.<string>|string} types model types\n * @return {Object} key: {string} type, value: {Array.<Object>} models\n */\n\n\nfunction getComponentsByTypes(componentsMap, types) {\n  if (!isArray(types)) {\n    types = types ? [types] : [];\n  }\n\n  var ret = {};\n  each(types, function (type) {\n    ret[type] = (componentsMap.get(type) || []).slice();\n  });\n  return ret;\n}\n/**\n * @inner\n */\n\n\nfunction determineSubType(mainType, newCptOption, existComponent) {\n  var subType = newCptOption.type ? newCptOption.type : existComponent ? existComponent.subType // Use determineSubType only when there is no existComponent.\n  : ComponentModel.determineSubType(mainType, newCptOption); // tooltip, markline, markpoint may always has no subType\n\n  return subType;\n}\n/**\n * @inner\n */\n\n\nfunction createSeriesIndices(ecModel, seriesModels) {\n  ecModel._seriesIndicesMap = createHashMap(ecModel._seriesIndices = map(seriesModels, function (series) {\n    return series.componentIndex;\n  }) || []);\n}\n/**\n * @inner\n */\n\n\nfunction filterBySubType(components, condition) {\n  // Using hasOwnProperty for restrict. Consider\n  // subType is undefined in user payload.\n  return condition.hasOwnProperty('subType') ? filter(components, function (cpt) {\n    return cpt.subType === condition.subType;\n  }) : components;\n}\n/**\n * @inner\n */\n\n\nfunction assertSeriesInitialized(ecModel) {}\n\nmixin(GlobalModel, colorPaletteMixin);\nvar _default = GlobalModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar platform = ''; // Navigator not exists in node\n\nif (typeof navigator !== 'undefined') {\n  platform = navigator.platform || '';\n}\n\nvar _default = {\n  // backgroundColor: 'rgba(0,0,0,0)',\n  // https://dribbble.com/shots/1065960-Infographic-Pie-chart-visualization\n  // color: ['#5793f3', '#d14a61', '#fd9c35', '#675bba', '#fec42c', '#dd4444', '#d4df5a', '#cd4870'],\n  // Light colors:\n  // color: ['#bcd3bb', '#e88f70', '#edc1a5', '#9dc5c8', '#e1e8c8', '#7b7c68', '#e5b5b5', '#f0b489', '#928ea8', '#bda29a'],\n  // color: ['#cc5664', '#9bd6ec', '#ea946e', '#8acaaa', '#f1ec64', '#ee8686', '#a48dc1', '#5da6bc', '#b9dcae'],\n  // Dark colors:\n  color: ['#c23531', '#2f4554', '#61a0a8', '#d48265', '#91c7ae', '#749f83', '#ca8622', '#bda29a', '#6e7074', '#546570', '#c4ccd3'],\n  gradientColor: ['#f6efa6', '#d88273', '#bf444c'],\n  // If xAxis and yAxis declared, grid is created by default.\n  // grid: {},\n  textStyle: {\n    // color: '#000',\n    // decoration: 'none',\n    // PENDING\n    fontFamily: platform.match(/^Win/) ? 'Microsoft YaHei' : 'sans-serif',\n    // fontFamily: 'Arial, Verdana, sans-serif',\n    fontSize: 12,\n    fontStyle: 'normal',\n    fontWeight: 'normal'\n  },\n  // http://blogs.adobe.com/webplatform/2014/02/24/using-blend-modes-in-html-canvas/\n  // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/globalCompositeOperation\n  // Default is source-over\n  blendMode: null,\n  animation: 'auto',\n  animationDuration: 1000,\n  animationDurationUpdate: 300,\n  animationEasing: 'exponentialOut',\n  animationEasingUpdate: 'cubicOut',\n  animationThreshold: 2000,\n  // Configuration for progressive/incremental rendering\n  progressiveThreshold: 3000,\n  progressive: 400,\n  // Threshold of if use single hover layer to optimize.\n  // It is recommended that `hoverLayerThreshold` is equivalent to or less than\n  // `progressiveThreshold`, otherwise hover will cause restart of progressive,\n  // which is unexpected.\n  // see example <echarts/test/heatmap-large.html>.\n  hoverLayerThreshold: 3000,\n  // See: module:echarts/scale/Time\n  useUTC: false\n};\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar numberUtil = require(\"../util/number\");\n\nvar formatUtil = require(\"../util/format\");\n\nvar Scale = require(\"./Scale\");\n\nvar helper = require(\"./helper\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Interval scale\n * @module echarts/scale/Interval\n */\nvar roundNumber = numberUtil.round;\n/**\n * @alias module:echarts/coord/scale/Interval\n * @constructor\n */\n\nvar IntervalScale = Scale.extend({\n  type: 'interval',\n  _interval: 0,\n  _intervalPrecision: 2,\n  setExtent: function (start, end) {\n    var thisExtent = this._extent; //start,end may be a Number like '25',so...\n\n    if (!isNaN(start)) {\n      thisExtent[0] = parseFloat(start);\n    }\n\n    if (!isNaN(end)) {\n      thisExtent[1] = parseFloat(end);\n    }\n  },\n  unionExtent: function (other) {\n    var extent = this._extent;\n    other[0] < extent[0] && (extent[0] = other[0]);\n    other[1] > extent[1] && (extent[1] = other[1]); // unionExtent may called by it's sub classes\n\n    IntervalScale.prototype.setExtent.call(this, extent[0], extent[1]);\n  },\n\n  /**\n   * Get interval\n   */\n  getInterval: function () {\n    return this._interval;\n  },\n\n  /**\n   * Set interval\n   */\n  setInterval: function (interval) {\n    this._interval = interval; // Dropped auto calculated niceExtent and use user setted extent\n    // We assume user wan't to set both interval, min, max to get a better result\n\n    this._niceExtent = this._extent.slice();\n    this._intervalPrecision = helper.getIntervalPrecision(interval);\n  },\n\n  /**\n   * @param {boolean} [expandToNicedExtent=false] If expand the ticks to niced extent.\n   * @return {Array.<number>}\n   */\n  getTicks: function (expandToNicedExtent) {\n    var interval = this._interval;\n    var extent = this._extent;\n    var niceTickExtent = this._niceExtent;\n    var intervalPrecision = this._intervalPrecision;\n    var ticks = []; // If interval is 0, return [];\n\n    if (!interval) {\n      return ticks;\n    } // Consider this case: using dataZoom toolbox, zoom and zoom.\n\n\n    var safeLimit = 10000;\n\n    if (extent[0] < niceTickExtent[0]) {\n      if (expandToNicedExtent) {\n        ticks.push(roundNumber(niceTickExtent[0] - interval, intervalPrecision));\n      } else {\n        ticks.push(extent[0]);\n      }\n    }\n\n    var tick = niceTickExtent[0];\n\n    while (tick <= niceTickExtent[1]) {\n      ticks.push(tick); // Avoid rounding error\n\n      tick = roundNumber(tick + interval, intervalPrecision);\n\n      if (tick === ticks[ticks.length - 1]) {\n        // Consider out of safe float point, e.g.,\n        // -3711126.9907707 + 2e-10 === -3711126.9907707\n        break;\n      }\n\n      if (ticks.length > safeLimit) {\n        return [];\n      }\n    } // Consider this case: the last item of ticks is smaller\n    // than niceTickExtent[1] and niceTickExtent[1] === extent[1].\n\n\n    var lastNiceTick = ticks.length ? ticks[ticks.length - 1] : niceTickExtent[1];\n\n    if (extent[1] > lastNiceTick) {\n      if (expandToNicedExtent) {\n        ticks.push(roundNumber(lastNiceTick + interval, intervalPrecision));\n      } else {\n        ticks.push(extent[1]);\n      }\n    }\n\n    return ticks;\n  },\n\n  /**\n   * @param {number} [splitNumber=5]\n   * @return {Array.<Array.<number>>}\n   */\n  getMinorTicks: function (splitNumber) {\n    var ticks = this.getTicks(true);\n    var minorTicks = [];\n    var extent = this.getExtent();\n\n    for (var i = 1; i < ticks.length; i++) {\n      var nextTick = ticks[i];\n      var prevTick = ticks[i - 1];\n      var count = 0;\n      var minorTicksGroup = [];\n      var interval = nextTick - prevTick;\n      var minorInterval = interval / splitNumber;\n\n      while (count < splitNumber - 1) {\n        var minorTick = numberUtil.round(prevTick + (count + 1) * minorInterval); // For the first and last interval. The count may be less than splitNumber.\n\n        if (minorTick > extent[0] && minorTick < extent[1]) {\n          minorTicksGroup.push(minorTick);\n        }\n\n        count++;\n      }\n\n      minorTicks.push(minorTicksGroup);\n    }\n\n    return minorTicks;\n  },\n\n  /**\n   * @param {number} data\n   * @param {Object} [opt]\n   * @param {number|string} [opt.precision] If 'auto', use nice presision.\n   * @param {boolean} [opt.pad] returns 1.50 but not 1.5 if precision is 2.\n   * @return {string}\n   */\n  getLabel: function (data, opt) {\n    if (data == null) {\n      return '';\n    }\n\n    var precision = opt && opt.precision;\n\n    if (precision == null) {\n      precision = numberUtil.getPrecisionSafe(data) || 0;\n    } else if (precision === 'auto') {\n      // Should be more precise then tick.\n      precision = this._intervalPrecision;\n    } // (1) If `precision` is set, 12.005 should be display as '12.00500'.\n    // (2) Use roundNumber (toFixed) to avoid scientific notation like '3.5e-7'.\n\n\n    data = roundNumber(data, precision, true);\n    return formatUtil.addCommas(data);\n  },\n\n  /**\n   * Update interval and extent of intervals for nice ticks\n   *\n   * @param {number} [splitNumber = 5] Desired number of ticks\n   * @param {number} [minInterval]\n   * @param {number} [maxInterval]\n   */\n  niceTicks: function (splitNumber, minInterval, maxInterval) {\n    splitNumber = splitNumber || 5;\n    var extent = this._extent;\n    var span = extent[1] - extent[0];\n\n    if (!isFinite(span)) {\n      return;\n    } // User may set axis min 0 and data are all negative\n    // FIXME If it needs to reverse ?\n\n\n    if (span < 0) {\n      span = -span;\n      extent.reverse();\n    }\n\n    var result = helper.intervalScaleNiceTicks(extent, splitNumber, minInterval, maxInterval);\n    this._intervalPrecision = result.intervalPrecision;\n    this._interval = result.interval;\n    this._niceExtent = result.niceTickExtent;\n  },\n\n  /**\n   * Nice extent.\n   * @param {Object} opt\n   * @param {number} [opt.splitNumber = 5] Given approx tick number\n   * @param {boolean} [opt.fixMin=false]\n   * @param {boolean} [opt.fixMax=false]\n   * @param {boolean} [opt.minInterval]\n   * @param {boolean} [opt.maxInterval]\n   */\n  niceExtent: function (opt) {\n    var extent = this._extent; // If extent start and end are same, expand them\n\n    if (extent[0] === extent[1]) {\n      if (extent[0] !== 0) {\n        // Expand extent\n        var expandSize = extent[0]; // In the fowllowing case\n        //      Axis has been fixed max 100\n        //      Plus data are all 100 and axis extent are [100, 100].\n        // Extend to the both side will cause expanded max is larger than fixed max.\n        // So only expand to the smaller side.\n\n        if (!opt.fixMax) {\n          extent[1] += expandSize / 2;\n          extent[0] -= expandSize / 2;\n        } else {\n          extent[0] -= expandSize / 2;\n        }\n      } else {\n        extent[1] = 1;\n      }\n    }\n\n    var span = extent[1] - extent[0]; // If there are no data and extent are [Infinity, -Infinity]\n\n    if (!isFinite(span)) {\n      extent[0] = 0;\n      extent[1] = 1;\n    }\n\n    this.niceTicks(opt.splitNumber, opt.minInterval, opt.maxInterval); // var extent = this._extent;\n\n    var interval = this._interval;\n\n    if (!opt.fixMin) {\n      extent[0] = roundNumber(Math.floor(extent[0] / interval) * interval);\n    }\n\n    if (!opt.fixMax) {\n      extent[1] = roundNumber(Math.ceil(extent[1] / interval) * interval);\n    }\n  }\n});\n/**\n * @return {module:echarts/scale/Time}\n */\n\nIntervalScale.create = function () {\n  return new IntervalScale();\n};\n\nvar _default = IntervalScale;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar createHashMap = _util.createHashMap;\nvar retrieve = _util.retrieve;\nvar each = _util.each;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Helper for model references.\n * There are many manners to refer axis/coordSys.\n */\n// TODO\n// merge relevant logic to this file?\n// check: \"modelHelper\" of tooltip and \"BrushTargetManager\".\n\n/**\n * @class\n * For example:\n * {\n *     coordSysName: 'cartesian2d',\n *     coordSysDims: ['x', 'y', ...],\n *     axisMap: HashMap({\n *         x: xAxisModel,\n *         y: yAxisModel\n *     }),\n *     categoryAxisMap: HashMap({\n *         x: xAxisModel,\n *         y: undefined\n *     }),\n *     // The index of the first category axis in `coordSysDims`.\n *     // `null/undefined` means no category axis exists.\n *     firstCategoryDimIndex: 1,\n *     // To replace user specified encode.\n * }\n */\nfunction CoordSysInfo(coordSysName) {\n  /**\n   * @type {string}\n   */\n  this.coordSysName = coordSysName;\n  /**\n   * @type {Array.<string>}\n   */\n\n  this.coordSysDims = [];\n  /**\n   * @type {module:zrender/core/util#HashMap}\n   */\n\n  this.axisMap = createHashMap();\n  /**\n   * @type {module:zrender/core/util#HashMap}\n   */\n\n  this.categoryAxisMap = createHashMap();\n  /**\n   * @type {number}\n   */\n\n  this.firstCategoryDimIndex = null;\n}\n/**\n * @return {module:model/referHelper#CoordSysInfo}\n */\n\n\nfunction getCoordSysInfoBySeries(seriesModel) {\n  var coordSysName = seriesModel.get('coordinateSystem');\n  var result = new CoordSysInfo(coordSysName);\n  var fetch = fetchers[coordSysName];\n\n  if (fetch) {\n    fetch(seriesModel, result, result.axisMap, result.categoryAxisMap);\n    return result;\n  }\n}\n\nvar fetchers = {\n  cartesian2d: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var xAxisModel = seriesModel.getReferringComponents('xAxis')[0];\n    var yAxisModel = seriesModel.getReferringComponents('yAxis')[0];\n    result.coordSysDims = ['x', 'y'];\n    axisMap.set('x', xAxisModel);\n    axisMap.set('y', yAxisModel);\n\n    if (isCategory(xAxisModel)) {\n      categoryAxisMap.set('x', xAxisModel);\n      result.firstCategoryDimIndex = 0;\n    }\n\n    if (isCategory(yAxisModel)) {\n      categoryAxisMap.set('y', yAxisModel);\n      result.firstCategoryDimIndex == null & (result.firstCategoryDimIndex = 1);\n    }\n  },\n  singleAxis: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var singleAxisModel = seriesModel.getReferringComponents('singleAxis')[0];\n    result.coordSysDims = ['single'];\n    axisMap.set('single', singleAxisModel);\n\n    if (isCategory(singleAxisModel)) {\n      categoryAxisMap.set('single', singleAxisModel);\n      result.firstCategoryDimIndex = 0;\n    }\n  },\n  polar: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var polarModel = seriesModel.getReferringComponents('polar')[0];\n    var radiusAxisModel = polarModel.findAxisModel('radiusAxis');\n    var angleAxisModel = polarModel.findAxisModel('angleAxis');\n    result.coordSysDims = ['radius', 'angle'];\n    axisMap.set('radius', radiusAxisModel);\n    axisMap.set('angle', angleAxisModel);\n\n    if (isCategory(radiusAxisModel)) {\n      categoryAxisMap.set('radius', radiusAxisModel);\n      result.firstCategoryDimIndex = 0;\n    }\n\n    if (isCategory(angleAxisModel)) {\n      categoryAxisMap.set('angle', angleAxisModel);\n      result.firstCategoryDimIndex == null && (result.firstCategoryDimIndex = 1);\n    }\n  },\n  geo: function (seriesModel, result, axisMap, categoryAxisMap) {\n    result.coordSysDims = ['lng', 'lat'];\n  },\n  parallel: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var ecModel = seriesModel.ecModel;\n    var parallelModel = ecModel.getComponent('parallel', seriesModel.get('parallelIndex'));\n    var coordSysDims = result.coordSysDims = parallelModel.dimensions.slice();\n    each(parallelModel.parallelAxisIndex, function (axisIndex, index) {\n      var axisModel = ecModel.getComponent('parallelAxis', axisIndex);\n      var axisDim = coordSysDims[index];\n      axisMap.set(axisDim, axisModel);\n\n      if (isCategory(axisModel) && result.firstCategoryDimIndex == null) {\n        categoryAxisMap.set(axisDim, axisModel);\n        result.firstCategoryDimIndex = index;\n      }\n    });\n  }\n};\n\nfunction isCategory(axisModel) {\n  return axisModel.get('type') === 'category';\n}\n\nexports.getCoordSysInfoBySeries = getCoordSysInfoBySeries;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Scale = require(\"./Scale\");\n\nvar numberUtil = require(\"../util/number\");\n\nvar IntervalScale = require(\"./Interval\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Log scale\n * @module echarts/scale/Log\n */\n// Use some method of IntervalScale\nvar scaleProto = Scale.prototype;\nvar intervalScaleProto = IntervalScale.prototype;\nvar getPrecisionSafe = numberUtil.getPrecisionSafe;\nvar roundingErrorFix = numberUtil.round;\nvar mathFloor = Math.floor;\nvar mathCeil = Math.ceil;\nvar mathPow = Math.pow;\nvar mathLog = Math.log;\nvar LogScale = Scale.extend({\n  type: 'log',\n  base: 10,\n  $constructor: function () {\n    Scale.apply(this, arguments);\n    this._originalScale = new IntervalScale();\n  },\n\n  /**\n   * @param {boolean} [expandToNicedExtent=false] If expand the ticks to niced extent.\n   * @return {Array.<number>}\n   */\n  getTicks: function (expandToNicedExtent) {\n    var originalScale = this._originalScale;\n    var extent = this._extent;\n    var originalExtent = originalScale.getExtent();\n    return zrUtil.map(intervalScaleProto.getTicks.call(this, expandToNicedExtent), function (val) {\n      var powVal = numberUtil.round(mathPow(this.base, val)); // Fix #4158\n\n      powVal = val === extent[0] && originalScale.__fixMin ? fixRoundingError(powVal, originalExtent[0]) : powVal;\n      powVal = val === extent[1] && originalScale.__fixMax ? fixRoundingError(powVal, originalExtent[1]) : powVal;\n      return powVal;\n    }, this);\n  },\n\n  /**\n   * @param {number} splitNumber\n   * @return {Array.<Array.<number>>}\n   */\n  getMinorTicks: intervalScaleProto.getMinorTicks,\n\n  /**\n   * @param {number} val\n   * @return {string}\n   */\n  getLabel: intervalScaleProto.getLabel,\n\n  /**\n   * @param  {number} val\n   * @return {number}\n   */\n  scale: function (val) {\n    val = scaleProto.scale.call(this, val);\n    return mathPow(this.base, val);\n  },\n\n  /**\n   * @param {number} start\n   * @param {number} end\n   */\n  setExtent: function (start, end) {\n    var base = this.base;\n    start = mathLog(start) / mathLog(base);\n    end = mathLog(end) / mathLog(base);\n    intervalScaleProto.setExtent.call(this, start, end);\n  },\n\n  /**\n   * @return {number} end\n   */\n  getExtent: function () {\n    var base = this.base;\n    var extent = scaleProto.getExtent.call(this);\n    extent[0] = mathPow(base, extent[0]);\n    extent[1] = mathPow(base, extent[1]); // Fix #4158\n\n    var originalScale = this._originalScale;\n    var originalExtent = originalScale.getExtent();\n    originalScale.__fixMin && (extent[0] = fixRoundingError(extent[0], originalExtent[0]));\n    originalScale.__fixMax && (extent[1] = fixRoundingError(extent[1], originalExtent[1]));\n    return extent;\n  },\n\n  /**\n   * @param  {Array.<number>} extent\n   */\n  unionExtent: function (extent) {\n    this._originalScale.unionExtent(extent);\n\n    var base = this.base;\n    extent[0] = mathLog(extent[0]) / mathLog(base);\n    extent[1] = mathLog(extent[1]) / mathLog(base);\n    scaleProto.unionExtent.call(this, extent);\n  },\n\n  /**\n   * @override\n   */\n  unionExtentFromData: function (data, dim) {\n    // TODO\n    // filter value that <= 0\n    this.unionExtent(data.getApproximateExtent(dim));\n  },\n\n  /**\n   * Update interval and extent of intervals for nice ticks\n   * @param  {number} [approxTickNum = 10] Given approx tick number\n   */\n  niceTicks: function (approxTickNum) {\n    approxTickNum = approxTickNum || 10;\n    var extent = this._extent;\n    var span = extent[1] - extent[0];\n\n    if (span === Infinity || span <= 0) {\n      return;\n    }\n\n    var interval = numberUtil.quantity(span);\n    var err = approxTickNum / span * interval; // Filter ticks to get closer to the desired count.\n\n    if (err <= 0.5) {\n      interval *= 10;\n    } // Interval should be integer\n\n\n    while (!isNaN(interval) && Math.abs(interval) < 1 && Math.abs(interval) > 0) {\n      interval *= 10;\n    }\n\n    var niceExtent = [numberUtil.round(mathCeil(extent[0] / interval) * interval), numberUtil.round(mathFloor(extent[1] / interval) * interval)];\n    this._interval = interval;\n    this._niceExtent = niceExtent;\n  },\n\n  /**\n   * Nice extent.\n   * @override\n   */\n  niceExtent: function (opt) {\n    intervalScaleProto.niceExtent.call(this, opt);\n    var originalScale = this._originalScale;\n    originalScale.__fixMin = opt.fixMin;\n    originalScale.__fixMax = opt.fixMax;\n  }\n});\nzrUtil.each(['contain', 'normalize'], function (methodName) {\n  LogScale.prototype[methodName] = function (val) {\n    val = mathLog(val) / mathLog(this.base);\n    return scaleProto[methodName].call(this, val);\n  };\n});\n\nLogScale.create = function () {\n  return new LogScale();\n};\n\nfunction fixRoundingError(val, originalVal) {\n  return roundingErrorFix(val, getPrecisionSafe(originalVal));\n}\n\nvar _default = LogScale;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar numberUtil = require(\"../util/number\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * For testable.\n */\nvar roundNumber = numberUtil.round;\n/**\n * @param {Array.<number>} extent Both extent[0] and extent[1] should be valid number.\n *                                Should be extent[0] < extent[1].\n * @param {number} splitNumber splitNumber should be >= 1.\n * @param {number} [minInterval]\n * @param {number} [maxInterval]\n * @return {Object} {interval, intervalPrecision, niceTickExtent}\n */\n\nfunction intervalScaleNiceTicks(extent, splitNumber, minInterval, maxInterval) {\n  var result = {};\n  var span = extent[1] - extent[0];\n  var interval = result.interval = numberUtil.nice(span / splitNumber, true);\n\n  if (minInterval != null && interval < minInterval) {\n    interval = result.interval = minInterval;\n  }\n\n  if (maxInterval != null && interval > maxInterval) {\n    interval = result.interval = maxInterval;\n  } // Tow more digital for tick.\n\n\n  var precision = result.intervalPrecision = getIntervalPrecision(interval); // Niced extent inside original extent\n\n  var niceTickExtent = result.niceTickExtent = [roundNumber(Math.ceil(extent[0] / interval) * interval, precision), roundNumber(Math.floor(extent[1] / interval) * interval, precision)];\n  fixExtent(niceTickExtent, extent);\n  return result;\n}\n/**\n * @param {number} interval\n * @return {number} interval precision\n */\n\n\nfunction getIntervalPrecision(interval) {\n  // Tow more digital for tick.\n  return numberUtil.getPrecisionSafe(interval) + 2;\n}\n\nfunction clamp(niceTickExtent, idx, extent) {\n  niceTickExtent[idx] = Math.max(Math.min(niceTickExtent[idx], extent[1]), extent[0]);\n} // In some cases (e.g., splitNumber is 1), niceTickExtent may be out of extent.\n\n\nfunction fixExtent(niceTickExtent, extent) {\n  !isFinite(niceTickExtent[0]) && (niceTickExtent[0] = extent[0]);\n  !isFinite(niceTickExtent[1]) && (niceTickExtent[1] = extent[1]);\n  clamp(niceTickExtent, 0, extent);\n  clamp(niceTickExtent, 1, extent);\n\n  if (niceTickExtent[0] > niceTickExtent[1]) {\n    niceTickExtent[0] = niceTickExtent[1];\n  }\n}\n\nexports.intervalScaleNiceTicks = intervalScaleNiceTicks;\nexports.getIntervalPrecision = getIntervalPrecision;\nexports.fixExtent = fixExtent;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../util/graphic\");\n\nvar textContain = require(\"zrender/lib/contain/text\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar PI = Math.PI;\n/**\n * @param {module:echarts/ExtensionAPI} api\n * @param {Object} [opts]\n * @param {string} [opts.text]\n * @param {string} [opts.color]\n * @param {string} [opts.textColor]\n * @return {module:zrender/Element}\n */\n\nfunction _default(api, opts) {\n  opts = opts || {};\n  zrUtil.defaults(opts, {\n    text: 'loading',\n    textColor: '#000',\n    fontSize: '12px',\n    maskColor: 'rgba(255, 255, 255, 0.8)',\n    showSpinner: true,\n    color: '#c23531',\n    spinnerRadius: 10,\n    lineWidth: 5,\n    zlevel: 0\n  });\n  var group = new graphic.Group();\n  var mask = new graphic.Rect({\n    style: {\n      fill: opts.maskColor\n    },\n    zlevel: opts.zlevel,\n    z: 10000\n  });\n  group.add(mask);\n  var font = opts.fontSize + ' sans-serif';\n  var labelRect = new graphic.Rect({\n    style: {\n      fill: 'none',\n      text: opts.text,\n      font: font,\n      textPosition: 'right',\n      textDistance: 10,\n      textFill: opts.textColor\n    },\n    zlevel: opts.zlevel,\n    z: 10001\n  });\n  group.add(labelRect);\n\n  if (opts.showSpinner) {\n    var arc = new graphic.Arc({\n      shape: {\n        startAngle: -PI / 2,\n        endAngle: -PI / 2 + 0.1,\n        r: opts.spinnerRadius\n      },\n      style: {\n        stroke: opts.color,\n        lineCap: 'round',\n        lineWidth: opts.lineWidth\n      },\n      zlevel: opts.zlevel,\n      z: 10001\n    });\n    arc.animateShape(true).when(1000, {\n      endAngle: PI * 3 / 2\n    }).start('circularInOut');\n    arc.animateShape(true).when(1000, {\n      startAngle: PI * 3 / 2\n    }).delay(300).start('circularInOut');\n    group.add(arc);\n  } // Inject resize\n\n\n  group.resize = function () {\n    var textWidth = textContain.getWidth(opts.text, font);\n    var r = opts.showSpinner ? opts.spinnerRadius : 0; // cx = (containerWidth - arcDiameter - textDistance - textWidth) / 2\n    // textDistance needs to be calculated when both animation and text exist\n\n    var cx = (api.getWidth() - r * 2 - (opts.showSpinner && textWidth ? 10 : 0) - textWidth) / 2 // only show the text\n    - (opts.showSpinner ? 0 : textWidth / 2);\n    var cy = api.getHeight() / 2;\n    opts.showSpinner && arc.setShape({\n      cx: cx,\n      cy: cy\n    });\n    labelRect.setShape({\n      x: cx - r,\n      y: cy - r,\n      width: r * 2,\n      height: r * 2\n    });\n    mask.setShape({\n      x: 0,\n      y: 0,\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n  };\n\n  group.resize();\n  return group;\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar makeStyleMapper = require(\"./makeStyleMapper\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar getAreaStyle = makeStyleMapper([['fill', 'color'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['opacity'], ['shadowColor']]);\nvar _default = {\n  getAreaStyle: function (excludes, includes) {\n    return getAreaStyle(this, excludes, includes);\n  }\n};\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar modelUtil = require(\"../util/model\");\n\nvar ComponentModel = require(\"./Component\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * ECharts option manager\n *\n * @module {echarts/model/OptionManager}\n */\nvar each = zrUtil.each;\nvar clone = zrUtil.clone;\nvar map = zrUtil.map;\nvar merge = zrUtil.merge;\nvar QUERY_REG = /^(min|max)?(.+)$/;\n/**\n * TERM EXPLANATIONS:\n *\n * [option]:\n *\n *     An object that contains definitions of components. For example:\n *     var option = {\n *         title: {...},\n *         legend: {...},\n *         visualMap: {...},\n *         series: [\n *             {data: [...]},\n *             {data: [...]},\n *             ...\n *         ]\n *     };\n *\n * [rawOption]:\n *\n *     An object input to echarts.setOption. 'rawOption' may be an\n *     'option', or may be an object contains multi-options. For example:\n *     var option = {\n *         baseOption: {\n *             title: {...},\n *             legend: {...},\n *             series: [\n *                 {data: [...]},\n *                 {data: [...]},\n *                 ...\n *             ]\n *         },\n *         timeline: {...},\n *         options: [\n *             {title: {...}, series: {data: [...]}},\n *             {title: {...}, series: {data: [...]}},\n *             ...\n *         ],\n *         media: [\n *             {\n *                 query: {maxWidth: 320},\n *                 option: {series: {x: 20}, visualMap: {show: false}}\n *             },\n *             {\n *                 query: {minWidth: 320, maxWidth: 720},\n *                 option: {series: {x: 500}, visualMap: {show: true}}\n *             },\n *             {\n *                 option: {series: {x: 1200}, visualMap: {show: true}}\n *             }\n *         ]\n *     };\n *\n * @alias module:echarts/model/OptionManager\n * @param {module:echarts/ExtensionAPI} api\n */\n\nfunction OptionManager(api) {\n  /**\n   * @private\n   * @type {module:echarts/ExtensionAPI}\n   */\n  this._api = api;\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n\n  this._timelineOptions = [];\n  /**\n   * @private\n   * @type {Array.<Object>}\n   */\n\n  this._mediaList = [];\n  /**\n   * @private\n   * @type {Object}\n   */\n\n  this._mediaDefault;\n  /**\n   * -1, means default.\n   * empty means no media.\n   * @private\n   * @type {Array.<number>}\n   */\n\n  this._currentMediaIndices = [];\n  /**\n   * @private\n   * @type {Object}\n   */\n\n  this._optionBackup;\n  /**\n   * @private\n   * @type {Object}\n   */\n\n  this._newBaseOption;\n} // timeline.notMerge is not supported in ec3. Firstly there is rearly\n// case that notMerge is needed. Secondly supporting 'notMerge' requires\n// rawOption cloned and backuped when timeline changed, which does no\n// good to performance. What's more, that both timeline and setOption\n// method supply 'notMerge' brings complex and some problems.\n// Consider this case:\n// (step1) chart.setOption({timeline: {notMerge: false}, ...}, false);\n// (step2) chart.setOption({timeline: {notMerge: true}, ...}, false);\n\n\nOptionManager.prototype = {\n  constructor: OptionManager,\n\n  /**\n   * @public\n   * @param {Object} rawOption Raw option.\n   * @param {module:echarts/model/Global} ecModel\n   * @param {Array.<Function>} optionPreprocessorFuncs\n   * @return {Object} Init option\n   */\n  setOption: function (rawOption, optionPreprocessorFuncs) {\n    if (rawOption) {\n      // That set dat primitive is dangerous if user reuse the data when setOption again.\n      zrUtil.each(modelUtil.normalizeToArray(rawOption.series), function (series) {\n        series && series.data && zrUtil.isTypedArray(series.data) && zrUtil.setAsPrimitive(series.data);\n      });\n    } // Caution: some series modify option data, if do not clone,\n    // it should ensure that the repeat modify correctly\n    // (create a new object when modify itself).\n\n\n    rawOption = clone(rawOption); // FIXME\n    // 如果 timeline options 或者 media 中设置了某个属性，而baseOption中没有设置，则进行警告。\n\n    var oldOptionBackup = this._optionBackup;\n    var newParsedOption = parseRawOption.call(this, rawOption, optionPreprocessorFuncs, !oldOptionBackup);\n    this._newBaseOption = newParsedOption.baseOption; // For setOption at second time (using merge mode);\n\n    if (oldOptionBackup) {\n      // Only baseOption can be merged.\n      mergeOption(oldOptionBackup.baseOption, newParsedOption.baseOption); // For simplicity, timeline options and media options do not support merge,\n      // that is, if you `setOption` twice and both has timeline options, the latter\n      // timeline opitons will not be merged to the formers, but just substitude them.\n\n      if (newParsedOption.timelineOptions.length) {\n        oldOptionBackup.timelineOptions = newParsedOption.timelineOptions;\n      }\n\n      if (newParsedOption.mediaList.length) {\n        oldOptionBackup.mediaList = newParsedOption.mediaList;\n      }\n\n      if (newParsedOption.mediaDefault) {\n        oldOptionBackup.mediaDefault = newParsedOption.mediaDefault;\n      }\n    } else {\n      this._optionBackup = newParsedOption;\n    }\n  },\n\n  /**\n   * @param {boolean} isRecreate\n   * @return {Object}\n   */\n  mountOption: function (isRecreate) {\n    var optionBackup = this._optionBackup; // TODO\n    // 如果没有reset功能则不clone。\n\n    this._timelineOptions = map(optionBackup.timelineOptions, clone);\n    this._mediaList = map(optionBackup.mediaList, clone);\n    this._mediaDefault = clone(optionBackup.mediaDefault);\n    this._currentMediaIndices = [];\n    return clone(isRecreate // this._optionBackup.baseOption, which is created at the first `setOption`\n    // called, and is merged into every new option by inner method `mergeOption`\n    // each time `setOption` called, can be only used in `isRecreate`, because\n    // its reliability is under suspicion. In other cases option merge is\n    // performed by `model.mergeOption`.\n    ? optionBackup.baseOption : this._newBaseOption);\n  },\n\n  /**\n   * @param {module:echarts/model/Global} ecModel\n   * @return {Object}\n   */\n  getTimelineOption: function (ecModel) {\n    var option;\n    var timelineOptions = this._timelineOptions;\n\n    if (timelineOptions.length) {\n      // getTimelineOption can only be called after ecModel inited,\n      // so we can get currentIndex from timelineModel.\n      var timelineModel = ecModel.getComponent('timeline');\n\n      if (timelineModel) {\n        option = clone(timelineOptions[timelineModel.getCurrentIndex()], true);\n      }\n    }\n\n    return option;\n  },\n\n  /**\n   * @param {module:echarts/model/Global} ecModel\n   * @return {Array.<Object>}\n   */\n  getMediaOption: function (ecModel) {\n    var ecWidth = this._api.getWidth();\n\n    var ecHeight = this._api.getHeight();\n\n    var mediaList = this._mediaList;\n    var mediaDefault = this._mediaDefault;\n    var indices = [];\n    var result = []; // No media defined.\n\n    if (!mediaList.length && !mediaDefault) {\n      return result;\n    } // Multi media may be applied, the latter defined media has higher priority.\n\n\n    for (var i = 0, len = mediaList.length; i < len; i++) {\n      if (applyMediaQuery(mediaList[i].query, ecWidth, ecHeight)) {\n        indices.push(i);\n      }\n    } // FIXME\n    // 是否mediaDefault应该强制用户设置，否则可能修改不能回归。\n\n\n    if (!indices.length && mediaDefault) {\n      indices = [-1];\n    }\n\n    if (indices.length && !indicesEquals(indices, this._currentMediaIndices)) {\n      result = map(indices, function (index) {\n        return clone(index === -1 ? mediaDefault.option : mediaList[index].option);\n      });\n    } // Otherwise return nothing.\n\n\n    this._currentMediaIndices = indices;\n    return result;\n  }\n};\n\nfunction parseRawOption(rawOption, optionPreprocessorFuncs, isNew) {\n  var timelineOptions = [];\n  var mediaList = [];\n  var mediaDefault;\n  var baseOption; // Compatible with ec2.\n\n  var timelineOpt = rawOption.timeline;\n\n  if (rawOption.baseOption) {\n    baseOption = rawOption.baseOption;\n  } // For timeline\n\n\n  if (timelineOpt || rawOption.options) {\n    baseOption = baseOption || {};\n    timelineOptions = (rawOption.options || []).slice();\n  } // For media query\n\n\n  if (rawOption.media) {\n    baseOption = baseOption || {};\n    var media = rawOption.media;\n    each(media, function (singleMedia) {\n      if (singleMedia && singleMedia.option) {\n        if (singleMedia.query) {\n          mediaList.push(singleMedia);\n        } else if (!mediaDefault) {\n          // Use the first media default.\n          mediaDefault = singleMedia;\n        }\n      }\n    });\n  } // For normal option\n\n\n  if (!baseOption) {\n    baseOption = rawOption;\n  } // Set timelineOpt to baseOption in ec3,\n  // which is convenient for merge option.\n\n\n  if (!baseOption.timeline) {\n    baseOption.timeline = timelineOpt;\n  } // Preprocess.\n\n\n  each([baseOption].concat(timelineOptions).concat(zrUtil.map(mediaList, function (media) {\n    return media.option;\n  })), function (option) {\n    each(optionPreprocessorFuncs, function (preProcess) {\n      preProcess(option, isNew);\n    });\n  });\n  return {\n    baseOption: baseOption,\n    timelineOptions: timelineOptions,\n    mediaDefault: mediaDefault,\n    mediaList: mediaList\n  };\n}\n/**\n * @see <http://www.w3.org/TR/css3-mediaqueries/#media1>\n * Support: width, height, aspectRatio\n * Can use max or min as prefix.\n */\n\n\nfunction applyMediaQuery(query, ecWidth, ecHeight) {\n  var realMap = {\n    width: ecWidth,\n    height: ecHeight,\n    aspectratio: ecWidth / ecHeight // lowser case for convenientce.\n\n  };\n  var applicatable = true;\n  zrUtil.each(query, function (value, attr) {\n    var matched = attr.match(QUERY_REG);\n\n    if (!matched || !matched[1] || !matched[2]) {\n      return;\n    }\n\n    var operator = matched[1];\n    var realAttr = matched[2].toLowerCase();\n\n    if (!compare(realMap[realAttr], value, operator)) {\n      applicatable = false;\n    }\n  });\n  return applicatable;\n}\n\nfunction compare(real, expect, operator) {\n  if (operator === 'min') {\n    return real >= expect;\n  } else if (operator === 'max') {\n    return real <= expect;\n  } else {\n    // Equals\n    return real === expect;\n  }\n}\n\nfunction indicesEquals(indices1, indices2) {\n  // indices is always order by asc and has only finite number.\n  return indices1.join(',') === indices2.join(',');\n}\n/**\n * Consider case:\n * `chart.setOption(opt1);`\n * Then user do some interaction like dataZoom, dataView changing.\n * `chart.setOption(opt2);`\n * Then user press 'reset button' in toolbox.\n *\n * After doing that all of the interaction effects should be reset, the\n * chart should be the same as the result of invoke\n * `chart.setOption(opt1); chart.setOption(opt2);`.\n *\n * Although it is not able ensure that\n * `chart.setOption(opt1); chart.setOption(opt2);` is equivalents to\n * `chart.setOption(merge(opt1, opt2));` exactly,\n * this might be the only simple way to implement that feature.\n *\n * MEMO: We've considered some other approaches:\n * 1. Each model handle its self restoration but not uniform treatment.\n *     (Too complex in logic and error-prone)\n * 2. Use a shadow ecModel. (Performace expensive)\n */\n\n\nfunction mergeOption(oldOption, newOption) {\n  newOption = newOption || {};\n  each(newOption, function (newCptOpt, mainType) {\n    if (newCptOpt == null) {\n      return;\n    }\n\n    var oldCptOpt = oldOption[mainType];\n\n    if (!ComponentModel.hasClass(mainType)) {\n      oldOption[mainType] = merge(oldCptOpt, newCptOpt, true);\n    } else {\n      newCptOpt = modelUtil.normalizeToArray(newCptOpt);\n      oldCptOpt = modelUtil.normalizeToArray(oldCptOpt);\n      var mapResult = modelUtil.mappingToExists(oldCptOpt, newCptOpt);\n      oldOption[mainType] = map(mapResult, function (item) {\n        return item.option && item.exist ? merge(item.exist, item.option, true) : item.exist || item.option;\n      });\n    }\n  });\n}\n\nvar _default = OptionManager;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar createHashMap = _util.createHashMap;\nvar each = _util.each;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// (1) [Caution]: the logic is correct based on the premises:\n//     data processing stage is blocked in stream.\n//     See <module:echarts/stream/Scheduler#performDataProcessorTasks>\n// (2) Only register once when import repeatly.\n//     Should be executed after series filtered and before stack calculation.\nfunction _default(ecModel) {\n  var stackInfoMap = createHashMap();\n  ecModel.eachSeries(function (seriesModel) {\n    var stack = seriesModel.get('stack'); // Compatibal: when `stack` is set as '', do not stack.\n\n    if (stack) {\n      var stackInfoList = stackInfoMap.get(stack) || stackInfoMap.set(stack, []);\n      var data = seriesModel.getData();\n      var stackInfo = {\n        // Used for calculate axis extent automatically.\n        stackResultDimension: data.getCalculationInfo('stackResultDimension'),\n        stackedOverDimension: data.getCalculationInfo('stackedOverDimension'),\n        stackedDimension: data.getCalculationInfo('stackedDimension'),\n        stackedByDimension: data.getCalculationInfo('stackedByDimension'),\n        isStackedByIndex: data.getCalculationInfo('isStackedByIndex'),\n        data: data,\n        seriesModel: seriesModel\n      }; // If stacked on axis that do not support data stack.\n\n      if (!stackInfo.stackedDimension || !(stackInfo.isStackedByIndex || stackInfo.stackedByDimension)) {\n        return;\n      }\n\n      stackInfoList.length && data.setCalculationInfo('stackedOnSeries', stackInfoList[stackInfoList.length - 1].seriesModel);\n      stackInfoList.push(stackInfo);\n    }\n  });\n  stackInfoMap.each(calculateStack);\n}\n\nfunction calculateStack(stackInfoList) {\n  each(stackInfoList, function (targetStackInfo, idxInStack) {\n    var resultVal = [];\n    var resultNaN = [NaN, NaN];\n    var dims = [targetStackInfo.stackResultDimension, targetStackInfo.stackedOverDimension];\n    var targetData = targetStackInfo.data;\n    var isStackedByIndex = targetStackInfo.isStackedByIndex; // Should not write on raw data, because stack series model list changes\n    // depending on legend selection.\n\n    var newData = targetData.map(dims, function (v0, v1, dataIndex) {\n      var sum = targetData.get(targetStackInfo.stackedDimension, dataIndex); // Consider `connectNulls` of line area, if value is NaN, stackedOver\n      // should also be NaN, to draw a appropriate belt area.\n\n      if (isNaN(sum)) {\n        return resultNaN;\n      }\n\n      var byValue;\n      var stackedDataRawIndex;\n\n      if (isStackedByIndex) {\n        stackedDataRawIndex = targetData.getRawIndex(dataIndex);\n      } else {\n        byValue = targetData.get(targetStackInfo.stackedByDimension, dataIndex);\n      } // If stackOver is NaN, chart view will render point on value start.\n\n\n      var stackedOver = NaN;\n\n      for (var j = idxInStack - 1; j >= 0; j--) {\n        var stackInfo = stackInfoList[j]; // Has been optimized by inverted indices on `stackedByDimension`.\n\n        if (!isStackedByIndex) {\n          stackedDataRawIndex = stackInfo.data.rawIndexOf(stackInfo.stackedByDimension, byValue);\n        }\n\n        if (stackedDataRawIndex >= 0) {\n          var val = stackInfo.data.getByRawIndex(stackInfo.stackResultDimension, stackedDataRawIndex); // Considering positive stack, negative stack and empty data\n\n          if (sum >= 0 && val > 0 || // Positive stack\n          sum <= 0 && val < 0 // Negative stack\n          ) {\n              sum += val;\n              stackedOver = val;\n              break;\n            }\n        }\n      }\n\n      resultVal[0] = sum;\n      resultVal[1] = stackedOver;\n      return resultVal;\n    });\n    targetData.hostModel.setData(newData); // Update for consequent calculation\n\n    targetStackInfo.data = newData;\n  });\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _default = {\n  getBoxLayoutParams: function () {\n    return {\n      left: this.get('left'),\n      top: this.get('top'),\n      right: this.get('right'),\n      bottom: this.get('bottom'),\n      width: this.get('width'),\n      height: this.get('height')\n    };\n  }\n};\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar clazzUtil = require(\"../util/clazz\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * // Scale class management\n * @module echarts/scale/Scale\n */\n\n/**\n * @param {Object} [setting]\n */\nfunction Scale(setting) {\n  this._setting = setting || {};\n  /**\n   * Extent\n   * @type {Array.<number>}\n   * @protected\n   */\n\n  this._extent = [Infinity, -Infinity];\n  /**\n   * Step is calculated in adjustExtent\n   * @type {Array.<number>}\n   * @protected\n   */\n\n  this._interval = 0;\n  this.init && this.init.apply(this, arguments);\n}\n/**\n * Parse input val to valid inner number.\n * @param {*} val\n * @return {number}\n */\n\n\nScale.prototype.parse = function (val) {\n  // Notice: This would be a trap here, If the implementation\n  // of this method depends on extent, and this method is used\n  // before extent set (like in dataZoom), it would be wrong.\n  // Nevertheless, parse does not depend on extent generally.\n  return val;\n};\n\nScale.prototype.getSetting = function (name) {\n  return this._setting[name];\n};\n\nScale.prototype.contain = function (val) {\n  var extent = this._extent;\n  return val >= extent[0] && val <= extent[1];\n};\n/**\n * Normalize value to linear [0, 1], return 0.5 if extent span is 0\n * @param {number} val\n * @return {number}\n */\n\n\nScale.prototype.normalize = function (val) {\n  var extent = this._extent;\n\n  if (extent[1] === extent[0]) {\n    return 0.5;\n  }\n\n  return (val - extent[0]) / (extent[1] - extent[0]);\n};\n/**\n * Scale normalized value\n * @param {number} val\n * @return {number}\n */\n\n\nScale.prototype.scale = function (val) {\n  var extent = this._extent;\n  return val * (extent[1] - extent[0]) + extent[0];\n};\n/**\n * Set extent from data\n * @param {Array.<number>} other\n */\n\n\nScale.prototype.unionExtent = function (other) {\n  var extent = this._extent;\n  other[0] < extent[0] && (extent[0] = other[0]);\n  other[1] > extent[1] && (extent[1] = other[1]); // not setExtent because in log axis it may transformed to power\n  // this.setExtent(extent[0], extent[1]);\n};\n/**\n * Set extent from data\n * @param {module:echarts/data/List} data\n * @param {string} dim\n */\n\n\nScale.prototype.unionExtentFromData = function (data, dim) {\n  this.unionExtent(data.getApproximateExtent(dim));\n};\n/**\n * Get extent\n * @return {Array.<number>}\n */\n\n\nScale.prototype.getExtent = function () {\n  return this._extent.slice();\n};\n/**\n * Set extent\n * @param {number} start\n * @param {number} end\n */\n\n\nScale.prototype.setExtent = function (start, end) {\n  var thisExtent = this._extent;\n\n  if (!isNaN(start)) {\n    thisExtent[0] = start;\n  }\n\n  if (!isNaN(end)) {\n    thisExtent[1] = end;\n  }\n};\n/**\n * When axis extent depends on data and no data exists,\n * axis ticks should not be drawn, which is named 'blank'.\n */\n\n\nScale.prototype.isBlank = function () {\n  return this._isBlank;\n},\n/**\n * When axis extent depends on data and no data exists,\n * axis ticks should not be drawn, which is named 'blank'.\n */\nScale.prototype.setBlank = function (isBlank) {\n  this._isBlank = isBlank;\n};\n/**\n * @abstract\n * @param {*} tick\n * @return {string} label of the tick.\n */\n\nScale.prototype.getLabel = null;\nclazzUtil.enableClassExtend(Scale);\nclazzUtil.enableClassManagement(Scale, {\n  registerWhenExtend: true\n});\nvar _default = Scale;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\nvar normalizeToArray = _model.normalizeToArray;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar inner = makeInner();\n\nfunction getNearestColorPalette(colors, requestColorNum) {\n  var paletteNum = colors.length; // TODO colors must be in order\n\n  for (var i = 0; i < paletteNum; i++) {\n    if (colors[i].length > requestColorNum) {\n      return colors[i];\n    }\n  }\n\n  return colors[paletteNum - 1];\n}\n\nvar _default = {\n  clearColorPalette: function () {\n    inner(this).colorIdx = 0;\n    inner(this).colorNameMap = {};\n  },\n\n  /**\n   * @param {string} name MUST NOT be null/undefined. Otherwise call this function\n   *                 twise with the same parameters will get different result.\n   * @param {Object} [scope=this]\n   * @param {Object} [requestColorNum]\n   * @return {string} color string.\n   */\n  getColorFromPalette: function (name, scope, requestColorNum) {\n    scope = scope || this;\n    var scopeFields = inner(scope);\n    var colorIdx = scopeFields.colorIdx || 0;\n    var colorNameMap = scopeFields.colorNameMap = scopeFields.colorNameMap || {}; // Use `hasOwnProperty` to avoid conflict with Object.prototype.\n\n    if (colorNameMap.hasOwnProperty(name)) {\n      return colorNameMap[name];\n    }\n\n    var defaultColorPalette = normalizeToArray(this.get('color', true));\n    var layeredColorPalette = this.get('colorLayer', true);\n    var colorPalette = requestColorNum == null || !layeredColorPalette ? defaultColorPalette : getNearestColorPalette(layeredColorPalette, requestColorNum); // In case can't find in layered color palette.\n\n    colorPalette = colorPalette || defaultColorPalette;\n\n    if (!colorPalette || !colorPalette.length) {\n      return;\n    }\n\n    var color = colorPalette[colorIdx];\n\n    if (name) {\n      colorNameMap[name] = color;\n    }\n\n    scopeFields.colorIdx = (colorIdx + 1) % colorPalette.length;\n    return color;\n  }\n};\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar each = _util.each;\nvar isArray = _util.isArray;\nvar isObject = _util.isObject;\n\nvar compatStyle = require(\"./helper/compatStyle\");\n\nvar _model = require(\"../util/model\");\n\nvar normalizeToArray = _model.normalizeToArray;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Compatitable with 2.0\nfunction get(opt, path) {\n  path = path.split(',');\n  var obj = opt;\n\n  for (var i = 0; i < path.length; i++) {\n    obj = obj && obj[path[i]];\n\n    if (obj == null) {\n      break;\n    }\n  }\n\n  return obj;\n}\n\nfunction set(opt, path, val, overwrite) {\n  path = path.split(',');\n  var obj = opt;\n  var key;\n\n  for (var i = 0; i < path.length - 1; i++) {\n    key = path[i];\n\n    if (obj[key] == null) {\n      obj[key] = {};\n    }\n\n    obj = obj[key];\n  }\n\n  if (overwrite || obj[path[i]] == null) {\n    obj[path[i]] = val;\n  }\n}\n\nfunction compatLayoutProperties(option) {\n  each(LAYOUT_PROPERTIES, function (prop) {\n    if (prop[0] in option && !(prop[1] in option)) {\n      option[prop[1]] = option[prop[0]];\n    }\n  });\n}\n\nvar LAYOUT_PROPERTIES = [['x', 'left'], ['y', 'top'], ['x2', 'right'], ['y2', 'bottom']];\nvar COMPATITABLE_COMPONENTS = ['grid', 'geo', 'parallel', 'legend', 'toolbox', 'title', 'visualMap', 'dataZoom', 'timeline'];\n\nfunction _default(option, isTheme) {\n  compatStyle(option, isTheme); // Make sure series array for model initialization.\n\n  option.series = normalizeToArray(option.series);\n  each(option.series, function (seriesOpt) {\n    if (!isObject(seriesOpt)) {\n      return;\n    }\n\n    var seriesType = seriesOpt.type;\n\n    if (seriesType === 'line') {\n      if (seriesOpt.clipOverflow != null) {\n        seriesOpt.clip = seriesOpt.clipOverflow;\n      }\n    } else if (seriesType === 'pie' || seriesType === 'gauge') {\n      if (seriesOpt.clockWise != null) {\n        seriesOpt.clockwise = seriesOpt.clockWise;\n      }\n    } else if (seriesType === 'gauge') {\n      var pointerColor = get(seriesOpt, 'pointer.color');\n      pointerColor != null && set(seriesOpt, 'itemStyle.color', pointerColor);\n    }\n\n    compatLayoutProperties(seriesOpt);\n  }); // dataRange has changed to visualMap\n\n  if (option.dataRange) {\n    option.visualMap = option.dataRange;\n  }\n\n  each(COMPATITABLE_COMPONENTS, function (componentName) {\n    var options = option[componentName];\n\n    if (options) {\n      if (!isArray(options)) {\n        options = [options];\n      }\n\n      each(options, function (option) {\n        compatLayoutProperties(option);\n      });\n    }\n  });\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar samplers = {\n  average: function (frame) {\n    var sum = 0;\n    var count = 0;\n\n    for (var i = 0; i < frame.length; i++) {\n      if (!isNaN(frame[i])) {\n        sum += frame[i];\n        count++;\n      }\n    } // Return NaN if count is 0\n\n\n    return count === 0 ? NaN : sum / count;\n  },\n  sum: function (frame) {\n    var sum = 0;\n\n    for (var i = 0; i < frame.length; i++) {\n      // Ignore NaN\n      sum += frame[i] || 0;\n    }\n\n    return sum;\n  },\n  max: function (frame) {\n    var max = -Infinity;\n\n    for (var i = 0; i < frame.length; i++) {\n      frame[i] > max && (max = frame[i]);\n    } // NaN will cause illegal axis extent.\n\n\n    return isFinite(max) ? max : NaN;\n  },\n  min: function (frame) {\n    var min = Infinity;\n\n    for (var i = 0; i < frame.length; i++) {\n      frame[i] < min && (min = frame[i]);\n    } // NaN will cause illegal axis extent.\n\n\n    return isFinite(min) ? min : NaN;\n  },\n  // TODO\n  // Median\n  nearest: function (frame) {\n    return frame[0];\n  }\n};\n\nvar indexSampler = function (frame, value) {\n  return Math.round(frame.length / 2);\n};\n\nfunction _default(seriesType) {\n  return {\n    seriesType: seriesType,\n    modifyOutputEnd: true,\n    reset: function (seriesModel, ecModel, api) {\n      var data = seriesModel.getData();\n      var sampling = seriesModel.get('sampling');\n      var coordSys = seriesModel.coordinateSystem; // Only cartesian2d support down sampling\n\n      if (coordSys.type === 'cartesian2d' && sampling) {\n        var baseAxis = coordSys.getBaseAxis();\n        var valueAxis = coordSys.getOtherAxis(baseAxis);\n        var extent = baseAxis.getExtent(); // Coordinste system has been resized\n\n        var size = extent[1] - extent[0];\n        var rate = Math.round(data.count() / size);\n\n        if (rate > 1) {\n          var sampler;\n\n          if (typeof sampling === 'string') {\n            sampler = samplers[sampling];\n          } else if (typeof sampling === 'function') {\n            sampler = sampling;\n          }\n\n          if (sampler) {\n            // Only support sample the first dim mapped from value axis.\n            seriesModel.setData(data.downSample(data.mapDimension(valueAxis.dim), 1 / rate, sampler, indexSampler));\n          }\n        }\n      }\n    }\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar textContain = require(\"zrender/lib/contain/text\");\n\nvar graphicUtil = require(\"../../util/graphic\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar PATH_COLOR = ['textStyle', 'color'];\nvar _default = {\n  /**\n   * Get color property or get color from option.textStyle.color\n   * @param {boolean} [isEmphasis]\n   * @return {string}\n   */\n  getTextColor: function (isEmphasis) {\n    var ecModel = this.ecModel;\n    return this.getShallow('color') || (!isEmphasis && ecModel ? ecModel.get(PATH_COLOR) : null);\n  },\n\n  /**\n   * Create font string from fontStyle, fontWeight, fontSize, fontFamily\n   * @return {string}\n   */\n  getFont: function () {\n    return graphicUtil.getFont({\n      fontStyle: this.getShallow('fontStyle'),\n      fontWeight: this.getShallow('fontWeight'),\n      fontSize: this.getShallow('fontSize'),\n      fontFamily: this.getShallow('fontFamily')\n    }, this.ecModel);\n  },\n  getTextRect: function (text) {\n    return textContain.getBoundingRect(text, this.getFont(), this.getShallow('align'), this.getShallow('verticalAlign') || this.getShallow('baseline'), this.getShallow('padding'), this.getShallow('lineHeight'), this.getShallow('rich'), this.getShallow('truncateText'));\n  }\n};\nmodule.exports = _default;"],"sourceRoot":""}