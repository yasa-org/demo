{"version":3,"sources":["webpack:///./node_modules/monaco-editor/esm/vs/editor/browser/core/keybindingCancellation.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/browser/core/editorState.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","this","constructor","prototype","create","IEditorCancellationTokens","ctxCancellableOperation","class_1","_tokens","WeakMap","add","editor","cts","removeFn","data","get","invokeWithinContext","accessor","key","bindTo","tokens","set","push","isEmpty","undefined","cancel","pop","EditorKeybindingCancellationTokenSource","_super","parent","_this","call","_unregister","dispose","class_2","id","kbOpts","weight","primary","precondition","runEditorCommand","EditorState","flags","model","getModel","modelVersionId","strings","uri","toString","getVersionId","position","getPosition","selection","getSelection","scrollLeft","getScrollLeft","scrollTop","getScrollTop","_equals","other","state","equals","equalsRange","validate","EditorStateCancellationTokenSource","_listener","onDidChangeCursorPosition","_","onDidChangeCursorSelection","onDidScrollChange","onDidChangeModel","onDidChangeModelContent","TextModelCancellationTokenSource","onDidChangeContent","StableEditorScrollState","_visiblePosition","_visiblePositionScrollDelta","capture","visiblePosition","visiblePositionScrollDelta","visibleRanges","getVisibleRanges","length","getStartPosition","visiblePositionScrollTop","getTopForPosition","lineNumber","column","restore","setScrollTop"],"mappings":"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","file":"js/chunk-vendors~87c8da79.74005bad.js","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { EditorCommand, registerEditorCommand } from '../editorExtensions.js';\r\nimport { IContextKeyService, RawContextKey } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { CancellationTokenSource } from '../../../base/common/cancellation.js';\r\nimport { LinkedList } from '../../../base/common/linkedList.js';\r\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\r\nimport { registerSingleton } from '../../../platform/instantiation/common/extensions.js';\r\nvar IEditorCancellationTokens = createDecorator('IEditorCancelService');\r\nvar ctxCancellableOperation = new RawContextKey('cancellableOperation', false);\r\nregisterSingleton(IEditorCancellationTokens, /** @class */ (function () {\r\n    function class_1() {\r\n        this._tokens = new WeakMap();\r\n    }\r\n    class_1.prototype.add = function (editor, cts) {\r\n        var data = this._tokens.get(editor);\r\n        if (!data) {\r\n            data = editor.invokeWithinContext(function (accessor) {\r\n                var key = ctxCancellableOperation.bindTo(accessor.get(IContextKeyService));\r\n                var tokens = new LinkedList();\r\n                return { key: key, tokens: tokens };\r\n            });\r\n            this._tokens.set(editor, data);\r\n        }\r\n        var removeFn;\r\n        data.key.set(true);\r\n        removeFn = data.tokens.push(cts);\r\n        return function () {\r\n            // remove w/o cancellation\r\n            if (removeFn) {\r\n                removeFn();\r\n                data.key.set(!data.tokens.isEmpty());\r\n                removeFn = undefined;\r\n            }\r\n        };\r\n    };\r\n    class_1.prototype.cancel = function (editor) {\r\n        var data = this._tokens.get(editor);\r\n        if (!data) {\r\n            return;\r\n        }\r\n        // remove with cancellation\r\n        var cts = data.tokens.pop();\r\n        if (cts) {\r\n            cts.cancel();\r\n            data.key.set(!data.tokens.isEmpty());\r\n        }\r\n    };\r\n    return class_1;\r\n}()), true);\r\nvar EditorKeybindingCancellationTokenSource = /** @class */ (function (_super) {\r\n    __extends(EditorKeybindingCancellationTokenSource, _super);\r\n    function EditorKeybindingCancellationTokenSource(editor, parent) {\r\n        var _this = _super.call(this, parent) || this;\r\n        _this.editor = editor;\r\n        _this._unregister = editor.invokeWithinContext(function (accessor) { return accessor.get(IEditorCancellationTokens).add(editor, _this); });\r\n        return _this;\r\n    }\r\n    EditorKeybindingCancellationTokenSource.prototype.dispose = function () {\r\n        this._unregister();\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    return EditorKeybindingCancellationTokenSource;\r\n}(CancellationTokenSource));\r\nexport { EditorKeybindingCancellationTokenSource };\r\nregisterEditorCommand(new /** @class */ (function (_super) {\r\n    __extends(class_2, _super);\r\n    function class_2() {\r\n        return _super.call(this, {\r\n            id: 'editor.cancelOperation',\r\n            kbOpts: {\r\n                weight: 100 /* EditorContrib */,\r\n                primary: 9 /* Escape */\r\n            },\r\n            precondition: ctxCancellableOperation\r\n        }) || this;\r\n    }\r\n    class_2.prototype.runEditorCommand = function (accessor, editor) {\r\n        accessor.get(IEditorCancellationTokens).cancel(editor);\r\n    };\r\n    return class_2;\r\n}(EditorCommand)));\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport * as strings from '../../../base/common/strings.js';\r\nimport { CancellationTokenSource } from '../../../base/common/cancellation.js';\r\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport { EditorKeybindingCancellationTokenSource } from './keybindingCancellation.js';\r\nvar EditorState = /** @class */ (function () {\r\n    function EditorState(editor, flags) {\r\n        this.flags = flags;\r\n        if ((this.flags & 1 /* Value */) !== 0) {\r\n            var model = editor.getModel();\r\n            this.modelVersionId = model ? strings.format('{0}#{1}', model.uri.toString(), model.getVersionId()) : null;\r\n        }\r\n        else {\r\n            this.modelVersionId = null;\r\n        }\r\n        if ((this.flags & 4 /* Position */) !== 0) {\r\n            this.position = editor.getPosition();\r\n        }\r\n        else {\r\n            this.position = null;\r\n        }\r\n        if ((this.flags & 2 /* Selection */) !== 0) {\r\n            this.selection = editor.getSelection();\r\n        }\r\n        else {\r\n            this.selection = null;\r\n        }\r\n        if ((this.flags & 8 /* Scroll */) !== 0) {\r\n            this.scrollLeft = editor.getScrollLeft();\r\n            this.scrollTop = editor.getScrollTop();\r\n        }\r\n        else {\r\n            this.scrollLeft = -1;\r\n            this.scrollTop = -1;\r\n        }\r\n    }\r\n    EditorState.prototype._equals = function (other) {\r\n        if (!(other instanceof EditorState)) {\r\n            return false;\r\n        }\r\n        var state = other;\r\n        if (this.modelVersionId !== state.modelVersionId) {\r\n            return false;\r\n        }\r\n        if (this.scrollLeft !== state.scrollLeft || this.scrollTop !== state.scrollTop) {\r\n            return false;\r\n        }\r\n        if (!this.position && state.position || this.position && !state.position || this.position && state.position && !this.position.equals(state.position)) {\r\n            return false;\r\n        }\r\n        if (!this.selection && state.selection || this.selection && !state.selection || this.selection && state.selection && !this.selection.equalsRange(state.selection)) {\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n    EditorState.prototype.validate = function (editor) {\r\n        return this._equals(new EditorState(editor, this.flags));\r\n    };\r\n    return EditorState;\r\n}());\r\nexport { EditorState };\r\n/**\r\n * A cancellation token source that cancels when the editor changes as expressed\r\n * by the provided flags\r\n */\r\nvar EditorStateCancellationTokenSource = /** @class */ (function (_super) {\r\n    __extends(EditorStateCancellationTokenSource, _super);\r\n    function EditorStateCancellationTokenSource(editor, flags, parent) {\r\n        var _this = _super.call(this, editor, parent) || this;\r\n        _this.editor = editor;\r\n        _this._listener = new DisposableStore();\r\n        if (flags & 4 /* Position */) {\r\n            _this._listener.add(editor.onDidChangeCursorPosition(function (_) { return _this.cancel(); }));\r\n        }\r\n        if (flags & 2 /* Selection */) {\r\n            _this._listener.add(editor.onDidChangeCursorSelection(function (_) { return _this.cancel(); }));\r\n        }\r\n        if (flags & 8 /* Scroll */) {\r\n            _this._listener.add(editor.onDidScrollChange(function (_) { return _this.cancel(); }));\r\n        }\r\n        if (flags & 1 /* Value */) {\r\n            _this._listener.add(editor.onDidChangeModel(function (_) { return _this.cancel(); }));\r\n            _this._listener.add(editor.onDidChangeModelContent(function (_) { return _this.cancel(); }));\r\n        }\r\n        return _this;\r\n    }\r\n    EditorStateCancellationTokenSource.prototype.dispose = function () {\r\n        this._listener.dispose();\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    return EditorStateCancellationTokenSource;\r\n}(EditorKeybindingCancellationTokenSource));\r\nexport { EditorStateCancellationTokenSource };\r\n/**\r\n * A cancellation token source that cancels when the provided model changes\r\n */\r\nvar TextModelCancellationTokenSource = /** @class */ (function (_super) {\r\n    __extends(TextModelCancellationTokenSource, _super);\r\n    function TextModelCancellationTokenSource(model, parent) {\r\n        var _this = _super.call(this, parent) || this;\r\n        _this._listener = model.onDidChangeContent(function () { return _this.cancel(); });\r\n        return _this;\r\n    }\r\n    TextModelCancellationTokenSource.prototype.dispose = function () {\r\n        this._listener.dispose();\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    return TextModelCancellationTokenSource;\r\n}(CancellationTokenSource));\r\nexport { TextModelCancellationTokenSource };\r\nvar StableEditorScrollState = /** @class */ (function () {\r\n    function StableEditorScrollState(_visiblePosition, _visiblePositionScrollDelta) {\r\n        this._visiblePosition = _visiblePosition;\r\n        this._visiblePositionScrollDelta = _visiblePositionScrollDelta;\r\n    }\r\n    StableEditorScrollState.capture = function (editor) {\r\n        var visiblePosition = null;\r\n        var visiblePositionScrollDelta = 0;\r\n        if (editor.getScrollTop() !== 0) {\r\n            var visibleRanges = editor.getVisibleRanges();\r\n            if (visibleRanges.length > 0) {\r\n                visiblePosition = visibleRanges[0].getStartPosition();\r\n                var visiblePositionScrollTop = editor.getTopForPosition(visiblePosition.lineNumber, visiblePosition.column);\r\n                visiblePositionScrollDelta = editor.getScrollTop() - visiblePositionScrollTop;\r\n            }\r\n        }\r\n        return new StableEditorScrollState(visiblePosition, visiblePositionScrollDelta);\r\n    };\r\n    StableEditorScrollState.prototype.restore = function (editor) {\r\n        if (this._visiblePosition) {\r\n            var visiblePositionScrollTop = editor.getTopForPosition(this._visiblePosition.lineNumber, this._visiblePosition.column);\r\n            editor.setScrollTop(visiblePositionScrollTop + this._visiblePositionScrollDelta);\r\n        }\r\n    };\r\n    return StableEditorScrollState;\r\n}());\r\nexport { StableEditorScrollState };\r\n"],"sourceRoot":""}